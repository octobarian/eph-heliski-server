{"version":3,"sources":["prime-es6-1.7.0.js","../src/main/js/Browser.js","../src/main/js/Document/PrimeElement.js","../src/main/js/Widgets/Overlay.js","../src/main/js/Document/PrimeElementList.js","../src/main/js/PrimeDocument.js","../src/main/js/Utils.js","../src/main/js/PrimeRequest.js","../src/main/js/Window.js","../src/main/js/Widgets/Draggable.js","../src/main/js/Widgets/AJAXDialog.js","../src/main/js/Events.js","../src/main/js/Date.js","../src/main/js/Widgets/DateTimePicker.js","../src/main/js/Widgets/Dismissable.js","../src/main/js/Widgets/HTMLDialog.js","../src/main/js/Widgets/InProgress.js","../src/main/js/Widgets/Searcher.js","../src/main/js/Widgets/MultipleSelect.js","../src/main/js/Widgets/Reorder.js","../src/main/js/Widgets/Touchable.js","../src/main/js/Widgets/SideMenu.js","../src/main/js/Storage.js","../src/main/js/Widgets/SplitButton.js","../src/main/js/Widgets/Table.js","../src/main/js/Widgets/Tabs.js","../src/main/js/Widgets/Tooltip.js","../src/main/js/Widgets/TreeView.js","../src/main/js/Effects.js","../src/main/js/DataQueue.js","../src/main/js/Template.js","../src/main/js/Prime.js"],"names":["Prime","exports","_stopPropagation","_stopImmediatePropagation","instance","Browser","detect","this","name","_searchString","dataBrowser","version","_searchVersion","navigator","userAgent","appVersion","os","dataOS","data","i","length","dataString","string","dataProp","prop","versionSearchString","versionSearch","identity","indexOf","subString","index","parseFloat","substring","vendor","window","opera","platform","blockElementRegexp","mouseEventsRegexp","htmlEventsRegexp","anonymousId","ieAlphaRegexp","PrimeElement","element","_classCallCheck","Utils","isDefined","nodeType","TypeError","bindAll","domElement","customEventListeners","eventListeners","_createClass","key","value","classNames","currentClassName","className","currentClassNameList","split","spaceRegex","newClassNameList","push","join","event","selector","listener","delegatedListeners","allDelegatedListeners","addEventListener","_handleDelegatedEvent","parentNode","removeChild","appendChild","html","insertAdjacentHTML","memo","target","bubbling","cancelable","evt","document","createEventObject","cancelBubble","fireEvent","createEvent","test","initMouseEvent","initEvent","dispatchEvent","hasOwnProperty","eventObj","focus","top","e","offsetTop","offsetParent","attr","attributes","getNamedItem","attrs","hasAttributes","offsetHeight","offsetWidth","getBoundingClientRect","bottom","PrimeElementList","children","matched","child","matches","currentStyle","defaultView","getComputedStyle","box","body","documentElement","scrollTop","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","left","Math","round","dataset","dataName","getAttributes","replace","g","toUpperCase","getDataSet","lastChild","getChildren","computedStyle","borderTop","borderBottom","parseCSSMeasure","innerHTML","id","elementList","sibling","nextSibling","offsetLeft","opacity","undefined","filter","match","getTagName","options","marginTop","marginBottom","outerHTML","marginLeft","marginRight","parentElement","previousSibling","getParent","parseInt","right","scrollHeight","scrollWidth","tagName","texts","selected","text","type","values","form","PrimeDocument","queryUp","query","each","isChecked","getValue","convertStyleName","style","innerText","textContent","borderLeft","borderRight","currentClassNames","findClassNameList","display","insertBefore","textNode","createTextNode","checked","parent","disabled","activeElement","firstChild","queryFirst","queryLast","_internalRemoveEventListener","removeAttribute","removeClassNameList","removeFromArray","listeners","pattern","range","selection","createTextRange","moveToElementText","select","getSelection","createRange","selectNodeContents","removeAllRanges","addRange","scrollIntoView","position","toString","setAttribute","attribute","createAttribute","nodeValue","setAttributeNode","toLowerCase","height","setStyle","newHTML","getHTML","leftString","arguments","isArray","Array","prototype","slice","call","setChecked","styles","newText","getTextContent","topString","width","displayValue","hasClass","removeClass","addClass","removeFromDOM","elementString","properties","newElement","setHTML","getOuterHTML","_callMatchedListeners","bubbles","isPropagationStopped","scopedListeners","isImmediatePropagationStopped","removeEventListener","detachEvent","customListeners","get","set","Element","querySelectorAll","Event","stopPropagation","apply","stopImmediatePropagation","elements","_proxyToElement","iterationFunction","predicate","args","readyFunctions","tagRegexp","bodyElement","addDelegatedEventListener","max","clientHeight","clientWidth","documentString","DOMParser","parseFromString","result","exec","createElement","setId","callback","readyState","_callReadyListeners","attachEvent","appendToElement","appendHTML","getLastChild","getElementById","querySelector","domElements","SyntaxError","readyFunction","shift","proto","nativeParse","ex","markup","doc","implementation","createHTMLDocument","typeRegex","object","getAllPropertyNames","forEach","property","startsWith","Object","defineProperty","bind","escapeHTML","div","unescapeHTML","txt","props","getOwnPropertyNames","getPrototypeOf","keys","bindSome","func","Function","bindSafe","context","Error","calculateTextLength","textCalculator","queryById","setStyles","fontSize","fontFamily","fontWeight","letterSpacing","whiteSpace","setTop","setLeft","appendTo","getWidth","callIteratively","totalDuration","timesToCall","stepFunction","endFunction","count","setInterval","last","clearInterval","capitalize","str","charAt","dash","start","piece","concat","dataSetToOptions","isNaN","o","leftPadNumber","number","sign","abs","measure","parseJSON","json","JSON","parse","removeAllFromArray","fromArray","toRemove","array","obj","splice","stopEvent","preventDefault","Overlay","overlay","hide","bodyOverflow","overflowStyle","zIndex","getStyle","show","PrimeRequest","onReady","url","method","xhr","XMLHttpRequest","async","queryParams","contentType","inProgress","errorHandler","onError","headers","loadingHandler","onLoading","openHandler","onOpen","password","sendHandler","onSend","successHandler","onSuccess","unsetHandler","onUnset","username","requestUrl","open","onreadystatechange","_handler","setRequestHeader","send","_addDataValue","primeElement","isDisabled","isInput","getAttribute","getSelectedValues","_typeof","String","stringify","responseType","encodeURIComponent","close","status","PrimeWindow","innerHeight","innerWidth","Draggable","gripSelector","wrap","offset","grip","originalStyle","_handleMouseDown","_handleMouseMove","_handleMouseUp","cursor","getOuterHeight","getOuterWidth","x","screenX","y","screenY","xDiff","yDiff","getLeft","getTop","AJAXDialog","draggable","initialized","_setInitialOptions","destroy","_handleKeyDown","_handleClick","setTimeout","highestZIndex","_determineZIndex","setZIndex","closeTimeout","uri","ajaxRequest","withSuccessHandler","_handleAJAXDialogResponse","withErrorHandler","go","extraData","withDataFromForm","withData","_initializeDialog","classes","additionalClasses","request","closeButtonElementSelector","timeout","dismissible","draggableElementSelector","formErrorCallback","enabled","formHandling","formPreSubmitCallback","formSuccessCallback","option","dialog","isVisible","class","responseText","_handleAJAXFormSubmit","initialize","successURI","location","reload","_handleAJAXFormSuccess","_handleAJAXFormError","_isTopDialog","windowHeight","dialogHeight","_handleCloseClickEvent","zIndexOffset","getInnerHeight","getHeight","Events","Keys","BACKSPACE","ENTER","ESCAPE","SPACE","TAB","LEFT_ARROW","UP_ARROW","RIGHT_ARROW","DOWN_ARROW","DELETE","PrimeDate","DAYS_IN_MONTH","getHourOfDay","date","getHours","isLeapYear","year","numberOfDaysInMonth","month","plusDays","newDate","getDate","getFullYear","getMonth","plusMonths","setDate","plusHours","deltaHours","deltaDays","newHour","setHours","plusMinutes","deltaMinutes","newMinute","getMinutes","setMinutes","deltaYears","currentMonth","adjustedMonth","deltaMonths","newMonth","setYear","setMonth","plusSeconds","deltaSeconds","newSecond","getSeconds","setSeconds","plusYears","setFullYear","toDateOnlyISOString","Date","SHORT_DAY_NAMES","MONTHS","AM_PM","DateTimePicker","is","customFormatHandler","datepicker","months","years","_handleInputClick","_handleInputKey","_handleGlobalClick","_handleGlobalKey","firstDayOfMonth","getDay","daysInMonth","weeksInMonth","ceil","rows","startDay","startDayOfWeek","_buildCalendarWeek","calendarBody","monthDisplay","setDataAttribute","yearDisplay","setTextContent","timeSeparator","getUTCFullYear","TIME_SEPARATOR","dateSeparator","DATE_SEPARATOR","_handleDayClick","_handleMonthExpand","_handleYearExpand","time","inputs","hourInput","_handleDateTimeChange","_handleHourKey","minuteInput","_handleMinuteKey","secondInput","_handleSecondKey","ampmInput","_handleAmPmKey","monthInput","setValue","_handleMonthKey","dayInput","_handleDayKey","yearInput","_handleYearKey","_handleNextMonth","_handlePreviousMonth","getDataAttribute","closeMonthsSelect","startYear","endYear","closeYearsSelect","_rebuild","getTime","drawCalendar","getAbsoluteTop","getRelativeZIndex","getOffsetLeft","getOffsetTop","currentYear","dateOnly","toISOString","formatHandler","startDayOfMonth","startDayOfPreviousMonth","startDayOfNextMonth","row","emptyColumns","dayOfWeek","day","min","keyCode","shiftKey","setSelectionRange","current","hours","_clamp","seconds","minutes","dayElement","getBottom","getRight","openMonthSelect","nextMonth","previousMonth","openYearSelect","_refreshInputs","userOptions","Dismissable","dismissButton","HTMLDialog","_setupButtons","InProgress","duration","startInstant","minimumTime","iconName","coords","getCoordinates","bodyCoords","setWidth","getBorderedWidth","setHeight","getBorderedHeight","startFunction","f","Searcher","inputElement","searchResultsContainer","callbackObject","searchResults","_removeAllSearchResults","resizeInput","_handleBlurEvent","_handleClickEvent","_handleKeyUpEvent","_handleKeyDownEvent","_handleFocusEvent","searchResult","getHighlightedSearchResult","getNextSibling","highlightSearchResult","getPreviousSibling","getScrollTop","searchResultOffset","scrollTo","_handleInputEvent","closeSearchResults","newLength","searchText","search","matchingSearchResultElement","results","_handleMouseOverEvent","trim","trimmedLength","customAddEnabled","doesNotContainValue","customAddLabel","noSearchResultsLabel","tooManyResults","tooManySearchResultsLabel","custom","customAddCallback","selectSearchResult","currentTarget","selectHighlightedSearchResult","console","log","previousSearchString","highlightPreviousSearchResult","isSearchResultsVisible","highlightNextSearchResult","deletedBeyondSearchInput","removeAllFromDOM","unwrap","selectableOptions","isSelected","sort","AddOptionEvent","DeselectOptionEvent","SelectOptionEvent","MultipleSelect","findOptionWithValue","containsOptionWithValue","deselectOption","setSelected","_makeOptionID","displayOption","optionList","input","placeholder","searcher","displayContainer","getOptions","findOptionWithId","cur","getId","insertAfter","removeAllEventListeners","_handleGlobalClickEvent","_redraw","initialSelectedOrder","actual","selectOption","removeOption","allowDuplicates","deselectOptionWithId","deselectOptionWithValue","li","moveDuringInitialization","preserveDisplayedSelectionOrder","lastOption","addOption","inputOption","removeIcon","scrollToBottom","setSelectedValues","errorClass","searchFunction","selections","isLastOptionHighlightedForUnselect","removeHighlightedOption","highlightOptionForUnselect","unhighlightOptionForUnselect","findOptionWithText","removeOptionWithValue","selectElementContents","isChildOf","d","c","r","random","floor","withOptions","hasSelectedOptions","selectSearchFunction","Reorder","_handleMoveDownClick","_handleMoveUpClick","moveDownSelector","moveUpSelector","_refreshButtonStates","item","reorderCallback","itemSelector","moveDown","moveUp","items","Touchable","eventPropagationHandler","_handleTouchStart","_handleTouchMove","_handleTouchCancel","_handleTouchEnd","removeEventListenersByPattern","handler","changedTouches","touch","elapsedTime","touchStarted","touchEndX","pageX","touchEndY","pageY","touchX","touchStartX","touchY","touchStartY","swipe","swipeX","swipeY","longPress","fireCustomEvent","_collectTouchData","_finished","SideMenu","button","sideMenuElement","sideMenu","closedClass","openClass","touchable","withSwipeLeftHandler","_handleSwipeLeft","isOpen","PrimeStorage","supported","Storage","setSessionObject","_setObject","sessionStorage","getSessionObject","_getObject","setLocalObject","localStorage","getLocalObject","storage","getItem","setItem","SplitButton","currentAction","loading","menu","actionIndex","_handleButtonClick","_this","_handleItemClick","redraw","actionId","localStorageKey","selectAction","selectDefaultAction","prependTo","_saveLastAction","Table","column","columnIndex","sortAscending","thead","tbody","_initializeSort","selectAll","_handleSelectAllChange","_handleCheckboxEvent","checkedCount","numberofCheckboxes","_clearSortIndicators","_comparator","appendElement","checkEventCallback","a","b","sortType","cell1","cell2","sortValue1","sortValue2","value1","value2","localeCompare","_toNumber","previous","currentCheckedCount","_getColumnIndex","_handleSortableColumnClick","state","_initializeColumn","Number","error","Tabs","tabsContainer","tabContents","tabs","tabArray","selectedTab","tabContentClass","tabId","tab","dataSet","href","isAnchor","content","tabUrl","deepLinkingEnabled","hash","selectTab","firstVisible","lastVisible","selectNew","noneActive","selectCallback","ajaxURL","_handleAJAXResponse","ajaxCallback","container","Tooltip","t","_handleMouseEnter","_handleMouseLeave","toLocaleLowerCase","tooltip","tooltipWidth","tooltipHeight","TreeView","folderToggleClassName","Widgets","freeze","__proto__","BaseTransition","endValue","iterations","getFunction","setFunction","currentValue","step","self","_internalEndFunction","_subclassEndFunction","Fade","_inherits","_super","_createSuper","_changeNumberStyleIteratively","getOpacity","setOpacity","Appear","_super2","ScrollTo","_super3","_this2","axis","getScrollLeft","scrollLeftTo","SlideOpen","primeVisibleHeight","isTransitioning","closeCallback","openCallback","Effects","DataQueue","_elements","_head","_tail","isEmpty","_cursor","Template","template","init","parameters","templateCopy","expressedValue","lastIndexOf","RegExp","expressedKey","generate","holder","Ajax","Request","Data","Queue","Document","Window"],"mappings":"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","file":"prime-min-1.7.0.js","sourcesContent":["var Prime = (function (exports) {\n\t'use strict';\n\n\t/*\n\t * Copyright (c) 2012-2017, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\t/**\n\t * The Browser namespace. This namespace does not contain any classes, just functions.\n\t *\n\t * @namespace Browser\n\t */\n\tconst Browser = {\n\t  /**\n\t   * Detects the browser name and version.\n\t   */\n\t  detect: function() {\n\t    this.name = this._searchString(this.dataBrowser) || \"An unknown browser\";\n\t    this.version = this._searchVersion(navigator.userAgent) || this._searchVersion(navigator.appVersion) || \"an unknown version\";\n\t    this.os = this._searchString(this.dataOS) || \"an unknown OS\";\n\t  },\n\n\n\t  /* ===================================================================================================================\n\t   * Private Methods\n\t   * ===================================================================================================================*/\n\n\t  /**\n\t   *\n\t   * @param {Object} data The data array.\n\t   * @returns {?string} The browser identity String.\n\t   * @private\n\t   */\n\t  _searchString: function(data) {\n\t    for (let i = 0; i < data.length; i++) {\n\t      const dataString = data[i].string;\n\t      const dataProp = data[i].prop;\n\t      this.versionSearchString = data[i].versionSearch || data[i].identity;\n\t      if (dataString && dataString.indexOf(data[i].subString) !== -1) {\n\t        return data[i].identity;\n\t      } else if (dataProp) {\n\t        return data[i].identity;\n\t      }\n\t    }\n\n\t    return null;\n\t  },\n\n\t  /**\n\t   *\n\t   * @param {string} dataString The browser data string.\n\t   * @returns {?number} The version or null.\n\t   * @private\n\t   */\n\t  _searchVersion: function(dataString) {\n\t    const index = dataString.indexOf(this.versionSearchString);\n\t    if (index === -1) {\n\t      return null;\n\t    }\n\n\t    return parseFloat(dataString.substring(index + this.versionSearchString.length + 1));\n\t  },\n\n\t  dataBrowser: [\n\t    {\n\t      string: navigator.userAgent,\n\t      subString: \"Chrome\",\n\t      identity: \"Chrome\"\n\t    },\n\t    {\n\t      string: navigator.userAgent,\n\t      subString: \"OmniWeb\",\n\t      versionSearch: \"OmniWeb/\",\n\t      identity: \"OmniWeb\"\n\t    },\n\t    {\n\t      string: navigator.vendor,\n\t      subString: \"Apple\",\n\t      identity: \"Safari\",\n\t      versionSearch: \"Version\"\n\t    },\n\t    {\n\t      prop: window.opera,\n\t      identity: \"Opera\",\n\t      versionSearch: \"Version\"\n\t    },\n\t    {\n\t      string: navigator.vendor,\n\t      subString: \"iCab\",\n\t      identity: \"iCab\"\n\t    },\n\t    {\n\t      string: navigator.vendor,\n\t      subString: \"KDE\",\n\t      identity: \"Konqueror\"\n\t    },\n\t    {\n\t      string: navigator.userAgent,\n\t      subString: \"Firefox\",\n\t      identity: \"Firefox\"\n\t    },\n\t    {\n\t      string: navigator.vendor,\n\t      subString: \"Camino\",\n\t      identity: \"Camino\"\n\t    },\n\t    {    // for newer Netscapes (6+)\n\t      string: navigator.userAgent,\n\t      subString: \"Netscape\",\n\t      identity: \"Netscape\"\n\t    },\n\t    {\n\t      string: navigator.userAgent,\n\t      subString: \"MSIE\",\n\t      identity: \"Explorer\",\n\t      versionSearch: \"MSIE\"\n\t    },\n\t    {\n\t      string: navigator.userAgent,\n\t      subString: \"Gecko\",\n\t      identity: \"Mozilla\",\n\t      versionSearch: \"rv\"\n\t    },\n\t    {     // for older Netscapes (4-)\n\t      string: navigator.userAgent,\n\t      subString: \"Mozilla\",\n\t      identity: \"Netscape\",\n\t      versionSearch: \"Mozilla\"\n\t    }\n\t  ],\n\t  dataOS: [\n\t    {\n\t      string: navigator.platform,\n\t      subString: \"Win\",\n\t      identity: \"Windows\"\n\t    },\n\t    {\n\t      string: navigator.platform,\n\t      subString: \"Mac\",\n\t      identity: \"macOS\"\n\t    },\n\t    {\n\t      string: navigator.userAgent,\n\t      subString: \"iPhone\",\n\t      identity: \"iPhone/iPod\"\n\t    },\n\t    {\n\t      string: navigator.userAgent,\n\t      subString: \"iPad\",\n\t      identity: \"iPad\"\n\t    },\n\t    {\n\t      string: navigator.platform,\n\t      subString: \"Linux\",\n\t      identity: \"Linux\"\n\t    }\n\t  ]\n\t};\n\tBrowser.detect();\n\n\t/*\n\t * Copyright (c) 2017-2018, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\tconst blockElementRegexp = /^(?:ARTICLE|ASIDE|BLOCKQUOTE|BODY|BR|BUTTON|CANVAS|CAPTION|COL|COLGROUP|DD|DIV|DL|DT|EMBED|FIELDSET|FIGCAPTION|FIGURE|FOOTER|FORM|H1|H2|H3|H4|H5|H6|HEADER|HGROUP|HR|LI|MAP|OBJECT|OL|OUTPUT|P|PRE|PROGRESS|SECTION|TABLE|TBODY|TEXTAREA|TFOOT|TH|THEAD|TR|UL|VIDEO)$/;\n\tconst mouseEventsRegexp = /^(?:click|dblclick|mousedown|mouseup|mouseover|mousemove|mouseout|mouseenter|mouseleave)$/;\n\tconst htmlEventsRegexp = /^(?:abort|blur|change|error|focus|load|reset|resize|scroll|select|submit|unload)$/;\n\tlet anonymousId = 1;\n\tconst ieAlphaRegexp = /alpha\\(opacity=(.+)\\)/;\n\n\tclass PrimeElement {\n\t  /**\n\t   * Creates an Element class for the given DOM element.\n\t   *\n\t   * @constructor\n\t   * @param {Element|EventTarget} element The element\n\t   */\n\t  constructor(element) {\n\t    if (!Utils.isDefined(element.nodeType) || element.nodeType !== 1) {\n\t      throw new TypeError('You can only pass in DOM element Node objects to the PrimeDocument.Element constructor');\n\t    }\n\n\t    Utils.bindAll(this);\n\t    this.domElement = element;\n\t    this.domElement.customEventListeners = [];\n\t    this.domElement.eventListeners = {};\n\t  }\n\n\t  /**\n\t   * Regular expression that captures the tagnames of all the block elements in HTML5.\n\t   *\n\t   * @type {RegExp}\n\t   */\n\t  static get blockElementRegexp() {\n\t    return blockElementRegexp;\n\t  }\n\n\t  static get mouseEventsRegexp() {\n\t    return mouseEventsRegexp;\n\t  }\n\n\t  static get htmlEventsRegexp() {\n\t    return htmlEventsRegexp;\n\t  }\n\n\t  static get anonymousId() {\n\t    return anonymousId;\n\t  }\n\n\t  static set anonymousId(value) {\n\t    anonymousId = value;\n\t  }\n\n\t  static get ieAlphaRegexp() {\n\t    return ieAlphaRegexp;\n\t  }\n\n\t  /**\n\t   * Static method that wraps an element in a PrimeElement unless it is already wrapped. In that case, it simply\n\t   * returns the element.\n\t   *\n\t   * @param {PrimeElement|Element|EventTarget} element The element to wrap.\n\t   * @static\n\t   */\n\t  static wrap(element) {\n\t    return (element instanceof PrimeElement) ? element : new PrimeElement(element);\n\t  }\n\n\t  /**\n\t   * Static method that unwraps an element to a DOM element. This is the inverse of Element.wrap. If this is passed an\n\t   * Element, it returns domElement. Otherwise, this just returns the element.\n\t   *\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  static unwrap(element) {\n\t    return (element instanceof PrimeElement) ? element.domElement : element;\n\t  }\n\n\t  /**\n\t   * Adds the given class (or list of space separated classes) to this Element.\n\t   *\n\t   * @param {string} classNames The class name(s) separated by a space.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  addClass(classNames) {\n\t    let currentClassName = this.domElement.className;\n\t    if (currentClassName === '') {\n\t      currentClassName = classNames;\n\t    } else {\n\t      const currentClassNameList = this.domElement.className.split(Utils.spaceRegex);\n\t      const newClassNameList = classNames.split(Utils.spaceRegex);\n\t      for (let i = 0; i < newClassNameList.length; i++) {\n\t        if (currentClassNameList.indexOf(newClassNameList[i]) === -1) {\n\t          currentClassNameList.push(newClassNameList[i]);\n\t        }\n\t      }\n\n\t      currentClassName = currentClassNameList.join(' ');\n\t    }\n\n\t    this.domElement.className = currentClassName;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * @callback PrimeDelegationEventListener\n\t   *\n\t   * @param {Event} event the original event\n\t   * @param {PrimeElement} target the target domElement that matched the registered selector\n\t   */\n\n\t  /**\n\t   * Attaches an event listener to the element and will only invoke the listener when the event target matches\n\t   * the provided selector.\n\t   *\n\t   * The intent of this function is to provide a delegated listener and handle events from nested elements.\n\t   *\n\t   * @param {string} event The name of the event\n\t   * @param  {string} selector The selector to match against the Element\n\t   * @param {PrimeDelegationEventListener} listener The event listener function\n\t   */\n\t  addDelegatedEventListener(event, selector, listener) {\n\t    this.domElement.delegatedListeners =  this.domElement.delegatedListeners || [];\n\t    let allDelegatedListeners = this.domElement.delegatedListeners;\n\n\t    // Store the event listeners in the following format:\n\t    //   [ event_type -> [ selector -> [ listeners ] ] ]\n\t    //\n\t    // Example:\n\t    //   [ 'click' -> [ 'a.foo' -> [ funcA, funcB ] ] ]\n\n\t    if (!(event in allDelegatedListeners)) {\n\t      allDelegatedListeners[event] = [];\n\t    }\n\n\t    if (!(selector in allDelegatedListeners[event])) {\n\t      allDelegatedListeners[event][selector] = [];\n\t    }\n\n\t    let delegatedListeners = allDelegatedListeners[event][selector] || [];\n\t    if (!(listener in delegatedListeners)) {\n\t      delegatedListeners.push(listener);\n\t    }\n\n\t    this.addEventListener(event, this._handleDelegatedEvent);\n\t  }\n\n\t  /**\n\t   * Attaches an event listener to this Element.\n\t   *\n\t   * @param {string} event The name of the event.\n\t   * @param {Function} listener The event listener function.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  addEventListener(event, listener) {\n\t    if (event.indexOf(':') === -1) {\n\t      // Traditional event\n\t      this.domElement.eventListeners = this.domElement.eventListeners || {};\n\t      this.domElement.eventListeners[event] = this.domElement.eventListeners[event] || [];\n\t      if (this.domElement.eventListeners[event].indexOf(listener) === -1) {\n\t        this.domElement.eventListeners[event].push(listener);\n\t      }\n\t      this.domElement.addEventListener(event, listener, false);\n\t    } else {\n\t      // Custom event\n\t      this.domElement.customEventListeners = this.domElement.customEventListeners || {};\n\t      this.domElement.customEventListeners[event] = this.domElement.customEventListeners[event] || [];\n\t      if (this.domElement.customEventListeners[event].indexOf(listener) === -1) {\n\t        this.domElement.customEventListeners[event].push(listener);\n\t      }\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Appends the given element to this element. If the given element already exists in the DOM, it is removed from its\n\t   * current location and placed at the end of this element.\n\t   *\n\t   * @param {PrimeElement|Node} element The element to append.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  appendElement(element) {\n\t    const domElement = (element instanceof PrimeElement) ? element.domElement : element;\n\t    if (domElement.parentNode) {\n\t      domElement.parentNode.removeChild(domElement);\n\t    }\n\n\t    this.domElement.appendChild(domElement);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Appends the given HTML string to this element.\n\t   *\n\t   * @param {string} html The HTML to append.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  appendHTML(html) {\n\t    this.domElement.insertAdjacentHTML('beforeend', html);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Inserts this Element (which must be a newly created Element) into the DOM inside at the very end of the given\n\t   * element.\n\t   *\n\t   * @param {PrimeElement|Node} element The element to insert this Element into.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  appendTo(element) {\n\t    // Error out for now if this element is in the document so we can punt on cloning for now\n\t    if (this.domElement.parentNode) {\n\t      throw new TypeError('You can only insert new PrimeElements for now');\n\t    }\n\n\t    const domElement = (element instanceof PrimeElement) ? element.domElement : element;\n\t    if (domElement.parentNode) {\n\t      domElement.appendChild(this.domElement);\n\t    } else {\n\t      throw new TypeError('The element you passed into appendTo is not in the DOM. You can\\'t insert a PrimeElement inside an element that isn\\'t in the DOM yet.');\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Fires an event on the Element.\n\t   *\n\t   * @param {string} event The name of the event.\n\t   * @param {Object} [memo] Assigned to the memo field of the event.\n\t   * @param {Object} [target] The target.\n\t   * @param {boolean} [bubbling] If the event is bubbling, defaults to true.\n\t   * @param {boolean} [cancelable] If the event is cancellable, defaults to true.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  fireEvent(event, memo, target, bubbling, cancelable) {\n\t    memo = Utils.isDefined(memo) ? memo : {};\n\t    target = Utils.isDefined(target) ? target : this;\n\t    bubbling = Utils.isDefined(bubbling) ? bubbling : true;\n\t    cancelable = Utils.isDefined(cancelable) ? cancelable : true;\n\n\t    let evt;\n\t    if (event.indexOf(':') === -1) {\n\t      // Traditional event\n\t      if (document.createEventObject) {\n\t        // Dispatch for IE\n\t        evt = document.createEventObject();\n\t        evt.memo = memo || {};\n\t        evt.cancelBubble = !bubbling;\n\t        this.domElement.fireEvent('on' + event, evt);\n\t      } else if (document.createEvent) {\n\t        // Dispatch for others\n\t        if (PrimeElement.mouseEventsRegexp.test(event)) {\n\t          evt = document.createEvent(\"MouseEvents\");\n\t          evt.initMouseEvent(event, bubbling, cancelable, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n\t        } else if (PrimeElement.htmlEventsRegexp.test(event)) {\n\t          evt = document.createEvent(\"HTMLEvents\");\n\t          evt.initEvent(event, bubbling, cancelable);\n\t        } else {\n\t          throw new TypeError('Invalid event [' + event + ']');\n\t        }\n\n\t        evt.memo = memo || {};\n\t        this.domElement.dispatchEvent(evt);\n\t      } else {\n\t        throw new TypeError('Unable to fire event. Neither createEventObject nor createEvent methods are available');\n\t      }\n\t    } else {\n\t      // Custom event\n\t      this.domElement.customEventListeners[event] = this.domElement.customEventListeners[event] || [];\n\t      evt = {event: event, memo: memo, target: target};\n\t      for (let index in this.domElement.customEventListeners[event]) {\n\t        if (this.domElement.customEventListeners[event].hasOwnProperty(index)) {\n\t          this.domElement.customEventListeners[event][index](evt);\n\t        }\n\t      }\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Fires a custom event on the Element using the given event object rather than creating a new event object. This is\n\t   * useful for pass-through event handling.\n\t   *\n\t   * @param {string} event The name of the event.\n\t   * @param {Object} eventObj The event object to pass to the handlers.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  fireCustomEvent(event, eventObj) {\n\t    eventObj = Utils.isDefined(eventObj) ? eventObj : {};\n\t    if (event.indexOf(':') === -1) {\n\t      throw new TypeError('This method can only be used for custom events');\n\t    }\n\n\t    // Custom event\n\t    this.domElement.customEventListeners[event] = this.domElement.customEventListeners[event] || [];\n\t    for (let index in this.domElement.customEventListeners[event]) {\n\t      if (this.domElement.customEventListeners[event].hasOwnProperty(index)) {\n\t        this.domElement.customEventListeners[event][index](eventObj);\n\t      }\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Puts the focus on this element.\n\t   *\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  focus() {\n\t    this.domElement.focus();\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Returns the absolute top of this element relative to the document.\n\t   *\n\t   * @returns {number} The number of pixels that this element is from the top of the document.\n\t   */\n\t  getAbsoluteTop() {\n\t    let top = 0;\n\t    let e = this.domElement;\n\t    while (e) {\n\t      top += e.offsetTop;\n\t      e = e.offsetParent;\n\t    }\n\n\t    return top;\n\t  }\n\n\t  /**\n\t   * Returns the value of the given attribute.\n\t   *\n\t   * @param {string} name The attribute name.\n\t   * @returns {?string} This attribute value or null.\n\t   */\n\t  getAttribute(name) {\n\t    const attr = this.domElement.attributes.getNamedItem(name);\n\t    if (attr) {\n\t      return attr.value;\n\t    }\n\n\t    return null;\n\t  }\n\n\t  /**\n\t   * Returns all of the attributes on the element as an object.\n\t   *\n\t   * @returns {object} This attributes or an empty object if there are no attributes on this element.\n\t   */\n\t  getAttributes() {\n\t    const attrs = {};\n\t    if (this.domElement.hasAttributes()) {\n\t      for (let i = 0; i < this.domElement.attributes.length; i++) {\n\t        attrs[this.domElement.attributes[i].name] = this.domElement.attributes[i].value;\n\t      }\n\t    }\n\n\t    return attrs;\n\t  }\n\n\t  /**\n\t   * Gets the viewable height of the Element as an integer value in pixels. This height includes border, padding and scroll bar but excludes the margins.\n\t   *\n\t   * @returns {number} The height as pixels (number) or a string.\n\t   */\n\t  getBorderedHeight() {\n\t    return this.domElement.offsetHeight;\n\t  }\n\n\t  /**\n\t   * Gets the width of the Element as an integer value. This width includes border, padding and scroll bar but excludes the margins.\n\t   *\n\t   * @returns {number} The height in pixels.\n\t   */\n\t  getBorderedWidth() {\n\t    return this.domElement.offsetWidth;\n\t  }\n\n\t  /**\n\t   * @returns {number} The bottom position (in pixels) of the current element.\n\t   */\n\t  getBottom() {\n\t    return this.domElement.getBoundingClientRect().bottom;\n\t  }\n\n\t  /**\n\t   * Gets the children elements of this Element, optionally reduced to those matching the optional selector.\n\t   *\n\t   * @param {string} [selector] The selector. Optional, if not provided all children will be returned.\n\t   * @returns {PrimeElementList} The children.\n\t   */\n\t  getChildren(selector) {\n\t    if (!Utils.isDefined(selector)) {\n\t      return new PrimeElementList(this.domElement.children);\n\t    }\n\n\t    const matched = [];\n\t    for (let i = 0; i < this.domElement.children.length; i++) {\n\t      const child = this.domElement.children[i];\n\t      if (child.matches(selector)) {\n\t        matched.push(child);\n\t      }\n\t    }\n\n\t    return new PrimeElementList(matched);\n\t  }\n\n\t  /**\n\t   * Gets the class value of the current element. This might be a single class or multiple class names.\n\t   *\n\t   * @returns {string} The class.\n\t   */\n\t  getClass() {\n\t    return this.domElement.className;\n\t  }\n\n\t  /**\n\t   * Gets the computed style information for this Element.\n\t   *\n\t   * @returns {IEElementStyle|CSSStyleDeclaration} The style information.\n\t   */\n\t  getComputedStyle() {\n\t    return (this.domElement.currentStyle) ? this.domElement.currentStyle : document.defaultView.getComputedStyle(this.domElement, null);\n\t  }\n\n\t  /**\n\t   * Calculates the location of this element with respect to the document rather than the elements parent, offset parent\n\t   * or scroll position.\n\t   *\n\t   * @returns {{top: number, left: number}}\n\t   */\n\t  getCoordinates() {\n\t    const box = this.domElement.getBoundingClientRect();\n\n\t    const body = document.body;\n\t    const documentElement = document.documentElement;\n\n\t    const scrollTop = window.pageYOffset || documentElement.scrollTop || body.scrollTop;\n\t    const scrollLeft = window.pageXOffset || documentElement.scrollLeft || body.scrollLeft;\n\n\t    const clientTop = documentElement.clientTop || body.clientTop || 0;\n\t    const clientLeft = documentElement.clientLeft || body.clientLeft || 0;\n\n\t    const top = box.top + scrollTop - clientTop;\n\t    const left = box.left + scrollLeft - clientLeft;\n\n\t    return {top: Math.round(top), left: Math.round(left)};\n\t  }\n\n\t  /**\n\t   * Returns the dataset if it exists, otherwise, this creates a new dataset object and returns it.\n\t   *\n\t   * @returns {object} This dataset object.\n\t   */\n\t  getDataSet() {\n\t    if (this.domElement.dataset) {\n\t      return this.domElement.dataset;\n\t    }\n\n\t    this.domElement.dataset = {};\n\t    const attrs = this.getAttributes();\n\t    for (let prop in attrs) {\n\t      if (attrs.hasOwnProperty(prop) && prop.indexOf('data-') === 0) {\n\t        const dataName = prop.substring(5).replace(/-([a-z])/g, function(g) {\n\t          return g[1].toUpperCase();\n\t        });\n\t        this.domElement.dataset[dataName] = attrs[prop];\n\t      }\n\t    }\n\t    return this.domElement.dataset;\n\t  }\n\n\t  /**\n\t   * Returns the data value if it exists, otherwise returns null.\n\t   *\n\t   * @param {string} name The attribute name.\n\t   * @returns {?string} This attribute value or null.\n\t   */\n\t  getDataAttribute(name) {\n\t    return this.getDataSet()[name] || null;\n\t  }\n\n\t  /**\n\t   * Get the first child element of this Element, optionally filtered using the optional selector.\n\t   *\n\t   * @param {string} [selector] The selector. Optional.\n\t   * @returns {?PrimeElement} The first child element or null if the element has no children or a selector was provided and nothing matched the selector..\n\t   */\n\t  getFirstChild(selector) {\n\t    const lastChild = this.getChildren(selector)[0];\n\t    if (!Utils.isDefined(lastChild)) {\n\t      return null;\n\t    }\n\n\t    return lastChild;\n\t  }\n\n\t  /**\n\t   * Gets the viewable height of the Element as an integer value in pixels. This height includes padding and scroll bar\n\t   * but excludes the margin and borders. This is often called the innerHeight of the element.\n\t   *\n\t   * @returns {number} The height as pixels (number) or a string.\n\t   */\n\t  getHeight() {\n\t    const computedStyle = this.getComputedStyle();\n\t    const offsetHeight = this.domElement.offsetHeight;\n\t    const borderTop = computedStyle['borderTopWidth'];\n\t    const borderBottom = computedStyle['borderBottomWidth'];\n\t    return offsetHeight - Utils.parseCSSMeasure(borderTop) - Utils.parseCSSMeasure(borderBottom);\n\t  }\n\n\t  /**\n\t   * Gets the inner HTML content of the Element.\n\t   *\n\t   * @returns {string} The HTML content.\n\t   */\n\t  getHTML() {\n\t    return this.domElement.innerHTML;\n\t  }\n\n\t  /**\n\t   * Gets the ID of this element from the domElement.\n\t   *\n\t   * @returns {string} ID The id of the domElement if it exists.\n\t   */\n\t  getId() {\n\t    return this.domElement.id;\n\t  }\n\n\t  /**\n\t   * Get the last child element of this Element, optionally filtered using the optional selector.\n\t   *\n\t   * @param {string} [selector] The selector. Optional.\n\t   * @returns {?PrimeElement} The last child element or null if the element has no children or a selector was provided and nothing matched the selector..\n\t   */\n\t  getLastChild(selector) {\n\t    const elementList = this.getChildren(selector);\n\t    if (elementList.length > 0) {\n\t      return elementList[elementList.length - 1];\n\t    }\n\n\t    return null;\n\t  }\n\n\t  /**\n\t   * @returns {number} The left position (in pixels) of the current element.\n\t   */\n\t  getLeft() {\n\t    return this.domElement.getBoundingClientRect().left;\n\t  }\n\n\t  /**\n\t   * @returns {?PrimeElement} This elements next sibling or null.\n\t   */\n\t  getNextSibling() {\n\t    let sibling = this.domElement.nextSibling;\n\t    while (sibling !== null && sibling.nodeType !== 1) {\n\t      sibling = sibling.nextSibling;\n\t    }\n\n\t    if (sibling === null) {\n\t      return null;\n\t    }\n\n\t    return new PrimeElement(sibling);\n\t  }\n\n\t  /**\n\t   * The elements offset left in pixels.\n\t   *\n\t   * @returns {number} The offset left.\n\t   */\n\t  getOffsetLeft() {\n\t    return this.domElement.offsetLeft;\n\t  }\n\n\t  /**\n\t   * The elements offset top in pixels.\n\t   *\n\t   * @returns {number} The offset top.\n\t   */\n\t  getOffsetTop() {\n\t    return this.domElement.offsetTop;\n\t  }\n\n\t  /**\n\t   * Retrieves the opacity value for the Element. This handles the IE alpha filter.\n\t   *\n\t   * @returns {number} The opacity value.\n\t   */\n\t  getOpacity() {\n\t    const computedStyle = this.getComputedStyle();\n\t    let opacity = 1.0;\n\t    if (Browser.name === 'Explorer' && Browser.version < 9) {\n\t      const filter = computedStyle['filter'];\n\t      if (filter !== undefined && filter !== '') {\n\t        const matches = PrimeElement.ieAlphaRegexp.match(filter);\n\t        if (matches.length > 0) {\n\t          opacity = parseFloat(matches[0]);\n\t        }\n\t      }\n\t    } else {\n\t      opacity = parseFloat(computedStyle['opacity']);\n\t    }\n\n\t    return opacity;\n\t  }\n\n\t  /**\n\t   * @returns {PrimeElementList} If this element is a select box, this returns the options of the select box in\n\t   *          an ElementList.\n\t   */\n\t  getOptions() {\n\t    if (this.getTagName() !== 'SELECT') {\n\t      throw new TypeError('You can only get the options for select elements');\n\t    }\n\n\t    return new PrimeElementList(this.domElement.options);\n\t  }\n\n\t  /**\n\t   * Gets the outer height of the element, including the margins. This does not include the padding or borders.\n\t   *\n\t   * @returns {number} The outer height of the element.\n\t   */\n\t  getOuterHeight() {\n\t    const computedStyle = this.getComputedStyle();\n\t    const offsetHeight = this.domElement.offsetHeight;\n\t    const marginTop = computedStyle['marginTop'];\n\t    const marginBottom = computedStyle['marginBottom'];\n\t    return offsetHeight + Utils.parseCSSMeasure(marginTop) + Utils.parseCSSMeasure(marginBottom);\n\t  }\n\n\t  /**\n\t   * Gets the outer HTML content of the Element.\n\t   *\n\t   * @returns {string} The outer HTML content.\n\t   */\n\t  getOuterHTML() {\n\t    return this.domElement.outerHTML;\n\t  }\n\n\t  /**\n\t   * Gets the outer width of the element, including the margins. This does not include the padding or borders.\n\t   *\n\t   * @returns {number} The outer width of the element.\n\t   */\n\t  getOuterWidth() {\n\t    const computedStyle = this.getComputedStyle();\n\t    const offsetWidth = this.domElement.offsetWidth;\n\t    const marginLeft = computedStyle['marginLeft'];\n\t    const marginRight = computedStyle['marginRight'];\n\t    return offsetWidth + Utils.parseCSSMeasure(marginLeft) + Utils.parseCSSMeasure(marginRight);\n\t  }\n\n\t  /**\n\t   * Returns this element's parent as a PrimeElement.\n\t   *\n\t   * @returns {?PrimeElement} This element's parent or null if there is no parent\n\t   */\n\t  getParent() {\n\t    if (Utils.isDefined(this.domElement.parentElement)) {\n\t      return new PrimeElement(this.domElement.parentElement);\n\t    } else {\n\t      return null;\n\t    }\n\t  }\n\n\t  /**\n\t   * @returns {?PrimeElement} This elements previous sibling or null.\n\t   */\n\t  getPreviousSibling() {\n\t    let sibling = this.domElement.previousSibling;\n\t    while (sibling !== null && sibling.nodeType !== 1) {\n\t      sibling = sibling.previousSibling;\n\t    }\n\n\t    if (sibling === null) {\n\t      return null;\n\t    }\n\n\t    return new PrimeElement(sibling);\n\t  }\n\n\t  /**\n\t   * @returns {number} The zIndex style of this element based on the element or the first positioned parent.\n\t   */\n\t  getRelativeZIndex() {\n\t    let e = this;\n\t    while (e !== null && e.getComputedStyle()['zIndex'] === 'auto') {\n\t      e = e.getParent();\n\t    }\n\t    return e === null ? 0 : parseInt(e.getComputedStyle()['zIndex']);\n\t  }\n\n\t  /**\n\t   * @returns {number} The right position (in pixels) of the current element.\n\t   */\n\t  getRight() {\n\t    return this.domElement.getBoundingClientRect().right;\n\t  }\n\n\t  /**\n\t   * @returns {number} The scroll height of this element.\n\t   */\n\t  getScrollHeight() {\n\t    return this.domElement.scrollHeight;\n\t  }\n\n\t  /**\n\t   * @returns {number} The scroll left position of this element.\n\t   */\n\t  getScrollLeft() {\n\t    return this.domElement.scrollLeft;\n\t  }\n\n\t  /**\n\t   * @returns {number} The scroll top position of this element.\n\t   */\n\t  getScrollTop() {\n\t    return this.domElement.scrollTop;\n\t  }\n\n\t  /**\n\t   * @returns {number} The scroll width of this element.\n\t   */\n\t  getScrollWidth() {\n\t    return this.domElement.scrollWidth;\n\t  }\n\n\t  /**\n\t   * Retrieves the selected texts of this Element, if the element is a select. If it is anything else this returns\n\t   * null.\n\t   *\n\t   * @returns {Array} The texts of this Element.\n\t   */\n\t  getSelectedTexts() {\n\t    let texts;\n\t    if (this.domElement.tagName === 'SELECT') {\n\t      texts = [];\n\t      for (let i = 0; i < this.domElement.options.length; i++) {\n\t        if (this.domElement.options[i].selected) {\n\t          texts.push(this.domElement.options[i].text);\n\t        }\n\t      }\n\t    } else {\n\t      texts = null;\n\t    }\n\n\t    return texts;\n\t  }\n\n\t  /**\n\t   * Retrieves the values of this Element, if the element is a checkbox or select. If it is anything else this returns\n\t   * null.\n\t   *\n\t   * @returns {Array} The values of this Element.\n\t   */\n\t  getSelectedValues() {\n\t    let values;\n\t    if (this.domElement.tagName === 'INPUT' && (this.domElement.type === 'checkbox' || this.domElement.type === 'radio')) {\n\t      values = [];\n\t      const name = this.domElement.name;\n\t      const form = PrimeDocument.queryUp('form', this.domElement);\n\t      PrimeDocument.query('input[name=\"' + name + '\"]', form).each(function(element) {\n\t        if (element.isChecked()) {\n\t          values.push(element.getValue());\n\t        }\n\t      });\n\t    } else if (this.domElement.tagName === 'SELECT') {\n\t      values = [];\n\t      for (let i = 0; i < this.domElement.length; i++) {\n\t        if (this.domElement.options[i].selected) {\n\t          values.push(this.domElement.options[i].value);\n\t        }\n\t      }\n\t    } else {\n\t      values = null;\n\t    }\n\n\t    return values;\n\t  }\n\n\t  /**\n\t   * Gets value of a style attribute.\n\t   *\n\t   * @returns {string} The style value.\n\t   */\n\t  getStyle(name) {\n\t    name = Utils.convertStyleName(name);\n\t    return this.domElement.style[name];\n\t  }\n\n\t  /**\n\t   * @returns {string} The tag name of this element as a string. This is always uppercase.\n\t   */\n\t  getTagName() {\n\t    return this.domElement.tagName;\n\t  }\n\n\t  /**\n\t   * Retrieves the text content of this Element.\n\t   *\n\t   * @returns {string} The text contents of this Element.\n\t   */\n\t  getTextContent() {\n\t    return this.domElement.innerText ? this.domElement.innerText : this.domElement.textContent;\n\t  }\n\n\t  /**\n\t   * @returns {number} The top position (in pixels) of the current element.\n\t   */\n\t  getTop() {\n\t    return this.domElement.getBoundingClientRect().top;\n\t  }\n\n\t  /**\n\t   * Gets the width of the Element as an integer value. This width includes padding and scroll bar but excludes the margin and borders.\n\t   * This is often called the innerWidth of the element.\n\t   *\n\t   * @returns {number} The height in pixels.\n\t   */\n\t  getWidth() {\n\t    const computedStyle = this.getComputedStyle();\n\t    const offsetWidth = this.domElement.offsetWidth;\n\t    const borderLeft = computedStyle['borderLeftWidth'];\n\t    const borderRight = computedStyle['borderRightWidth'];\n\t    return offsetWidth - Utils.parseCSSMeasure(borderLeft) - Utils.parseCSSMeasure(borderRight);\n\t  }\n\n\t  /**\n\t   * Retrieves the value attribute of this Element. This works on all checkboxes, radio buttons, text, text areas, and\n\t   * options. However, this does not retrieve the selected options in a select box, checked checkboxes or checked radio\n\t   * buttons. Use the getSelectedValues function for that.\n\t   *\n\t   * @returns {string} The value of this Element.\n\t   */\n\t  getValue() {\n\t    return this.domElement.value;\n\t  }\n\n\t  /**\n\t   * Returns true if the element has one or all class names\n\t   *\n\t   * @param {string} classNames The class name(s) in a string.\n\t   * @returns {boolean} True if all class names are present.\n\t   */\n\t  hasClass(classNames) {\n\t    const currentClassNames = this.domElement.className;\n\t    if (currentClassNames === '') {\n\t      return classNames === '';\n\t    }\n\n\t    const currentClassNameList = currentClassNames.split(Utils.spaceRegex);\n\t    const findClassNameList = classNames.split(Utils.spaceRegex);\n\t    for (let i = 0; i < findClassNameList.length; i++) {\n\t      if (currentClassNameList.indexOf(findClassNameList[i]) === -1) {\n\t        return false;\n\t      }\n\t    }\n\n\t    return true;\n\t  }\n\n\t  /**\n\t   * Hides the Element by setting the display style to none.\n\t   *\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  hide() {\n\t    this.domElement.style.display = 'none';\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Inserts this Element into the DOM after the given element, removing it from it's parent if it's an existing element.\n\t   *\n\t   * @param {PrimeElement|Element} element The element to insert this Element after.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  insertAfter(element) {\n\t    if (this.domElement.parentNode) {\n\t      this.domElement.parentNode.removeChild(this.domElement);\n\t    }\n\n\t    const domElement = (element instanceof PrimeElement) ? element.domElement : element;\n\t    const parentElement = domElement.parentNode;\n\t    if (parentElement) {\n\t      parentElement.insertBefore(this.domElement, domElement.nextSibling);\n\t    } else {\n\t      throw new TypeError('The element you passed into insertAfter is not in the DOM. You can\\'t insert a PrimeElement after an element that isn\\'t in the DOM yet.');\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Inserts this Element into the DOM before the given element, removing it from it's parent if it's an existing element.\n\t   *\n\t   * @param {PrimeElement|Element} element The element to insert this Element before.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  insertBefore(element) {\n\t    if (this.domElement.parentNode) {\n\t      this.domElement.parentNode.removeChild(this.domElement);\n\t    }\n\n\t    const domElement = (element instanceof PrimeElement) ? element.domElement : element;\n\t    const parentElement = domElement.parentNode;\n\t    if (parentElement) {\n\t      parentElement.insertBefore(this.domElement, domElement);\n\t    } else {\n\t      throw new TypeError('The element you passed into insertBefore is not in the DOM. You can\\'t insert a PrimeElement before an element that isn\\'t in the DOM yet.');\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Inserts the given HTML snippet directly after this element.\n\t   *\n\t   * @param {string} html The HTML string.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  insertHTMLAfter(html) {\n\t    this.domElement.insertAdjacentHTML('afterend', html);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Inserts the given HTML snippet inside this element, before its first child.\n\t   *\n\t   * @param {string} html The HTML string.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  insertHTMLAfterBegin(html) {\n\t    this.domElement.insertAdjacentHTML('afterbegin', html);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Inserts the given text after this Element.\n\t   *\n\t   * @param {string} text The text to insert.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  insertTextAfter(text) {\n\t    if (!this.domElement.parentNode) {\n\t      throw new TypeError('This Element is not currently in the DOM');\n\t    }\n\n\t    const textNode = document.createTextNode(text);\n\t    this.domElement.parentNode.insertBefore(textNode, this.domElement.nextSibling);\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Inserts the given text before this Element.\n\t   *\n\t   * @param {string} text The text to insert.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  insertTextBefore(text) {\n\t    if (!this.domElement.parentNode) {\n\t      throw new TypeError('This Element is not currently in the DOM');\n\t    }\n\n\t    const textNode = document.createTextNode(text);\n\t    this.domElement.parentNode.insertBefore(textNode, this.domElement);\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Returns true if the element matches the provided selector.\n\t   *\n\t   * @param {string} selector to match against the Element\n\t   * @returns {boolean} True if the element matches the selector, false if it does not match the selector.\n\t   */\n\t  is(selector) {\n\t    return this.domElement.matches(selector);\n\t  }\n\n\t  /**\n\t   * Returns whether or not the element is checked. If the element is not a checkbox or a radio this returns false.\n\t   *\n\t   * @returns {boolean} True if the element is selected, false if it isn't or is not a checkbox or a radio.\n\t   */\n\t  isChecked() {\n\t    return this.domElement.tagName === 'INPUT' && (this.domElement.type === 'checkbox' || this.domElement.type === 'radio') && this.domElement.checked;\n\t  }\n\n\t  /**\n\t   * Determines if this element is a child of the given element.\n\t   *\n\t   * @param {PrimeElement|Node} element The element to check to see if this element is a child of.\n\t   * @returns {boolean} True if this element is a child of the given element, false otherwise.\n\t   */\n\t  isChildOf(element) {\n\t    const domElement = element instanceof PrimeElement ? element.domElement : element;\n\t    let parent = this.domElement.parentNode;\n\t    while (domElement !== parent && parent !== null) {\n\t      parent = parent.parentNode;\n\t    }\n\n\t    return domElement === parent;\n\t  }\n\n\t  /**\n\t   * @returns {boolean} Whether or not this element is disabled according to the disabled property.\n\t   */\n\t  isDisabled() {\n\t    return this.domElement.disabled;\n\t  }\n\n\t  /**\n\t   * @returns {boolean} True if this element has focus.\n\t   */\n\t  isFocused() {\n\t    return document.activeElement === this.domElement;\n\t  }\n\n\t  /**\n\t   * @return {boolean} True if this element is an INPUT, SELECT or TEXTAREA.\n\t   */\n\t  isInput() {\n\t    const tagName = this.getTagName();\n\t    return tagName === 'SELECT' || tagName === 'INPUT' || tagName === 'TEXTAREA';\n\t  }\n\n\t  /**\n\t   * Determines if the this element is inside the given element\n\t   *\n\t   * @param target {PrimeElement} The target element.\n\t   * @returns {boolean} True if this element is inside the given element.\n\t   */\n\t  isInside(target) {\n\t    if (this.domElement === document.body || this.domElement === document.documentElement || this.domElement === document) {\n\t      return false;\n\t    }\n\n\t    let parent = this.getParent();\n\t    while (parent.domElement !== document.body) {\n\t      if (parent.domElement === target.domElement) {\n\t        return true;\n\t      }\n\t      parent = parent.getParent();\n\t    }\n\n\t    return false;\n\t  }\n\n\t  /**\n\t   * Returns whether or not the element is selected. If the element is not an option this returns false.\n\t   *\n\t   * @returns {boolean} True if the element is selected, false if it isn't or is not an option.\n\t   */\n\t  isSelected() {\n\t    return this.domElement.tagName === 'OPTION' && this.domElement.selected;\n\t  }\n\n\t  /**\n\t   * Determines if the element is visible using its display and visibility styles.\n\t   *\n\t   * @returns {boolean} True if the element is visible, false otherwise. This might return an invalid value if the element\n\t   * is absolutely positioned and off the screen, but is still technically visible.\n\t   */\n\t  isVisible() {\n\t    const computedStyle = this.getComputedStyle();\n\t    return computedStyle['display'] !== 'none' && computedStyle['visibility'] !== 'hidden';\n\t  }\n\n\t  /**\n\t   * Inserts this Element (which must be a newly created Element) into the DOM inside at the very beginning of the given\n\t   * element.\n\t   *\n\t   * @param {PrimeElement|Element} element The element to insert this Element into.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  prependTo(element) {\n\t    // Error out for now if this element is in the document so we can punt on cloning for now\n\t    if (this.domElement.parentNode) {\n\t      throw new TypeError('You can only insert new PrimeElements for now');\n\t    }\n\n\t    const domElement = (element instanceof PrimeElement) ? element.domElement : element;\n\t    if (domElement.parentNode) {\n\t      domElement.insertBefore(this.domElement, domElement.firstChild);\n\t    } else {\n\t      throw new TypeError('The element you passed into prependTo is not in the DOM. You can\\'t insert a PrimeElement inside an element that isn\\'t in the DOM yet.');\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Queries the DOM using the given selector starting at this element and returns all the matched elements.\n\t   *\n\t   * @param {string} selector The selector.\n\t   * @returns {PrimeElementList} An element list.\n\t   */\n\t  query(selector) {\n\t    return PrimeDocument.query(selector, this);\n\t  }\n\n\t  /**\n\t   * Queries the DOM using the given selector starting at this element and returns the first matched element\n\t   * or null if there aren't any matches.\n\t   *\n\t   * @param {string} selector The selector.\n\t   * @returns {PrimeElement} An element or null.\n\t   */\n\t  queryFirst(selector) {\n\t    return PrimeDocument.queryFirst(selector, this);\n\t  }\n\n\t  /**\n\t   * Queries the DOM using the given selector starting at this element and returns the last matched element\n\t   * or null if there aren't any matches.\n\t   *\n\t   * @param {string} selector The selector.\n\t   * @returns {PrimeElement} An element or null.\n\t   */\n\t  queryLast(selector) {\n\t    return PrimeDocument.queryLast(selector, this);\n\t  }\n\n\t  /**\n\t   * Traverses up the DOM from this element and looks for a match to the selector.\n\t   *\n\t   * @param {string} selector The selector.\n\t   * @returns {PrimeElement} An element or null.\n\t   */\n\t  queryUp(selector) {\n\t    return PrimeDocument.queryUp(selector, this);\n\t  }\n\n\t  /**\n\t   * Removes all of the event listeners for the given element.\n\t   *\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  removeAllEventListeners() {\n\t    for (let event in this.domElement.eventListeners) {\n\t      if (this.domElement.eventListeners.hasOwnProperty(event)) {\n\t        for (let i = 0; i < this.domElement.eventListeners[event].length; i++) {\n\t          this._internalRemoveEventListener(event, this.domElement.eventListeners[event][i]);\n\t        }\n\t      }\n\t    }\n\n\t    this.domElement.eventListeners = {};\n\t    this.domElement.customEventListeners = {};\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Removes an attribute from the Element\n\t   *\n\t   * @param {string} name The name of the attribute.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  removeAttribute(name) {\n\t    this.domElement.removeAttribute(name);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Removes the given class (or list of space separated classes) from this Element.\n\t   *\n\t   * @param {string} classNames The class name(s).\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  removeClass(classNames) {\n\t    const currentClassName = this.domElement.className;\n\t    if (currentClassName === '') {\n\t      return this;\n\t    }\n\n\t    const currentClassNameList = currentClassName.split(Utils.spaceRegex);\n\t    const removeClassNameList = classNames.split(Utils.spaceRegex);\n\t    for (let i = 0; i < removeClassNameList.length; i++) {\n\t      Utils.removeFromArray(currentClassNameList, removeClassNameList[i]);\n\t    }\n\n\t    this.domElement.className = currentClassNameList.join(' ');\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Removes an event listener for a specific event from this Element, you must have attached using addEventListener\n\t   *\n\t   * @param {string} event The name of the event.\n\t   * @param {*} listener The event listener that was bound.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  removeEventListener(event, listener) {\n\t    let listeners;\n\t    if (event.indexOf(':') === -1) {\n\t      this._internalRemoveEventListener(event, listener);\n\t      listeners = this.domElement.eventListeners[event];\n\t    } else {\n\t      listeners = this.domElement.customEventListeners[event];\n\t    }\n\n\t    if (listeners) {\n\t      Utils.removeFromArray(listeners, listener);\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Removes all of the event listeners for the given event from this element.\n\t   *\n\t   * @param {string} event The name of the event to remove the listeners for.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  removeEventListeners(event) {\n\t    if (event.indexOf(':') === -1) {\n\t      if (this.domElement.eventListeners[event]) {\n\t        for (let i = 0; i < this.domElement.eventListeners[event].length; i++) {\n\t          this._internalRemoveEventListener(event, this.domElement.eventListeners[event][i]);\n\t        }\n\n\t        delete this.domElement.eventListeners[event];\n\t      }\n\t    } else {\n\t      if (this.domElement.customEventListeners[event]) {\n\t        delete this.domElement.customEventListeners[event];\n\t      }\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Removes all of the event listeners for the given pattern from this element.\n\t   *\n\t   * @param {RegExp} pattern The regular expression that matches the names of the events to remove the listeners for.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  removeEventListenersByPattern(pattern) {\n\t    for (let event in this.domElement.eventListeners) {\n\t      if (this.domElement.eventListeners.hasOwnProperty(event) && pattern.test(event)) {\n\t        for (let i = 0; i < this.domElement.eventListeners[event].length; i++) {\n\t          this._internalRemoveEventListener(event, this.domElement.eventListeners[event][i]);\n\t        }\n\n\t        delete this.domElement.eventListeners[event];\n\t      }\n\t    }\n\n\t    for (let event in this.domElement.customEventListeners) {\n\t      if (this.domElement.customEventListeners.hasOwnProperty(event) && pattern.test(event)) {\n\t        delete this.domElement.customEventListeners[event];\n\t      }\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Removes this Element from the DOM. If the Element isn't in the DOM this does nothing.\n\t   *\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  removeFromDOM() {\n\t    if (this.domElement.parentNode) {\n\t      this.domElement.parentNode.removeChild(this.domElement);\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Create a selected range for this element.\n\t   *\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  selectElementContents() {\n\t    let range;\n\t    let selection;\n\n\t    if (document.body.createTextRange) {\n\t      /* IE */\n\t      range = document.body.createTextRange();\n\t      range.moveToElementText(this.domElement);\n\t      range.select();\n\t    } else if (window.getSelection) {\n\t      /* Rest of the world */\n\t      selection = window.getSelection();\n\t      range = document.createRange();\n\t      range.selectNodeContents(this.domElement);\n\t      selection.removeAllRanges();\n\t      selection.addRange(range);\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Scrolls this Element into the visible area of the browser window.\n\t   *\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  scrollIntoView() {\n\t    this.domElement.scrollIntoView();\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Scrolls this element to the given horizontal position.\n\t   *\n\t   * @param {number} position The position to scroll the element to.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  scrollLeftTo(position) {\n\t    this.domElement.scrollLeft = position;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Scrolls this element to the given vertical position.\n\t   *\n\t   * @param {number} position The position to scroll the element to.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  scrollTo(position) {\n\t    this.domElement.scrollTop = position;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Scrolls this element to the bottom.\n\t   *\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  scrollToBottom() {\n\t    this.domElement.scrollTop = this.domElement.scrollHeight;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Scrolls this element to the top.\n\t   *\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  scrollToTop() {\n\t    this.domElement.scrollTop = 0;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets an attribute of the Element.\n\t   *\n\t   * @param {string} name The attribute name\n\t   * @param {number|string} value The attribute value\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  setAttribute(name, value) {\n\t    if (typeof value === 'number') {\n\t      value = value.toString();\n\t    }\n\t    if (this.domElement.setAttribute) {\n\t      this.domElement.setAttribute(name, value);\n\t    } else {\n\t      const attribute = document.createAttribute(name);\n\t      attribute.nodeValue = value;\n\t      this.domElement.setAttributeNode(attribute);\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets a data- attribute of the Element.\n\t   *\n\t   * Example: setDataAttribute('fooBar', 'baz');\n\t   *  is equivalent to calling setAttribute('data-foo-bar', 'baz');\n\t   *\n\t   * @param {string} name The attribute name\n\t   * @param {number|string} value The attribute value\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  setDataAttribute(name, value) {\n\t    const dataName = 'data-' + name.replace(/([a-z])([A-Z])/g, \"$1-$2\").toLowerCase();\n\t    return this.setAttribute(dataName, value);\n\t  }\n\n\t  /**\n\t   * Sets multiple attributes of the Element from the hash\n\t   *\n\t   * @param {Object} attributes An object of key value style pairs.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  setAttributes(attributes) {\n\t    for (let key in attributes) {\n\t      if (attributes.hasOwnProperty(key)) {\n\t        this.setAttribute(key, attributes[key]);\n\t      }\n\t    }\n\t    return this;\n\t  }\n\n\t  /**\n\t   * If this element is a checkbox or radio button, this sets the checked field on the DOM object equal to the given\n\t   * value.\n\t   *\n\t   * @param {boolean} value The value to set the checked state of this element to.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  setChecked(value) {\n\t    this.domElement.checked = value;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets if this element is disabled or not. This works with any element that responds to the disabled property.\n\t   *\n\t   * @param {boolean} value The value to set the disabled state of this element to.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  setDisabled(value) {\n\t    this.domElement.disabled = value;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the height of this element using the height style.\n\t   *\n\t   * @param {number|string} height The new height as a number (for pixels) or string.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  setHeight(height) {\n\t    if (typeof(height) === 'number') {\n\t      height = height + 'px';\n\t    }\n\n\t    this.setStyle('height', height);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the inner HTML content of the Element.\n\t   *\n\t   * @param {string|PrimeElement} newHTML The new HTML content for the Element.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  setHTML(newHTML) {\n\t    if (newHTML !== null) {\n\t      if (newHTML instanceof PrimeElement) {\n\t        this.domElement.innerHTML = newHTML.getHTML();\n\t      } else {\n\t        this.domElement.innerHTML = newHTML;\n\t      }\n\t    }\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the ID of the Element.\n\t   *\n\t   * @param {string} id The ID.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  setId(id) {\n\t    this.domElement.id = id;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets left position of the element.\n\t   *\n\t   * @param {number|string} left The left position of the element in pixels or as a string.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  setLeft(left) {\n\t    let leftString = left;\n\t    if (typeof(left) === 'number') {\n\t      leftString = left + 'px';\n\t    }\n\n\t    this.setStyle('left', leftString);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the opacity of the element. This also sets the IE alpha filter for IE version 9 or younger.\n\t   *\n\t   * @param {number} opacity The opacity.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  setOpacity(opacity) {\n\t    if (Browser.name === 'Explorer' && Browser.version < 9) {\n\t      this.domElement.style.filter = 'alpha(opacity=' + opacity + ')';\n\t    } else {\n\t      this.domElement.style.opacity = opacity;\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the selected value on the element. If the element is not an option or radio, this does nothing.\n\t   *\n\t   * @param {boolean} selected Selected value.\n\t   */\n\t  setSelected(selected) {\n\t    this.domElement.selected = selected;\n\t  }\n\n\t  /**\n\t   * Sets the selected value(s) of this element. This works on selects, checkboxes, and radio buttons.\n\t   *\n\t   * @param {string} [arguments] The value(s) to select (var args).\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  setSelectedValues() {\n\t    // Handle the case where they passed in an array\n\t    let values = null;\n\t    if (arguments.length === 1 && Utils.isArray(arguments[0])) {\n\t      values = arguments[0];\n\t    } else {\n\t      values = Array.prototype.slice.call(arguments, 0);\n\t    }\n\n\t    if (this.domElement.tagName === 'INPUT' && (this.domElement.type === 'checkbox' || this.domElement.type === 'radio')) {\n\t      const name = this.domElement.name;\n\t      const form = PrimeDocument.queryUp('form', this.domElement);\n\t      PrimeDocument.query('input[name=\"' + name + '\"]', form).each(function(element) {\n\t        element.setChecked(values.indexOf(element.getValue()) !== -1);\n\t      });\n\t    } else if (this.domElement.tagName === 'SELECT') {\n\t      for (let i = 0; i < this.domElement.length; i++) {\n\t        this.domElement.options[i].selected = values.indexOf(this.domElement.options[i].value) !== -1;\n\t      }\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the style for the name of this Element.\n\t   *\n\t   * @param {string} name The style name.\n\t   * @param {number|string} value The style value.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  setStyle(name, value) {\n\t    if (typeof value === 'number') {\n\t      value = value.toString();\n\t    }\n\t    this.domElement.style[name] = value;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets multiple styles of this Element.\n\t   *\n\t   * @param {Object} styles An object with key value pairs for the new style names and values.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  setStyles(styles) {\n\t    for (let key in styles) {\n\t      if (styles.hasOwnProperty(key)) {\n\t        this.setStyle(key, styles[key]);\n\t      }\n\t    }\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the textContent of the Element.\n\t   *\n\t   * @param {number|string|PrimeElement} newText The new text content for the Element.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  setTextContent(newText) {\n\t    if (newText !== null) {\n\t      if (newText instanceof PrimeElement) {\n\t        this.domElement.textContent = newText.getTextContent();\n\t      } else {\n\t        if (typeof newText === 'number') {\n\t          newText = newText.toString();\n\t        }\n\t        this.domElement.textContent = newText;\n\t      }\n\t    }\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets top position of the element.\n\t   *\n\t   * @param {number|string} top The top position of the element in pixels or as a string.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  setTop(top) {\n\t    let topString = top;\n\t    if (typeof(top) === 'number') {\n\t      topString = top + 'px';\n\t    }\n\n\t    this.setStyle('top', topString);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the value of this Element. This handles checkboxes, radio buttons, options, text inputs and text areas. This\n\t   * works on checkboxes and radio buttons, but it change the value attribute on them rather than checking and unchecking\n\t   * the buttons themselves. To check and uncheck the buttons, use the select method.\n\t   *\n\t   * @param {number|string} value The new value.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  setValue(value) {\n\t    if (typeof value === 'number') {\n\t      value = value.toString();\n\t    }\n\t    this.domElement.value = value;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the width of this element using the height style.\n\t   *\n\t   * @param {number|string} width The new width as a number (for pixels) or string.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  setWidth(width) {\n\t    if (typeof(width) === 'number') {\n\t      width = width + 'px';\n\t    }\n\n\t    this.setStyle('width', width);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Shows the Element by setting the display style first to empty string. After this, the elements computed style is\n\t   * checked to see if the element is still not visible. If that is true, the element must have a CSS style defined in\n\t   * a stylesheet that is setting it to display: none. In this case, we determine if the element is a block level element\n\t   * and either set the display to 'block' or 'inline'.\n\t   *\n\t   * @param {string} [displayValue] The display value to use for the show. This defaults to the W3C standard display\n\t   * setting depending on the type of element you are showing. For example, INPUT is inline and DIV is block.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  show(displayValue) {\n\t    if (Utils.isDefined(displayValue)) {\n\t      this.domElement.style.display = displayValue;\n\t      return this;\n\t    }\n\n\t    this.domElement.style.display = '';\n\n\t    const computedDisplay = this.getComputedStyle()['display'];\n\t    if (computedDisplay === 'none') {\n\t      if (!Utils.isDefined(displayValue)) {\n\t        displayValue = (PrimeElement.blockElementRegexp.test(this.domElement.tagName)) ? 'block' : 'inline';\n\t      }\n\n\t      this.domElement.style.display = displayValue;\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Toggle the class on this element.\n\t   *\n\t   * @param {string} className The class name.\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  toggleClass(className) {\n\t    if (this.hasClass(className)) {\n\t      this.removeClass(className);\n\t    } else {\n\t      this.addClass(className);\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Removes this element from the DOM while preserving the inner HTML.\n\t   *\n\t   * Example, call unwrap on the italic element:\n\t   *   <strong>Hello</strong><italic> World </italic> --> <strong>Hello</strong> World\n\t   *\n\t   * @returns {PrimeElement} This Element.\n\t   */\n\t  unwrap() {\n\t    const parent = this.getParent().domElement;\n\t    while (this.domElement.firstChild) {\n\t      parent.insertBefore(this.domElement.firstChild, this.domElement);\n\t    }\n\n\t    this.removeFromDOM();\n\t  }\n\n\t  /**\n\t   * Builds a new element using the given HTML snippet (currently this only supports the tag).\n\t   *\n\t   * @param {string} elementString The element string.\n\t   * @param {Object} [properties={}] The properties for the new element.\n\t   * @returns {PrimeElement} A new PrimeElement.\n\t   */\n\t  wrapInnerHTML(elementString, properties) {\n\t    const element = PrimeDocument.newElement(elementString, properties);\n\t    element.setHTML(this.getOuterHTML());\n\t    this.domElement.outerHTML = element.domElement.outerHTML;\n\t    return this;\n\t  }\n\n\t  /* ===================================================================================================================\n\t   * Private Methods\n\t   * ===================================================================================================================*/\n\n\t  /**\n\t   * Handle delegated events.\n\t   *\n\t   * @param {Event} event\n\t   * @private\n\t   */\n\t  _handleDelegatedEvent(event) {\n\t    this._callMatchedListeners(event, event.target);\n\n\t    // If the event cannot bubble, we are done.\n\t    if (!event.bubbles) {\n\t      return;\n\t    }\n\n\t    // While propagation has not been stopped, walk up the tree to simulate the bubble\n\t    let domElement = event.target;\n\t    while (true) {\n\t      if (domElement === this.domElement || domElement === document || event.isPropagationStopped) {\n\t        break;\n\t      }\n\n\t      domElement = domElement.parentNode;\n\t      this._callMatchedListeners(event, domElement);\n\t    }\n\t  }\n\n\t  _callMatchedListeners(event, target) {\n\t    // Test each selector we have against this target\n\t    let delegatedListeners = this.domElement.delegatedListeners[event.type] || [];\n\t    for (let selector in delegatedListeners) {\n\t      if (delegatedListeners.hasOwnProperty(selector)) {\n\t        if (target.matches(selector)) {\n\n\t          let scopedListeners = delegatedListeners[selector];\n\t          // Call each listener unless immediate propagation has been stopped\n\t          for (let i = 0; i < scopedListeners.length; i++) {\n\n\t            if (event.isImmediatePropagationStopped) {\n\t              return;\n\t            }\n\n\t            scopedListeners[i](event, target);\n\t          }\n\t        }\n\t      }\n\t    }\n\t  }\n\n\t  /**\n\t   * Removes the event listener proxy from this element.\n\t   *\n\t   * @param {string} event The event name.\n\t   * @param {Function} listener The listener function.\n\t   * @private\n\t   */\n\t  _internalRemoveEventListener(event, listener) {\n\t    if (event.indexOf(':') === -1) {\n\t      // Traditional event\n\t      if (this.domElement.removeEventListener) {\n\t        this.domElement.removeEventListener(event, listener, false);\n\t      } else if (this.domElement.detachEvent) {\n\t        this.domElement.detachEvent('on' + event, listener);\n\t      } else {\n\t        throw new TypeError('Unable to remove event from the element. Neither removeEventListener nor detachEvent methods are available');\n\t      }\n\t    } else if (this.domElement.customEventListeners && this.domElement.customEventListeners[event]) {\n\t      // Custom event\n\t      const customListeners = this.domElement.customEventListeners[event];\n\t      Utils.removeFromArray(customListeners, listener);\n\t    }\n\t  }\n\t}\n\n\n\t/* ===================================================================================================================\n\t * Polyfill\n\t * ===================================================================================================================*/\n\n\t(function() {\n\t  if (!Element.prototype.matches) {\n\t    Element.prototype.matches = function(selector) {\n\t      const domElement = this;\n\t      const matches = (domElement.parentNode || domElement.document).querySelectorAll(selector);\n\t      let i = 0;\n\n\t      while (matches[i] && matches[i] !== domElement) {\n\t        i++;\n\t      }\n\n\t      return !!matches[i];\n\t    };\n\t  }\n\n\t  // Add isPropagationStopped, this is part of the DOM Level 3 spec for CustomEvents\n\t  // - adding it here for all types so it can be used by the delegation event listener\n\t  // https://www.w3.org/TR/2003/NOTE-DOM-Level-3-Events-20031107/events.html#Events-Event-isPropagationStopped\n\t  if (!Event.prototype.isPropagationStopped) {\n\t    let _stopPropagation = Event.prototype.stopPropagation;\n\t    Event.prototype.stopPropagation = function() {\n\t      this.isPropagationStopped = true;\n\t      _stopPropagation.apply(this, arguments);\n\t    };\n\t  }\n\n\t  // Add isImmediatePropagationStopped, this is part of the DOM Level 3 spec for CustomEvents\n\t  // - adding it here for all types so it can be used by the delegation event listener\n\t  // https://www.w3.org/TR/2003/NOTE-DOM-Level-3-Events-20031107/events.html#Events-Event-isImmediatePropagationStopped\n\t  if (!Event.prototype.isImmediatePropagationStopped) {\n\t    let _stopImmediatePropagation = Event.prototype.stopImmediatePropagation;\n\t    Event.prototype.stopImmediatePropagation = function() {\n\t      this.isImmediatePropagationStopped = true;\n\t      _stopImmediatePropagation.apply(this, arguments);\n\t    };\n\t  }\n\t})();\n\n\t/*\n\t * Copyright (c) 2017, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\tclass PrimeElementList {\n\t  /**\n\t   * Constructs an PrimeElementList object using the given array containing DOMElements or PrimeElement objects, or the NodeList containing Node objects.\n\t   *\n\t   * @constructor\n\t   * @param {Array|NodeList} elements An array containing DOMElement or PrimeElement objects, or a NodeList containing Node objects.\n\t   */\n\t  constructor(elements) {\n\t    Utils.bindAll(this);\n\n\t    // NodeList does not inherit from Array so do not assume object type.\n\t    this.length = elements.length;\n\t    for (let i = 0; i < elements.length; i++) {\n\t      if (elements[i] instanceof PrimeElement) {\n\t        this[i] = elements[i];\n\t      } else {\n\t        this[i] = new PrimeElement(elements[i]);\n\t      }\n\t    }\n\t  }\n\n\t  /**\n\t   * Shorthand for calling {@link PrimeElement.addClass} on each Element in the PrimeElementList.\n\t   *\n\t   * Adds the given class (or list of space separated classes) to all Elements in this PrimeElementList.\n\t   *\n\t   * @param {string} classNames The class name(s) separated by a space.\n\t   * @returns {PrimeElementList} This PrimeElementList.\n\t   */\n\t  addClass(classNames) {\n\t    return this._proxyToElement('addClass', classNames);\n\t  }\n\n\t  /**\n\t   * Shorthand for calling {@link PrimeElement.addEventListener} on each Element in the PrimeElementList.\n\t   *\n\t   * Attaches an event listener to all Elements in this PrimeElementList.\n\t   *\n\t   * @param {string} event The name of the event.\n\t   * @param {Function} listener The event listener function.\n\t   * @returns {PrimeElement|PrimeElementList} This Element.\n\t   */\n\t  addEventListener(event, listener) {\n\t    return this._proxyToElement('addEventListener', event, listener);\n\t  }\n\n\t  /**\n\t   * Iterates over each of the PrimeElement objects in this PrimeElementList and calls the given function for each one.\n\t   * The <code>this</code> variable inside the function will be managed by the caller of this method. You should use the\n\t   * <code>bind</code> method on the Function object if you want to manage the <code>this</code> reference.\n\t   *\n\t   * The function can optionally take two parameters. The first parameter is the current element. The second parameter\n\t   * is the current index.\n\t   *\n\t   * @param {Function} iterationFunction The function to call.\n\t   * @returns {PrimeElementList} This PrimeElementList.\n\t   */\n\t  each(iterationFunction) {\n\t    for (let i = 0; i < this.length; i++) {\n\t      iterationFunction(this[i], i);\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Shorthand for calling {@link PrimeElement.hide} on each Element in the PrimeElementList.\n\t   *\n\t   * Hides the Element by setting the display style to none.\n\t   *\n\t   * @returns {PrimeElementList} This PrimeElementList.\n\t   */\n\t  hide() {\n\t    return this._proxyToElement('hide');\n\t  }\n\n\t  /**\n\t   * Returns the indexOf the element that matches the parameter, either Prime Element or DOMElement.\n\t   *\n\t   * @param {PrimeElement|Element} element The element to look for\n\t   * @returns {number} The position of the element in the list, or -1 if not present.\n\t   */\n\t  indexOf(element) {\n\t    const domElement = (element instanceof PrimeElement) ? element.domElement : element;\n\n\t    for (let i = 0; i < this.length; i++) {\n\t      if (this[i].domElement === domElement) {\n\t        return i;\n\t      }\n\t    }\n\n\t    return -1;\n\t  }\n\n\t  /**\n\t   * Removes all the matched elements in the PrimeElementList from the DOM.\n\t   *\n\t   * @returns {PrimeElementList} This PrimeElementList.\n\t   */\n\t  removeAllFromDOM() {\n\t    for (let i = 0; i < this.length; i++) {\n\t      this[i].removeFromDOM();\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Shorthand for calling {@link PrimeElement.removeClass} on each Element in the PrimeElementList.\n\t   *\n\t   * Removes the given class (or list of space separated classes) from all Elements in this PrimeElementList.\n\t   *\n\t   * @param {string} classNames The class name(s) separated by a space.\n\t   * @returns {PrimeElementList} This PrimeElementList.\n\t   */\n\t  removeClass(classNames) {\n\t    return this._proxyToElement('removeClass', classNames);\n\t  }\n\n\t  /**\n\t   * Shorthand for calling {@link PrimeElement.setChecked} on each Element in the PrimeElementList.\n\t   *\n\t   * If this element is a checkbox or radio button, this sets the checked field on the DOM object equal to the given\n\t   * value.\n\t   *\n\t   * @param {boolean} value The value to set the checked state of this element to.\n\t   * @returns {PrimeElementList} This PrimeElementList.\n\t   */\n\t  setChecked(value) {\n\t    return this._proxyToElement('setChecked', value);\n\t  }\n\n\t  /**\n\t   * Shorthand for calling {@link PrimeElement.setDisabled} on each Element in the PrimeElementList.\n\t   *\n\t   * Sets if this element is disabled or not. This works with any element that responds to the disabled property.\n\t   *\n\t   * @param {boolean} value The value to set the disabled state of this element to.\n\t   * @returns {PrimeElementList} This PrimeElementList.\n\t   */\n\t  setDisabled(value) {\n\t    return this._proxyToElement('setDisabled', value);\n\t  }\n\n\t  /**\n\t   * Shorthand for calling {@link PrimeElement.show} on each Element in the PrimeElementList.\n\t   *\n\t   * Shows the element.\n\t   *\n\t   * @returns {PrimeElementList} This PrimeElementList.\n\t   */\n\t  show() {\n\t    return this._proxyToElement('show');\n\t  }\n\n\t  /**\n\t   * @callback PrimeElementListPredicate\n\t   *\n\t   * A function that defines a condition on a PrimeElement\n\t   *\n\t   * @param {PrimeElement} element\n\t   * @returns {boolean} True if the element matches a condition\n\t   */\n\n\t  /**\n\t   * A function that tests for any element that matches a condition.\n\t   * @param {PrimeElementListPredicate} predicate A function that defines the condition to check\n\t   * @returns {boolean} True if any element matches the predicate\n\t   */\n\t  some(predicate) {\n\t    for (let i = 0; i < this.length; ++i) {\n\t      if (predicate(this[i])) {\n\t        return true;\n\t      }\n\t    }\n\t    return false;\n\t  }\n\n\t  /* ===================================================================================================================\n\t   * Private methods\n\t   * ===================================================================================================================*/\n\n\t  /**\n\t   * Proxy function calls to each Element in the PrimeElementList.\n\t   * The first parameter is function name, followed by a variable length of arguments.\n\t   *\n\t   * Example usage: this._proxyToElement('addClass', classNames);\n\t   *\n\t   * @returns {PrimeElementList}\n\t   * @private\n\t   */\n\t  _proxyToElement() {\n\t    const args = Array.prototype.slice.apply(arguments);\n\t    for (let i = 0; i < this.length; i++) {\n\t      this[i][args[0]].apply(this[i], args.slice(1));\n\t    }\n\t    return this;\n\t  }\n\t}\n\n\t/*\n\t * Copyright (c) 2012-2018, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\tconst readyFunctions = [];\n\tconst tagRegexp = /^<(\\w+)\\s*\\/?>.*(?:<\\/\\1>)?$/;\n\n\t/**\n\t * The Body element as a PrimeElement object.\n\t *\n\t * @type {?PrimeElement}\n\t */\n\tlet bodyElement = null;\n\n\tclass PrimeDocument {\n\n\t  /**\n\t   * @returns {PrimeElement}\n\t   */\n\t  static get Element() {\n\t    return PrimeElement;\n\t  }\n\n\t  /**\n\t   * @returns {PrimeElementList}\n\t   */\n\t  static get ElementList() {\n\t    return PrimeElementList;\n\t  }\n\n\t  /**\n\t   * @returns {Array<Function>}\n\t   */\n\t  static get readyFunctions() {\n\t    return readyFunctions;\n\t  }\n\n\t  /**\n\t   * @returns {RegExp}\n\t   */\n\t  static get tagRegexp() {\n\t    return tagRegexp;\n\t  }\n\n\t  /**\n\t   * @returns {?PrimeElement} the Prime body element\n\t   */\n\t  static get bodyElement() {\n\t    if (bodyElement === null) {\n\t      bodyElement = new PrimeElement(document.body);\n\t    }\n\t    return bodyElement;\n\t  }\n\n\t  /**\n\t   * Set the body element\n\t   * @param {?PrimeElement} body the Prime body element\n\t   */\n\t  static set bodyElement(body) {\n\t    bodyElement = body;\n\t  }\n\n\t  /**\n\t   * Attaches an event listener to the document body and will only invoke the listener when the event target matches\n\t   * the provided selector.\n\t   *\n\t   * The intent of this function is to provide a delegated listener and handle events from nested elements.\n\t   *\n\t   * @param {string} event The name of the event\n\t   * @param  {string} selector The selector to match against the Element\n\t   * @param {PrimeDelegationEventListener} listener The event listener function\n\t   */\n\t  static addDelegatedEventListener(event, selector, listener) {\n\t    PrimeDocument.bodyElement.addDelegatedEventListener(event, selector, listener);\n\t  }\n\n\t  /**\n\t   * Attaches an event listener to the document, returning the handler proxy.\n\t   *\n\t   * @param {string} event The name of the event.\n\t   * @param {Function} listener The event listener function.\n\t   * @returns {PrimeDocument} The PrimeDocument object so you can chain method calls together.\n\t   */\n\t  static addEventListener(event, listener) {\n\t    if (event.indexOf(':') === -1) {\n\t      // Traditional event\n\t      document.eventListeners = document.eventListeners || {};\n\t      document.eventListeners[event] = document.eventListeners[event] || [];\n\t      document.eventListeners[event].push(listener);\n\t      document.addEventListener(event, listener, false);\n\t    } else {\n\t      // Custom event\n\t      document.customEventListeners = document.customEventListeners || {};\n\t      document.customEventListeners[event] = document.customEventListeners[event] || [];\n\t      document.customEventListeners[event].push(listener);\n\t    }\n\n\t    return PrimeDocument;\n\t  }\n\n\t  /**\n\t   * Returns the height of the document.\n\t   *\n\t   * @returns {number} The height of the document in pixels.\n\t   */\n\t  static getHeight() {\n\t    const body = document.body;\n\t    const html = document.documentElement;\n\n\t    return Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);\n\t  }\n\n\t  /**\n\t   * Returns the width of the document.\n\t   *\n\t   * @returns {number} The width of the document in pixels.\n\t   */\n\t  static getWidth() {\n\t    const body = document.body;\n\t    const html = document.documentElement;\n\n\t    return Math.max(body.scrollWidth, body.offsetWidth, html.clientWidth, html.scrollWidth, html.offsetWidth);\n\t  }\n\n\t  /**\n\t   * Builds a new document using the given HTML document.\n\t   *\n\t   * @param {string} documentString The HTML string to build the document.\n\t   * @returns {Document} A new document.\n\t   */\n\t  static newDocument(documentString) {\n\t    return new DOMParser().parseFromString(documentString, \"text/html\");\n\t  }\n\n\t  /**\n\t   * Builds a new element using the given HTML snippet (currently this only supports the tag).\n\t   *\n\t   * @param {string} elementString The element string.\n\t   * @param {Object} [properties={}] The properties for the new element.\n\t   * @returns {PrimeElement} A new PrimeElement.\n\t   */\n\t  static newElement(elementString, properties) {\n\t    properties = Utils.isDefined(properties) ? properties : {};\n\t    const result = PrimeDocument.tagRegexp.exec(elementString);\n\t    if (result === null) {\n\t      throw new TypeError('Invalid string to create a new element [' + elementString + ']. It should look like <a/>');\n\t    }\n\n\t    const element = new PrimeElement(document.createElement(result[1]));\n\t    for (let key in properties) {\n\t      if (properties.hasOwnProperty(key)) {\n\t        if (key === 'id') {\n\t          element.setId(properties[key]);\n\t        } else {\n\t          element.setAttribute(key, properties[key]);\n\t        }\n\t      }\n\t    }\n\n\t    return element;\n\t  }\n\n\t  /**\n\t   * Adds the given callback function to the list of functions to invoke when the document is ready. If the document is\n\t   * already fully loaded, this simply invokes the callback directly.\n\t   *\n\t   * @param {Function} callback The callback function.\n\t   */\n\t  static onReady(callback) {\n\t    if (document.readyState === 'complete') {\n\t      callback();\n\t    } else {\n\t      // If this is the first call, register the event listener on the document\n\t      if (this.readyFunctions.length === 0) {\n\t        if (document.addEventListener) {\n\t          document.addEventListener('DOMContentLoaded', PrimeDocument._callReadyListeners, false);\n\t        } else if (document.attachEvent) {\n\t          document.attachEvent('onreadystatechange', PrimeDocument._callReadyListeners);\n\t        } else {\n\t          throw new TypeError('No way to attach an event to the document. What browser are you running?');\n\t        }\n\t      }\n\n\t      // Add the callback\n\t      PrimeDocument.readyFunctions.push(callback);\n\t    }\n\t  }\n\n\t  /**\n\t   * Take the HTML string and append it to the body.\n\t   *\n\t   * @param {string} html The HTML to append\n\t   */\n\t  static appendHTML(html) {\n\t    document.body.insertAdjacentHTML('beforeend', html);\n\t  }\n\n\t  /**\n\t   * Moves the given element by appending it to the element provided by the second argument.\n\t   *\n\t   * @param {Element|PrimeElement} element The element to move.\n\t   * @param {Element|PrimeElement} appendToElement [appendToElement=body] The element to append to, defaults to the body if not provided.\n\t   * @returns {PrimeElement} The element that has been moved.\n\t   */\n\t  static move(element, appendToElement) {\n\t    element = (element instanceof PrimeElement) ? element : new PrimeElement(element);\n\n\t    if (!Utils.isDefined(appendToElement)) {\n\t      appendToElement = new PrimeElement(document.body);\n\t    } else {\n\t      appendToElement = (appendToElement instanceof PrimeElement) ? appendToElement : new PrimeElement(appendToElement);\n\t    }\n\n\t    appendToElement.appendHTML(element.getOuterHTML());\n\t    element.removeFromDOM();\n\t    return appendToElement.getLastChild();\n\t  }\n\n\t  /**\n\t   * Queries the DOM using the given selector starting at the given element and returns all the matched elements.\n\t   *\n\t   * @param {string} selector The selector.\n\t   * @param {Element|Document|PrimeElement} [element=document] The starting point for the search (defaults to document if not provided).\n\t   * @returns {PrimeElementList} An element list.\n\t   */\n\t  static query(selector, element) {\n\t    let domElement = null;\n\t    if (!Utils.isDefined(element)) {\n\t      domElement = document;\n\t    } else {\n\t      domElement = (element instanceof PrimeElement) ? element.domElement : element;\n\t    }\n\n\t    const elements = domElement.querySelectorAll(selector);\n\t    return new PrimeElementList(elements);\n\t  }\n\n\t  /**\n\t   * Queries the DOM for an element that has the given ID.\n\t   *\n\t   * @param {string} id The ID.\n\t   * @returns {PrimeElement} The element or null.\n\t   */\n\t  static queryById(id) {\n\t    let element = document.getElementById(id);\n\t    if (!element) {\n\t      return null;\n\t    }\n\n\t    return new PrimeElement(element);\n\t  }\n\n\t  /**\n\t   * Queries the DOM using the given selector starting at the given element and returns the first matched element\n\t   * or null if there aren't any matches.\n\t   *\n\t   * @param {string} selector The selector.\n\t   * @param {Element|Document|PrimeElement} [element=document] The starting point for the search (defaults to document if not provided).\n\t   * @returns {PrimeElement} An element or null.\n\t   */\n\t  static queryFirst(selector, element) {\n\t    let domElement = null;\n\t    if (!Utils.isDefined(element)) {\n\t      domElement = document;\n\t    } else {\n\t      domElement = (element instanceof PrimeElement) ? element.domElement : element;\n\t    }\n\n\t    domElement = domElement.querySelector(selector);\n\t    if (domElement === null) {\n\t      return null;\n\t    }\n\n\t    return new PrimeElement(domElement);\n\t  }\n\n\t  /**\n\t   * Queries the DOM using the given selector starting at the given element and returns the last matched element\n\t   * or null if there aren't any matches.\n\t   *\n\t   * @param {string} selector The selector.\n\t   * @param {Element|Document|PrimeElement} [element=document] The starting point for the search (defaults to document if not provided).\n\t   * @returns {PrimeElement} An element or null.\n\t   */\n\t  static queryLast(selector, element) {\n\t    let domElement = null;\n\t    if (!Utils.isDefined(element)) {\n\t      domElement = document;\n\t    } else {\n\t      domElement = (element instanceof PrimeElement) ? element.domElement : element;\n\t    }\n\n\t    const domElements = domElement.querySelectorAll(selector);\n\t    if (domElements.length === 0) {\n\t      return null;\n\t    }\n\n\t    return new PrimeElement(domElements[domElements.length - 1]);\n\t  }\n\n\t  /**\n\t   * Traverses up the DOM from the starting element and looks for a match to the selector.\n\t   *\n\t   * @param {string} selector The selector.\n\t   * @param {PrimeElement|Element} element The starting point for the upward traversal.\n\t   * @returns {PrimeElement} An element or null.\n\t   */\n\t  static queryUp(selector, element) {\n\t    let domElement = null;\n\t    if (!Utils.isDefined(element)) {\n\t      throw new SyntaxError('Missing required parameter. The element is required.');\n\t    } else {\n\t      domElement = (element instanceof PrimeElement) ? element.domElement : element;\n\t    }\n\n\t    domElement = domElement.parentNode;\n\t    while (domElement !== null && !domElement.matches(selector)) {\n\t      domElement = domElement.parentNode;\n\t      if (domElement === document) {\n\t        domElement = null;\n\t      }\n\t    }\n\n\t    if (domElement !== null) {\n\t      return new PrimeElement(domElement);\n\t    }\n\n\t    return null;\n\t  }\n\n\t  /**\n\t   * Removes an event handler for a specific event from the document that you attached using addEventListener\n\t   *\n\t   * @param {string} event The name of the event.\n\t   * @param {Function} listener The listener function.\n\t   */\n\t  static removeEventListener(event, listener) {\n\t    if (document.removeEventListener) {\n\t      document.removeEventListener(event, listener, false);\n\t    } else if (document.detachEvent) {\n\t      document.detachEvent('on' + event, listener);\n\t    } else {\n\t      throw new TypeError('Unable to remove event from the element. Neither removeEventListener nor detachEvent methods are available');\n\t    }\n\t  }\n\n\t  /* ===================================================================================================================\n\t   * Private Methods\n\t   * ===================================================================================================================*/\n\n\t  /**\n\t   * Calls all the registered document ready listeners.\n\t   *\n\t   * @private\n\t   */\n\t  static _callReadyListeners() {\n\t    if (document.addEventListener || document.readyState === 'complete') {\n\t      let readyFunction;\n\t      while (readyFunction = PrimeDocument.readyFunctions.shift()) {\n\t        readyFunction();\n\t      }\n\t    }\n\n\t    if (document.removeEventListener) {\n\t      document.removeEventListener('DOMContentLoaded', PrimeDocument._callReadyListeners, false);\n\t    } else {\n\t      document.detachEvent('onreadystatechange', PrimeDocument._callReadyListeners);\n\t    }\n\t  }\n\t}\n\n\t/* ===================================================================================================================\n\t * Polyfill\n\t * ===================================================================================================================*/\n\n\t/* https://developer.mozilla.org/en-US/docs/Web/API/DOMParser */\n\t(function(DOMParser) {\n\t  const proto = DOMParser.prototype;\n\t  const nativeParse = proto.parseFromString;\n\n\t  // Firefox/Opera/IE throw errors on unsupported types\n\t  try {\n\t    // WebKit returns null on unsupported types\n\t    if ((new DOMParser()).parseFromString('', 'text/html')) {\n\t      // text/html parsing is natively supported\n\t      return;\n\t    }\n\t  } catch (ex) {\n\t  }\n\n\t  proto.parseFromString = function(markup, type) {\n\t    if (/^\\s*text\\/html\\s*(?:;|$)/i.test(type)) {\n\t      const doc = document.implementation.createHTMLDocument('');\n\t      if (markup.toLowerCase().indexOf('<!doctype') > -1) {\n\t        doc.documentElement.innerHTML = markup;\n\t      } else {\n\t        doc.body.innerHTML = markup;\n\t      }\n\t      return doc;\n\t    } else {\n\t      return nativeParse.apply(this, arguments);\n\t    }\n\t  };\n\t}(DOMParser));\n\n\t/*\n\t * Copyright (c) 2012-2018, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\t/**\n\t * The Utils namespace. This contains utility functions.\n\t *\n\t * @namespace Utils\n\t */\n\tconst Utils = {\n\t  spaceRegex: /\\s+/,\n\t  typeRegex: /^\\[object\\s(.*)\\]$/,\n\n\t  /**\n\t   * Binds all of the functions inside the object so that <code>this</code> is the object. This is extremely useful for\n\t   * objects that have functions that will be used as event listeners. Rather than having to manage binding and function\n\t   * references manually you can instead bind all of the functions in the object and then use them directly for event\n\t   * listeners.\n\t   *\n\t   * Here's an example:\n\t   *\n\t   * <pre>\n\t   *   function Foo() {\n\t   *     Utils.bindAll(this);\n\t   *\n\t   *     // This function is bound to this (i.e. this.handleClick = this.handleClick.bind(this)).\n\t   *     PrimeDocument.queryFirst('a').addEventListener('click', this.handleClick);\n\t   *   }\n\t   *\n\t   *   Foo.prototype = {\n\t   *     handleClick: function(event) {\n\t   *       ...\n\t   *     }\n\t   *   };\n\t   * </pre>\n\t   *\n\t   * @param {*} object The object to bind all the functions for.\n\t   */\n\t  bindAll: function(object) {\n\t    Utils.getAllPropertyNames(object).forEach((property) => {\n\t      if (property !== 'constructor' && typeof object[property] === 'function' &&\n\t          !(object[property].name && object[property].name.startsWith('bound '))) { // name isn't defined in ie\n\t        Object.defineProperty(object, property, {value: object[property].bind(object)});\n\t      }\n\t    });\n\t  },\n\n\t  /**\n\t   * HTML escape a string.\n\t   *\n\t   * @param string The string to escape\n\t   * @returns {string} the escaped string\n\t   */\n\t  escapeHTML: function(string) {\n\t    let div = document.createElement('div');\n\t    div.appendChild(document.createTextNode(string));\n\t    return div.innerHTML;\n\t  },\n\n\t  /**\n\t   * Reverses HTML escaping.\n\t   * @param string\n\t   * @returns {string}\n\t   */\n\t  unescapeHTML: function(string) {\n\t    // Neat trick using a textarea\n\t    let txt = document.createElement('textarea');\n\t    txt.innerHTML = string;\n\t    return txt.value;\n\t  },\n\n\t  /**\n\t   * Returns all of the properties for this object and all of its\n\t   * inherited properties from parent objects.\n\t   *\n\t   * @param object\n\t   * @returns {Array<string>}\n\t   */\n\t  getAllPropertyNames: function(object) {\n\t    let props = {};\n\n\t    do {\n\t      Object.getOwnPropertyNames(object).forEach((prop) => {\n\t        if (!props[prop]) {\n\t          props[prop]=prop;\n\t        }\n\t      });\n\t    } while (object = Object.getPrototypeOf(object));\n\n\t    return Object.keys(props);\n\t  },\n\n\t  /**\n\t   * Binds all of the functions inside the object so that <code>this</code> is the object. This is extremely useful for\n\t   * objects that have functions that will be used as event listeners. Rather than having to manage binding and function\n\t   * references manually you can instead bind all of the functions in the object and then use them directly for event\n\t   * listeners.\n\t   *\n\t   * Here's an example:\n\t   *\n\t   * <pre>\n\t   *   function Foo() {\n\t   *     Utils.bindAll(this);\n\t   *\n\t   *     // This function is bound to this (i.e. this.handleClick = this.handleClick.bind(this)).\n\t   *     PrimeDocument.queryFirst('a').addEventListener('click', this.handleClick);\n\t   *   }\n\t   *\n\t   *   Foo.prototype = {\n\t   *     handleClick: function(event) {\n\t   *       ...\n\t   *     }\n\t   *   };\n\t   * </pre>\n\t   *\n\t   * @param {*} object The object to bind all the functions for.\n\t   * @param {String} arguments A varargs list of function names to bind.\n\t   */\n\t  bindSome: function(object) {\n\t    if (arguments.length > 1) {\n\t      for (let i = 1; i < arguments.length; i++) {\n\t        const func = object[arguments[i]];\n\t        if (!Utils.isDefined(func) || !(func instanceof Function)) {\n\t          throw new TypeError('The object does not contain a function named [' + arguments[i] + ']');\n\t        }\n\n\t        object[arguments[i]] = func.bind(object);\n\t      }\n\t    }\n\t    for (let property in object) {\n\t      if (object[property] instanceof Function) {\n\t        object[property] = object[property].bind(object);\n\t      }\n\t    }\n\t  },\n\n\t  /**\n\t   * Safely binds a function to a context.\n\t   *\n\t   * @param {Function} func The function to bind.\n\t   * @param {Object} [context] An optional context to bind the function to.\n\t   * @returns {Function} Either <code>func</code> or the newly bound function.\n\t   */\n\t  bindSafe: function(func, context) {\n\t    if (!Utils.isDefined(func)) {\n\t      throw new Error('Invalid arguments');\n\t    }\n\n\t    if (!Utils.isDefined(context)) {\n\t      return func;\n\t    }\n\n\t    return func.bind(context);\n\t  },\n\n\t  /**\n\t   * Calculates the length of the given text using the style of the given element.\n\t   *\n\t   * @param {PrimeElement} element The element to use the style of.\n\t   * @param {string} text The text to calculate the length of.\n\t   * @returns {number} The length of the text.\n\t   */\n\t  calculateTextLength: function(element, text) {\n\t    const computedStyle = element.getComputedStyle();\n\t    let textCalculator = PrimeDocument.queryById('prime-text-calculator');\n\t    if (textCalculator === null) {\n\t      textCalculator = PrimeDocument.newElement('<span/>')\n\t          .setStyles({\n\t            position: 'absolute',\n\t            width: 'auto',\n\t            fontSize: computedStyle['fontSize'],\n\t            fontFamily: computedStyle['fontFamily'],\n\t            fontWeight: computedStyle['fontWeight'],\n\t            letterSpacing: computedStyle['letterSpacing'],\n\t            whiteSpace: 'nowrap'\n\t          })\n\t          .setId('prime-text-calculator')\n\t          .setTop(-9999)\n\t          .setLeft(-9999)\n\t          .appendTo(document.body);\n\t    }\n\n\t    textCalculator.setHTML(text);\n\t    return textCalculator.getWidth();\n\t  },\n\n\t  /**\n\t   * Attempts to invoke a function iteratively in the background a specific number of times within a specific duration.\n\t   * This might not complete in the specified duration. The functions passed in should be short functions that return as\n\t   * quickly as possible. If you are using long functions, use the recursive setTimeout trick by-hand instance.\n\t   *\n\t   * @param {number} totalDuration The duration in milliseconds.\n\t   * @param {number} timesToCall The number of times to call the function.\n\t   * @param {Function} stepFunction The step function to call each iteration.\n\t   * @param {Function} [endFunction] The function to invoke at the end.\n\t   */\n\t  callIteratively: function(totalDuration, timesToCall, stepFunction, endFunction) {\n\t    const step = totalDuration / timesToCall;\n\t    let count = 0;\n\t    const id = setInterval(function() {\n\t      count++;\n\t      const last = (count >= timesToCall);\n\t      stepFunction(last);\n\t      if (last) {\n\t        clearInterval(id);\n\n\t        if (Utils.isDefined(endFunction)) {\n\t          endFunction();\n\t        }\n\t      }\n\t    }, step - 1);\n\t  },\n\n\t  /**\n\t   * Capitalizes the given String.\n\t   *\n\t   * @param {string} str The String to capitalize.\n\t   * @returns {string} The capitalized String.\n\t   */\n\t  capitalize: function(str) {\n\t    return str.charAt(0).toUpperCase() + str.substring(1);\n\t  },\n\n\t  /**\n\t   * Converts CSS style names to style JavaScript names.\n\t   *\n\t   * @param {string} name The CSS style name to convert\n\t   * @returns {string} The converted style name.\n\t   */\n\t  convertStyleName: function(name) {\n\t    if (name === 'float') {\n\t      return 'cssFloat';\n\t    }\n\n\t    let dash = name.indexOf('-');\n\t    if (dash === -1) {\n\t      return name;\n\t    }\n\n\t    let start = 0;\n\t    let result = '';\n\t    while (dash !== -1) {\n\t      const piece = name.substring(start, dash);\n\t      if (start === 0) {\n\t        result = result.concat(piece);\n\t      } else {\n\t        result = result.concat(Utils.capitalize(piece));\n\t      }\n\n\t      start = dash + 1;\n\t      dash = name.indexOf('-', start);\n\t    }\n\n\t    return result + Utils.capitalize(name.substring(start));\n\t  },\n\n\t  /**\n\t   * Return an options map {Object} of the data set values coerced to a typed value of boolean, string or number.\n\t   *\n\t   * @param {PrimeElement} element The element.\n\t   * @returns {Object} The options object.\n\t   */\n\t  dataSetToOptions: function(element) {\n\t    const options = {};\n\t    const data = element.getDataSet();\n\t    for (let prop in data) {\n\t      if (!data.hasOwnProperty(prop)) {\n\t        continue;\n\t      }\n\t      const value = data[prop];\n\t      if (isNaN(value)) {\n\t        if (value === 'true') {\n\t          options[prop] = true;\n\t        } else if (value === 'false') {\n\t          options[prop] = false;\n\t        } else {\n\t          options[prop] = value;\n\t        }\n\t      } else {\n\t        options[prop] = parseInt(value);\n\t      }\n\t    }\n\n\t    return options;\n\t  },\n\n\t  /**\n\t   * Determines if an object is an array or not.\n\t   *\n\t   * @param {*} o The object to check.\n\t   * @returns {boolean} True if the object is an array, false otherwise.\n\t   */\n\t  isArray: function(o) {\n\t    return Object.prototype.toString.call(o) === '[object Array]';\n\t  },\n\n\t  /**\n\t   * Tests whether or not the value is not null and not 'undefined'.\n\t   *\n\t   * @param {*} value The value to test.\n\t   * @returns {boolean} True if the value is defined (not null or undefined).\n\t   */\n\t  isDefined: function(value) {\n\t    return value !== null && typeof(value) !== 'undefined';\n\t  },\n\n\t  /**\n\t   * Left pad a number.\n\t   * @param {number} number the number to pad\n\t   * @param {number} width the width of the final result\n\t   * @returns {string}\n\t   */\n\t  leftPadNumber: function(number, width) {\n\t    const sign = Math.sign(number) === -1 ? '-' : '';\n\t    return sign + new Array(width).concat([Math.abs(number)]).join('0').slice(-width);\n\t  },\n\n\t  /**\n\t   * Parses a CSS measure value (12px) as an integer.\n\t   *\n\t   * @param {string} measure The CSS measure\n\t   * @returns {number} The value as an integer.\n\t   */\n\t  parseCSSMeasure: function(measure) {\n\t    const index = measure.indexOf('px');\n\t    if (index > 0) {\n\t      return parseInt(measure.substring(0, measure.length - 2));\n\t    }\n\n\t    return parseInt(measure) || 0;\n\t  },\n\n\t  /**\n\t   * Parses JSON.\n\t   *\n\t   * @param {string} json The JSON.\n\t   * @returns {Object} The JSON data as an object.\n\t   */\n\t  parseJSON: function(json) {\n\t    return JSON.parse(json);\n\t  },\n\n\t  /**\n\t   * Removes the objects in the toRemove array from the fromArray.\n\t   *\n\t   * @param {Array} fromArray The array to remove from.\n\t   * @param {Array} toRemove The values to remove.\n\t   */\n\t  removeAllFromArray: function(fromArray, toRemove) {\n\t    for (let i = 0; i < toRemove.length; i++) {\n\t      Utils.removeFromArray(fromArray, toRemove[i]);\n\t    }\n\t  },\n\n\t  /**\n\t   * Removes the given object from the given array.\n\t   *\n\t   * @param {Array} array The array to remove from.\n\t   * @param {*} obj The object to remove.\n\t   */\n\t  removeFromArray: function(array, obj) {\n\t    const index = array.indexOf(obj);\n\t    if (index !== -1) {\n\t      const shift = array.splice(index + 1, array.length);\n\t      array.length = index;\n\t      array.push.apply(array, shift);\n\t    }\n\t  },\n\n\t  /**\n\t   * Helper function to provide a one liner to behave as if you returned 'false' from a legacy version of Prime.js.\n\t   *\n\t   * Calling this method is equivalent to calling event.preventDefault and event.stopPropagation.\n\t   * @param event\n\t   */\n\t  stopEvent: function(event) {\n\t    // Compatibility with older versions of IE\n\t    event.cancelBubble = true;\n\t    if (event.stopPropagation) {\n\t      event.stopPropagation();\n\t    }\n\t    if (event.preventDefault) {\n\t      event.preventDefault();\n\t    }\n\t  },\n\n\t  type: function(object) {\n\t    return Object.prototype.toString.call(object).match(Utils.typeRegex)[1];\n\t  }\n\t};\n\n\t/*\n\t * Copyright (c) 2017-2018, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\n\t/**\n\t * The singleton instance.\n\t *\n\t * @type {Overlay}\n\t */\n\tlet instance;\n\n\tclass Overlay {\n\t  /**\n\t   * Constructs a new Overlay instance once per DOM.\n\t   *\n\t   * @constructor\n\t   */\n\t  constructor() {\n\t    Utils.bindAll(this);\n\n\t    // Check if the overlay doesn't exist and add it\n\t    this.overlay = PrimeDocument.queryById('prime-overlay');\n\t    if (this.overlay === null) {\n\t      this.overlay = PrimeDocument.newElement('<div/>').setId('prime-overlay').appendTo(document.body).hide();\n\t    }\n\t    this.bodyOverflow = null;\n\t  }\n\n\t  /**\n\t   * Return the instance of the Overlay widget\n\t   * @returns {Overlay}\n\t   */\n\t  static get instance() {\n\t    return instance;\n\t  }\n\n\t  /**\n\t   * Set the instance value of the Overlay instance\n\t   * @param  value {Overlay}\n\t   */\n\t  static set instance(value) {\n\t    instance = value;\n\t  }\n\n\t  /**\n\t   * Closes the overlay and the target element.\n\t   */\n\t  close() {\n\t    // using null ensures that if this style is not defined, we'll remove it when we're done\n\t    let overflowStyle = this.bodyOverflow || '';\n\t    PrimeDocument.bodyElement.setStyle('overflow', overflowStyle);\n\t    this.overlay.setStyle('zIndex', '10');\n\t    this.overlay.hide();\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Opens the overlay and positions the element over it.\n\t   * @param zIndex {Number|string}\n\t   */\n\t  open(zIndex) {\n\t    if (this.bodyOverflow === null) {\n\t      this.bodyOverflow = PrimeDocument.bodyElement.getStyle('overflow');\n\t    }\n\t    PrimeDocument.bodyElement.setStyle('overflow', 'hidden');\n\t    this.overlay.show();\n\n\t    // Set the z-index of this dialog and the overlay\n\t    this.overlay.setStyle('zIndex', zIndex.toString());\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Changes the id of the Overlay element.\n\t   *\n\t   * @param id {string} The new id.\n\t   * @returns {Overlay}\n\t   */\n\t  setId(id) {\n\t    this.overlay.setId(id);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Updates the zindex of the overlay.\n\t   *\n\t   * @param zIndex {string|number} The new zIndex.\n\t   */\n\t  setZIndex(zIndex) {\n\t    this.overlay.setStyle('zIndex', zIndex.toString());\n\t    return this;\n\t  }\n\t}\n\n\tPrimeDocument.onReady(function() {\n\t  Overlay.instance = new Overlay();\n\t});\n\n\t/*\n\t * Copyright (c) 2014-2022, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\tclass PrimeRequest {\n\t  /**\n\t   * Makes a new AJAX request.\n\t   *\n\t   * @constructor\n\t   * @param {string} [url] The URL to call. This can be left out for sub-classing but should otherwise be provided.\n\t   * @param {string} [method=GET] The HTTP method to use. You can specify GET, POST, PUT, DELETE, HEAD, SEARCH, etc.\n\t   */\n\t  constructor(url, method) {\n\t    Utils.bindAll(this);\n\t    this.xhr = new XMLHttpRequest();\n\t    this.async = true;\n\t    this.body = null;\n\t    this.queryParams = null;\n\t    this.contentType = null;\n\t    this.inProgress = null;\n\t    this.errorHandler = this.onError;\n\t    this.headers = {};\n\t    this.loadingHandler = this.onLoading;\n\t    this.method = method || 'GET';\n\t    this.openHandler = this.onOpen;\n\t    this.password = null;\n\t    this.sendHandler = this.onSend;\n\t    this.successHandler = this.onSuccess;\n\t    this.unsetHandler = this.onUnset;\n\t    this.url = url;\n\t    this.username = null;\n\t  }\n\n\t  /**\n\t   * Changes the URL to call.\n\t   *\n\t   * @param {string} url The new URL to call.\n\t   * @returns {PrimeRequest} This PrimeRequest.\n\t   */\n\t  forURL(url) {\n\t    this.url = url;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Invokes the AJAX request. If the URL is not set, this throws an exception.\n\t   *\n\t   * @returns {PrimeRequest} This PrimeRequest.\n\t   */\n\t  go() {\n\t    if (!this.url) {\n\t      throw new TypeError('No URL set for AJAX request');\n\t    }\n\n\t    let requestUrl = this.url;\n\t    if ((this.method === 'GET' || this.method === 'DELETE') && this.queryParams !== null) {\n\t      if (requestUrl.indexOf('?') === -1) {\n\t        requestUrl += '?' + this.queryParams;\n\t      } else {\n\t        requestUrl += '&' + this.queryParams;\n\t      }\n\t    }\n\n\t    if (this.async) {\n\t      if (this.inProgress !== null) {\n\t        this.inProgress.open();\n\t      }\n\n\t      this.xhr.onreadystatechange = this._handler.bind(this);\n\t    }\n\n\t    this.xhr.open(this.method, requestUrl, this.async, this.username, this.password);\n\n\t    if (Object.keys(this.headers).length > 0) {\n\t      for (let key in this.headers) {\n\t        if (this.headers.hasOwnProperty(key)) {\n\t          this.xhr.setRequestHeader(key, this.headers[key]);\n\t        }\n\t      }\n\t    }\n\n\t    if (this.contentType) {\n\t      this.xhr.setRequestHeader('Content-Type', this.contentType);\n\t    }\n\n\t    this.xhr.send(this.body);\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Default handler for the \"completed\" state and an HTTP response status of anything but 2xx. Sub-classes can override\n\t   * this handler or you can pass in a handler function to the {@link #withUnsetHandler}.\n\t   *\n\t   * @param {XMLHttpRequest} xhr The XMLHttpRequest object.\n\t   */\n\t  onError(xhr) {\n\t  }\n\n\t  /**\n\t   * Default handler for the \"loading\" state. Sub-classes can override this handler or you can pass in a handler function\n\t   * to the {@link #withLoadingHandler}.\n\t   *\n\t   * @param {XMLHttpRequest} xhr The XMLHttpRequest object.\n\t   */\n\t  onLoading(xhr) {\n\t  }\n\n\t  /**\n\t   * Default handler for the \"open\" state. Sub-classes can override this handler or you can pass in a handler function\n\t   * to the {@link #withOpenHandler}.\n\t   *\n\t   * @param {XMLHttpRequest} xhr The XMLHttpRequest object.\n\t   */\n\t  onOpen(xhr) {\n\t  }\n\n\t  /**\n\t   * Default handler for the \"send\" state. Sub-classes can override this handler or you can pass in a handler function\n\t   * to the {@link #withSendHandler}.\n\t   *\n\t   * @param {XMLHttpRequest} xhr The XMLHttpRequest object.\n\t   */\n\t  onSend(xhr) {\n\t  }\n\n\t  /**\n\t   * Default handler for the \"complete\" state and an HTTP response status of 2xx. Sub-classes can override this handler\n\t   * or you can pass in a handler function to the {@link #withUnsetHandler}.\n\t   *\n\t   * @param {XMLHttpRequest} xhr The XMLHttpRequest object.\n\t   */\n\t  onSuccess(xhr) {\n\t  }\n\n\t  /**\n\t   * Default handler for the \"unset\" state. Sub-classes can override this handler or you can pass in a handler function\n\t   * to the {@link #withUnsetHandler}.\n\t   *\n\t   * @param {XMLHttpRequest} xhr The XMLHttpRequest object.\n\t   */\n\t  onUnset(xhr) {\n\t  }\n\n\t  /**\n\t   * Sets the async flag to false.\n\t   *\n\t   * @returns {PrimeRequest} This PrimeRequest.\n\t   */\n\t  synchronously() {\n\t    this.async = false;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the method used to make the AJAX request.\n\t   *\n\t   * @param {string} method The HTTP method.\n\t   * @returns {PrimeRequest} This PrimeRequest.\n\t   */\n\t  usingMethod(method) {\n\t    this.method = method;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the request body for the request.\n\t   *\n\t   * @param {string} body The request body.\n\t   * @returns {PrimeRequest} This PrimeRequest.\n\t   */\n\t  withBody(body) {\n\t    this.body = body;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the content type for the request.\n\t   *\n\t   * @param {string} contentType The contentType.\n\t   * @returns {PrimeRequest} This PrimeRequest.\n\t   */\n\t  withContentType(contentType) {\n\t    this.contentType = contentType;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the data object for the request. Will store the values for query parameters or post data depending on the\n\t   * method that is set.  If the method is a post or put, will also set content-type to x-www-form-urlencoded.\n\t   *\n\t   * @param {Object} data The data object.\n\t   * @returns {PrimeRequest} This PrimeRequest.\n\t   */\n\t  withData(data) {\n\t    for (let prop in data) {\n\t      if (data.hasOwnProperty(prop)) {\n\t        if (this.method === 'PUT' || this.method === 'POST') {\n\t          this.body = this._addDataValue(this.body, prop, data[prop]);\n\t        } else {\n\t          this.queryParams = this._addDataValue(this.queryParams, prop, data[prop]);\n\t        }\n\t      }\n\t    }\n\n\t    if (this.method === \"PUT\" || this.method === \"POST\") {\n\t      this.contentType = 'application/x-www-form-urlencoded';\n\t    }\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the data for the request using the form fields in the given form element. Will store the values for query\n\t   * parameters or post data depending on the method that is set.  If the method is a post or put, will also set\n\t   * content-type to x-www-form-urlencoded.\n\t   *\n\t   * @param {PrimeElement|HTMLFormElement} form The form object.\n\t   * @returns {PrimeRequest} This PrimeRequest.\n\t   */\n\t  withDataFromForm(form) {\n\t    let domElement = form;\n\t    if (form instanceof PrimeElement) {\n\t      domElement = form.domElement;\n\t    }\n\n\t    for (let i = 0; i < domElement.elements.length; i++) {\n\t      const primeElement = new PrimeElement(domElement.elements[i]);\n\t      if (primeElement.isDisabled() || !primeElement.isInput()) {\n\t        continue;\n\t      }\n\n\t      const name = primeElement.getAttribute('name');\n\t      if (name === null || name.length === 0) {\n\t        continue;\n\t      }\n\n\t      let type = primeElement.getAttribute('type');\n\t      if (type !== null) {\n\t        type = type.toLowerCase();\n\t      }\n\n\t      let values;\n\t      if (primeElement.getTagName() === 'SELECT') {\n\t        values = primeElement.getSelectedValues();\n\t      } else if ((type === 'radio' || type === 'checkbox') && !primeElement.isChecked()) {\n\t        continue;\n\t      } else {\n\t        values = primeElement.getValue();\n\t      }\n\n\t      if (this.method === 'PUT' || this.method === 'POST') {\n\t        this.body = this._addDataValue(this.body, name, values);\n\t      } else {\n\t        this.queryParams = this._addDataValue(this.queryParams, name, values);\n\t      }\n\t    }\n\n\t    if (this.method === \"PUT\" || this.method === \"POST\") {\n\t      this.contentType = 'application/x-www-form-urlencoded';\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the handler to invoke when the state of the AJAX request is \"complete\" and the HTTP status in the response is\n\t   * not 2xx.\n\t   *\n\t   * @param {Function} func The handler function.\n\t   * @returns {PrimeRequest} This PrimeRequest.\n\t   */\n\t  withErrorHandler(func) {\n\t    this.errorHandler = func;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets an InProgress object that will be called by this AJAX request.\n\t   *\n\t   * @param {InProgress} inProgress The InProgress object.\n\t   * @return {PrimeRequest} This.\n\t   */\n\t  withInProgress(inProgress) {\n\t    this.inProgress = inProgress;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the body of the AJAX request to the string value of the provided JSON object. The content-type of the request\n\t   * will also be set to 'application/json'. The provided JSON object may be passed as a string or an object.\n\t   *\n\t   * @param {Object} json The JSON object.\n\t   * @returns {PrimeRequest} This PrimeRequest.\n\t   */\n\t  withJSON(json) {\n\t    this.body = typeof(json) === String ? json : JSON.stringify(json);\n\t    this.contentType = 'application/json';\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the handler to invoke when the state of the AJAX request is \"loading\".\n\t   *\n\t   * @param {Function} func The handler function.\n\t   * @returns {PrimeRequest} This PrimeRequest.\n\t   */\n\t  withLoadingHandler(func) {\n\t    this.loadingHandler = func;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Set the request headers using the key and value.\n\t   *\n\t   * @param {String} key The key name.\n\t   * @param {String} value The value.\n\t   * @returns {PrimeRequest} This PrimeRequest.\n\t   */\n\t  withHeader(key, value) {\n\t    this.headers[key] = value;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Set the key value pairs provided as request headers.\n\t   *\n\t   * @param {Object} headers A map of key value pairs.\n\t   * @returns {PrimeRequest} This PrimeRequest.\n\t   */\n\t  withHeaders(headers) {\n\t    for (let key in headers) {\n\t      if (headers.hasOwnProperty(key)) {\n\t        this.headers[key] = headers[key];\n\t      }\n\t    }\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the XMLHTTPRequest's response type field, which will control how the response is parsed.\n\t   *\n\t   * @param {string} responseType The response type.\n\t   * @returns {PrimeRequest} This PrimeRequest.\n\t   */\n\t  withResponseType(responseType) {\n\t    this.xhr.responseType = responseType;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the handler to invoke when the state of the AJAX request is \"open\".\n\t   *\n\t   * @param {Function} func The handler function.\n\t   * @returns {PrimeRequest} This PrimeRequest.\n\t   */\n\t  withOpenHandler(func) {\n\t    this.openHandler = func;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the handler to invoke when the state of the AJAX request is \"send\".\n\t   *\n\t   * @param {Function} func The handler function.\n\t   * @returns {PrimeRequest} This PrimeRequest.\n\t   */\n\t  withSendHandler(func) {\n\t    this.sendHandler = func;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the handler to invoke when the state of the AJAX request is \"complete\" and the HTTP status in the response is\n\t   * 2xx.\n\t   *\n\t   * @param {Function} func The handler function.\n\t   * @returns {PrimeRequest} This PrimeRequest.\n\t   */\n\t  withSuccessHandler(func) {\n\t    this.successHandler = func;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the handler to invoke when the state of the AJAX request is \"unset\".\n\t   *\n\t   * @param {Function} func The handler function.\n\t   * @returns {PrimeRequest} This PrimeRequest.\n\t   */\n\t  withUnsetHandler(func) {\n\t    this.unsetHandler = func;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Resets the Request back to a base state (basically just the URL + method).  This can be\n\t   * useful if a component is going to make many requests to the same endpoint with different parameters.\n\t   *\n\t   * @returns {PrimeRequest} This PrimeRequest.\n\t   */\n\t  reset() {\n\t    this.queryParams = null;\n\t    this.data = null;\n\t    this.body = null;\n\t    this.contentType = null;\n\t    return this;\n\t  }\n\n\t  /* ===================================================================================================================\n\t   * Private Methods\n\t   * ===================================================================================================================*/\n\n\t  // noinspection JSMethodCanBeStatic\n\t  /**\n\t   * Adds the given name-value pair to the given data String. If the value is an array, it adds multiple values for each\n\t   * piece. Otherwise, it assumes value is a String or can be converted to a String.\n\t   *\n\t   * @param {string} dataString The data String used to determine if an ampersand is necessary.\n\t   * @param {string} name The name of the name-value pair.\n\t   * @param {string|Array} value The value of the name-value pair.\n\t   * @returns {string} The new data string.\n\t   * @private\n\t   */\n\t  _addDataValue(dataString, name, value) {\n\t    let result = '';\n\t    if (value instanceof Array) {\n\t      for (let i = 0; i < value.length; i++) {\n\t        result += encodeURIComponent(name) + '=' + encodeURIComponent(value[i]);\n\t        if (i + 1 < value.length) {\n\t          result += '&';\n\t        }\n\t      }\n\t    } else {\n\t      result = encodeURIComponent(name) + '=' + encodeURIComponent(value);\n\t    }\n\n\t    if (dataString !== null && result !== '') {\n\t      result = dataString + '&' + result;\n\t    } else if (dataString !== null && result === '') {\n\t      result = dataString;\n\t    }\n\n\t    return result;\n\t  }\n\n\t  /**\n\t   * @private\n\t   */\n\t  _handler() {\n\t    if (this.xhr.readyState === 0) {\n\t      this.unsetHandler(this.xhr);\n\t    } else if (this.xhr.readyState === 1) {\n\t      this.openHandler(this.xhr);\n\t    } else if (this.xhr.readyState === 2) {\n\t      this.sendHandler(this.xhr);\n\t    } else if (this.xhr.readyState === 3) {\n\t      this.loadingHandler(this.xhr);\n\t    } else if (this.xhr.readyState === 4) {\n\n\t      // Call the InProgress before hand because the success handler might call another AJAX method that might open another InProgress\n\t      if (this.inProgress !== null) {\n\t        this.inProgress.close(function() {\n\t          if (this.xhr.status >= 200 && this.xhr.status <= 299) {\n\t            this.successHandler(this.xhr);\n\t          } else {\n\t            this.errorHandler(this.xhr);\n\t          }\n\t        }.bind(this));\n\t      } else {\n\t        if (this.xhr.status >= 200 && this.xhr.status <= 299) {\n\t          this.successHandler(this.xhr);\n\t        } else {\n\t          this.errorHandler(this.xhr);\n\t        }\n\t      }\n\t    }\n\t  }\n\t}\n\n\t/*\n\t * Copyright (c) 2012-2017, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\tclass PrimeWindow {\n\t  /**\n\t   * Attaches an event listener to the window, returning the handler proxy.\n\t   *\n\t   * @param {string} event The name of the event.\n\t   * @param {Function} listener The event handler.\n\t   * @returns {Window} The window object.\n\t   */\n\t  static addEventListener(event, listener) {\n\t    if (event.indexOf(':') === -1) {\n\t      window.eventListeners = window.eventListeners || {};\n\t      window.eventListeners[event] = window.eventListeners[event] || [];\n\t      window.eventListeners[event].push(listener);\n\t      if (window.addEventListener) {\n\t        window.addEventListener(event, listener, false);\n\t      } else if (window.attachEvent) {\n\t        window.attachEvent('on' + event, listener);\n\t      } else {\n\t        throw new TypeError('Unable to set event onto the window. Neither addEventListener nor attachEvent methods are available');\n\t      }\n\t    } else {\n\t      // Custom event\n\t      window.customEventListeners = window.customEventListeners || {};\n\t      window.customEventListeners[event] = window.customEventListeners[event] || [];\n\t      window.customEventListeners[event].push(listener);\n\t    }\n\n\t    return window;\n\t  }\n\n\t  /**\n\t   * Returns the inner height of the window. This includes only the rendering area and not the window chrome (toolbars,\n\t   * status bars, etc). If this method can't figure out the inner height, it throws an exception.\n\t   *\n\t   * @returns {number} The inner height of the window.\n\t   */\n\t  static getInnerHeight() {\n\t    if (typeof(window.innerHeight) === 'number') {\n\t      // Most browsers\n\t      return window.innerHeight;\n\t    } else if (document.documentElement && document.documentElement.clientHeight) {\n\t      // IE 6+ in 'standards compliant mode'\n\t      return document.documentElement.clientHeight;\n\t    } else if (document.body && document.body.clientHeight) {\n\t      // IE 4 compatible\n\t      return document.body.clientHeight;\n\t    }\n\n\t    throw new Error('Unable to determine inner height of the window');\n\t  }\n\n\t  /**\n\t   * Returns the inner width of the window. This includes only the rendering area and not the window chrome (toolbars,\n\t   * status bars, etc). If this method can't figure out the inner width, it throws an exception.\n\t   *\n\t   * @returns {number} The inner width of the window.\n\t   */\n\t  static getInnerWidth() {\n\t    if (typeof(window.innerWidth) === 'number') {\n\t      // Most browsers\n\t      return window.innerWidth;\n\t    } else if (document.documentElement && document.documentElement.clientWidth) {\n\t      // IE 6+ in 'standards compliant mode'\n\t      return document.documentElement.clientWidth;\n\t    } else if (document.body && document.body.clientWidth) {\n\t      // IE 4 compatible\n\t      return document.body.clientWidth;\n\t    }\n\n\t    throw new Error('Unable to determine inner width of the window');\n\t  }\n\n\t  /**\n\t   * Returns the number of pixels the Window is scrolled by.\n\t   *\n\t   * @returns {number} The number of pixels.\n\t   */\n\t  static getScrollTop() {\n\t    if (typeof(window.pageYOffset) === 'number') {\n\t      return window.pageYOffset;\n\t    } else if (document.body && document.body.scrollTop) {\n\t      return document.body.scrollTop;\n\t    } else if (document.documentElement && document.documentElement.scrollTop) {\n\t      return document.documentElement.scrollTop;\n\t    }\n\n\t    throw new Error('Unable to determine scrollTop of the window');\n\t  }\n\t}\n\n\t/*\n\t * Copyright (c) 2015-2017, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\tclass Draggable {\n\t  /**\n\t   * Constructs a new Draggable object for the given element.\n\t   *\n\t   * @param {PrimeElement|Element|EventTarget} element The Prime Element for the Draggable widget.\n\t   * @param {string} [gripSelector=] gripSelector The optional selector to identify the 'grippy' part.\n\t   * @constructor\n\t   */\n\t  constructor(element, gripSelector) {\n\t    Utils.bindAll(this);\n\n\t    this.element = PrimeElement.wrap(element);\n\t    this.offset = {};\n\n\t    if (!Utils.isDefined(gripSelector)) {\n\t      this.grip = this.element;\n\t    } else {\n\t      this.grip = this.element.queryFirst(gripSelector);\n\t      if (this.grip === null) {\n\t        throw Error('Unable to find an element using the provided selector [' + gripSelector + ']');\n\t      }\n\t    }\n\t  }\n\n\t  /**\n\t   * Destroys the Draggable Widget\n\t   */\n\t  destroy() {\n\t    this.element.removeClass('active');\n\t    this.element.setStyles(this.originalStyle);\n\n\t    this.grip.removeEventListener('mousedown', this._handleMouseDown);\n\t    PrimeDocument.removeEventListener('mousemove', this._handleMouseMove);\n\t    PrimeDocument.removeEventListener('mouseup', this._handleMouseUp);\n\t  }\n\n\t  /**\n\t   * Initializes the Draggable by attaching the event listeners.\n\t   *\n\t   * @returns {Draggable} This.\n\t   */\n\t  initialize() {\n\t    this.originalStyle = {\n\t      cursor: this.element.getStyle('cursor'),\n\t      zIndex: this.element.getStyle('zIndex')\n\t    };\n\n\t    this.grip.addEventListener('mousedown', this._handleMouseDown).setStyle('cursor', 'move');\n\t    return this;\n\t  }\n\n\t  /* ===================================================================================================================\n\t   * Private methods\n\t   * ===================================================================================================================*/\n\n\t  /**\n\t   * Handle Mouse Down Event\n\t   * @param {Event} event The mouse event.\n\t   * @private\n\t   */\n\t  _handleMouseDown(event) {\n\t    event.preventDefault();\n\t    this.element.addClass('active');\n\n\t    this.offset = {\n\t      zIndex: this.element.getStyle('zIndex'),\n\t      height: this.element.getOuterHeight(),\n\t      width: this.element.getOuterWidth(),\n\t      x: event.screenX,\n\t      y: event.screenY\n\t    };\n\n\t    this.element.setStyle('zIndex', this.offset.zIndex + 10);\n\n\t    // Remove old listeners\n\t    PrimeDocument.removeEventListener('mousemove', this._handleMouseMove);\n\t    PrimeDocument.removeEventListener('mouseup', this._handleMouseUp);\n\n\t    // Attach all the events\n\t    PrimeDocument.addEventListener('mousemove', this._handleMouseMove);\n\t    PrimeDocument.addEventListener('mouseup', this._handleMouseUp);\n\t  }\n\n\t  /**\n\t   * Handle the Mouse Move event for the body element.\n\t   *\n\t   * @param {Event} event The mouse event.\n\t   * @private\n\t   */\n\t  _handleMouseMove(event) {\n\t    const xDiff = event.screenX - this.offset.x;\n\t    const yDiff = event.screenY - this.offset.y;\n\t    this.offset.x = event.screenX;\n\t    this.offset.y = event.screenY;\n\t    this.element.setLeft(this.element.getLeft() + xDiff);\n\t    this.element.setTop(this.element.getTop() + yDiff);\n\t  }\n\n\t  /**\n\t   * Handle the Mouse Up event for this draggable widget.\n\t   * @private\n\t   */\n\t  _handleMouseUp() {\n\t    PrimeDocument.removeEventListener('mousemove', this._handleMouseMove);\n\t    PrimeDocument.removeEventListener('mouseup', this._handleMouseUp);\n\t    this.element.setStyle('zIndex', this.offset.zIndex);\n\t    this.element.removeClass('active');\n\t  }\n\t}\n\n\t/*\n\t * Copyright (c) 2017-2023, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\n\tclass AJAXDialog {\n\t  /**\n\t   * Constructs a new dialog box, which is dynamically built and then populated with the HTML returned from an AJAX call.\n\t   *\n\t   * @constructor\n\t   */\n\t  constructor() {\n\t    Utils.bindAll(this);\n\n\t    this.draggable = null;\n\t    this.element = null;\n\t    this.initialized = false;\n\t    this._setInitialOptions();\n\t  }\n\n\t  /**\n\t   * Closes the dialog, destroys the HTML and updates or hides the overlay.\n\t   * @returns {AJAXDialog} This.\n\t   */\n\t  close() {\n\t    if (this.element === null) {\n\t      return;\n\t    }\n\n\t    this.element.removeClass('open');\n\t    if (this.draggable !== null) {\n\t      this.draggable.destroy();\n\t      this.draggable = null;\n\t    }\n\n\t    document.removeEventListener('keydown', this._handleKeyDown);\n\t    document.removeEventListener('click', this._handleClick);\n\n\t    setTimeout(function() {\n\t      this.element.removeFromDOM();\n\t      this.element = null;\n\n\t      const highestZIndex = this._determineZIndex();\n\t      if (highestZIndex !== 0) {\n\t        Overlay.instance.setZIndex(highestZIndex);\n\t      } else {\n\t        Overlay.instance.close();\n\t      }\n\t    }.bind(this), this.options.closeTimeout);\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Destroys the dialog by calling the close function.\n\t   * @returns {AJAXDialog} This.\n\t   */\n\t  destroy() {\n\t    this.close();\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Initializes the dialog.\n\t   * @returns {AJAXDialog} This.\n\t   */\n\t  initialize() {\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Opens the dialog by making the AJAX GET request to the given URI and the opening then dialog.\n\t   *\n\t   * @param uri {string} The URI to make the AJAX GET request to.\n\t   * @returns {AJAXDialog} This.\n\t   */\n\t  open(uri) {\n\t    const request = this.options.ajaxRequest || new PrimeRequest(uri, 'GET');\n\t    request.withSuccessHandler(this._handleAJAXDialogResponse)\n\t        .withErrorHandler(this._handleAJAXDialogResponse)\n\t        .go();\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Opens the dialog by making the AJAX POST request to the given URI with the given form and extra data (optional)\n\t   * and then opening the dialog.\n\t   *\n\t   * @param uri {string} The URI to make the AJAX POST request to.\n\t   * @param form {HTMLFormElement|PrimeElement} The Form element to retrieve the data from.\n\t   * @param extraData [extraData=] {object} (Optional) Extra data to send with the POST.\n\t   * @returns {AJAXDialog} This.\n\t   */\n\t  openPost(uri, form, extraData) {\n\t    new PrimeRequest(uri, 'POST')\n\t        .withDataFromForm(form)\n\t        .withData(extraData)\n\t        .withSuccessHandler(this._handleAJAXDialogResponse)\n\t        .go();\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Updates the HTML contents of the dialog.\n\t   *\n\t   * @param html {String} The HTML.\n\t   * @returns {AJAXDialog} This.\n\t   */\n\t  setHTML(html) {\n\t    this.element.setHTML(html);\n\t    this._initializeDialog();\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets any additional classes that should be on the dialog.\n\t   *\n\t   * @param classes {string} The list of additional classes.\n\t   * @returns {AJAXDialog} This.\n\t   */\n\t  withAdditionalClasses(classes) {\n\t    this.options.additionalClasses = classes;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Override the default Ajax Request used to open the dialog. This does not override the\n\t   * success and error handlers.\n\t   *\n\t   * @param request {PrimeRequest} The Ajax Request to use to open the dialog.\n\t   * @returns {AJAXDialog} This.\n\t   */\n\t  withAjaxRequest(request) {\n\t    this.options.ajaxRequest = request;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the callback that is called after the dialog has been fetched and rendered.\n\t   *\n\t   * @param callback {function} The callback function.\n\t   * @returns {AJAXDialog} This.\n\t   */\n\t  withCallback(callback) {\n\t    this.options.callback = callback;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the class name for the dialog element.\n\t   *\n\t   * @param className {string} The class name.\n\t   * @returns {AJAXDialog} This.\n\t   */\n\t  withClassName(className) {\n\t    if (className.indexOf(' ') !== -1) {\n\t      throw 'Invalid class name [' + className + ']. You can use the additionalClasses options to add more classes.';\n\t    }\n\n\t    this.options.className = className;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the close button element selector that is used to setup the close button in the HTML that was returned from\n\t   * the server.\n\t   *\n\t   * @param selector {string} The element selector.\n\t   * @returns {AJAXDialog} This.\n\t   */\n\t  withCloseButtonElementSelector(selector) {\n\t    this.options.closeButtonElementSelector = selector;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the timeout used in the close method to allow for transitions.\n\t   *\n\t   * @param timeout {int} The timeout.\n\t   * @returns {AJAXDialog} This.\n\t   */\n\t  withCloseTimeout(timeout) {\n\t    this.options.closeTimeout = timeout;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets whether this dialog is dismissible by clicking off it or hitting Escape\n\t   *\n\t   * @param dismissible {boolean} Whether dialog is dismissible.  Default option is true.\n\t   * @returns {AJAXDialog} This.\n\t   */\n\t  withDismissible(dismissible) {\n\t    this.options.dismissible = dismissible;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the draggable element selector that is used for the DraggableWidget.\n\t   *\n\t   * @param selector {string} The element selector.\n\t   * @returns {AJAXDialog} This.\n\t   */\n\t  withDraggableButtonElementSelector(selector) {\n\t    this.options.draggableElementSelector = selector;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets an error callback for AJAX form handling. This is called after a failed form submission.\n\t   *\n\t   * @param callback {Function} The callback function. The callback function will called with two parameters,\n\t   *        the first is a reference this object, the second is the XMLHttpRequest object.\n\t   * @returns {AJAXDialog} This.\n\t   */\n\t  withFormErrorCallback(callback) {\n\t    this.options.formErrorCallback = callback;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets whether or not forms inside the dialog are handled via AJAX or not.\n\t   *\n\t   * @param enabled {boolean} The choice.\n\t   * @returns {AJAXDialog} This.\n\t   */\n\t  withFormHandling(enabled) {\n\t    this.options.formHandling = enabled;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets a pre-submit callback for AJAX form handling. This is called before the form is submitted.\n\t   *\n\t   * @param callback {Function} The callback function.\n\t   * @returns {AJAXDialog} This.\n\t   */\n\t  withFormPreSubmitCallback(callback) {\n\t    this.options.formPreSubmitCallback = callback;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets a success callback for AJAX form handling. This is called after a successful form submission.\n\t   *\n\t   * @param callback {Function} The callback function. The callback function will called with two parameters,\n\t   *        the first is a reference this object, the second is the XMLHttpRequest object.\n\t   * @returns {AJAXDialog} This.\n\t   */\n\t  withFormSuccessCallback(callback) {\n\t    this.options.formSuccessCallback = callback;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Set more than one option at a time by providing a map of key value pairs. This is considered an advanced\n\t   * method to set options on the widget. The caller needs to know what properties are valid in the options object.\n\t   *\n\t   * @param {Object} options Key value pair of configuration options.\n\t   * @returns {AJAXDialog} This.\n\t   */\n\t  withOptions(options) {\n\t    if (!Utils.isDefined(options)) {\n\t      return this;\n\t    }\n\n\t    for (let option in options) {\n\t      if (options.hasOwnProperty(option)) {\n\t        this.options[option] = options[option];\n\t      }\n\t    }\n\t    return this;\n\t  }\n\n\t  /* ===================================================================================================================\n\t   * Private methods\n\t   * ===================================================================================================================*/\n\n\t  _determineZIndex() {\n\t    let highestZIndex = 0;\n\t    PrimeDocument.query('.' + this.options.className).each(function(dialog) {\n\t      const zIndex = parseInt(dialog.getComputedStyle()['zIndex']);\n\t      if (dialog.isVisible() && zIndex > highestZIndex) {\n\t        highestZIndex = zIndex;\n\t      }\n\t    });\n\t    return highestZIndex;\n\t  }\n\n\t  _handleCloseClickEvent(event) {\n\t    Utils.stopEvent(event);\n\t    this.close();\n\t  }\n\n\t  _handleAJAXDialogResponse(xhr) {\n\t    this.element = PrimeDocument.newElement('<div/>', {class: this.options.className + ' ' + this.options.additionalClasses}).appendTo(document.body);\n\t    this.setHTML(xhr.responseText);\n\t  }\n\n\t  _handleAJAXFormError(xhr) {\n\t    this.setHTML(xhr.responseText);\n\t    this.form = this.element.queryFirst('form').addEventListener('submit', this._handleAJAXFormSubmit);\n\n\t    if (this.options.formErrorCallback !== null) {\n\t      this.options.formErrorCallback(this, xhr);\n\t    }\n\n\t    if (this.draggable !== null) {\n\t      this.draggable.destroy();\n\t    }\n\n\t    if (this.options.draggableElementSelector !== null && this.element.queryFirst(this.options.draggableElementSelector) !== null) {\n\t      this.draggable = new Draggable(this.element, this.options.draggableElementSelector).initialize();\n\t    }\n\t  }\n\n\t  _handleAJAXFormSuccess(xhr) {\n\t    if (this.options.formSuccessCallback !== null) {\n\t      this.options.formSuccessCallback(this, xhr);\n\t    } else {\n\t      const successURI = this.form.getDataSet()['ajaxSuccessUri'];\n\t      if (successURI !== undefined) {\n\t        window.location = successURI;\n\t      } else {\n\t        window.location.reload();\n\t      }\n\t    }\n\t  }\n\n\t  _handleAJAXFormSubmit(event) {\n\t    Utils.stopEvent(event);\n\n\t    if (this.options.formPreSubmitCallback !== null) {\n\t      this.options.formPreSubmitCallback(this);\n\t    }\n\n\t    new PrimeRequest(this.form.getAttribute('action'), this.form.getAttribute('method'))\n\t        .withDataFromForm(this.form)\n\t        .withSuccessHandler(this._handleAJAXFormSuccess)\n\t        .withErrorHandler(this._handleAJAXFormError)\n\t        .go();\n\t  }\n\n\t  _handleClick(event) {\n\t    if (event.target === Overlay.instance.overlay.domElement &&\n\t        this._isTopDialog() &&\n\t        this.options.dismissible) {\n\t      Utils.stopEvent(event);\n\t      this.close();\n\t    }\n\t  }\n\n\t  _handleKeyDown(event) {\n\t    if (this._isTopDialog() &&\n\t        event.key === 'Escape' &&\n\t        this.options.dismissible) {\n\t      Utils.stopEvent(event);\n\t      this.close();\n\t    }\n\t  }\n\n\t  _initializeDialog() {\n\t    this.element.query(this.options.closeButtonElementSelector).each(function(e) {\n\t      e.addEventListener('click', this._handleCloseClickEvent);\n\t    }.bind(this));\n\n\t    if (this.options.dismissible) {\n\t      document.addEventListener('keydown', this._handleKeyDown);\n\t      document.addEventListener('click', this._handleClick);\n\t    }\n\n\t    // Only set the z-index upon first open\n\t    if (!this.initialized) {\n\t      const highestZIndex = this._determineZIndex();\n\t      Overlay.instance.open(highestZIndex + this.options.zIndexOffset);\n\t      this.element.setStyle('zIndex', (highestZIndex + this.options.zIndexOffset + 10).toString());\n\t      this.element.addClass('open');\n\t    }\n\n\t    // Call the callback before positioning to ensure all changes to the dialog have been made\n\t    if (this.options.callback !== null) {\n\t      this.options.callback(this);\n\t    }\n\n\t    // Setup forms if enabled\n\t    if (this.options.formHandling) {\n\t      this.form = this.element.queryFirst('form').addEventListener('submit', this._handleAJAXFormSubmit);\n\t    }\n\n\t    // Only set the position of the dialog when we first open it, if someone calls setHTML on the dialog we are not resizing it.\n\t    if (!this.initialized) {\n\t      // Position the fixed dialog in the center of the screen\n\t      const windowHeight = PrimeWindow.getInnerHeight();\n\t      const dialogHeight = this.element.getHeight();\n\t      this.element.setTop(((windowHeight - dialogHeight) / 2) - 20);\n\t    }\n\n\t    if (this.options.draggableElementSelector !== null && this.element.queryFirst(this.options.draggableElementSelector) !== null) {\n\t      this.draggable = new Draggable(this.element, this.options.draggableElementSelector).initialize();\n\t    }\n\n\t    this.initialized = true;\n\t  }\n\n\t  _isTopDialog() {\n\t    const highestZIndex = this._determineZIndex();\n\t    const zIndex = parseInt(this.element.getComputedStyle()['zIndex']);\n\t    return (zIndex === highestZIndex);\n\t  }\n\n\t  /**\n\t   * Set the initial options for this widget.\n\t   * @private\n\t   */\n\t  _setInitialOptions() {\n\t    // Defaults\n\t    this.options = {\n\t      additionalClasses: '',\n\t      ajaxRequest: null,\n\t      callback: null,\n\t      className: 'prime-dialog',\n\t      closeButtonElementSelector: '[data-dialog-role=\"close-button\"]',\n\t      closeTimeout: 200,\n\t      dismissible: true,\n\t      draggableElementSelector: '[data-dialog-role=\"draggable\"]',\n\t      formErrorCallback: null,\n\t      formHandling: false,\n\t      formPreSubmitCallback: null,\n\t      formSuccessCallback: null,\n\t      zIndexOffset: 1000\n\t    };\n\t  }\n\t}\n\n\t/*\n\t * Copyright (c) 2013-2017, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\t/**\n\t * @const {{Keys: {BACKSPACE: number, ENTER: number, ESCAPE: number, SPACE: number, TAB: number, LEFT_ARROW: number, UP_ARROW: number, RIGHT_ARROW: number, DOWN_ARROW: number, DELETE: number}} Events}\n\t */\n\tconst Events = {\n\t  Keys: {\n\t    BACKSPACE: 8,\n\t    ENTER: 13,\n\t    ESCAPE: 27,\n\t    SPACE: 32,\n\t    TAB: 9,\n\t    LEFT_ARROW: 37,\n\t    UP_ARROW: 38,\n\t    RIGHT_ARROW: 39,\n\t    DOWN_ARROW: 40,\n\t    DELETE: 46\n\t  }\n\t};\n\n\t/*\n\t * Copyright (c) 2015-2018, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\tconst PrimeDate = {\n\t  DAYS_IN_MONTH: [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],\n\n\t  /**\n\t   * Return the hour in a 12-hour format. AM and PM are not communicated by the returned hour.\n\t   *\n\t   * @param date {Date} The date object to retrieve the hour from.\n\t   * @returns {Number} The hour of the day between 1 and 12.\n\t   */\n\t  getHourOfDay: function(date) {\n\t    return (date.getHours() + 24) % 12 || 12;\n\t  },\n\n\t  /**\n\t   * @param year The year.\n\t   * @returns {boolean} True if this is a leap year, otherwise false.\n\t   */\n\t  isLeapYear: function(year) {\n\t    return !((year % 4) || (!(year % 100) && (year % 400)));\n\t  },\n\n\t  /**\n\t   * Return the number of days in the month.\n\t   * @param year The year, the days in the month may change during a leap year.\n\t   * @param month The month.\n\t   * @returns {Number} The number of days in the month.\n\t   */\n\t  numberOfDaysInMonth: function(year, month) {\n\t    if (month === 1 && this.isLeapYear(year)) {\n\t      return 29;\n\t    } else {\n\t      return PrimeDate.DAYS_IN_MONTH[month];\n\t    }\n\t  },\n\n\t  /**\n\t   * Adds the given number of days to the given Date.\n\t   *\n\t   * @param date {Date} The date to add the days to.\n\t   * @param number {Number} The number of days to add.\n\t   */\n\t  plusDays: function(date, number) {\n\t    if (number === 0) {\n\t      return;\n\t    }\n\n\t    let newDate = date.getDate() + number;\n\t    let numberOfDaysInMonth = PrimeDate.numberOfDaysInMonth(date.getFullYear(), date.getMonth());\n\n\t    if (newDate > 0) {\n\t      while (newDate > numberOfDaysInMonth) {\n\t        PrimeDate.plusMonths(date, 1);\n\t        newDate = newDate - numberOfDaysInMonth;\n\t        numberOfDaysInMonth = PrimeDate.numberOfDaysInMonth(date.getFullYear(), date.getMonth());\n\t      }\n\n\t      date.setDate(newDate);\n\t    } else {\n\t      while (newDate <= 0) {\n\t        PrimeDate.plusMonths(date, -1);\n\t        numberOfDaysInMonth = PrimeDate.numberOfDaysInMonth(date.getFullYear(), date.getMonth());\n\t        newDate = newDate + numberOfDaysInMonth;\n\t      }\n\n\t      date.setDate(newDate);\n\t    }\n\t  },\n\n\t  /**\n\t   * Adds the given number of hours to the given Date. The number can be negative.\n\t   *\n\t   * @param date {Date} The date.\n\t   * @param number {Number} The number of hours to add.\n\t   */\n\t  plusHours: function(date, number) {\n\t    if (number === 0) {\n\t      return;\n\t    }\n\n\t    const deltaDays = parseInt(number / 24);\n\t    PrimeDate.plusDays(date, deltaDays);\n\n\t    const deltaHours = number % 24;\n\t    const newHour = date.getHours() + deltaHours;\n\t    if (newHour > 23) {\n\t      PrimeDate.plusDays(date, 1);\n\t      date.setHours(newHour - 24);\n\t    } else if (newHour < 0) {\n\t      PrimeDate.plusDays(date, -1);\n\t      date.setHours(24 + newHour);\n\t    } else {\n\t      date.setHours(newHour);\n\t    }\n\t  },\n\n\t  /**\n\t   * Adds the given number of minutes to the given Date. The number can be negative.\n\t   *\n\t   * @param date {Date} The date.\n\t   * @param number {Number} The number of minutes to add.\n\t   */\n\t  plusMinutes: function(date, number) {\n\t    if (number === 0) {\n\t      return;\n\t    }\n\n\t    const deltaHours = parseInt(number / 60);\n\t    PrimeDate.plusHours(date, deltaHours);\n\n\t    const deltaMinutes = number % 60;\n\t    const newMinute = date.getMinutes() + deltaMinutes;\n\t    if (newMinute > 60) {\n\t      PrimeDate.plusHours(date, 1);\n\t      date.setMinutes(newMinute - 60);\n\t    } else if (newMinute < 0) {\n\t      PrimeDate.plusHours(date, -1);\n\t      date.setMinutes(60 + newMinute);\n\t    } else {\n\t      date.setMinutes(newMinute);\n\t    }\n\t  },\n\n\t  /**\n\t   * Adds the given number of months to the given Date. The number can be negative.\n\t   *\n\t   * @param date {Date} The date.\n\t   * @param number {Number} The number of months to add.\n\t   */\n\t  plusMonths: function(date, number) {\n\t    if (number === 0) {\n\t      return;\n\t    }\n\n\t    let deltaYears = parseInt(number / 12);\n\t    let deltaMonths = number % 12;\n\t    let currentMonth = date.getMonth();\n\t    const newMonth = currentMonth + deltaMonths;\n\t    if (newMonth < 0) {\n\t      deltaYears--;\n\t      deltaMonths = newMonth;\n\t      currentMonth = 12;\n\t    } else if (newMonth >= 12) {\n\t      deltaYears++;\n\t      deltaMonths = newMonth - 12;\n\t      currentMonth = 0;\n\t    }\n\n\t    date.setYear(date.getFullYear() + deltaYears);\n\t    // If the day is 31 and you set month to 1 (February) it will adjust to March 3 (Feb 28 + 3)\n\t    const adjustedMonth = currentMonth + deltaMonths;\n\t    if (date.getDate() > this.DAYS_IN_MONTH[adjustedMonth]) {\n\t      date.setDate(this.DAYS_IN_MONTH[adjustedMonth]);\n\t    }\n\t    date.setMonth(adjustedMonth);\n\t  },\n\n\t  /**\n\t   * Adds the given number of seconds to the given Date. The number can be negative.\n\t   *\n\t   * @param date {Date} The date.\n\t   * @param number {Number} The number of seconds to add.\n\t   */\n\t  plusSeconds: function(date, number) {\n\t    if (number === 0) {\n\t      return;\n\t    }\n\n\t    const deltaMinutes = parseInt(number / 60);\n\t    PrimeDate.plusMinutes(date, deltaMinutes);\n\n\t    const deltaSeconds = number % 60;\n\t    const newSecond = date.getSeconds() + deltaSeconds;\n\t    if (newSecond > 60) {\n\t      PrimeDate.plusMinutes(date, 1);\n\t      date.setSeconds(newSecond - 60);\n\t    } else if (newSecond < 0) {\n\t      PrimeDate.plusMinutes(date, -1);\n\t      date.setSeconds(60 + newSecond);\n\t    } else {\n\t      date.setSeconds(newSecond);\n\t    }\n\t  },\n\n\t  /**\n\t   * Adds the given number of years to the given Date. The number can be negative.\n\t   *\n\t   * @param date {Date} The date.\n\t   * @param number {Number} The number of years to add.\n\t   */\n\t  plusYears: function(date, number) {\n\t    if (number === 0) {\n\t      return;\n\t    }\n\n\t    date.setFullYear(date.getFullYear() + number);\n\t  },\n\n\t  /**\n\t   * Return a string in simplified extended ISO format (ISO 8601) truncated to only return YYYY-MM-DD.\n\t   *\n\t   * For example: new Date(2015, 6, 4) --> 2015-07-04\n\t   *\n\t   * @param date {Date} The date.\n\t   * @returns {String} A date string in the format YYYY-MM-DD.\n\t   */\n\t  toDateOnlyISOString: function(date) {\n\t    if (date instanceof Date) {\n\t      return date.getFullYear()\n\t          + '-' + Utils.leftPadNumber(date.getMonth() + 1, 2)\n\t          + '-' + Utils.leftPadNumber(date.getDate(), 2);\n\t    }\n\t    throw TypeError('date parameter must be a Date object.');\n\t  }\n\t};\n\n\t/*\n\t * Copyright (c) 2015-2018, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\tconst SHORT_DAY_NAMES = ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'];\n\tconst MONTHS = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n\tconst DATE_SEPARATOR = '/';\n\tconst TIME_SEPARATOR = ':';\n\tconst AM_PM = ['AM', 'PM'];\n\n\tclass DateTimePicker {\n\t  /**\n\t   * Constructs a new DateTimePicker object for the given input element.\n\t   *\n\t   * @param {PrimeElement|Element|EventTarget} element The Prime Element for the DateTimePicker widget.\n\t   * @constructor\n\t   */\n\t  constructor(element) {\n\t    Utils.bindAll(this);\n\n\t    this.element = PrimeElement.wrap(element);\n\t    if (!this.element.is('input')) {\n\t      throw new TypeError('You can only use DateTimePicker with an input element');\n\t    }\n\n\t    this.callback = null;\n\t    this.customFormatHandler = null;\n\t    this._setInitialOptions();\n\t  };\n\n\t  static get SHORT_DAY_NAMES() {\n\t    return SHORT_DAY_NAMES;\n\t  }\n\n\t  static get MONTHS() {\n\t    return MONTHS;\n\t  }\n\n\t  static get DATE_SEPARATOR() {\n\t    return DATE_SEPARATOR;\n\t  }\n\n\t  static get TIME_SEPARATOR() {\n\t    return TIME_SEPARATOR;\n\t  }\n\n\t  static get AM_PM() {\n\t    return AM_PM;\n\t  }\n\n\t  /**\n\t   * Closes the Date Picker widget.\n\t   *\n\t   * @returns {DateTimePicker} This DateTimePicker.\n\t   */\n\t  close() {\n\t    this.datepicker.removeClass('open');\n\n\t    // Pause a bit to cancel focus event and allow transition to play\n\t    setTimeout(function() {\n\t      this.datepicker.hide();\n\t    }.bind(this), this.options.closeTimeout);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Closes the months select box.\n\t   *\n\t   * @returns {DateTimePicker} This DateTimePicker.\n\t   */\n\t  closeMonthsSelect() {\n\t    this.months.removeClass('open');\n\t    setTimeout(function() {\n\t      this.months.hide();\n\t    }.bind(this), this.options.closeTimeout);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Closes the years select box.\n\t   *\n\t   * @returns {DateTimePicker} This DateTimePicker.\n\t   */\n\t  closeYearsSelect() {\n\t    this.years.removeClass('open');\n\t    setTimeout(function() {\n\t      this.years.hide();\n\t    }.bind(this), this.options.closeTimeout);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Destroys the DateTimePicker Widget\n\t   */\n\t  destroy() {\n\t    this.datepicker.removeFromDOM();\n\t    this.element.removeEventListener('click', this._handleInputClick)\n\t        .removeEventListener('focus', this._handleInputClick)\n\t        .removeEventListener('keydown', this._handleInputKey);\n\t    PrimeDocument.removeEventListener('click', this._handleGlobalClick);\n\t    PrimeDocument.removeEventListener('keydown', this._handleGlobalKey);\n\t  }\n\n\t  /**\n\t   * Draws the calendar using the month and year from the given Date object.\n\t   *\n\t   * @param date {Date} The date to draw the calendar for.\n\t   * @return {DateTimePicker} This DateTimePicker.\n\t   */\n\t  drawCalendar(date) {\n\t    const month = date.getMonth();\n\t    const year = date.getFullYear();\n\t    const firstDay = new Date(year, month, 1);\n\t    const firstDayOfMonth = firstDay.getDay();\n\t    const daysInMonth = PrimeDate.numberOfDaysInMonth(year, month);\n\t    const used = firstDayOfMonth + daysInMonth;\n\t    const weeksInMonth = Math.ceil(used / 7);\n\n\t    let rows = '';\n\t    let startDay = 1;\n\t    for (let i = 0; i < weeksInMonth; i++) {\n\t      const startDayOfWeek = i === 0 ? firstDayOfMonth : 0;\n\t      rows += this._buildCalendarWeek(date, startDayOfWeek, startDay, daysInMonth);\n\t      startDay += 7 - startDayOfWeek; // increment by 7 adjusted by a week day of week offset\n\t    }\n\n\t    this.calendarBody.setHTML(rows);\n\n\t    // update data- attributes\n\t    this.monthDisplay.setDataAttribute('month', month);\n\t    this.yearDisplay.setDataAttribute('year', year);\n\n\t    // update text\n\t    this.monthDisplay.setTextContent(DateTimePicker.MONTHS[month]);\n\t    this.yearDisplay.setTextContent(year);\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Rebuilds the entire widget using the date value. Even if the user has moved to a different month display, this will\n\t   * rebuild the table completely.\n\t   *\n\t   * @returns {DateTimePicker} This DateTimePicker.\n\t   */\n\t  initialize() {\n\t    const value = this.element.getValue();\n\t    if (value === '' || value === null) {\n\t      this.date = new Date();\n\t    } else {\n\t      this.date = new Date(value);\n\t    }\n\n\t    this.date.getUTCFullYear();\n\t    const timeSeparator = `<span>${DateTimePicker.TIME_SEPARATOR}</span>`;\n\t    const dateSeparator = `<span>${DateTimePicker.DATE_SEPARATOR}</span>`;\n\t    let html =\n\t        `<div class=\"${this.options.className }\">\n  <header>\n    <span class=\"prev\">&#9664;</span>\n    <span class=\"month\"></span>\n    <span class=\"year\"></span>\n    <span class=\"next\">&#9654;</span>\n  </header>\n  <table>\n    <thead>\n      <tr>\n        <th>${DateTimePicker.SHORT_DAY_NAMES[0]}</th>\n        <th>${DateTimePicker.SHORT_DAY_NAMES[1]}</th>\n        <th>${DateTimePicker.SHORT_DAY_NAMES[2]}</th>\n        <th>${DateTimePicker.SHORT_DAY_NAMES[3]}</th>\n        <th>${DateTimePicker.SHORT_DAY_NAMES[4]}</th>\n        <th>${DateTimePicker.SHORT_DAY_NAMES[5]}</th>\n        <th>${DateTimePicker.SHORT_DAY_NAMES[6]}</th>\n      </tr>\n    </thead>\n    <tbody>\n    </tbody>\n  </table>\n  <div class=\"inputs\">\n    <div class=\"date\">\n      <input size=\"2\" maxlength=\"2\" type=\"text\" name=\"month\" autocomplete=\"off\"/>${dateSeparator}\n      <input size=\"2\" maxlength=\"2\" type=\"text\" name=\"day\" autocomplete=\"off\"/>${dateSeparator}\n      <input size=\"4\" maxlength=\"4\" type=\"text\" name=\"year\" autocomplete=\"off\"/>\n    </div>\n    <div class=\"time\">\n      <input size=\"2\" maxlength=\"2\" type=\"text\" name=\"hour\" autocomplete=\"off\"/>${timeSeparator}\n      <input size=\"2\" maxlength=\"2\" type=\"text\" name=\"minute\" autocomplete=\"off\"/>${timeSeparator}\n      <input size=\"2\" maxlength=\"2\" type=\"text\" name=\"second\" autocomplete=\"off\"/>\n      <input size=\"2\" maxlength=\"2\" type=\"text\" name=\"am_pm\" autocomplete=\"off\"/>\n    </div>\n  </div>\n</div>`;\n\t    PrimeDocument.appendHTML(html);\n\t    this.datepicker = PrimeDocument.queryLast('.' + this.options.className).hide();\n\t    this.element.addEventListener('click', this._handleInputClick);\n\t    this.element.addEventListener('focus', this._handleInputClick);\n\t    this.element.addEventListener('keydown', this._handleInputKey);\n\n\t    this.calendarBody = this.datepicker.queryFirst('table tbody').addEventListener('click', this._handleDayClick);\n\t    this.monthDisplay = this.datepicker.queryFirst('header .month').addEventListener('click', this._handleMonthExpand);\n\t    this.yearDisplay = this.datepicker.queryFirst('header .year').addEventListener('click', this._handleYearExpand);\n\n\t    this.time = this.datepicker.queryFirst('.time');\n\t    this.inputs = this.datepicker.queryFirst('div.inputs');\n\t    this.hourInput = this.inputs.queryFirst('input[name=hour]').addEventListener('change', this._handleDateTimeChange).addEventListener('keydown', this._handleHourKey);\n\t    this.minuteInput = this.inputs.queryFirst('input[name=minute]').addEventListener('change', this._handleDateTimeChange).addEventListener('keydown', this._handleMinuteKey);\n\t    this.secondInput = this.inputs.queryFirst('input[name=second]').addEventListener('change', this._handleDateTimeChange).addEventListener('keydown', this._handleSecondKey);\n\t    this.ampmInput = this.inputs.queryFirst('input[name=am_pm]').addEventListener('keydown', this._handleAmPmKey);\n\t    this.monthInput = this.inputs.queryFirst('input[name=month]').setValue(this.date.getMonth() + 1).addEventListener('change', this._handleDateTimeChange).addEventListener('keydown', this._handleMonthKey);\n\t    this.dayInput = this.inputs.queryFirst('input[name=day]').setValue(this.date.getDate()).addEventListener('change', this._handleDateTimeChange).addEventListener('keydown', this._handleDayKey);\n\t    this.yearInput = this.inputs.queryFirst('input[name=year]').setValue(this.date.getFullYear()).addEventListener('change', this._handleDateTimeChange).addEventListener('keydown', this._handleYearKey);\n\n\t    this.datepicker.queryFirst('header .next').addEventListener('click', this._handleNextMonth);\n\t    this.datepicker.queryFirst('header .prev').addEventListener('click', this._handlePreviousMonth);\n\n\t    PrimeDocument.addEventListener('click', this._handleGlobalClick);\n\t    PrimeDocument.addEventListener('keydown', this._handleGlobalKey);\n\n\t    // Setup months dropdown\n\t    html = '<div class=\"months\">';\n\t    for (let i = 0; i < DateTimePicker.MONTHS.length; i++) {\n\t      html += `<div data-month=\"${i}\">${DateTimePicker.MONTHS[i]}</div>`;\n\t    }\n\t    html += '</div>';\n\t    this.datepicker.appendHTML(html);\n\t    this.months = this.datepicker.queryFirst('.months');\n\t    this.months.hide();\n\t    this.months.getChildren().each(function(month) {\n\t      month.addEventListener('click', function() {\n\t        this.setMonth(parseInt(month.getDataAttribute('month')));\n\t        this.closeMonthsSelect();\n\t      }.bind(this));\n\t    }.bind(this));\n\n\t    // Setup year dropdown\n\t    html = '<div class=\"years\">';\n\t    const startYear = this.date.getFullYear() - 10;\n\t    const endYear = this.date.getFullYear() + 10;\n\t    for (let i = startYear; i < endYear; i++) {\n\t      html += `<div data-year=\"${i}\">${i}</div>`;\n\t    }\n\t    html += '</div>';\n\t    this.datepicker.appendHTML(html);\n\t    this.years = this.datepicker.queryFirst('.years');\n\t    this.years.hide();\n\t    this.years.getChildren().each(function(year) {\n\t      year.addEventListener('click', function() {\n\t        this.setYear(parseInt(year.getDataAttribute('year')));\n\t        this.closeYearsSelect();\n\t      }.bind(this));\n\t    }.bind(this));\n\n\t    this._rebuild();\n\n\t    if (this.customFormatHandler !== null) {\n\t      this.element.setValue(this.customFormatHandler.call(null, this.date));\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * @returns {Date} Return the current value of the time picker.\n\t   */\n\t  getDate() {\n\t    return new Date(this.date.getTime());\n\t  }\n\n\t  /**\n\t   * Moves the DateTimePicker to the next month and redraws the calendar.\n\t   *\n\t   * @returns {DateTimePicker} This DateTimePicker.\n\t   */\n\t  nextMonth() {\n\t    const newDate = new Date(this.date);\n\t    newDate.setDate(1); // Set the day to 1 to keep us from wrapping months on the 30 and 31st.\n\t    newDate.setMonth(parseInt(this.monthDisplay.getDataAttribute('month')));\n\t    newDate.setFullYear(parseInt(this.yearDisplay.getDataAttribute('year')));\n\t    PrimeDate.plusMonths(newDate, 1);\n\t    this.drawCalendar(newDate);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Opens the Date Picker widget.\n\t   *\n\t   * @returns {DateTimePicker} This DateTimePicker.\n\t   */\n\t  open() {\n\t    this.datepicker.setLeft(this.element.getLeft());\n\t    this.datepicker.setTop(this.element.getAbsoluteTop() + this.element.getHeight() + 8);\n\t    this.datepicker.show();\n\t    this.datepicker.addClass('open');\n\n\t    const zIndex = this.element.getRelativeZIndex();\n\t    this.datepicker.setStyle('zIndex', zIndex + 10);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Opens the month select box.\n\t   */\n\t  openMonthSelect() {\n\t    this.closeYearsSelect();\n\n\t    this.months.setLeft(this.monthDisplay.getOffsetLeft() - 5);\n\t    this.months.setTop(this.monthDisplay.getOffsetTop() - 5);\n\t    this.months.setStyle('zIndex', this.monthDisplay.getRelativeZIndex() + 10);\n\t    this.months.show();\n\t    this.months.addClass('open');\n\n\t    const currentMonth = this.months.queryFirst('[data-month=\"' + this.date.getMonth() + '\"]');\n\t    this.months.getChildren().each(function(month) {\n\t      month.removeClass('selected');\n\t    });\n\t    currentMonth.addClass('selected');\n\t  }\n\n\t  /**\n\t   * Opens the year select box.\n\t   */\n\t  openYearSelect() {\n\t    this.closeMonthsSelect();\n\n\t    this.years.setLeft(this.yearDisplay.getOffsetLeft() - 5);\n\t    this.years.setTop(this.yearDisplay.getOffsetTop() - 5);\n\t    this.years.setStyle('zIndex', this.yearDisplay.getRelativeZIndex() + 10);\n\t    this.years.show();\n\t    this.years.addClass('open');\n\n\t    const currentYear = this.years.queryFirst('[data-year=\"' + this.date.getFullYear() + '\"]');\n\t    this.years.getChildren().each(function(year) {\n\t      year.removeClass('selected');\n\t    });\n\t    currentYear.addClass('selected');\n\t  }\n\n\t  /**\n\t   * Moves the DateTimePicker to the previous month and redraws the calendar.\n\t   *\n\t   * @returns {DateTimePicker} This DateTimePicker.\n\t   */\n\t  previousMonth() {\n\t    const newDate = new Date(this.date);\n\t    newDate.setDate(1); // Set to 1 until month has been set\n\t    newDate.setMonth(parseInt(this.monthDisplay.getDataAttribute('month')));\n\t    newDate.setFullYear(parseInt(this.yearDisplay.getDataAttribute('year')));\n\t    PrimeDate.plusMonths(newDate, -1);\n\t    this.drawCalendar(newDate);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the date of the DateTimePicker and redraws the calendar to the month for the date.\n\t   *\n\t   * @param {Date} newDate The new date.\n\t   * @returns {DateTimePicker} This DateTimePicker.\n\t   */\n\t  setDate(newDate) {\n\t    this.date = newDate;\n\n\t    if (this.customFormatHandler !== null) {\n\t      this.element.setValue(this.customFormatHandler.call(null, this.date));\n\t    } else {\n\t      if (this.options.dateOnly) {\n\t        this.element.setValue(PrimeDate.toDateOnlyISOString(newDate));\n\t      } else {\n\t        this.element.setValue(newDate.toISOString());\n\t      }\n\t    }\n\n\t    this._rebuild();\n\n\t    if (this.callback !== null) {\n\t      this.callback(this);\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * @param {number} month The month. A 0 based number between 0 (January) and 11 (December).\n\t   * @returns {DateTimePicker}\n\t   */\n\t  setMonth(month) {\n\t    let currentYear = parseInt(this.yearDisplay.getDataAttribute('year'));\n\t    if (month < 0) {\n\t      month = 11;\n\t      currentYear--;\n\t    } else if (month > 11) {\n\t      currentYear++;\n\t      month = 0;\n\t    }\n\n\t    this.date.setMonth(month);\n\t    this.date.setYear(currentYear);\n\t    this.setDate(this.date);\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   *\n\t   * @param {number} year The year.\n\t   * @returns {DateTimePicker}\n\t   */\n\t  setYear(year) {\n\t    this.yearDisplay.setDataAttribute('year', year);\n\t    this.yearDisplay.setTextContent(year);\n\t    this.date.setYear(year);\n\t    this.setDate(this.date);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the callback handler that is called with the DateTimePicker's value is changed.\n\t   *\n\t   * @param callback {Function} The callback function.\n\t   * @return {DateTimePicker} This.\n\t   */\n\t  withCallback(callback) {\n\t    this.callback = callback;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the class name for the main div of the date time picker.\n\t   *\n\t   * @param className {string} The class name.\n\t   * @returns {DateTimePicker} This.\n\t   */\n\t  withClassName(className) {\n\t    this.options.className = className;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the timeout used in the close method to allow for transitions.\n\t   *\n\t   * @param timeout {int} The timeout.\n\t   * @returns {DateTimePicker}\n\t   */\n\t  withCloseTimeout(timeout) {\n\t    this.options.closeTimeout = timeout;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets a custom format handler responsible for formatting the date string that will be set into the input field.\n\t   * When not defined the default behavior will be used.\n\t   *\n\t   * @param formatHandler {Function} The handler function.\n\t   * @return {DateTimePicker} This.\n\t   */\n\t  withCustomFormatHandler(formatHandler) {\n\t    this.customFormatHandler = formatHandler;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Render the DateTimePicker w/out the time picker. Only the calendar will be displayed and the input field will be updated with date only.\n\t   *\n\t   *\n\t   * @returns {DateTimePicker} This DateTimePicker.\n\t   */\n\t  withDateOnly() {\n\t    this.options.dateOnly = true;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Set more than one option at a time by providing a map of key value pairs. This is considered an advanced\n\t   * method to set options on the widget. The caller needs to know what properties are valid in the options object.\n\t   *\n\t   * @param {Object} options Key value pair of configuration options.\n\t   * @returns {DateTimePicker} This DateTimePicker.\n\t   */\n\t  withOptions(options) {\n\t    if (!Utils.isDefined(options)) {\n\t      return this;\n\t    }\n\n\t    for (let option in options) {\n\t      if (options.hasOwnProperty(option)) {\n\t        this.options[option] = options[option];\n\t      }\n\t    }\n\t    return this;\n\t  }\n\n\t  /* ===================================================================================================================\n\t   * Private methods\n\t   * ===================================================================================================================*/\n\n\t  /**\n\t   * Build the HTML for a single calendar week.\n\t   *\n\t   * @param date {Date} The date to build the calendar week based on.\n\t   * @param startDayOfWeek {Number} The day of the week of this week begins. A 0 based number between 0 and 6.\n\t   * @param startDayOfMonth {Number} The day of the month this week begins. A number between 1 and 31.\n\t   * @param daysInMonth {Number} The number of days in this calendar month.\n\t   * @returns {string} The HTML for this week.\n\t   * @private\n\t   */\n\t  _buildCalendarWeek(date, startDayOfWeek, startDayOfMonth, daysInMonth) {\n\t    const daysInPreviousMonth = new Date(date.getFullYear(), date.getMonth(), 0).getDate();\n\t    let startDayOfPreviousMonth = daysInPreviousMonth - startDayOfWeek + 1;\n\t    let startDayOfNextMonth = 1;\n\n\t    let row = '<tr>';\n\t    let emptyColumns = 0;\n\t    const year = date.getFullYear();\n\t    const month = date.getMonth();\n\n\t    for (let i = 0; i < 7; i++) {\n\t      const dayOfWeek = startDayOfMonth + i;\n\t      // Days of the previous month\n\t      if (dayOfWeek <= startDayOfWeek) {\n\t        row += '<td><a class=\"inactive\" href=\"#\" data-year=\"' + year + '\" data-month=\"' + (month - 1) + '\" data-day=\"' + startDayOfPreviousMonth + '\">' + startDayOfPreviousMonth + '</a></td>';\n\t        startDayOfPreviousMonth++;\n\t        emptyColumns++;\n\t      } else if (dayOfWeek > daysInMonth) {\n\t        // Days of the next month\n\t        row += '<td><a class=\"inactive\" href=\"#\" data-year=\"' + year + '\" data-month=\"' + month + '\" data-day=\"' + dayOfWeek + '\">' + startDayOfNextMonth + '</a></td>';\n\t        startDayOfNextMonth++;\n\t      } else {\n\t        // Days in the current month\n\t        const day = dayOfWeek - emptyColumns;\n\t        const selected = this.date.getDate() === day && this.date.getMonth() === month;\n\t        row += '<td><a ' + (selected ? 'class=\"selected\"' : '') + 'href=\"#\" data-year=\"' + year + '\" data-month=\"' + month + '\" data-day=\"' + day + '\">' + day + '</a></td>';\n\t      }\n\t    }\n\n\t    row += '</tr>';\n\t    return row;\n\t  }\n\n\t  // noinspection JSMethodCanBeStatic\n\t  /**\n\t   * Clamp the value between the minimum and maximum values.\n\t   *\n\t   * @param {Number} min the minimum number value.\n\t   * @param {Number} max The maximum number value.\n\t   * @param {Number} value The value to clamp.\n\t   * @returns {Number} The resulting value, either the min, max or actual value if not out of bounds.\n\t   * @private\n\t   */\n\t  _clamp(min, max, value) {\n\t    return Math.max(min, Math.min(value, max));\n\t  }\n\n\t  /**\n\t   * Handles when the AM/PM element is selected and the user hits a key. If the user hits A, this changes to AM. If the\n\t   * user hits P, this changes to PM. If the use hits the up or down arrows, this toggles between AM and PM.\n\t   *\n\t   * @param {KeyboardEvent} event The keyboard event.\n\t   * @private\n\t   */\n\t  _handleAmPmKey(event) {\n\t    if (event.keyCode === Events.Keys.TAB) {\n\t      Utils.stopEvent(event);\n\t      if (event.shiftKey) {\n\t        this.secondInput.domElement.setSelectionRange(0, this.secondInput.getValue().length);\n\t        this.secondInput.focus();\n\t      } else {\n\t        this.monthInput.domElement.setSelectionRange(0, this.monthInput.getValue().length);\n\t        this.monthInput.focus();\n\t      }\n\t      return;\n\t    }\n\n\t    // Decode the key event\n\t    const current = this.ampmInput.getValue();\n\t    if (event.keyCode === 65) {\n\t      // User hit A\n\t      if (current === DateTimePicker.AM_PM[1]) {\n\t        PrimeDate.plusHours(this.date, -12);\n\t      }\n\t    } else if (event.keyCode === 80) {\n\t      // User hit P\n\t      if (current === DateTimePicker.AM_PM[0]) {\n\t        PrimeDate.plusHours(this.date, 12);\n\t      }\n\t    } else if (event.keyCode === Events.Keys.UP_ARROW || event.keyCode === Events.Keys.DOWN_ARROW) {\n\t      // User hit up or down arrow\n\t      if (current === DateTimePicker.AM_PM[0]) {\n\t        PrimeDate.plusHours(this.date, 12);\n\t      } else if (current === DateTimePicker.AM_PM[1]) {\n\t        PrimeDate.plusHours(this.date, -12);\n\t      }\n\t    } else if (event.keyCode === Events.Keys.ENTER || event.keyCode === Events.Keys.ESCAPE) {\n\t      return;\n\t    }\n\n\t    this.setDate(this.date);\n\t    this.ampmInput.domElement.setSelectionRange(0, this.ampmInput.getValue().length);\n\t    Utils.stopEvent(event);\n\t  }\n\n\t  /**\n\t   * Handle date/time change events. This pulls the values from the 3 date fields and makes a new Date. Then it calls\n\t   * {@link #setDate(Date)}.\n\t   *\n\t   * @param {KeyboardEvent} event The keyboard event.\n\t   * @private\n\t   */\n\t  _handleDateTimeChange(event) {\n\t    Utils.stopEvent(event);\n\t    const newDate = new Date();\n\t    const hours = this._clamp(1, 12, parseInt(this.hourInput.getValue()));\n\t    if (this.ampmInput.getValue() === DateTimePicker.AM_PM[0]) {\n\t      if (hours === 12) {\n\t        newDate.setHours(0);\n\t      } else {\n\t        newDate.setHours(hours);\n\t      }\n\t    } else {\n\t      if (hours === 12) {\n\t        newDate.setHours(12);\n\t      } else {\n\t        newDate.setHours(hours + 12);\n\t      }\n\t    }\n\n\t    const seconds = this._clamp(0, 59, parseInt(this.secondInput.getValue()));\n\t    const minutes = this._clamp(0, 59, parseInt(this.minuteInput.getValue()));\n\n\t    newDate.setSeconds(seconds);\n\t    newDate.setMinutes(minutes);\n\t    newDate.setDate(1); // Set to 1 until month has been set\n\t    newDate.setMonth(parseInt(this.monthInput.getValue()) - 1);\n\t    newDate.setDate(parseInt(this.dayInput.getValue()));\n\t    newDate.setYear(parseInt(this.yearInput.getValue()));\n\n\t    this.setDate(newDate);\n\t  }\n\n\t  /**\n\t   * Handle the click on a day.\n\t   *\n\t   * @parameter {MouseEvent} event The click event.\n\t   * @private\n\t   */\n\t  _handleDayClick(event) {\n\t    Utils.stopEvent(event);\n\t    let dayElement = new PrimeElement(event.target);\n\t    if (!dayElement.is('a')) {\n\t      dayElement = dayElement.queryFirst('a');\n\t    }\n\n\t    const newDate = new Date(this.date);\n\t    newDate.setDate(1); // Set to 1 until month has been set\n\t    newDate.setFullYear(parseInt(dayElement.getDataAttribute('year')));\n\t    newDate.setMonth(parseInt(dayElement.getDataAttribute('month')));\n\t    newDate.setDate(parseInt(dayElement.getDataAttribute('day')));\n\t    this.setDate(newDate);\n\t  }\n\n\t  /**\n\t   * Handles when a key is click in the day input field so that tab and shift tab work properly.\n\t   * <p>\n\t   * Also handles up and down arrow to increment and decrement the day.\n\t   *\n\t   * @param {KeyboardEvent} event The key event.\n\t   * @private\n\t   */\n\t  _handleDayKey(event) {\n\t    if (event.keyCode === Events.Keys.UP_ARROW) {\n\t      PrimeDate.plusDays(this.date, 1);\n\t      this.setDate(this.date);\n\t      this.dayInput.domElement.setSelectionRange(0, this.dayInput.getValue().length);\n\t      Utils.stopEvent(event);\n\t    } else if (event.keyCode === Events.Keys.DOWN_ARROW) {\n\t      Utils.stopEvent(event);\n\t      PrimeDate.plusDays(this.date, -1);\n\t      this.setDate(this.date);\n\t      this.dayInput.domElement.setSelectionRange(0, this.dayInput.getValue().length);\n\t    } else if (event.keyCode === Events.Keys.ENTER) {\n\t      this.date.setDate(parseInt(this.dayInput.getValue()));\n\t    }\n\t  }\n\n\t  /**\n\t   * Handles a global click event. This determines if the click was outside of the DateTimePicker and closes it.\n\t   *\n\t   * @param {MouseEvent} event The click event.\n\t   * @private\n\t   */\n\t  _handleGlobalClick(event) {\n\t    // Skip this function completely if they clicked the input field\n\t    if (event.target === this.element.domElement) {\n\t      return;\n\t    }\n\n\t    const top = this.datepicker.getTop();\n\t    const bottom = this.datepicker.getBottom();\n\t    const left = this.datepicker.getLeft();\n\t    const right = this.datepicker.getRight();\n\t    if (this.datepicker.isVisible() && (event.x < left || event.x > right || event.y < top || event.y > bottom)) {\n\t      this.close();\n\t      this.closeYearsSelect();\n\t      this.closeMonthsSelect();\n\t    } else {\n\t      if (this.years.isVisible()) {\n\t        this.closeYearsSelect();\n\t      }\n\t      if (this.months.isVisible()) {\n\t        this.closeMonthsSelect();\n\t      }\n\t    }\n\t  }\n\n\t  /**\n\t   * Handles a global key event. This determines if the DateTimePicker is open and if enter or escape was hit.\n\t   *\n\t   * @param {KeyboardEvent} event The key event.\n\t   * @private\n\t   */\n\t  _handleGlobalKey(event) {\n\t    // Skip this function completely if the DateTimePicker isn't open\n\t    if (!this.datepicker.isVisible()) {\n\t      return;\n\t    }\n\n\t    if (event.keyCode === Events.Keys.ENTER) {\n\t      Utils.stopEvent(event);\n\t      this.setDate(this.date);\n\t      this.close();\n\t      this.element.focus();\n\t    } else if (event.keyCode === Events.Keys.ESCAPE) {\n\t      this.close();\n\t      this.element.focus();\n\t    }\n\t  }\n\n\t  /**\n\t   * Handles when a key is click in the hours input field so that tab and shift tab work properly.\n\t   * <p>\n\t   * Also handles up and down arrow to increment and decrement the hour.\n\t   *\n\t   * @param {KeyboardEvent} event The key event.\n\t   * @private\n\t   */\n\t  _handleHourKey(event) {\n\t    if (event.keyCode === Events.Keys.UP_ARROW) {\n\t      Utils.stopEvent(event);\n\t      PrimeDate.plusHours(this.date, 1);\n\t      this.setDate(this.date);\n\t      this.hourInput.domElement.setSelectionRange(0, this.hourInput.getValue().length);\n\t    } else if (event.keyCode === Events.Keys.DOWN_ARROW) {\n\t      Utils.stopEvent(event);\n\t      PrimeDate.plusHours(this.date, -1);\n\t      this.setDate(this.date);\n\t      this.hourInput.domElement.setSelectionRange(0, this.hourInput.getValue().length);\n\t    } else if (event.keyCode === Events.Keys.ENTER) {\n\t      this.date.setHours(parseInt(this.hourInput.getValue()));\n\t    }\n\t  }\n\n\t  /**\n\t   * Handle the click event for the input date field. If the DateTimePicker is hidden this will call the {@link #show()}\n\t   * function.\n\t   *\n\t   * @returns {boolean} Always true.\n\t   * @private\n\t   */\n\t  _handleInputClick() {\n\t    if (!this.datepicker.isVisible()) {\n\t      this.open();\n\t      this.monthInput.domElement.setSelectionRange(0, this.monthInput.getValue().length);\n\t      this.monthInput.focus();\n\t    }\n\t  }\n\n\t  /**\n\t   * Handle the key event for the input date field. If the user hits tab or shift-tab, this moves the focus to the\n\t   * nested inputs.\n\t   *\n\t   * @param {KeyboardEvent} event The keyboard event.\n\t   * @private\n\t   */\n\t  _handleInputKey(event) {\n\t    if (this.datepicker.isVisible() && event.keyCode === Events.Keys.TAB) {\n\t      Utils.stopEvent(event);\n\t      if (event.shiftKey) {\n\t        this.ampmInput.domElement.setSelectionRange(0, this.ampmInput.getValue().length);\n\t        this.ampmInput.focus();\n\t      } else {\n\t        this.monthInput.domElement.setSelectionRange(0, this.monthInput.getValue().length);\n\t        this.monthInput.focus();\n\t      }\n\t    }\n\t  }\n\n\t  /**\n\t   * Handle the key down event and capture the up and down arrow key to increment and decrement the minute.\n\n\t   * @param {KeyboardEvent} event The key event.\n\t   * @private\n\t   */\n\t  _handleMinuteKey(event) {\n\t    if (event.keyCode === Events.Keys.UP_ARROW) {\n\t      Utils.stopEvent(event);\n\t      PrimeDate.plusMinutes(this.date, 1);\n\t      this.setDate(this.date);\n\t      this.minuteInput.domElement.setSelectionRange(0, this.minuteInput.getValue().length);\n\t    } else if (event.keyCode === Events.Keys.DOWN_ARROW) {\n\t      Utils.stopEvent(event);\n\t      PrimeDate.plusMinutes(this.date, -1);\n\t      this.setDate(this.date);\n\t      this.minuteInput.domElement.setSelectionRange(0, this.minuteInput.getValue().length);\n\t    } else if (event.keyCode === Events.Keys.ENTER) {\n\t      this.date.setMinutes(parseInt(this.minuteInput.getValue()));\n\t    }\n\t  }\n\n\t  /**\n\t   * Handles the click on the month to open the month select.\n\t   *\n\t   * @private\n\t   */\n\t  _handleMonthExpand(event) {\n\t    Utils.stopEvent(event);\n\t    this.openMonthSelect();\n\t  }\n\n\t  /**\n\t   * Handles when a key is click in the month input field so that tab and shift tab work properly.\n\t   * <p>\n\t   * Also handles up and down arrow to increment and decrement the month.\n\t   *\n\t   * @param {KeyboardEvent} event The key event.\n\t   * @private\n\t   */\n\t  _handleMonthKey(event) {\n\t    if (event.keyCode === Events.Keys.TAB && event.shiftKey) {\n\t      Utils.stopEvent(event);\n\t      if (this.options.dateOnly) {\n\t        this.yearInput.domElement.setSelectionRange(0, this.yearInput.getValue().length);\n\t        this.yearInput.focus();\n\t      } else {\n\t        this.ampmInput.domElement.setSelectionRange(0, this.ampmInput.getValue().length);\n\t        this.ampmInput.focus();\n\t      }\n\t      return;\n\t    }\n\n\t    if (event.keyCode === Events.Keys.UP_ARROW) {\n\t      Utils.stopEvent(event);\n\t      PrimeDate.plusMonths(this.date, 1);\n\t      this.setDate(this.date);\n\t      this.monthInput.domElement.setSelectionRange(0, this.monthInput.getValue().length);\n\t    } else if (event.keyCode === Events.Keys.DOWN_ARROW) {\n\t      Utils.stopEvent(event);\n\t      PrimeDate.plusMonths(this.date, -1);\n\t      this.setDate(this.date);\n\t      this.monthInput.domElement.setSelectionRange(0, this.monthInput.getValue().length);\n\t    } else if (event.keyCode === Events.Keys.ENTER) {\n\t      this.date.setMonth(parseInt(this.monthInput.getValue()) - 1);\n\t    }\n\t  }\n\n\t  /**\n\t   * Handle the next month button click.\n\t   *\n\t   * @param {MouseEvent} event The mouse event.\n\t   * @private\n\t   */\n\t  _handleNextMonth(event) {\n\t    Utils.stopEvent(event);\n\t    this.nextMonth();\n\t  }\n\n\t  /**\n\t   * Handle the previous month button click.\n\t   *\n\t   * @param {MouseEvent} event The mouse event.\n\t   * @private\n\t   */\n\t  _handlePreviousMonth(event) {\n\t    Utils.stopEvent(event);\n\t    this.previousMonth();\n\t  }\n\n\t  /**\n\t   * Handle the key down event and capture the up and down arrow key to increment and decrement the second.\n\n\t   * @param {KeyboardEvent} event The key event.\n\t   * @private\n\t   */\n\t  _handleSecondKey(event) {\n\t    if (event.keyCode === Events.Keys.UP_ARROW) {\n\t      Utils.stopEvent(event);\n\t      PrimeDate.plusSeconds(this.date, 1);\n\t      this.setDate(this.date);\n\t      this.secondInput.domElement.setSelectionRange(0, this.secondInput.getValue().length);\n\t    } else if (event.keyCode === Events.Keys.DOWN_ARROW) {\n\t      Utils.stopEvent(event);\n\t      PrimeDate.plusSeconds(this.date, -1);\n\t      this.setDate(this.date);\n\t      this.secondInput.domElement.setSelectionRange(0, this.secondInput.getValue().length);\n\t    } else if (event.keyCode === Events.Keys.ENTER) {\n\t      this.date.setSeconds(parseInt(this.secondInput.getValue()));\n\t    }\n\t  }\n\n\t  /**\n\t   * Handles the click on the year to open the year select.\n\t   *\n\t   * @private\n\t   */\n\t  _handleYearExpand(event) {\n\t    Utils.stopEvent(event);\n\t    this.openYearSelect();\n\t  }\n\n\t  /**\n\t   * Handles when a key is click in the year input field so that tab and shift tab work properly.\n\t   * <p>\n\t   * Also handles up and down arrow to increment and decrement the year.\n\t   *\n\t   * @param {KeyboardEvent} event The key event.\n\t   * @private\n\t   */\n\t  _handleYearKey(event) {\n\t    if (event.keyCode === Events.Keys.UP_ARROW) {\n\t      Utils.stopEvent(event);\n\t      PrimeDate.plusYears(this.date, 1);\n\t      this.setDate(this.date);\n\t      this.yearInput.domElement.setSelectionRange(0, this.yearInput.getValue().length);\n\t    } else if (event.keyCode === Events.Keys.DOWN_ARROW) {\n\t      Utils.stopEvent(event);\n\t      PrimeDate.plusYears(this.date, -1);\n\t      this.setDate(this.date);\n\t      this.yearInput.domElement.setSelectionRange(0, this.yearInput.getValue().length);\n\t    } else if (event.keyCode === Events.Keys.TAB && this.options.dateOnly) {\n\t      Utils.stopEvent(event);\n\t      if (event.shiftKey) {\n\t        this.dayInput.domElement.setSelectionRange(0, this.dayInput.getValue().length);\n\t        this.dayInput.focus();\n\t      } else {\n\t        this.monthInput.domElement.setSelectionRange(0, this.monthInput.getValue().length);\n\t        this.monthInput.focus();\n\t      }\n\t    } else if (event.keyCode === Events.Keys.ENTER) {\n\t      this.date.setFullYear(parseInt(this.yearInput.getValue()));\n\t    }\n\t  }\n\n\t  /**\n\t   * Rebuilds the HTML of the DateTimePicker.\n\t   * @private\n\t   */\n\t  _rebuild() {\n\t    this.drawCalendar(this.date);\n\t    this._refreshInputs();\n\n\t    if (this.options.dateOnly) {\n\t      this.time.hide();\n\t    }\n\t  }\n\n\t  /**\n\t   * Refresh the time inputs.\n\t   *\n\t   * @private\n\t   */\n\t  _refreshInputs() {\n\t    // Set Time -- assuming 12-hour time for the input fields and ISO 24-hour time for the field\n\t    const hours = PrimeDate.getHourOfDay(this.date);\n\t    this.hourInput.setValue(hours);\n\n\t    const minutes = this.date.getMinutes();\n\t    this.minuteInput.setValue((\"00\" + minutes).slice(-2));\n\n\t    const seconds = this.date.getSeconds();\n\t    this.secondInput.setValue((\"00\" + seconds).slice(-2));\n\n\t    if (this.date.getHours() >= 12) {\n\t      this.ampmInput.setValue(DateTimePicker.AM_PM[1]);\n\t    } else {\n\t      this.ampmInput.setValue(DateTimePicker.AM_PM[0]);\n\t    }\n\n\t    this.monthInput.setValue(this.date.getMonth() + 1);\n\t    this.dayInput.setValue(this.date.getDate());\n\t    this.yearInput.setValue(this.date.getFullYear());\n\t  }\n\n\t  /**\n\t   * Set the initial options for this widget.\n\t   * @private\n\t   */\n\t  _setInitialOptions() {\n\t    // Defaults\n\t    this.options = {\n\t      className: 'prime-date-picker',\n\t      closeTimeout: 200,\n\t      dateOnly: false\n\t    };\n\n\t    const userOptions = Utils.dataSetToOptions(this.element);\n\t    for (let option in userOptions) {\n\t      if (userOptions.hasOwnProperty(option)) {\n\t        this.options[option] = userOptions[option];\n\t      }\n\t    }\n\t  }\n\t}\n\n\t/*\n\t * Copyright (c) 2017, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\n\tclass Dismissable {\n\t  /**\n\t   * Constructs a new Dismissable object for the given element.\n\t   *\n\t   * @param {PrimeElement|Element|EventTarget} element The Element for the Dismissable widget.\n\t   * @param {PrimeElement|Element|EventTarget} dismissButton The Element for the Dismissable button.\n\t   * @constructor\n\t   */\n\t  constructor(element, dismissButton) {\n\t    Utils.bindAll(this);\n\n\t    this.element = PrimeElement.wrap(element);\n\t    this.dismissButton = dismissButton;\n\t    this._setInitialOptions();\n\t  }\n\n\t  /**\n\t   * Closes the Dismissable by removing the open class from the element and setting a timer to remove the element from\n\t   * the DOM.\n\t   */\n\t  close() {\n\t    this.element.addClass('closed');\n\t    setTimeout(function() {\n\t      this.element.removeFromDOM();\n\t    }.bind(this), this.options.closeTimeout);\n\t  }\n\n\t  /**\n\t   * Destroys the widget.\n\t   */\n\t  destroy() {\n\t    this.dismissButton.removeEventListener('click', this._handleClick);\n\t  }\n\n\t  /**\n\t   * Initializes the Dismissable by binding the events to the dismiss button.\n\t   *\n\t   * @returns {Dismissable} This.\n\t   */\n\t  initialize() {\n\t    this.dismissButton.addEventListener('click', this._handleClick);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the timeout used in the close method to allow for transitions.\n\t   *\n\t   * @param timeout {int} The timeout.\n\t   * @returns {Dismissable} This.\n\t   */\n\t  withCloseTimeout(timeout) {\n\t    this.options.closeTimeout = timeout;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Set more than one option at a time by providing a map of key value pairs. This is considered an advanced\n\t   * method to set options on the widget. The caller needs to know what properties are valid in the options object.\n\t   *\n\t   * @param {Object} options Key value pair of configuration options.\n\t   * @returns {Dismissable} This.\n\t   */\n\t  withOptions(options) {\n\t    if (!Utils.isDefined(options)) {\n\t      return this;\n\t    }\n\n\t    for (let option in options) {\n\t      if (options.hasOwnProperty(option)) {\n\t        this.options[option] = options[option];\n\t      }\n\t    }\n\t    return this;\n\t  }\n\n\t  /* ===================================================================================================================\n\t   * Private methods\n\t   * ===================================================================================================================*/\n\n\t  /**\n\t   * Handles the click event.\n\t   * @private\n\t   */\n\t  _handleClick(event) {\n\t    Utils.stopEvent(event);\n\t    this.close();\n\t  }\n\n\t  /**\n\t   * Set the initial options for this widget.\n\t   * @private\n\t   */\n\t  _setInitialOptions() {\n\t    // Defaults\n\t    this.options = {\n\t      closeTimeout: 400\n\t    };\n\t  }\n\t}\n\n\t/*\n\t * Copyright (c) 2017, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\tclass HTMLDialog {\n\t  /**\n\t   * Constructs a new dialog box from an element.\n\t   *\n\t   * @param {PrimeElement|Element|EventTarget} element The Prime Element for the HTMLDialog widget.\n\t   * @constructor\n\t   */\n\t  constructor(element) {\n\t    Utils.bindAll(this);\n\n\t    this.element = PrimeElement.wrap(element);\n\t    this._setInitialOptions();\n\t    this.draggable = null;\n\t  }\n\n\t  /**\n\t   * Closes the dialog, destroys the HTML and updates or hides the overlay.\n\t   * @returns {HTMLDialog} This.\n\t   */\n\t  close() {\n\t    this.element.removeClass('open');\n\t    if (this.draggable !== null) {\n\t      this.draggable.destroy();\n\t      this.draggable = null;\n\t    }\n\n\t    setTimeout(function() {\n\t      this.element.hide();\n\n\t      const highestZIndex = this._determineZIndex();\n\t      if (highestZIndex !== 0) {\n\t        Overlay.instance.setZIndex(highestZIndex);\n\t      } else {\n\t        Overlay.instance.close();\n\t      }\n\t    }.bind(this), this.options.closeTimeout);\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Destroys the dialog by calling the close function.\n\t   * @returns {HTMLDialog} This.\n\t   */\n\t  destroy() {\n\t    this.close();\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Initializes the dialog.\n\t   * @returns {HTMLDialog} This.\n\t   */\n\t  initialize() {\n\t    this.element.hide();\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Opens the dialog.\n\t   *\n\t   * @returns {HTMLDialog} This.\n\t   */\n\t  open() {\n\t    const highestZIndex = this._determineZIndex();\n\t    Overlay.instance.open(highestZIndex + this.options.zIndexOffset);\n\t    this.element.setStyle('zIndex', (highestZIndex + this.options.zIndexOffset + 10).toString());\n\t    this.element.show();\n\t    this.element.addClass('open');\n\n\t    // Call the callback before positioning to ensure all changes to the dialog have been made\n\t    if (this.options.callback !== null) {\n\t      this.options.callback(this);\n\t    }\n\n\t    // Position the fixed dialog in the center of the screen\n\t    const windowHeight = PrimeWindow.getInnerHeight();\n\t    const dialogHeight = this.element.getHeight();\n\t    this.element.setTop(((windowHeight - dialogHeight) / 2) - 20);\n\n\t    this._setupButtons();\n\n\t    if (this.draggable === null) {\n\t      if (this.options.draggableElementSelector !== null && this.element.queryFirst(this.options.draggableElementSelector) !== null) {\n\t        this.draggable = new Draggable(this.element, this.options.draggableElementSelector).initialize();\n\t      }\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Updates the HTML contents of the dialog.\n\t   *\n\t   * @param html {String} The HTML.\n\t   * @returns {HTMLDialog} This.\n\t   */\n\t  setHTML(html) {\n\t    this.element.setHTML(html);\n\t    this._setupButtons();\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the callback that is called after the dialog has been fetched and rendered.\n\t   *\n\t   * @param callback {function} The callback function.\n\t   * @returns {HTMLDialog} This.\n\t   */\n\t  withCallback(callback) {\n\t    this.options.callback = callback;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the class name for the dialog element.\n\t   *\n\t   * @param className {string} The class name.\n\t   * @returns {HTMLDialog} This.\n\t   */\n\t  withClassName(className) {\n\t    this.options.className = className;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the close button element selector that is used to setup the close button in the HTML that was returned from\n\t   * the server.\n\t   *\n\t   * @param selector {string} The element selector.\n\t   * @returns {HTMLDialog} This.\n\t   */\n\t  withCloseButtonElementSelector(selector) {\n\t    this.options.closeButtonElementSelector = selector;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the timeout used in the close method to allow for transitions.\n\t   *\n\t   * @param timeout {int} The timeout.\n\t   * @returns {HTMLDialog} This.\n\t   */\n\t  withCloseTimeout(timeout) {\n\t    this.options.closeTimeout = timeout;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the draggable element selector that is used for the Draggable.\n\t   *\n\t   * @param selector {string} The element selector.\n\t   * @returns {HTMLDialog} This.\n\t   */\n\t  withDraggableButtonElementSelector(selector) {\n\t    this.options.draggableElementSelector = selector;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Set more than one option at a time by providing a map of key value pairs. This is considered an advanced\n\t   * method to set options on the widget. The caller needs to know what properties are valid in the options object.\n\t   *\n\t   * @param {Object} options Key value pair of configuration options.\n\t   * @returns {HTMLDialog} This.\n\t   */\n\t  withOptions(options) {\n\t    if (!Utils.isDefined(options)) {\n\t      return this;\n\t    }\n\n\t    for (let option in options) {\n\t      if (options.hasOwnProperty(option)) {\n\t        this.options[option] = options[option];\n\t      }\n\t    }\n\t    return this;\n\t  }\n\n\t  /* ===================================================================================================================\n\t   * Private methods\n\t   * ===================================================================================================================*/\n\n\t  _determineZIndex() {\n\t    let highestZIndex = 0;\n\t    PrimeDocument.query('.' + this.options.className).each(function(dialog) {\n\t      const zIndex = parseInt(dialog.getComputedStyle()['zIndex']);\n\t      if (dialog.isVisible() && zIndex > highestZIndex) {\n\t        highestZIndex = zIndex;\n\t      }\n\t    });\n\t    return highestZIndex;\n\t  }\n\n\t  _handleCloseClickEvent(event) {\n\t    Utils.stopEvent(event);\n\t    this.close();\n\t  }\n\n\t  _setupButtons() {\n\t    this.element.query(this.options.closeButtonElementSelector).each(function(e) {\n\t      e.addEventListener('click', this._handleCloseClickEvent);\n\t    }.bind(this));\n\t  }\n\n\t  /**\n\t   * Set the initial options for this widget.\n\t   * @private\n\t   */\n\t  _setInitialOptions() {\n\t    // Defaults\n\t    this.options = {\n\t      callback: null,\n\t      className: 'prime-dialog',\n\t      closeButtonElementSelector: '[data-dialog-role=\"close-button\"]',\n\t      closeTimeout: 200,\n\t      draggableElementSelector: '[data-dialog-role=\"draggable\"]',\n\t      zIndexOffset: 1000\n\t    };\n\n\t    const userOptions = Utils.dataSetToOptions(this.element);\n\t    for (let option in userOptions) {\n\t      if (userOptions.hasOwnProperty(option)) {\n\t        this.options[option] = userOptions[option];\n\t      }\n\t    }\n\t  }\n\t}\n\n\t/*\n\t * Copyright (c) 2017, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\tclass InProgress {\n\t  /**\n\t   * Constructs a In Progress widget that opens an overlay over an element while something is running and closes it when\n\t   * it finishes.\n\t   *\n\t   * @param {PrimeElement|Element|EventTarget} element The Prime Element to overlay.\n\t   * @constructor\n\t   */\n\t  constructor(element) {\n\t    Utils.bindAll(this);\n\n\t    this.element = PrimeElement.wrap(element);\n\t    this._setInitialOptions();\n\t    this.draggable = null;\n\t  }\n\n\t  /**\n\t   * Closes the InProgress process.\n\t   *\n\t   * @param {Function} callback (Optional) A callback function to invoke after the InProgress has been completely closed.\n\t   */\n\t  close(callback) {\n\t    try {\n\t      this.options.endFunction(this);\n\t    } finally {\n\t      const now = new Date().getTime();\n\t      const duration = now - this.startInstant;\n\t      if (duration < this.options.minimumTime) {\n\t        setTimeout(function() {\n\t          this.overlay.removeFromDOM();\n\n\t          if (callback) {\n\t            callback();\n\t          }\n\t        }.bind(this), this.options.minimumTime - duration);\n\t      } else {\n\t        this.overlay.removeFromDOM();\n\n\t        if (callback) {\n\t          callback();\n\t        }\n\t      }\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Opens the InProgress process.\n\t   */\n\t  open() {\n\t    this.startInstant = new Date().getTime();\n\t    this.overlay = PrimeDocument.newElement('<div/>').setId('prime-in-progress-overlay').appendTo(document.body);\n\t    PrimeDocument.newElement('<i/>', {class: 'fa fa-spin fa-' + this.options.iconName}).appendTo(this.overlay);\n\n\t    const coords = this.element.getCoordinates();\n\t    const bodyCoords = PrimeDocument.bodyElement.getCoordinates();\n\t    this.overlay.setTop(coords.top - bodyCoords.top);\n\t    this.overlay.setLeft(coords.left - bodyCoords.left);\n\t    this.overlay.setWidth(this.element.getBorderedWidth());\n\t    this.overlay.setHeight(this.element.getBorderedHeight());\n\t    this.overlay.setStyle('zIndex', (this.element.getRelativeZIndex() + 1000).toString());\n\n\t    this.options.startFunction(this);\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the end function that is called when the InProgress process is finished.\n\t   *\n\t   * @param f {function} The function.\n\t   * @returns {InProgress} This.\n\t   */\n\t  withEndFunction(f) {\n\t    this.options.endFunction = f;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the FontAwesome icon name to use for the overlay.\n\t   *\n\t   * @param iconName {string} The icon name.\n\t   * @returns {InProgress} This.\n\t   */\n\t  withIconName(iconName) {\n\t    this.options.iconName = iconName;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the minimum time that the InProgress process must run.\n\t   *\n\t   * @param time {number} The time in milliseconds.\n\t   * @returns {InProgress} This.\n\t   */\n\t  withMinimumTime(time) {\n\t    this.options.minimumTime = time;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the start function that is called when the InProgress process is started.\n\t   *\n\t   * @param f {function} The function.\n\t   * @returns {InProgress} This.\n\t   */\n\t  withStartFunction(f) {\n\t    this.options.startFunction = f;\n\t    return this;\n\t  }\n\n\t  /* ===================================================================================================================\n\t   * Private methods\n\t   * ===================================================================================================================*/\n\n\t  /**\n\t   * Set the initial options for this widget.\n\t   * @private\n\t   */\n\t  _setInitialOptions() {\n\t    // Defaults\n\t    this.options = {\n\t      endFunction: function() {\n\t      },\n\t      iconName: 'refresh',\n\t      minimumTime: 1000,\n\t      startFunction: function() {\n\t      }\n\t    };\n\n\t    const userOptions = Utils.dataSetToOptions(this.element);\n\t    for (let option in userOptions) {\n\t      if (userOptions.hasOwnProperty(option)) {\n\t        this.options[option] = userOptions[option];\n\t      }\n\t    }\n\t  }\n\t}\n\n\t/*\n\t * Copyright (c) 2014-2023, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\tclass Searcher {\n\t  /**\n\t   * Constructs a Searcher object for the given text input.\n\t   *\n\t   * The Searcher object can be attached and used in conjunction with any other widgets in a generic manner. It\n\t   * provides search capabilities and manages the search results. This is useful for MultipleSelects, IntelliSense and\n\t   * other widgets. Here's the HTML for the search results.\n\t   *\n\t   * <pre>\n\t   *   &lt;input type=\"text\" class=\"prime-search-result-input\" value=\"F\"/>\n\t   *   &lt;ul>\n\t   *     &lt;li>Four&lt;/li>\n\t   *     &lt;li>Five&lt;/li>\n\t   *     &lt;li>Fifteen&lt;/li>\n\t   *     &lt;li>Add Custom Entry: F/li>\n\t   *   &lt;/ul>\n\t   * &lt;/div>\n\t   * </pre>\n\t   *\n\t   * The with* methods can be used to setup the configuration for this SearchResults, but here are some defaults:\n\t   *\n\t   * <ul>\n\t   *   <li>closeTimeout = 200</li>\n\t   *   <li>customAddEnabled = true</li>\n\t   *   <li>customAddCallback = function(customValue){return true;}</li>\n\t   *   <li>customAddLabel = \"Add Custom:\"</li>\n\t   *   <li>tooManySearchResultsLabel = \"Too Many Matches For:\"</li>\n\t   *   <li>noSearchResultsLabel = \"No Matches For:\"</li>\n\t   * </ul>\n\t   *\n\t   * The callback object must conform to this interface:\n\t   *\n\t   * <pre>\n\t   *   CallbackObject {\n\t *     void deletedBeyondSearchInput()\n\t *     void doesNotContainValue()\n\t *     object{results:Array, tooManyResults:boolean} search(_searchString:string),\n\t *     void selectSearchResult(selectedSearchResult:string),\n\t *   }\n\t   * </pre>\n\t   *\n\t   * @constructor\n\t   * @param {PrimeElement|Element|EventTarget} inputElement The input element that is used to execute the search.\n\t   * @param {PrimeElement|Element|EventTarget} searchResultsContainer The element that is used to store the search results.\n\t   * @param {*} callbackObject The object that is used to callback for searching and numerous other functions to help\n\t   *            communicate state and determine how to draw the input and search results.\n\t   */\n\t  constructor(inputElement, searchResultsContainer, callbackObject) {\n\t    Utils.bindAll(this);\n\n\t    this.searchResults = PrimeElement.wrap(searchResultsContainer);\n\t    this.inputElement = PrimeElement.wrap(inputElement);\n\t    if (this.inputElement.domElement.tagName !== 'INPUT') {\n\t      throw new TypeError('You can only use Prime.Widgets.SearchResults with INPUT elements');\n\t    }\n\n\t    this._setInitialOptions(callbackObject);\n\t  }\n\n\t  /**\n\t   * A search function that works on a select box.\n\t   *\n\t   * @param searchText {String} The search String.\n\t   * @param select {HTMLSelectElement|PrimeElement} The select box.\n\t   * @returns {{results: Array, tooManyResults: boolean}}\n\t   */\n\t  static selectSearchFunction(searchText, select) {\n\t    const options = PrimeElement.unwrap(select).options;\n\t    const selectableOptions = [];\n\t    for (let i = 0; i < options.length; i++) {\n\t      const option = new PrimeElement(options[i]);\n\t      if (option.isSelected()) {\n\t        continue;\n\t      }\n\n\t      const html = option.getHTML();\n\t      if (searchText === null || searchText === undefined || searchText === '' || html.toLowerCase().indexOf(searchText.toLowerCase()) === 0) {\n\t        selectableOptions.push(html);\n\t      }\n\t    }\n\n\t    // Alphabetize the options\n\t    if (selectableOptions.length > 0) {\n\t      selectableOptions.sort();\n\t    }\n\n\t    return {results: selectableOptions, tooManyResults: false};\n\t  }\n\n\t  /**\n\t   * Closes the search results display, unhighlights any options that are highlighted and resets the input's value to\n\t   * empty string.\n\t   */\n\t  closeSearchResults() {\n\t    this._removeAllSearchResults();\n\t    this.inputElement.setValue('');\n\t    this.searchResults.removeClass('open');\n\t    setTimeout(function() {\n\t      this.searchResults.hide();\n\t      this.resizeInput();\n\t    }.bind(this), this.options.closeTimeout);\n\t  }\n\n\t  /**\n\t   * Removes all of the event listeners from the input element.\n\t   */\n\t  destroy() {\n\t    this.inputElement\n\t        .removeEventListener('blur', this._handleBlurEvent)\n\t        .removeEventListener('click', this._handleClickEvent)\n\t        .removeEventListener('keyup', this._handleKeyUpEvent)\n\t        .removeEventListener('keydown', this._handleKeyDownEvent)\n\t        .removeEventListener('focus', this._handleFocusEvent);\n\t  }\n\n\t  focus() {\n\t    this.inputElement.focus();\n\t  }\n\n\t  /**\n\t   * @returns {PrimeElement} The highlighted search result or null.\n\t   */\n\t  getHighlightedSearchResult() {\n\t    return this.searchResults.queryFirst('.selected');\n\t  }\n\n\t  /**\n\t   * Highlights the next search result if one is highlighted. If there isn't a highlighted search result, this\n\t   * highlights the first one. This method handles wrapping.\n\t   *\n\t   * @returns {Searcher} This Searcher.\n\t   */\n\t  highlightNextSearchResult() {\n\t    let searchResult = this.getHighlightedSearchResult();\n\t    if (searchResult !== null) {\n\t      searchResult = searchResult.getNextSibling();\n\t    }\n\n\t    // Grab the first search result in the list if there isn't a next sibling\n\t    if (searchResult === null) {\n\t      searchResult = this.searchResults.queryFirst('.search-result');\n\t    }\n\n\t    if (searchResult !== null) {\n\t      this.highlightSearchResult(searchResult);\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Highlights the previous search result if one is highlighted. If there isn't a highlighted search result, this\n\t   * selects the last one. This method handles wrapping.\n\t   *\n\t   * @returns {Searcher} This Searcher.\n\t   */\n\t  highlightPreviousSearchResult() {\n\t    let searchResult = this.getHighlightedSearchResult();\n\t    if (searchResult !== null) {\n\t      searchResult = searchResult.getPreviousSibling();\n\t    }\n\n\t    if (searchResult === null) {\n\t      searchResult = this.searchResults.queryFirst('.search-result');\n\t    }\n\n\t    if (searchResult !== null) {\n\t      this.highlightSearchResult(searchResult);\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Highlights the given search result.\n\t   *\n\t   * @param {PrimeElement} searchResult The search result to highlight.\n\t   * @returns {Searcher} This Searcher.\n\t   */\n\t  highlightSearchResult(searchResult) {\n\t    this.searchResults.getChildren().removeClass('selected');\n\n\t    searchResult.addClass('selected');\n\t    const scrollTop = this.searchResults.getScrollTop();\n\t    const height = this.searchResults.getHeight();\n\t    const searchResultOffset = searchResult.getOffsetTop();\n\t    if (searchResultOffset + 1 >= scrollTop + height) {\n\t      this.searchResults.scrollTo(searchResult.getOffsetTop() - this.searchResults.getHeight() + searchResult.getOuterHeight());\n\t    } else if (searchResultOffset < scrollTop) {\n\t      this.searchResults.scrollTo(searchResultOffset);\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Initializes the Searcher by setting up the event listeners and closing the search result element.\n\t   *\n\t   * @returns {Searcher} This.\n\t   */\n\t  initialize() {\n\t    this.inputElement\n\t        .addEventListener('blur', this._handleBlurEvent)\n\t        .addEventListener('click', this._handleClickEvent)\n\t        .addEventListener('input', this._handleInputEvent)\n\t        .addEventListener('keyup', this._handleKeyUpEvent)\n\t        .addEventListener('keydown', this._handleKeyDownEvent)\n\t        .addEventListener('focus', this._handleFocusEvent);\n\n\t    this.closeSearchResults();\n\t    return this;\n\t  }\n\n\t  /**\n\t   * @returns {boolean} True if the search results add custom option is being displayed currently.\n\t   */\n\t  isCustomAddVisible() {\n\t    return this.searchResults.queryFirst('.custom-add') !== null;\n\t  }\n\n\t  /**\n\t   * @returns {boolean} True if any search results are being displayed currently.\n\t   */\n\t  isSearchResultsVisible() {\n\t    return this.searchResults.hasClass('open');\n\t  }\n\n\t  /**\n\t   * Poor mans resizing of the input field as the user types into it.\n\t   */\n\t  resizeInput() {\n\t    const text = this.inputElement.getValue() === '' ? this.inputElement.getAttribute('placeholder') : this.inputElement.getValue();\n\t    const newLength = Utils.calculateTextLength(this.inputElement, text) + 35;\n\t    this.inputElement.setWidth(newLength);\n\t  }\n\n\t  /**\n\t   * Executes a search by optionally updating the input to the given value (if specified) and then rebuilding the search\n\t   * results using the input's value. This method also puts focus on the input and shows the search results (in case\n\t   * they are hidden for any reason).\n\t   *\n\t   * @param {string} [searchText] The text to search for (this value is also set into the input box). If this is not\n\t   * specified then the search is run using the input's value.\n\t   * @returns {Searcher} This Searcher.\n\t   */\n\t  search(searchText) {\n\t    // Set the search text into the input box if it is different and then lowercase it\n\t    if (Utils.isDefined(searchText) && this.inputElement.getValue() !== searchText) {\n\t      this.inputElement.setValue(searchText);\n\t    }\n\n\t    searchText = Utils.isDefined(searchText) ? searchText.toLowerCase() : this.inputElement.getValue();\n\t    this.resizeInput();\n\n\t    // Clear the search results (if there are any)\n\t    this._removeAllSearchResults();\n\n\t    // Call the callback\n\t    const searchResults = this.options.callbackObject.search(searchText);\n\t    if (!searchResults.hasOwnProperty('results') || !searchResults.hasOwnProperty('tooManyResults')) {\n\t      throw new TypeError('The callback must return an Object that contains the properties results[Array] and tooManyResults[boolean]');\n\t    }\n\n\t    let count = 0;\n\t    let matchingSearchResultElement = null;\n\t    for (let i = 0; i < searchResults.results.length; i++) {\n\t      const searchResult = searchResults.results[i];\n\t      const element = PrimeDocument.newElement('<li/>')\n\t          .addClass('search-result')\n\t          .setAttribute('value', searchResult)\n\t          .setHTML(searchResult)\n\t          .addEventListener('click', this._handleClickEvent)\n\t          .addEventListener('mouseover', this._handleMouseOverEvent)\n\t          .appendTo(this.searchResults);\n\t      if (searchResult.toLowerCase().trim() === searchText.toLowerCase().trim()) {\n\t        matchingSearchResultElement = element;\n\t      }\n\n\t      count++;\n\t    }\n\n\t    // Show the custom add option if necessary\n\t    const trimmedLength = searchText.trim().length;\n\t    if (this.options.customAddEnabled && trimmedLength !== 0 && matchingSearchResultElement === null\n\t        && (!('doesNotContainValue' in this.options.callbackObject) || this.options.callbackObject.doesNotContainValue(searchText))) {\n\t      matchingSearchResultElement = PrimeDocument.newElement('<li/>')\n\t          .addClass('custom-add')\n\t          .addEventListener('click', this._handleClickEvent)\n\t          .addEventListener('mouseover', this._handleMouseOverEvent)\n\t          .setHTML(this.options.customAddLabel + Utils.escapeHTML(searchText))\n\t          .appendTo(this.searchResults);\n\t      count++;\n\t    }\n\n\t    if (count === 0 && trimmedLength !== 0) {\n\t      PrimeDocument.newElement('<li/>')\n\t          .addClass('no-search-results')\n\t          .setHTML(this.options.noSearchResultsLabel + Utils.escapeHTML(searchText))\n\t          .appendTo(this.searchResults);\n\t      count++;\n\t    }\n\n\t    // Handle too many results\n\t    if (searchResults.tooManyResults) {\n\t      PrimeDocument.newElement('<li/>')\n\t          .addClass('too-many-search-results')\n\t          .setHTML(this.options.tooManySearchResultsLabel + Utils.escapeHTML(searchText))\n\t          .appendTo(this.searchResults);\n\t      count++;\n\t    }\n\n\t    if (count !== 0) {\n\t      this.searchResults.show();\n\t      this.searchResults.addClass('open');\n\n\t      if (count >= 10) {\n\t        this.searchResults.setHeight(this.searchResults.getChildren()[0].getOuterHeight() * 10 + 1);\n\t      } else {\n\t        this.searchResults.setHeight(this.searchResults.getChildren()[0].getOuterHeight() * count + 1);\n\t      }\n\t    } else {\n\t      this.closeSearchResults();\n\t    }\n\n\t    if (matchingSearchResultElement !== null) {\n\t      this.highlightSearchResult(matchingSearchResultElement);\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Selects the highlighted search result unless there isn't one highlighted, in which case, this does nothing.\n\t   *\n\t   * @returns {Searcher} This Searcher.\n\t   */\n\t  selectHighlightedSearchResult() {\n\t    const searchResult = this.getHighlightedSearchResult();\n\t    if (searchResult === null) {\n\t      return this;\n\t    }\n\n\t    const custom = searchResult.hasClass('custom-add');\n\t    const value = (custom) ? this.inputElement.getValue().trim() : searchResult.getHTML();\n\t    if (custom) {\n\t      // The client of this searcher needs to warn the user.\n\t      if (!this.options.customAddCallback(value)) {\n\t        return this;\n\t      }\n\t    }\n\n\t    this.options.callbackObject.selectSearchResult(value);\n\t    this.closeSearchResults();\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the timeout used in the close method to allow for transitions.\n\t   *\n\t   * @param timeout {int} The timeout.\n\t   * @returns {Searcher} This.\n\t   */\n\t  withCloseTimeout(timeout) {\n\t    this.options.closeTimeout = timeout;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets whether or not this Searcher allows custom options to be added.\n\t   *\n\t   * @param {boolean} enabled The flag.\n\t   * @returns {Searcher} This Searcher.\n\t   */\n\t  withCustomAddEnabled(enabled) {\n\t    this.options.customAddEnabled = enabled;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets whether or not this Searcher allows custom options to be added.\n\t   *\n\t   * @param {Function} callback The function to call that will return true if the custom option can be added.\n\t   * @returns {Searcher} This Searcher.\n\t   */\n\t  withCustomAddCallback(callback) {\n\t    this.options.customAddCallback = callback;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the label used when custom options are added.\n\t   *\n\t   * @param {string} customAddLabel The label.\n\t   * @returns {Searcher} This Searcher.\n\t   */\n\t  withCustomAddLabel(customAddLabel) {\n\t    this.options.customAddLabel = customAddLabel;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Set more than one option at a time by providing a map of key value pairs. This is considered an advanced\n\t   * method to set options on the widget. The caller needs to know what properties are valid in the options object.\n\t   *\n\t   * @param {Object} options Key value pair of configuration options.\n\t   * @returns {Searcher} This.\n\t   */\n\t  withOptions(options) {\n\t    if (!Utils.isDefined(options)) {\n\t      return this;\n\t    }\n\n\t    for (let option in options) {\n\t      if (options.hasOwnProperty(option)) {\n\t        this.options[option] = options[option];\n\t      }\n\t    }\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the label that is printed when there are no search results.\n\t   *\n\t   * @param {string} noSearchResultsLabel The label text.\n\t   * @returns {Searcher} This Searcher.\n\t   */\n\t  withNoSearchResultsLabel(noSearchResultsLabel) {\n\t    this.options.noSearchResultsLabel = noSearchResultsLabel;\n\t    return this;\n\t  }\n\n\t  /* ===================================================================================================================\n\t   * Private methods\n\t   * ===================================================================================================================*/\n\n\t  /**\n\t   * Sets the label that is printed when there are too many search results.\n\t   *\n\t   * @param {string} tooManySearchResultsLabel The label text.\n\t   * @returns {Searcher} This Searcher.\n\t   */\n\t  withTooManySearchResultsLabel(tooManySearchResultsLabel) {\n\t    this.options.tooManySearchResultsLabel = tooManySearchResultsLabel;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Handles the blur event when the input goes out of focus.\n\t   *\n\t   * @private\n\t   */\n\t  _handleBlurEvent() {\n\t    window.setTimeout((function() {\n\t      if (document.activeElement !== this.inputElement.domElement) {\n\t        this.closeSearchResults();\n\t      }\n\t    }).bind(this), 300);\n\t  }\n\n\t  /**\n\t   * Handles all click events sent to the Searcher.\n\t   *\n\t   * @param {Event} event The mouse event.\n\t   * @private\n\t   */\n\t  _handleClickEvent(event) {\n\t    const target = new PrimeElement(event.currentTarget);\n\t    if (target.hasClass('custom-add') || target.hasClass('search-result')) {\n\t      this.selectHighlightedSearchResult();\n\t    } else if (target.domElement === this.inputElement.domElement) {\n\t      this.search();\n\t    } else {\n\t      console.log('Clicked something else target=[' + event.target + '] currentTarget=[' + event.currentTarget + ']');\n\t    }\n\t  }\n\n\t  /**\n\t   * Handles when the input field is focused by opening the search results.\n\t   *\n\t   * @private\n\t   */\n\t  _handleFocusEvent() {\n\t    this.search();\n\t  }\n\n\t  /**\n\t   * Handle when we get new input in the field\n\t   *\n\t   * @private\n\t   */\n\t  _handleInputEvent() {\n\t    this.search();\n\t  }\n\n\t  /**\n\t   * Handles the key down events that should not be propagated.\n\t   *\n\t   * @param {KeyboardEvent} event The keyboard event object.\n\t   * @private\n\t   */\n\t  _handleKeyDownEvent(event) {\n\t    const key = event.keyCode;\n\t    if (key === Events.Keys.BACKSPACE) {\n\t      this.previousSearchString = this.inputElement.getValue();\n\t    } else if (key === Events.Keys.UP_ARROW) {\n\t      Utils.stopEvent(event);\n\t      this.highlightPreviousSearchResult();\n\t    } else if (key === Events.Keys.DOWN_ARROW) {\n\t      Utils.stopEvent(event);\n\t      if (this.isSearchResultsVisible()) {\n\t        this.highlightNextSearchResult();\n\t      } else {\n\t        this.search();\n\t      }\n\t    } else if (key === Events.Keys.ENTER) {\n\t      Utils.stopEvent(event); // Don't bubble enter otherwise the form submits\n\t    } else if (key === Events.Keys.TAB && this.isSearchResultsVisible()) {\n\t      Utils.stopEvent(event); // Don't bubble tab otherwise value lost on tab focus\n\t    }\n\t  }\n\n\t  /**\n\t   * Handles all key up events sent to the search results container.\n\t   *\n\t   * @param {KeyboardEvent} event The keyboard event object.\n\t   *  @private\n\t   */\n\t  _handleKeyUpEvent(event) {\n\t    const key = event.keyCode;\n\t    const value = this.inputElement.getValue();\n\n\t    if (key === Events.Keys.BACKSPACE) {\n\t      if (value === '' && this.previousSearchString === '') {\n\t        this.options.callbackObject.deletedBeyondSearchInput();\n\t      } else {\n\t        this.search();\n\t      }\n\t    } else if (key === Events.Keys.ENTER) {\n\t      Utils.stopEvent(event);\n\t      // If a search result is highlighted, add it\n\t      if (this.getHighlightedSearchResult() !== null) {\n\t        this.selectHighlightedSearchResult();\n\t      }\n\t    } else if (key === Events.Keys.ESCAPE) {\n\t      this.closeSearchResults();\n\t    } else if (key === Events.Keys.TAB && this.getHighlightedSearchResult() !== null) {\n\t      // don't advance form field focus and add search result\n\t      Utils.stopEvent(event);\n\t      this.selectHighlightedSearchResult();\n\t    }\n\t  }\n\n\t  /**\n\t   * Handles mouseover events for the search results (only) by highlighting the event target.\n\t   *\n\t   * @param {Event} event The mouseover event.\n\t   * @private\n\t   */\n\t  _handleMouseOverEvent(event) {\n\t    const target = new PrimeElement(event.currentTarget);\n\t    this.highlightSearchResult(target);\n\t  }\n\n\t  /**\n\t   * Removes all of the search results.\n\t   *\n\t   * @private\n\t   */\n\t  _removeAllSearchResults() {\n\t    this.searchResults.query('li').removeAllFromDOM();\n\t  }\n\n\t  /* ===================================================================================================================\n\t   * Search function implementations.\n\t   * ===================================================================================================================*/\n\n\t  /**\n\t   * Set the initial options for this widget.\n\t   * @private\n\t   */\n\t  _setInitialOptions(callbackObject) {\n\t    // Defaults\n\t    this.options = {\n\t      callbackObject: callbackObject,\n\t      closeTimeout: 200,\n\t      customAddEnabled: true,\n\t      'customAddCallback'() {\n\t        return true;\n\t      },\n\t      customAddLabel: 'Add Custom: ',\n\t      noSearchResultsLabel: 'No Matches For: ',\n\t      tooManySearchResultsLabel: 'Too Many Matches For: ',\n\t    };\n\n\t    const userOptions = Utils.dataSetToOptions(this.inputElement);\n\t    for (let option in userOptions) {\n\t      if (userOptions.hasOwnProperty(option)) {\n\t        this.options[option] = userOptions[option];\n\t      }\n\t    }\n\t  }\n\t}\n\n\t/*\n\t * Copyright (c) 2017, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\tlet count = 1;\n\tlet AddOptionEvent = 'MultipleSelect:addOption';\n\tlet DeselectOptionEvent = 'MultipleSelect:deselectOption';\n\tlet SelectOptionEvent = 'MultipleSelect:selectOption';\n\n\tclass MultipleSelect {\n\t  /**\n\t   * Constructs a MultipleSelect object for the given element.\n\t   *\n\t   * The MultipleSelect generates a number of different HTML elements directly after the SELECT element you pass to the\n\t   * constructor. A fully rendered MultipleSelect might look something like this:\n\t   *\n\t   * <pre>\n\t   * &lt;select id=\"foo\">\n\t   *   &lt;option value=\"one\">One&lt;/option>\n\t   *   &lt;option value=\"two\">Two&lt;/option>\n\t   *   &lt;option value=\"three\">Three&lt;/option>\n\t   * &lt;/select>\n\t   * &lt;div id=\"foo-display\" class=\"prime-multiple-select\">\n\t   *   &lt;ul id=\"foo-option-list\" class=\"option-list\">\n\t   *     &lt;li id=\"foo-option-one\">&lt;span>One&lt;/span>&lt;a href=\"#\">X&lt;/a>&lt;/li>\n\t   *     &lt;li id=\"foo-option-two\">&lt;span>Two&lt;/span>&lt;a href=\"#\">X&lt;/a>&lt;/li>\n\t   *     &lt;li id=\"foo-option-three\">&lt;span>Three&lt;/span>&lt;a href=\"#\">X&lt;/a>&lt;/li>\n\t   *     &lt;li>&lt;input type=\"text\" value=\"aaa\"/>&lt;/li>\n\t   *   &lt;/ul>\n\t   *   &lt;ul class=\"search-results\">\n\t   *     &lt;li>One&lt;/li>\n\t   *     &lt;li>Two&lt;/li>\n\t   *     &lt;li>Three&lt;/li>\n\t   *     &lt;li>Add Custom Entry: aaa/li>\n\t   *   &lt;/ul>\n\t   * &lt;/div>\n\t   * </pore>\n\t   *\n\t   * The with* methods can be used to setup the configuration for this MultipleSelect, but here are some defaults:\n\t   *\n\t   * <ul>\n\t   *   <li>placeholder = \"Choose\"</li>\n\t   *   <li>customAddEnabled = true</li>\n\t   *   <li>customAddLabel = \"Add Custom Value:\"</li>\n\t   *   <li>noSearchResultsLabel = \"No Matches For:\"</li>\n\t   * </ul>\n\t   *\n\t   * @constructor\n\t   * @param {PrimeElement|Element|EventTarget} element The Prime Element for the MultipleSelect.\n\t   */\n\t  constructor(element) {\n\t    Utils.bindAll(this);\n\t    this.initialized = false;\n\n\t    this.element = PrimeElement.wrap(element);\n\t    if (this.element.domElement.tagName !== 'SELECT') {\n\t      throw new TypeError('You can only use MultipleSelect with select elements');\n\t    }\n\n\t    if (this.element.getAttribute('multiple') !== 'multiple') {\n\t      throw new TypeError('The select box you are attempting to convert to a MultipleSelect must have the multiple=\"multiple\" attribute set');\n\t    }\n\n\t    this._setInitialOptions();\n\t  }\n\n\t  /*\n\t   * Statics\n\t   */\n\t  /**\n\t   * @returns {number}\n\t   */\n\t  static get count() {\n\t    return count;\n\t  }\n\n\t  /**\n\t   * @param {number} value\n\t   */\n\t  static set count(value) {\n\t    count = value;\n\t  }\n\n\t  /**\n\t   * @returns {string}\n\t   */\n\t  static get AddOptionEvent() {\n\t    return AddOptionEvent;\n\t  }\n\n\t  /**\n\t   * @param {string} value\n\t   */\n\t  static set AddOptionEvent(value) {\n\t    AddOptionEvent = value;\n\t  }\n\n\t  /**\n\t   * @returns {string}\n\t   */\n\t  static get DeselectOptionEvent() {\n\t    return DeselectOptionEvent;\n\t  }\n\n\t  /**\n\t   * @param {string} value\n\t   */\n\t  static set DeselectOptionEvent(value) {\n\t    DeselectOptionEvent = value;\n\t  }\n\n\t  /**\n\t   * @returns {string}\n\t   */\n\t  static get SelectOptionEvent() {\n\t    return SelectOptionEvent;\n\t  }\n\n\t  /**\n\t   * @param {string} value\n\t   */\n\t  static set SelectOptionEvent(value) {\n\t    SelectOptionEvent = value;\n\t  }\n\n\t  /**\n\t   * Finds the HTMLSelectOption with the given id and returns it wrapped in a PrimeElement.\n\t   *\n\t   * @param {String} id\n\t   * @returns {PrimeElement}\n\t   */\n\t  static findOptionWithId(id) {\n\t    return PrimeDocument.queryFirst('[data-option-id=\"' + id + '\"]');\n\t  }\n\n\t  /**\n\t   * Pass through to add event listeners to This. The custom events that this MultipleSelect fires are:\n\t   *\n\t   *  'MultipleSelect:deselectOption'\n\t   *  'MultipleSelect:selectOption'\n\t   *  'MultipleSelect:addOption'\n\t   *\n\t   * @param {string} event The name of the event.\n\t   * @param {Function} listener The listener function.\n\t   * @returns {MultipleSelect} This.\n\t   */\n\t  addEventListener(event, listener) {\n\t    this.element.addEventListener(event, listener);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Determines if this MultipleSelect contains an option with the given value.\n\t   *\n\t   * @param {String} value The value to look for.\n\t   */\n\t  containsOptionWithValue(value) {\n\t    return this.findOptionWithValue(value) !== null;\n\t  }\n\n\t  /**\n\t   * Adds the given option to this select. The option will not be selected.\n\t   *\n\t   * @param {String} value The value for the option.\n\t   * @param {String} display The display text for the option.\n\t   * @param {?String} [id] The id of the element. (Defaults to null)\n\t   * @returns {MultipleSelect} This.\n\t   */\n\t  addOption(value, display, id) {\n\t    if ((id === null || id === undefined) && this.containsOptionWithValue(value)) {\n\t      return this;\n\t    }\n\n\t    let element = PrimeDocument.newElement('<option/>')\n\t        .setValue(value)\n\t        .setHTML(display)\n\t        .appendTo(this.element);\n\n\t    if (id) {\n\t      element.setDataAttribute(\"optionId\", id);\n\t    }\n\n\t    // Fire the custom event\n\t    this.element.fireEvent(MultipleSelect.AddOptionEvent, value, this);\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Deselects the option with the given value by removing the selected attribute from the option in the select box and\n\t   * removing the option from the display container. If the MultipleSelect doesn't contain an option for the given value,\n\t   * this method throws an exception.\n\t   *\n\t   * @param {String} value The value to look for.\n\t   * @returns {MultipleSelect} This.\n\t   */\n\t  deselectOptionWithValue(value) {\n\t    const option = this.findOptionWithValue(value);\n\t    if (option === null) {\n\t      throw new Error('MultipleSelect doesn\\'t contain an option with the value [' + value + ']');\n\t    }\n\n\t    this.deselectOption(option);\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Deselects the option with the given value by removing the selected attribute from the option in the select box and\n\t   * removing the option from the display container.\n\t   *\n\t   * @param {PrimeElement} option The option to deselect.\n\t   * @returns {MultipleSelect} This.\n\t   */\n\t  deselectOption(option) {\n\t    option.setSelected(false);\n\n\t    const id = option.getDataAttribute('optionId') || this._makeOptionID(option);\n\t    const displayOption = PrimeDocument.queryById(id);\n\t    if (displayOption !== null) {\n\t      displayOption.removeFromDOM();\n\t    }\n\n\t    // If there are no selected options left, add back the placeholder attribute to the input and resize it\n\t    if (this.optionList.query('li').length === 1) {\n\t      this.input.setAttribute('placeholder', this.options.placeholder);\n\t      this.searcher.resizeInput();\n\t    }\n\n\t    // Fire the custom event\n\t    this.element.fireEvent(MultipleSelect.DeselectOptionEvent, option.getValue(), this);\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Destroys the widget completely.\n\t   */\n\t  destroy() {\n\t    this.element.show();\n\t    this.displayContainer.removeFromDOM();\n\t  }\n\n\t  /**\n\t   * Finds the HTMLSelectOption with the given text and returns it wrapped in a PrimeElement.\n\t   *\n\t   * @param {String} text The text to look for.\n\t   * @returns {PrimeElement} The option element or null.\n\t   */\n\t  findOptionWithText(text) {\n\t    const options = this.element.getOptions();\n\t    for (let i = 0; i < options.length; i++) {\n\t      if (options[i].getTextContent() === text) {\n\t        return options[i];\n\t      }\n\t    }\n\n\t    return null;\n\t  }\n\n\t  deselectOptionWithId(id) {\n\t    const option = MultipleSelect.findOptionWithId(id);\n\t    if (option === null) {\n\t      throw new Error('MultipleSelect doesn\\'t contain an option with the id [' + id + ']');\n\t    }\n\n\t    this.deselectOption(option);\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Finds the HTMLSelectOption with the given value and returns it wrapped in a PrimeElement.\n\t   *\n\t   * @param {String} value The value to look for.\n\t   * @returns {PrimeElement} The option element or null.\n\t   */\n\t  findOptionWithValue(value) {\n\t    for (let i = 0; i < this.element.domElement.length; i++) {\n\t      const cur = this.element.domElement.options[i];\n\t      if (cur.value === value) {\n\t        return new PrimeElement(cur);\n\t      }\n\t    }\n\n\t    return null;\n\t  }\n\n\t  /**\n\t   * @returns {string[]} The currently selected options values.\n\t   */\n\t  getSelectedValues() {\n\t    return this.element.getSelectedValues();\n\t  }\n\n\t  /**\n\t   * Determines if the MultipleSelect contains an option with the given value.\n\t   *\n\t   * @param {string} value The value.\n\t   * @returns {boolean} True if the MultipleSelect contains an option with the given value, false otherwise.\n\t   */\n\t  hasOptionWithValue(value) {\n\t    return this.findOptionWithValue(value) !== null;\n\t  }\n\n\t  /**\n\t   * Highlights the final selected option (if there is one) to indicate that it will be unselected if the user clicks\n\t   * the delete key again.\n\t   *\n\t   * @returns {MultipleSelect} This.\n\t   */\n\t  highlightOptionForUnselect() {\n\t    const options = this.optionList.getChildren();\n\t    if (options.length > 1) {\n\t      options[options.length - 2].addClass('selected');\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Initializes the display from the underlying select element. All of the current display options (li elements) are\n\t   * removed. New display options are added for each selected option in the select box.\n\t   *\n\t   * @returns {MultipleSelect} This.\n\t   */\n\t  initialize() {\n\t    this.element.hide();\n\n\t    let id = this.element.getId();\n\t    if (id === null || id === '') {\n\t      id = 'prime-multiple-select' + MultipleSelect.count++;\n\t      this.element.setId(id);\n\t    }\n\n\t    this.displayContainer = PrimeDocument.queryById(id + '-display');\n\t    this.input = null;\n\t    if (this.displayContainer === null) {\n\t      this.displayContainer = PrimeDocument.newElement('<div/>')\n\t          .setId(id + '-display')\n\t          .addClass(this.options.className)\n\t          .addEventListener('click', this._handleClickEvent)\n\t          .addEventListener('keyup', this._handleKeyUpEvent)\n\t          .insertAfter(this.element);\n\n\t      this.optionList = PrimeDocument.newElement('<ul/>')\n\t          .addClass('option-list')\n\t          .appendTo(this.displayContainer);\n\n\t      this.searchResults = PrimeDocument.newElement('<ul/>')\n\t          .addClass('search-results')\n\t          .hide()\n\t          .appendTo(this.displayContainer);\n\t    } else {\n\t      this.displayContainer\n\t          .removeAllEventListeners()\n\t          .addEventListener('click', this._handleClickEvent)\n\t          .addEventListener('keyup', this._handleKeyUpEvent);\n\t      this.optionList = this.displayContainer.queryFirst('.option-list');\n\t      this.searchResults = this.displayContainer.queryFirst('.search-results');\n\t    }\n\n\t    PrimeDocument.queryFirst('html').addEventListener('click', this._handleGlobalClickEvent);\n\n\t    // Close the search\n\t    this.searchResults.hide();\n\t    this._redraw();\n\n\t    // When the caller specified a selected order, process all selected options to honor the requested order.\n\t    // - Do this after redraw to ensure that we don't modify the order of the display container.\n\t    // - Currently we only honor the requested order if the option is already selected.\n\t    if (this.options.initialSelectedOrder.length > 0) {\n\t      for (let i = 0; i < this.options.initialSelectedOrder.length; i++) {\n\t        const actual = this.element.queryFirst('option[value=' + this.options.initialSelectedOrder[i] + ']');\n\t        if (actual !== null && actual.isSelected()) {\n\t          this.selectOption(actual);\n\t        }\n\t      }\n\t    }\n\n\t    this.initialized = true;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * @returns {boolean} True if the last option is highlighted for unselect.\n\t   */\n\t  isLastOptionHighlightedForUnselect() {\n\t    const options = this.optionList.getChildren();\n\t    return options.length > 1 && options[options.length - 2].hasClass('selected');\n\t  }\n\n\t  /**\n\t   * Removes all of the options from the MultipleSelect.\n\t   *\n\t   * @returns {MultipleSelect} This.\n\t   */\n\t  removeAllOptions() {\n\t    // Remove in reverse order because the options array is dynamically updated when elements are deleted from the DOM\n\t    const options = this.element.domElement.options;\n\t    for (let i = options.length - 1; i >= 0; i--) {\n\t      this.removeOption(new PrimeElement(options[i]));\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Removes the highlighted option.\n\t   */\n\t  removeHighlightedOption() {\n\t    const options = this.optionList.getChildren();\n\t    if (this.options.allowDuplicates) {\n\t      this.deselectOptionWithId(options[options.length - 2].getId());\n\t    } else {\n\t      this.deselectOptionWithValue(options[options.length - 2].getAttribute('value'));\n\t    }\n\t    this.search();\n\t  }\n\n\t  /**\n\t   * Removes the given option from the MultipleSelect by removing the option in the select box and the option in the\n\t   * display container.\n\t   *\n\t   * @param {PrimeElement} option The option to remove.\n\t   * @returns {MultipleSelect} This.\n\t   */\n\t  removeOption(option) {\n\t    if (!(option instanceof PrimeElement)) {\n\t      throw new TypeError('MultipleSelect#removeOption only takes PrimeElement instances');\n\t    }\n\n\t    option.removeFromDOM();\n\n\t    let id, displayOption;\n\t    if (this.options.allowDuplicates) {\n\t      // The ids are random so we need to get the data attribute.\n\t      id = option.getDataAttribute('optionId');\n\t      displayOption = PrimeDocument.queryById(id);\n\t    } else {\n\t      // The ids aren't random and can be reproducably created.\n\t      id = this._makeOptionID(option);\n\t      displayOption = PrimeDocument.queryById(id);\n\t    }\n\n\t    // Check if the option has already been selected\n\t    if (displayOption !== null) {\n\t      displayOption.removeFromDOM();\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Removes the option with the given value from the MultipleSelect by removing the option in the select box and the\n\t   * option in the display container. If the MultipleSelect doesn't contain an option with the given value, this throws\n\t   * an exception.\n\t   *\n\t   * @param {string} value The value of the option to remove.\n\t   * @returns {MultipleSelect} This.\n\t   */\n\t  removeOptionWithValue(value) {\n\t    const option = this.findOptionWithValue(value);\n\t    if (option === null) {\n\t      throw new Error('MultipleSelect doesn\\'t contain an option with the value [' + value + ']');\n\t    }\n\n\t    this.removeOption(option);\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Selects the given option by setting the selected attribute on the option in the select box (the object passed in is\n\t   * the option from the select box wrapped in a PrimeElement) and adding it to the display container. If the\n\t   * option is already in the display container, that step is skipped.\n\t   *\n\t   * @param {PrimeElement} option The option object from the select box wrapped in a PrimeElement instance.\n\t   * @returns {MultipleSelect} This.\n\t   */\n\t  selectOption(option) {\n\t    if (!(option instanceof PrimeElement)) {\n\t      throw new TypeError('MultipleSelect#selectOption only takes PrimeElement instances');\n\t    }\n\n\t    const id = this._makeOptionID(option);\n\t    let displayOption = PrimeDocument.queryById(id);\n\n\t    // Move the option if configured, and if already displayed remove it and add it again to get the correct order.\n\t    const moveDuringInitialization = !this.initialized && this.options.initialSelectedOrder.length > 0;\n\t    if (this.options.preserveDisplayedSelectionOrder || moveDuringInitialization) {\n\t      const parent =  option.getParent();\n\t      const lastOption = parent.getLastChild('option');\n\t      if (option.getValue() !== lastOption.getValue()) {\n\t        option.removeFromDOM();\n\t        option.appendTo(parent);\n\t        // If we moved the option, and we already have a display option, delete it so that we can rebuild it.\n\t        if (displayOption !== null) {\n\t          displayOption.removeFromDOM();\n\t          displayOption = null;\n\t        }\n\t      }\n\t    }\n\n\t    // Check if the option has already been selected\n\t    if (displayOption === null) {\n\t      /*\n\t      If we allow dupes, always duplicate the option and append it to the end or the order will be a problem. The default multiselect doesn't support order)\n\t       */\n\t      if (this.options.allowDuplicates) {\n\t        this.addOption(option.getValue(), option.getHTML(), id);\n\t        option = MultipleSelect.findOptionWithId(id);\n\t      }\n\t      option.setSelected(true);\n\n\t      const li = PrimeDocument.newElement('<li/>')\n\t          .setAttribute('value', option.getValue())\n\t          .setId(id)\n\t          .insertBefore(this.inputOption);\n\t      PrimeDocument.newElement('<span/>')\n\t          .setHTML(option.getHTML())\n\t          .setAttribute('value', option.getValue())\n\t          .appendTo(li);\n\t      PrimeDocument.newElement('<a/>')\n\t          .setAttribute('href', '#')\n\t          .setAttribute('value', option.getValue())\n\t          .setHTML(this.options.removeIcon)\n\t          .addEventListener('click', this._handleClickEvent)\n\t          .appendTo(li);\n\t    }\n\n\t    // Remove the placeholder attribute on the input and resize it\n\t    this.input.removeAttribute('placeholder');\n\n\t    // Close the search results and resize the input\n\t    this.searcher.closeSearchResults();\n\n\t    // Scroll the display to the bottom\n\t    this.optionList.scrollToBottom();\n\n\t    // Fire the custom event\n\t    this.element.fireEvent(MultipleSelect.SelectOptionEvent, option.getValue(), this);\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Selects the option with the given value by setting the selected attribute on the option in the select box (the\n\t   * object passed in is the option from the select box wrapped in a PrimeElement) and adding it to the display\n\t   * container. If the option is already in the display container, that step is skipped.\n\t   * <p/>\n\t   * If there isn't an option with the given value, this throws an exception.\n\t   *\n\t   * @param {String} value The value of the option to select.\n\t   * @returns {MultipleSelect} This.\n\t   */\n\t  selectOptionWithValue(value) {\n\t    const option = this.findOptionWithValue(value);\n\t    if (option === null) {\n\t      throw new Error('MultipleSelect doesn\\'t contain an option with the value [' + value + ']');\n\t    }\n\n\t    this.selectOption(option);\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the selected options. This mimics the function on Element to provide consistency.\n\t   *\n\t   * @param {string[]} [arguments] The list of options to select based on their values.\n\t   * @returns {MultipleSelect} This.\n\t   */\n\t  setSelectedValues() {\n\t    this.element.setSelectedValues.apply(this.element, arguments);\n\t    this._redraw();\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Unhighlights the last option if it is highlighted.\n\t   *\n\t   * @returns {MultipleSelect} This.\n\t   */\n\t  unhighlightOptionForUnselect() {\n\t    this.optionList.getChildren().each(function(element) {\n\t      element.removeClass('selected');\n\t    });\n\t    return this;\n\t  }\n\n\t  withAllowDuplicates(value) {\n\t    this.options.allowDuplicates = value;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the class name for the MultipleSelect element.\n\t   *\n\t   * @param className {string} The class name.\n\t   * @returns {MultipleSelect} This.\n\t   */\n\t  withClassName(className) {\n\t    this.options.className = className;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the timeout used in the close method to allow for transitions.\n\t   *\n\t   * @param timeout {int} The timeout.\n\t   * @returns {MultipleSelect} This.\n\t   */\n\t  withCloseTimeout(timeout) {\n\t    this.options.closeTimeout = timeout;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets whether or not this MultipleSelect allows custom options to be added.\n\t   *\n\t   * @param {boolean} enabled The flag.\n\t   * @returns {MultipleSelect} This.\n\t   */\n\t  withCustomAddEnabled(enabled) {\n\t    this.options.customAddEnabled = enabled;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the label used when custom options are added.\n\t   *\n\t   * @param {string} customAddLabel The label.\n\t   * @returns {MultipleSelect} This.\n\t   */\n\t  withCustomAddLabel(customAddLabel) {\n\t    this.options.customAddLabel = customAddLabel;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Enable error class handling. When this option is used, if the specified error class is found on any element\n\t   * in the tab content the same error class will be added to the tab to identify the tab contains errors.\n\t   *\n\t   * @returns {MultipleSelect} This.\n\t   */\n\t  withErrorClassHandling(errorClass) {\n\t    this.options.errorClass = errorClass;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the label that is printed when there are no search results. This must be called before render is called.\n\t   *\n\t   * @param {string} noSearchResultsLabel The label text.\n\t   * @returns {MultipleSelect} This.\n\t   */\n\t  withNoSearchResultsLabel(noSearchResultsLabel) {\n\t    this.options.noSearchResultsLabel = noSearchResultsLabel;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the placeholder text for This. This must be called before render is called.\n\t   *\n\t   * @param {string} placeholder The placeholder text.\n\t   * @returns {MultipleSelect} This.\n\t   */\n\t  withPlaceholder(placeholder) {\n\t    this.options.placeholder = placeholder;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * When set equal to true, the displayed selection in the widget will be reflected in the serialized form data.\n\t   *\n\t   * Default is 'false', and is the legacy behavior.\n\t   *\n\t   * @param value {boolean} The boolean value, true or false.\n\t   * @returns {MultipleSelect} This.\n\t   */\n\t  withPreserveDisplayedSelectionOrder(value) {\n\t    this.options.preserveDisplayedSelectionOrder = value;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the remove icon value. This overrides the default value.\n\t   *\n\t   * @param {string} removeIcon The remove icon text.\n\t   * @returns {MultipleSelect} This.\n\t   */\n\t  withRemoveIcon(removeIcon) {\n\t    this.options.removeIcon = removeIcon;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the search function that can be used to search other sources besides the select box that backs this widget.\n\t   *\n\t   * @param searchFunction {Function} The search function.\n\t   * @returns {MultipleSelect} This.\n\t   */\n\t  withSearchFunction(searchFunction) {\n\t    this.options.searchFunction = searchFunction;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Used during initialization to modify the order of selected options in the DOM.\n\t   *\n\t   * This does not affect the selected attribute, only the order in the DOM. It is not necessary to\n\t   * provide a complete list of selected option values.\n\t   *\n\t   * If options 'en', 'fr' and 'du' are selected, and you only provide 'du' as input here, 'du'\n\t   * will be moved to ensure it is first in the submitted form data, and the order of 'en' and 'fr'\n\t   * will not be modified, but will come after 'du'.\n\t   *\n\t   * Example:\n\t   *   A user who selected preferred languages in the order German, English, French would initialize the selected\n\t   *   options as: ['du', 'en', 'fr']\n\t   *\n\t   * @param {string[]} selections The selected options values.\n\t   * @returns {MultipleSelect} This.\n\t   */\n\t  withInitialSelectedOrder(selections) {\n\t    this.options.initialSelectedOrder = selections;\n\t    return this;\n\t  }\n\n\t  /* ===================================================================================================================\n\t   * Searcher's callback interface methods.\n\t   * ===================================================================================================================*/\n\n\t  /**\n\t   * Called when the Searcher gets a keyboard event that deletes beyond the search input. This highlights the last word\n\t   * in the phrase for removal.\n\t   */\n\t  deletedBeyondSearchInput() {\n\t    if (this.isLastOptionHighlightedForUnselect()) {\n\t      this.removeHighlightedOption();\n\t    }\n\n\t    this.highlightOptionForUnselect();\n\t  }\n\n\t  /**\n\t   * Called when the search needs to determine if the custom add option should be displayed. As long as this\n\t   * MultipleSelect does not contain the given value, the custom add option should be displayed.\n\t   *\n\t   * @param {string} value The value.\n\t   * @returns {boolean} True if this MultipleSelect does not contain the value, false otherwise.\n\t   */\n\t  doesNotContainValue(value) {\n\t    return !this.containsOptionWithValue(value);\n\t  }\n\n\t  /**\n\t   * Called when the Searcher is executing a search. This executes a search via the callback and returns the results.\n\t   *\n\t   * @param {string} [searchText] The text to search for.\n\t   * @returns {Object} The SearchResults.\n\t   */\n\t  search(searchText) {\n\t    this.unhighlightOptionForUnselect();\n\t    return this.options.searchFunction.call(null, searchText, this.element);\n\t  }\n\n\t  /**\n\t   * Called when the Searcher gets an event that causes a search result to be selected. This adds the word.\n\t   */\n\t  selectSearchResult(value) {\n\n\t    value = Utils.unescapeHTML(value); // In case the string has html escapes in it.\n\n\t    // Add the custom option if there is one\n\t    let option = this.findOptionWithText(value);\n\t    if (option === null) {\n\t      this.addOption(value, Utils.escapeHTML(value));\n\t      option = this.findOptionWithValue(value); // The value will still be unescaped\n\t    }\n\n\t    this.selectOption(option);\n\t  }\n\n\n\t  /* ===================================================================================================================\n\t   * Private Methods\n\t   * ===================================================================================================================*/\n\n\t  /**\n\t   * Handles the blur event when the input goes out of focus.\n\t   *\n\t   * @private\n\t   */\n\t  _handleBlurEvent() {\n\t    window.setTimeout((function() {\n\t      if (document.activeElement !== this.input.domElement) {\n\t        this.searcher.closeSearchResults();\n\t      }\n\t    }).bind(this), 300);\n\t    this.displayContainer.removeClass('focus');\n\t  }\n\n\t  /**\n\t   * Handles all click events sent to the MultipleSelect.\n\t   *\n\t   * @param {Event} event The mouse event.\n\t   * @private\n\t   */\n\t  _handleClickEvent(event) {\n\t    Utils.stopEvent(event);\n\t    const target = new PrimeElement(event.target);\n\t    if (target.is('a')) {\n\t      if (this.options.allowDuplicates) {\n\t        const id = target.getParent().getId();\n\t        this.removeOption(MultipleSelect.findOptionWithId(id));\n\t      } else {\n\t        this.removeOptionWithValue(target.getAttribute('value'));\n\t      }\n\t    } else if (target.is('span')) {\n\t      target.selectElementContents();\n\t    } else {\n\t      this.input.focus();\n\t    }\n\t  }\n\n\t  /**\n\t   * Handles the blur event when the input goes out of focus.\n\t   *\n\t   * @private\n\t   */\n\t  _handleFocusEvent() {\n\t    this.displayContainer.addClass('focus');\n\t  }\n\n\t  /**\n\t   * Handles mouse clicks outside of This. If they clicked anything that is not within this MultipleSelect,\n\t   * it closes the search results.\n\t   *\n\t   * @param {Event} event The event.\n\t   * @returns {boolean} Always true so the event is bubbled.\n\t   * @private\n\t   */\n\t  _handleGlobalClickEvent(event) {\n\t    const target = new PrimeElement(event.target);\n\t    if (this.displayContainer.domElement !== target.domElement && !target.isChildOf(this.displayContainer)) {\n\t      this.searcher.closeSearchResults();\n\t    }\n\t  }\n\n\t  /**\n\t   * Handles all key up events sent to the display container.\n\t   *\n\t   * @param {Event} event The browser event object.\n\t   * @returns {boolean} True if the search display is not open, false otherwise. This will prevent the event from continuing.\n\t   * @private\n\t   */\n\t  _handleKeyUpEvent(event) {\n\t    const key = event.keyCode;\n\t    if (key === Events.Keys.ESCAPE) {\n\t      this.unhighlightOptionForUnselect();\n\t    }\n\t  }\n\n\t  /**\n\t   * Makes an ID for the option.\n\t   *\n\t   * @param {PrimeElement} option The option to make the ID for.\n\t   * @private\n\t   */\n\t  _makeOptionID(option) {\n\t    if (this.options.allowDuplicates === true) {\n\t      let d = new Date().getTime();\n\t      // UUID ish\n\t      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n\t        let r = (d + Math.random() * 16) % 16 | 0;\n\t        d = Math.floor(d / 16);\n\t        return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n\t      });\n\t    }\n\t    return this.element.getId() + '-option-' + option.getValue().replace(' ', '-');\n\t  }\n\n\t  /**\n\t   * Redraws the widget.\n\t   * @private\n\t   */\n\t  _redraw() {\n\t    // Remove the currently displayed options\n\t    this.optionList.getChildren().each(function(option) {\n\t      option.removeFromDOM();\n\t    });\n\n\t    // Add the input option since the select options are inserted before it\n\t    this.inputOption = PrimeDocument.newElement('<li/>')\n\t        .appendTo(this.optionList);\n\t    this.input = PrimeDocument.newElement('<input/>')\n\t        .addEventListener('click', this._handleClickEvent)\n\t        .addEventListener('blur', this._handleBlurEvent)\n\t        .addEventListener('focus', this._handleFocusEvent)\n\t        .setAttribute('type', 'text')\n\t        .appendTo(this.inputOption);\n\t    this.searcher = new Searcher(this.input, this.searchResults, this)\n\t        .withOptions(this.options)\n\t        .initialize();\n\n\t    // Add the selected options\n\t    let hasSelectedOptions = false;\n\t    const options = this.element.getOptions();\n\t    for (let i = 0; i < options.length; i++) {\n\t      const option = options[i];\n\t      if (option.isSelected()) {\n\t        this.selectOption(option);\n\t        hasSelectedOptions = true;\n\t      }\n\t    }\n\n\t    // Put the placeholder attribute in if the MultipleSelect has no selected options\n\t    if (!hasSelectedOptions) {\n\t      this.input.setAttribute('placeholder', this.options.placeholder);\n\t    }\n\n\t    this.searcher.resizeInput();\n\n\t    // If error class handling was enabled and the select box has the error class, add it to the display\n\t    if (this.options.errorClass && this.element.hasClass(this.options.errorClass)) {\n\t      this.displayContainer.addClass(this.options.errorClass);\n\t    }\n\t  }\n\n\t  /**\n\t   * Set the initial options for this widget.\n\t   * @private\n\t   */\n\t  _setInitialOptions() {\n\t    // Defaults\n\t    this.options = {\n\t      allowDuplicates: false,\n\t      className: 'prime-multiple-select',\n\t      closeTimeout: 200,\n\t      customAddEnabled: true,\n\t      customAddLabel: 'Add Custom Value: ',\n\t      errorClass: null,\n\t      initialSelectedOrder: [],\n\t      noSearchResultsLabel: 'No Matches For: ',\n\t      placeholder: 'Choose',\n\t      preserveDisplayedSelectionOrder: false,\n\t      searchFunction: Searcher.selectSearchFunction,\n\t      removeIcon: 'X'\n\t    };\n\n\t    const userOptions = Utils.dataSetToOptions(this.element);\n\t    for (let option in userOptions) {\n\t      if (userOptions.hasOwnProperty(option)) {\n\t        this.options[option] = userOptions[option];\n\t      }\n\t    }\n\t  }\n\t}\n\n\t/*\n\t * Copyright (c) 2020, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\tclass Reorder {\n\t  /**\n\t   * Constructs a new Reorder object for the given element.\n\t   *\n\t   * @param {PrimeElement|Element|EventTarget} element The Prime Element for containing the re-orderable items.\n\t   * @constructor\n\t   */\n\t  constructor(element) {\n\t    Utils.bindAll(this);\n\n\t    this.element = PrimeElement.wrap(element);\n\t    this._setInitialOptions();\n\t  }\n\n\t  /**\n\t   * Destroy this widget.\n\t   *\n\t   * @returns {Reorder} This.\n\t   */\n\t  destroy() {\n\t    this.element.removeEventListener('click', this._handleMoveDownClick);\n\t    this.element.removeEventListener('click', this._handleMoveUpClick);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Initializes the widget by attaching event listeners to the element.\n\t   *\n\t   * @returns {Reorder} This.\n\t   */\n\t  initialize() {\n\t    this.element.addDelegatedEventListener('click', this.options.moveDownSelector, this._handleMoveDownClick);\n\t    this.element.addDelegatedEventListener('click', this.options.moveUpSelector, this._handleMoveUpClick);\n\n\t    this._refreshButtonStates();\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Move the item down.\n\t   *\n\t   * @param item {PrimeElement|Element} the item to move.\n\t   * @returns {Reorder} This.\n\t   */\n\t  moveDown(item) {\n\t    if (item !== null) {\n\t      item.getNextSibling().insertBefore(item);\n\t    }\n\n\t    this._refreshButtonStates();\n\n\t    if (this.options.reorderCallback) {\n\t      this.options.reorderCallback(this, item);\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Move the item up.\n\t   *\n\t   * @param item {PrimeElement|Element} the item to move.\n\t   * @returns {Reorder} This.\n\t   */\n\t  moveUp(item) {\n\t    if (item !== null) {\n\t      item.getPreviousSibling().insertAfter(item);\n\t    }\n\n\t    this._refreshButtonStates();\n\n\t    if (this.options.reorderCallback) {\n\t      this.options.reorderCallback(this, item);\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the selector which is used to identify the re-orderable items in the container.\n\t   *\n\t   * @param itemSelector {String} The item selector.\n\t   * @returns {Reorder} This.\n\t   */\n\t  withItemSelector(itemSelector) {\n\t    this.options.itemSelector = itemSelector;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the selector which is used to identify the move down button within the re-orderable item.\n\t   *\n\t   * @param moveDownSelector {String} The move down button selector.\n\t   * @returns {Reorder} This.\n\t   */\n\t  withDownSelector(moveDownSelector) {\n\t    this.options.moveDownSelector = moveDownSelector;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the selector which is used to identify the move up button within the re-orderable item.\n\t   *\n\t   * @param moveUpSelector {String} The move up button selector.\n\t   * @returns {Reorder} This.\n\t   */\n\t  withMoveUpSelector(moveUpSelector) {\n\t    this.options.moveUpSelector = moveUpSelector;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets a callback function to be used after an element changes order.\n\t   *\n\t   * @param reorderCallback {function} The optional callback function to call after an element changes order. This\n\t   *        function will be provided with the item that just moved.\n\t   * @returns {Reorder} This.\n\t   */\n\t  withReorderCallback(reorderCallback) {\n\t    this.options.reorderCallback = reorderCallback;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Set more than one option at a time by providing a map of key value pairs. This is considered an advanced\n\t   * method to set options on the widget. The caller needs to know what properties are valid in the options object.\n\t   *\n\t   * @param {Object} options Key value pair of configuration options.\n\t   * @returns {Reorder} This.\n\t   */\n\t  withOptions(options) {\n\t    if (!Utils.isDefined(options)) {\n\t      return this;\n\t    }\n\n\t    for (let option in options) {\n\t      if (options.hasOwnProperty(option)) {\n\t        this.options[option] = options[option];\n\t      }\n\t    }\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Redraw the state of this widget. This may be called if you have added additional items to be re-ordered.\n\t   *\n\t   * @returns {Reorder} This.\n\t   */\n\t  redraw() {\n\t    this._refreshButtonStates();\n\t    return this;\n\t  }\n\n\t  /* ===================================================================================================================\n\t   * Private methods\n\t   * ===================================================================================================================*/\n\n\t  /**\n\t   * Handle the Move Down click event.\n\t   *\n\t   * @param {Event} event The event.\n\t   * @private\n\t   */\n\t  _handleMoveDownClick(event) {\n\t    Utils.stopEvent(event);\n\n\t    const target = new PrimeElement(event.target);\n\t    const item = target.queryUp(this.options.itemSelector);\n\t    this.moveDown(item);\n\t  }\n\n\t  /**\n\t   * Handle the Move Up click event.\n\t   *\n\t   * @param {Event} event The event.\n\t   * @private\n\t   */\n\t  _handleMoveUpClick(event) {\n\t    Utils.stopEvent(event);\n\n\t    const target = new PrimeElement(event.target);\n\t    const item = target.queryUp(this.options.itemSelector);\n\t    this.moveUp(item);\n\t  }\n\n\t  /**\n\t   * Handle a 'refresh' to ensure the buttons are in the correct state.\n\t   * @private\n\t   */\n\t  _refreshButtonStates() {\n\t    const items = this.element.query(this.options.itemSelector);\n\t    if (items.length === 0) {\n\t      return;\n\t    }\n\n\t    if (items.length === 1) {\n\t      // Only one item, all buttons are disabled\n\t      items[0].queryFirst(this.options.moveDownSelector).addClass('disabled');\n\t      items[0].queryFirst(this.options.moveUpSelector).addClass('disabled');\n\t      items[0].setDataAttribute('index', 0);\n\t      return;\n\t    }\n\n\t    // More than one item\n\t    items.each(function(element, index) {\n\t      if (index === 0) {\n\t        // First element\n\t        element.queryFirst(this.options.moveUpSelector).addClass('disabled');\n\t        element.queryFirst(this.options.moveDownSelector).removeClass('disabled');\n\t      } else if (index === (items.length - 1)) {\n\t        // Last element\n\t        element.queryFirst(this.options.moveUpSelector).removeClass('disabled');\n\t        element.queryFirst(this.options.moveDownSelector).addClass('disabled');\n\t      } else {\n\t        // Enable these up and down buttons\n\t        element.queryFirst(this.options.moveDownSelector).removeClass('disabled');\n\t        element.queryFirst(this.options.moveUpSelector).removeClass('disabled');\n\t      }\n\n\t      // Set the index data attribute\n\t      element.setDataAttribute('index', index);\n\t    }.bind(this));\n\t  }\n\n\t  /**\n\t   * Set the initial options for this widget.\n\t   * @private\n\t   */\n\t  _setInitialOptions() {\n\t    // Defaults\n\t    this.options = {\n\t      itemSelector: 'data-item',\n\t      moveDownSelector: 'a.down',\n\t      moveUpSelector: 'a.up',\n\t      reorderCallback: null\n\t    };\n\n\t    const userOptions = Utils.dataSetToOptions(this.element);\n\t    for (let option in userOptions) {\n\t      if (userOptions.hasOwnProperty(option)) {\n\t        this.options[option] = userOptions[option];\n\t      }\n\t    }\n\t  }\n\t}\n\n\t/*\n\t * Copyright (c) 2016-2017, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\t//Some externs to make intellij linter shutup. :p\n\t/**\n\t * @external TouchEvent\n\t */\n\n\t/**\n\t * @property {Array} changedTouches\n\t * @name TouchEvent#changedTouches\n\t */\n\n\t/**\n\t * @class Touchable\n\t */\n\tclass Touchable {\n\t  /**\n\t   * Constructs a new Touchable object for the given element.\n\t   *\n\t   * @param {PrimeElement|Element|EventTarget} element The Prime Element for the Touchable widget.\n\t   * @param {Function} [eventPropagationHandler] A Function that handles how the event is handled for the touchstart,\n\t   * touchend, touchmove, and touchcancel events. This Function takes the event object as its only parameter.\n\t   * @constructor\n\t   */\n\t  constructor(element, eventPropagationHandler) {\n\t    Utils.bindAll(this);\n\n\t    this.element = PrimeElement.wrap(element);\n\t    this.eventPropagationHandler = eventPropagationHandler;\n\t  }\n\n\t  /**\n\t   * Destroys the Touchable Widget\n\t   */\n\t  destroy() {\n\t    this.element\n\t        .removeEventListener('touchstart', this._handleTouchStart)\n\t        .removeEventListener('touchmove', this._handleTouchMove)\n\t        .removeEventListener('touchcancel', this._handleTouchCancel)\n\t        .removeEventListener('touchend', this._handleTouchEnd)\n\t        .removeEventListenersByPattern(/Prime\\.Widgets\\.Touchable:.+/);\n\t  }\n\n\t  /**\n\t   * Initializes the widget by attaching all of the event listeners to the element.\n\t   *\n\t   * @returns {Touchable} This.\n\t   */\n\t  initialize() {\n\t    this.element\n\t        .addEventListener('touchstart', this._handleTouchStart)\n\t        .addEventListener('touchmove', this._handleTouchMove)\n\t        .addEventListener('touchcancel', this._handleTouchCancel)\n\t        .addEventListener('touchend', this._handleTouchEnd);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Provide a handler that will be called when a long press is detected.\n\t   *\n\t   * @param {Function} handler The event handler.\n\t   * @returns {Touchable} This\n\t   */\n\t  withLongPressHandler(handler) {\n\t    this.element.addEventListener('Touchable:longPress', handler);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Provide a handler that will be called when a move event is detected.\n\t   *\n\t   * @param {Function} handler The event handler.\n\t   * @returns {Touchable} This\n\t   */\n\t  withMoveHandler(handler) {\n\t    this.element.addEventListener('Touchable:move', handler);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Provide a handler that will be called when a long press is detected.\n\t   *\n\t   * @param {Function} handler The event handler.\n\t   * @returns {Touchable} This\n\t   */\n\t  withSwipeDownHandler(handler) {\n\t    this.element.addEventListener('Touchable:swipeDown', handler);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Provide a handler that will be called when a swipe left event is detected.\n\t   *\n\t   * @param {Function} handler The event handler.\n\t   * @returns {Touchable} This\n\t   */\n\t  withSwipeLeftHandler(handler) {\n\t    this.element.addEventListener('Touchable:swipeLeft', handler);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Provide a handler that will be called when a swipe right event is detected.\n\t   *\n\t   * @param {Function} handler The event handler.\n\t   * @returns {Touchable} This\n\t   */\n\t  withSwipeRightHandler(handler) {\n\t    this.element.addEventListener('Touchable:swipeRight', handler);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Provide a handler that will be called when a swipe up event is detected.\n\t   *\n\t   * @param {Function} handler The event handler.\n\t   * @returns {Touchable} This\n\t   */\n\t  withSwipeUpHandler(handler) {\n\t    this.element.addEventListener('Touchable:swipeUp', handler);\n\t    return this;\n\t  }\n\n\t  /* ===================================================================================================================\n\t   * Private methods\n\t   * ===================================================================================================================*/\n\n\t  /**\n\t   * Collects all of the touch data at the end of the touch and calculates the distances and times.\n\t   *\n\t   * @param {TouchEvent} event The TouchEvent.\n\t   * @private\n\t   */\n\t  _collectTouchData(event) {\n\t    const touchPoints = event.changedTouches.length;\n\t    if (touchPoints > 1) {\n\t      return;\n\t    }\n\n\t    const touch = event.changedTouches[0];\n\t    this.elapsedTime = new Date().getTime() - this.touchStarted;\n\t    this.touchEndX = touch.pageX;\n\t    this.touchEndY = touch.pageY;\n\t    this.touchX = this.touchStartX - this.touchEndX;\n\t    this.touchY = this.touchStartY - this.touchEndY;\n\t  }\n\n\t  /**\n\t   * Called when all processing is finished and the handlers are called based on direction and time of the touches.\n\t   *\n\t   * @private\n\t   */\n\t  _finished() {\n\t    // Make sure this was a swipe\n\t    const event = {\n\t      elapsedTime: this.elapsedTime,\n\t      touchStartX: this.touchStartX,\n\t      touchStartY: this.touchStartY,\n\t      touchEndX: this.touchEndX,\n\t      touchEndY: this.touchEndY,\n\t      touchX: this.touchX,\n\t      touchY: this.touchY,\n\t      element: this.element,\n\t      target: this.element.domElement\n\t    };\n\t    event.swipe = Math.abs(event.touchX) > 50 || Math.abs(event.touchY) > 50;\n\t    event.swipeX = event.swipe && Math.abs(event.touchX) > Math.abs(event.touchY);\n\t    event.swipeY = event.swipe && !event.swipeX;\n\t    event.longPress = !event.swipe && event.elapsedTime > 500;\n\n\t    if (event.longPress) {\n\t      this.element.fireCustomEvent('Touchable:longPress', event);\n\t    } else if (event.swipeX && event.touchX > 0) {\n\t      this.element.fireCustomEvent('Touchable:swipeLeft', event);\n\t    } else if (event.swipeX) {\n\t      this.element.fireCustomEvent('Touchable:swipeRight', event);\n\t    } else if (event.swipeY && event.touchY > 0) {\n\t      this.element.fireCustomEvent('Touchable:swipeUp', event);\n\t    } else if (event.swipeY) {\n\t      this.element.fireCustomEvent('Touchable:swipeDown', event);\n\t    }\n\t  }\n\n\t  /**\n\t   * Handle the touch cancel event.\n\t   *\n\t   * @param {TouchEvent} event The touch event.\n\t   * @private\n\t   */\n\t  _handleTouchCancel(event) {\n\t    this._collectTouchData(event);\n\t    this._finished();\n\t    if (Utils.isDefined(this.eventPropagationHandler)) {\n\t      this.eventPropagationHandler(event);\n\t    }\n\t  }\n\n\t  /**\n\t   * Handle the touch end event.\n\t   *\n\t   * @param {TouchEvent} event The touch event.\n\t   * @private\n\t   */\n\t  _handleTouchEnd(event) {\n\t    this._collectTouchData(event);\n\t    this._finished();\n\t    if (Utils.isDefined(this.eventPropagationHandler)) {\n\t      this.eventPropagationHandler(event);\n\t    }\n\t  }\n\n\t  /**\n\t   * Handle the touch move event.\n\t   *\n\t   * @param {TouchEvent} event The touch event.\n\t   * @private\n\t   */\n\t  _handleTouchMove(event) {\n\t    this.element.fireEvent('Touchable:move', event);\n\t    if (Utils.isDefined(this.eventPropagationHandler)) {\n\t      this.eventPropagationHandler(event);\n\t    }\n\t  }\n\n\t  /**\n\t   * Handle the touch start event.\n\t   *\n\t   * @param {TouchEvent} event The touch event.\n\t   * @private\n\t   */\n\t  _handleTouchStart(event) {\n\t    const touchPoints = event.changedTouches.length;\n\t    if (touchPoints > 1) {\n\t      if (Utils.isDefined(this.eventPropagationHandler)) {\n\t        this.eventPropagationHandler(event);\n\t      }\n\n\t      return;\n\t    }\n\n\t    const touch = event.changedTouches[0];\n\t    this.touchStarted = new Date().getTime();\n\t    this.touchStartX = touch.pageX;\n\t    this.touchStartY = touch.pageY;\n\t    if (Utils.isDefined(this.eventPropagationHandler)) {\n\t      this.eventPropagationHandler(event);\n\t    }\n\t  }\n\t}\n\n\t/*\n\t * Copyright (c) 2015-2017, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\tclass SideMenu {\n\t  /**\n\t   * Constructs the side menu.\n\t   *\n\t   * @param {PrimeElement|Element} button The button element that is used to open the side menu.\n\t   * @param {PrimeElement|Element} sideMenuElement The side menu element that will be \"hidden\" and \"show\".\n\t   * @constructor\n\t   */\n\t  constructor(button, sideMenuElement) {\n\t    Utils.bindAll(this);\n\t    this.sideMenu = PrimeElement.wrap(sideMenuElement);\n\t    this.button = PrimeElement.wrap(button);\n\t    this._setInitialOptions();\n\t  }\n\n\t  /**\n\t   * Closes the side menu.\n\t   *\n\t   * @returns {SideMenu} This.\n\t   */\n\t  close() {\n\t    if (!PrimeDocument.bodyElement.hasClass(this.options.closedClass)) {\n\t      PrimeDocument.bodyElement.addClass(this.options.closedClass);\n\t    }\n\n\t    if (PrimeDocument.bodyElement.hasClass(this.options.openClass)) {\n\t      PrimeDocument.bodyElement.removeClass(this.options.openClass);\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Initializes the widget by attaching the event listener to the menu button.\n\t   *\n\t   * @returns {SideMenu}\n\t   */\n\t  initialize() {\n\t    this.button.addEventListener('click', this._handleClickEvent);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * @returns {boolean} True if the side menu is currently open.\n\t   */\n\t  isOpen() {\n\t    return this.sideMenu.getLeft() >= 0;\n\t    // return PrimeDocument.bodyElement.hasClass('prime-side-menu-open') || !PrimeDocument.bodyElement.hasClass('prime-side-menu-closed');\n\t  }\n\n\t  /**\n\t   * Opens the mobile nav.\n\t   * @returns {SideMenu} This.\n\t   */\n\t  open() {\n\t    if (PrimeDocument.bodyElement.hasClass(this.options.closedClass)) {\n\t      PrimeDocument.bodyElement.removeClass(this.options.closedClass);\n\t    }\n\n\t    if (!PrimeDocument.bodyElement.hasClass(this.options.openClass)) {\n\t      PrimeDocument.bodyElement.addClass(this.options.openClass);\n\t    }\n\n\t    this.touchable = new Touchable(PrimeDocument.bodyElement).withSwipeLeftHandler(this._handleSwipeLeft);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Set more than one option at a time by providing a map of key value pairs. This is considered an advanced\n\t   * method to set options on the widget. The caller needs to know what properties are valid in the options object.\n\t   *\n\t   * @param {Object} options Key value pair of configuration options.\n\t   * @returns {SideMenu} This.\n\t   */\n\t  withOptions(options) {\n\t    if (!Utils.isDefined(options)) {\n\t      return this;\n\t    }\n\n\t    for (let option in options) {\n\t      if (options.hasOwnProperty(option)) {\n\t        this.options[option] = options[option];\n\t      }\n\t    }\n\t    return this;\n\t  }\n\n\t  /* ===================================================================================================================\n\t   * Private methods\n\t   * ===================================================================================================================*/\n\n\t  /**\n\t   * Handles the click event on the side menu button and calls either the open or close function.\n\t   *\n\t   * @private\n\t   */\n\t  _handleClickEvent(event) {\n\t    Utils.stopEvent(event);\n\t    if (this.isOpen()) {\n\t      this.close();\n\t    } else {\n\t      this.open();\n\t    }\n\t  }\n\n\t  /**\n\t   * Handles the synthetic swipe left event that Prime.js provides.\n\t   *\n\t   * @private\n\t   */\n\t  _handleSwipeLeft() {\n\t    if (this.isOpen()) {\n\t      this.close();\n\t    }\n\n\t    if (Utils.isDefined(this.touchable)) {\n\t      this.touchable.destroy();\n\t      this.touchable = null;\n\t    }\n\t  }\n\n\t  /**\n\t   * Set the initial options for this widget.\n\t   * @private\n\t   */\n\t  _setInitialOptions() {\n\t    // Defaults\n\t    this.options = {\n\t      closedClass: 'prime-side-menu-closed',\n\t      openClass: 'prime-side-menu-open'\n\t    };\n\n\t    const userOptions = Utils.dataSetToOptions(this.sideMenu);\n\t    for (let option in userOptions) {\n\t      if (userOptions.hasOwnProperty(option)) {\n\t        this.options[option] = userOptions[option];\n\t      }\n\t    }\n\t  }\n\t}\n\n\t/*\n\t * Copyright (c) 2017, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\tconst PrimeStorage = {\n\t  /**\n\t   * True if local storage is supported.\n\t   * @type {boolean} true if local storage is supported. Local in this case being used to indicate either type 'local' or 'session'.\n\t   */\n\t  supported: typeof(Storage) !== 'undefined',\n\n\t  /**\n\t   * Set an object into session storage.\n\t   * @param key {string} the key to store the object.\n\t   * @param object {object} the object to store.\n\t   */\n\t  setSessionObject: function(key, object) {\n\t    PrimeStorage._setObject(sessionStorage, key, object);\n\t  },\n\n\t  /**\n\t   * Retrieve an object from session storage.\n\t   * @param key {string} the key that was used to store the object.\n\t   * @return {object} the stored object or null if it does not exist or local storage is not supported.\n\t   */\n\t  getSessionObject: function(key) {\n\t    return PrimeStorage._getObject(sessionStorage, key);\n\t  },\n\n\t  /**\n\t   * Set an object into local storage storage.\n\t   * @param key {string} the key to store the object.\n\t   * @param object {object} the object to store.\n\t   */\n\t  setLocalObject: function(key, object) {\n\t    PrimeStorage._setObject(localStorage, key, object);\n\t  },\n\n\t  /**\n\t   * Retrieve an object from local storage.\n\t   * @param key {string} the key that was used to store the object.\n\t   * @return {object} the stored object or null if it does not exist or local storage is not supported.\n\t   */\n\t  getLocalObject: function(key) {\n\t    return PrimeStorage._getObject(localStorage, key);\n\t  },\n\n\t  /* ===================================================================================================================\n\t   * Private methods\n\t   * ===================================================================================================================*/\n\n\t  _getObject: function(storage, key) {\n\t    if (PrimeStorage.supported) {\n\t      const item = storage.getItem(key);\n\t      if (item !== null) {\n\t        return JSON.parse(item);\n\t      }\n\t    }\n\n\t    return null;\n\t  },\n\n\t  _setObject: function(storage, key, object) {\n\t    if (PrimeStorage.supported) {\n\t      storage.setItem(key, JSON.stringify(object));\n\t    }\n\t  }\n\t};\n\n\t/*\n\t * Copyright (c) 2014-2017, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\tclass SplitButton {\n\t  /**\n\t   * Constructs a new SplitButton object for the given element.\n\t   *\n\t   * The markup must be a specific structure in order for the SplitButton to remember the last action the user took\n\t   * as well as show and hide the menu of items.\n\t   *\n\t   * Here's the format for the elements.\n\t   *\n\t   * <pre>\n\t   *   &lt;div class=\"split-button\"&gt;\n\t   *     &lt;a href=\"#\"&gt;Loading... &lt;/a&gt;\n\t   *     &lt;button type=\"button\"&gt;&lt;/button&gt;\n\t   *     &lt;div type=\"menu\"&gt;\n\t   *       &lt;a class=\"item\" href=\"/admin/foo/add/\"&gt;Add&lt;/a&gt;\n\t   *       &lt;a class=\"item\" href=\"/admin/foo/delete/\"&gt;Delete&lt;/a&gt;\n\t   *     &lt;/div&gt;\n\t   *   &lt;/ul&gt;\n\t   * </pre>\n\t   *\n\t   * Also, it is important to understand how to attach event listeners to the SplitButton. You cannot attach them to\n\t   * the individual menu items since those will never be clicked. Instead, you must attach them to the div at the top\n\t   * and handle all the events from inside. This is due to how the split button changes the main button based on the\n\t   * action the user took last.\n\t   *\n\t   * @param element {PrimeElement|Element|EventTarget} The element to transform into a split button.\n\t   * @constructor\n\t   */\n\t  constructor(element) {\n\t    Utils.bindAll(this);\n\n\t    this.element = PrimeElement.wrap(element);\n\t    this.currentAction = this.element.queryFirst('a');\n\t    if (this.currentAction === null) {\n\t      throw new TypeError('The SplitButton element must contain an <a> that is the currently selected action.');\n\t    }\n\t    this.loading = this.currentAction;\n\n\t    this.button = this.element.queryFirst('button');\n\t    if (this.button === null) {\n\t      throw new TypeError('The SplitButton element must contain a <button> that is used to open it.');\n\t    }\n\n\t    this.menu = this.element.queryFirst('.menu');\n\t    if (this.menu === null) {\n\t      throw new TypeError('The SplitButton element must contain a <div class=\"menu\"> that contains the menu items.');\n\t    }\n\n\t    this.items = this.menu.query('.item');\n\t    if (this.items.length === 0) {\n\t      throw new TypeError('The SplitButton element must contain at least one item.');\n\t    }\n\n\t    this.actionIndex = null;\n\t    this.options = {};\n\t    this._setInitialOptions();\n\t  }\n\n\t  /**\n\t   * Removes the event listeners.\n\t   */\n\t  destroy() {\n\t    this.button.removeEventListener('click', this._handleButtonClick);\n\t  }\n\n\t  /**\n\t   * Initializes the SplitButton by setting up all the event listeners and managing the default action or the last action\n\t   * that the user took.\n\t   */\n\t  initialize() {\n\t    this.button.addEventListener('click', this._handleButtonClick);\n\t    this.items.each(item => item.addEventListener('click', this._handleItemClick));\n\t    this.redraw();\n\t    return this;\n\t  }\n\n\t  redraw() {\n\t    // Load the last action (if any)\n\t    let actionId = null;\n\t    if (PrimeStorage.supported && this.options.localStorageKey !== null) {\n\t      actionId = PrimeStorage.getSessionObject(this.options.localStorageKey);\n\t      if (actionId !== null) {\n\t        this.selectAction(actionId);\n\t      }\n\t    }\n\n\t    // If no action is selected from local storage, select the default\n\t    if (actionId === null) {\n\t      this.selectDefaultAction();\n\t    }\n\n\t    return this;\n\t  }\n\n\t  selectAction(actionId) {\n\t    const item = PrimeDocument.queryById(actionId);\n\t    if (item !== null) {\n\t      let classes = '';\n\t      if (this.loading !== null) {\n\t        classes = this.loading.getAttribute('class');\n\t        this.loading.removeFromDOM();\n\t        this.loading = null;\n\t      } else {\n\t        classes = this.currentAction.getAttribute('class');\n\t        this.currentAction.setAttribute('class', this.currentAction.getAttribute('data-original-class'));\n\t        this.currentAction.removeFromDOM();\n\t        this.currentAction.prependTo(this.menu);\n\t      }\n\n\t      item.setAttribute('data-original-class', item.getAttribute('class'));\n\t      item.setAttribute('class', classes);\n\t      item.removeFromDOM();\n\t      item.prependTo(this.element);\n\t      this.currentAction = item;\n\t    } else {\n\t      // This shouldn't infinitely recurse because that method always finds something\n\t      this.selectDefaultAction();\n\t    }\n\n\t    // this.currentAction.setAttribute('href', item.getAttribute('href'));\n\t    // this.currentAction.setHTML(item.getHTML());\n\t    return this;\n\t  }\n\n\t  selectDefaultAction() {\n\t    // Find the default\n\t    let actionId = null;\n\t    for (let i = 0; i < this.items.length; i++) {\n\t      if (this.items[i].hasClass('default')) {\n\t        actionId = this.items[i].getId();\n\t        break;\n\t      }\n\t    }\n\n\t    // Fall back if it wasn't found\n\t    if (actionId === null) {\n\t      actionId = this.items[0].getId();\n\t    }\n\n\t    // Select the default (or first item)\n\t    if (actionId !== null) {\n\t      this._saveLastAction(actionId);\n\t      this.selectAction(actionId);\n\t    }\n\n\t    return this;\n\t  }\n\n\t  withLocalStorageKey(localStorageKey) {\n\t    this.options.localStorageKey = localStorageKey;\n\t    return this;\n\t  }\n\n\t  withOptions(options) {\n\t    if (!Utils.isDefined(options)) {\n\t      return this;\n\t    }\n\n\t    for (let option in options) {\n\t      if (options.hasOwnProperty(option)) {\n\t        this.options[option] = options[option];\n\t      }\n\t    }\n\n\t    return this;\n\t  }\n\n\t  /* ===================================================================================================================\n\t   * Private methods\n\t   * ===================================================================================================================*/\n\n\t  /**\n\t   * Handles the button click event.\n\t   * @private\n\t   */\n\t  _handleButtonClick(event) {\n\t    Utils.stopEvent(event);\n\t    if (this.menu.isVisible()) {\n\t      this.menu.hide();\n\t    } else {\n\t      this.menu.show();\n\t    }\n\t  }\n\n\t  /**\n\t   * Handles the item click event to update the last action in local storage (if enabled).\n\t   * @private\n\t   */\n\t  _handleItemClick(event) {\n\t    for (let i = 0; i < this.items.length; i++) {\n\t      if (this.items[i].domElement === event.target) {\n\t        let actionId = this.items[i].getId();\n\t        this._saveLastAction(actionId);\n\t        this.selectAction(actionId);\n\t        this.menu.hide();\n\t        break;\n\t      }\n\t    }\n\t  }\n\n\t  _saveLastAction(actionId) {\n\t    if (PrimeStorage.supported && this.options.localStorageKey !== null) {\n\t      PrimeStorage.setSessionObject(this.options.localStorageKey, actionId);\n\t    }\n\t  }\n\n\t  /**\n\t   * Set the initial options for this widget.\n\t   * @private\n\t   */\n\t  _setInitialOptions() {\n\t    // Defaults\n\t    this.options = {\n\t      localStorageKey: null\n\t    };\n\n\t    const userOptions = Utils.dataSetToOptions(this.element);\n\t    for (let option in userOptions) {\n\t      if (userOptions.hasOwnProperty(option)) {\n\t        this.options[option] = userOptions[option];\n\t      }\n\t    }\n\t  }\n\t}\n\n\t/*\n\t * Copyright (c) 2017-2018, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\tclass Table {\n\t  /**\n\t   * Constructs a new Table object for the given table element.\n\t   *\n\t   * @param {PrimeElement|Element} element The table element.\n\t   * @constructor\n\t   */\n\t  constructor(element) {\n\t    Utils.bindAll(this);\n\n\t    this.column = null;\n\t    this.columnIndex = 0;\n\t    this.sortAscending = true;\n\n\t    this.element = PrimeElement.wrap(element);\n\t    this.thead = this.element.queryFirst('thead');\n\t    this.tbody = this.element.queryFirst('tbody');\n\n\t    if (!this.element.is('table')) {\n\t      throw new TypeError('The element you passed in is not a table element.');\n\t    }\n\n\t    this._setInitialOptions();\n\t  }\n\n\t  /**\n\t   * Initializes the table widget.\n\t   *\n\t   * @returns {Table} This.\n\t   */\n\t  initialize() {\n\t    // Sortable by default unless it is disabled\n\t    if (this.element.getDataAttribute('sortable') !== 'false') {\n\t      this._initializeSort();\n\t    }\n\n\t    // Initialize the checkbox handling\n\t    this.selectAll = this.element.queryFirst('thead > tr > th input[type=\"checkbox\"]');\n\t    if (this.selectAll !== null) {\n\t      this.selectAll.addEventListener('change', this._handleSelectAllChange);\n\t    }\n\n\t    this.element.query('tbody > tr > td input[type=\"checkbox\"]').addEventListener('click', this._handleCheckboxEvent);\n\t    this.checkedCount = 0;\n\t    this.numberofCheckboxes = this.element.query('tbody td input[type=\"checkbox\"]').length;\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sort the table.\n\t   */\n\t  sort() {\n\t    this._clearSortIndicators();\n\n\t    if (this.column.hasClass('sort-up')) {\n\t      this.column.removeClass('sort-up').addClass('sort-down');\n\t      this.sortAscending = false;\n\t    } else if (this.column.hasClass('sort-down')) {\n\t      this.column.removeClass('sort-down').addClass('sort-up');\n\t      this.sortAscending = true;\n\t    } else {\n\t      this.column.addClass('sort-up');\n\t      this.sortAscending = true;\n\t    }\n\n\t    // Collect the values to sort\n\t    const rows = [];\n\t    this.tbody.query('tr').each(function(element) {\n\t      rows.push(element);\n\t    });\n\n\t    rows.sort(this._comparator);\n\t    let i = 0;\n\t    const length = rows.length;\n\t    if (this.sortAscending) {\n\t      for (i = 0; i <  length; i++) {\n\t        this.tbody.appendElement(rows[i]);\n\t      }\n\t    } else {\n\t      for (i = length; i > 0; i--) {\n\t        this.tbody.appendElement(rows[i - 1]);\n\t      }\n\t    }\n\n\t    // Save current sorted column state in local storage.\n\t    if (PrimeStorage.supported && this.options.localStorageKey !== null) {\n\t      const data = {\n\t        columnIndex: this.columnIndex,\n\t        sortAscending: this.sortAscending\n\t      };\n\t      PrimeStorage.setSessionObject(this.options.localStorageKey, data);\n\t    }\n\t  }\n\n\t  /**\n\t   * Sets a callback on a checkbox event.\n\t   *\n\t   * @param {function} callback The callback function\n\t   * @returns {Table} This.\n\t   */\n\t  withCheckEventCallback(callback) {\n\t    this.options.checkEventCallback = callback;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Enables local storage of the sorted column. This key is required to enable local storage of the sorted column.\n\t   *\n\t   * @param {String} key The local storage key.\n\t   * @returns {Table} This.\n\t   */\n\t  withLocalStorageKey(key) {\n\t    this.options.localStorageKey = key;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Set more than one option at a time by providing a map of key value pairs. This is considered an advanced\n\t   * method to set options on the widget. The caller needs to know what properties are valid in the options object.\n\t   *\n\t   * @param {Object} options Key value pair of configuration options.\n\t   * @returns {Table} This.\n\t   */\n\t  withOptions(options) {\n\t    if (!Utils.isDefined(options)) {\n\t      return this;\n\t    }\n\n\t    for (let option in options) {\n\t      if (options.hasOwnProperty(option)) {\n\t        this.options[option] = options[option];\n\t      }\n\t    }\n\t    return this;\n\t  }\n\n\t  /* ===================================================================================================================\n\t   * Private methods\n\t   * ===================================================================================================================*/\n\n\t  /**\n\t   * Remove the ascending and descending sort classes on every column except the current column being sorted.\n\t   * @private\n\t   */\n\t  _clearSortIndicators() {\n\t    this.thead.query('th').each((function(element) {\n\t      if (element.domElement !== this.column.domElement) {\n\t        element.removeClass('sort-up sort-down');\n\t      }\n\t    }).bind(this));\n\t  }\n\n\t  /**\n\t   * Sort function to be used by the .sort() method.\n\t   * @param a The first row to compare\n\t   * @param b The second row to compare\n\t   * @returns {number}\n\t   * @private\n\t   */\n\t  _comparator(a, b) {\n\t    const sortType = this.thead.query('th')[this.columnIndex].getDataAttribute('sortType') || 'string';\n\t    if (sortType !== 'string' && sortType !== 'number') {\n\t      throw new Error('Unsupported sort type. [string] or [number] are the two supported sort types.');\n\t    }\n\n\t    const cell1 = a.query('td')[this.columnIndex];\n\t    const cell2 = b.query('td')[this.columnIndex];\n\n\t    const sortValue1 = cell1.getDataAttribute('sortValue');\n\t    const sortValue2 = cell2.getDataAttribute('sortValue');\n\n\t    // Prefer the data-sort-value if provided\n\t    let value1 = sortValue1 || cell1.getTextContent().toLowerCase();\n\t    let value2 = sortValue2 || cell2.getTextContent().toLowerCase();\n\n\t    if (sortType === 'string') {\n\t      return value1.localeCompare(value2);\n\t    } else {\n\t      value1 = this._toNumber(value1);\n\t      value2 = this._toNumber(value2);\n\n\t      if (value1 < value2) {\n\t        return -1;\n\t      }\n\n\t      if (value1 > value2) {\n\t        return 1;\n\t      }\n\n\t      return 0;\n\t    }\n\t  }\n\n\t  // noinspection JSMethodCanBeStatic\n\t  /**\n\t   * Return the column index where 0 is the first column in the table.\n\t   * @param column {PrimeElement} the column to determine the index of\n\t   * @returns {number} a positive integer representing the index of the column in the table.\n\t   * @private\n\t   */\n\t  _getColumnIndex(column) {\n\t    let columnIndex = 0;\n\t    let current = column;\n\t    let previous = column;\n\t    while (previous !== null) {\n\t      previous = current.getPreviousSibling();\n\t      current = previous;\n\t      columnIndex++;\n\t    }\n\n\t    return columnIndex - 1;\n\t  }\n\n\t  _handleCheckboxEvent(event) {\n\t    const target = new PrimeElement(event.currentTarget);\n\t    const currentCheckedCount = this.checkedCount;\n\t    this.checkedCount = this.checkedCount + (target.isChecked() ? 1 : -1);\n\n\t    if (this.selectAll !== null) {\n\t      if (currentCheckedCount === this.numberofCheckboxes && this.numberofCheckboxes !== this.checkedCount) {\n\t        this.selectAll.setChecked(false);\n\t      } else if (currentCheckedCount !== this.numberofCheckboxes && this.numberofCheckboxes === this.checkedCount) {\n\t        this.selectAll.setChecked(true);\n\t      }\n\t    }\n\n\t    if (this.options.checkEventCallback !== null) {\n\t      this.options.checkEventCallback({\n\t        checkedCount: this.checkedCount\n\t      });\n\t    }\n\t  }\n\n\t  _handleSelectAllChange() {\n\t    if (this.selectAll.isChecked()) {\n\t      this.element.query('tbody tr > td input[type=\"checkbox\"]').each(function(e) {\n\t        if (!e.isChecked()) {\n\t          e.setChecked(true);\n\t          this.checkedCount++;\n\t        }\n\t      }.bind(this));\n\t    } else {\n\t      this.element.query('tbody tr > td input[type=\"checkbox\"]').each(function(e) {\n\t        if (e.isChecked()) {\n\t          e.setChecked(false);\n\t          this.checkedCount--;\n\t        }\n\t      }.bind(this));\n\t    }\n\n\t    if (this.options.checkEventCallback !== null) {\n\t      this.options.checkEventCallback({\n\t        checkedCount: this.checkedCount\n\t      });\n\t    }\n\t  }\n\n\t  /**\n\t   * Handle the click event on the sortable column.\n\t   * @param event {MouseEvent} the click event\n\t   * @private\n\t   */\n\t  _handleSortableColumnClick(event) {\n\t    Utils.stopEvent(event);\n\t    const target = new PrimeElement(event.currentTarget);\n\t    this.column = target;\n\t    this.columnIndex = this._getColumnIndex(target);\n\n\t    this.sort();\n\t  }\n\n\t  /**\n\t   * Add the click event listener to the column unless it matches the ignore selector.\n\t   * @param column {PrimeElement} the column element to initialize.\n\t   * @private\n\t   */\n\t  _initializeColumn(column) {\n\t    if (!column.is('[data-sortable=\"false\"]') && column.queryFirst('input[type=\"checkbox\"]') === null) {\n\t      column.addClass('sortable').addEventListener('click', this._handleSortableColumnClick);\n\t    }\n\t  }\n\n\t  _initializeSort() {\n\t    this.thead.query('th').each(this._initializeColumn);\n\n\t    if (PrimeStorage.supported && this.options.localStorageKey !== null) {\n\t      const state = PrimeStorage.getSessionObject(this.options.localStorageKey);\n\t      if (state !== null) {\n\t        this.columnIndex = state.columnIndex;\n\t        this.sortAscending = state.sortAscending;\n\n\t        this.column = this.thead.query('th')[this.columnIndex];\n\t        if (this.sortAscending) {\n\t          this.column.addClass('sort-down');\n\t        } else {\n\t          this.column.addClass('sort-up');\n\t        }\n\n\t        this.sort();\n\t      }\n\t    }\n\t  }\n\n\t  /**\n\t   * Set the initial options for this widget.\n\t   * @private\n\t   */\n\t  _setInitialOptions() {\n\t    // Defaults\n\t    this.options = {\n\t      localStorageKey: null,\n\t      checkEventCallback: null\n\t    };\n\n\t    const userOptions = Utils.dataSetToOptions(this.element);\n\t    for (let option in userOptions) {\n\t      if (userOptions.hasOwnProperty(option)) {\n\t        this.options[option] = userOptions[option];\n\t      }\n\t    }\n\t  }\n\n\t  // noinspection JSMethodCanBeStatic\n\t  _toNumber(value) {\n\t    const number = Number(value);\n\t    if (isNaN(value)) {\n\t      console.error(new Error('Expected value [' + value + '] to be a number.'));\n\t      return value;\n\t    }\n\t    return number;\n\t  }\n\t}\n\n\t/*\n\t * Copyright (c) 2015-2018, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\tclass Tabs {\n\t  /**\n\t   * Constructs a new Tabs object for the given ul element.\n\t   *\n\t   * @param {PrimeElement|Element|EventTarget} element The ul element to build the tab widget from\n\t   * @constructor\n\t   */\n\t  constructor(element) {\n\t    Utils.bindAll(this);\n\n\t    this.element = PrimeElement.wrap(element);\n\t    if (this.element.getTagName().toLowerCase() === 'ul') {\n\t      this.tabsContainer = this.element;\n\t    } else {\n\t      this.tabsContainer = this.element.queryFirst('ul');\n\t    }\n\n\t    if (this.tabsContainer === null) {\n\t      throw new TypeError('Tabs requires a ul element. The passed element does not contain a ul element');\n\t    }\n\n\t    this._setInitialOptions();\n\t    this.tabContents = {};\n\t    this.tabs = {};\n\t    this.tabArray = [];\n\t    this.selectedTab = null;\n\t  }\n\n\t  /**\n\t   * Destroys the Tabs widget\n\t   */\n\t  destroy() {\n\t    this.tabsContainer.query('a').each(function(a) {\n\t      a.removeEventListener('click', this._handleClick);\n\t    }.bind(this));\n\n\t    for (let i = 0; i < this.tabs.length; i++) {\n\t      this.tabs[i].removeClass(this.options.tabContentClass);\n\t    }\n\t  }\n\n\t  /**\n\t   * Hides the tab for the given Id.\n\t   *\n\t   * @param id The Id of the tab to hide.\n\t   */\n\t  hideTab(id) {\n\t    const tab = this.tabs[id];\n\t    tab.hide();\n\t    this.redraw();\n\t  }\n\n\t  /**\n\t   * Initializes the Tabs widget. Call this after you have set all the initial options.\n\t   *\n\t   * @returns {Tabs} This.\n\t   */\n\t  initialize() {\n\t    this.tabsContainer.query('li:not(.disabled)').each(function(tab) {\n\t      const a = tab.queryFirst('a').addEventListener('click', this._handleClick);\n\t      const dataSet = tab.getDataSet();\n\n\t      const href = a.getAttribute('href');\n\t      const isAnchor = href.charAt(0) === '#';\n\t      if (isAnchor) {\n\t        dataSet.tabId = href.substring(1);\n\t        dataSet.tabUrl = '';\n\t      } else {\n\t        dataSet.tabId = href;\n\t        dataSet.tabUrl = href;\n\t      }\n\n\t      this.tabs[dataSet.tabId] = tab;\n\t      this.tabArray.push(tab);\n\n\t      let content = PrimeDocument.queryById(dataSet.tabId);\n\t      if (content === null && isAnchor) {\n\t        throw new Error('A div is required with the following ID [' + dataSet.tabId + ']');\n\t      } else if (content === null) {\n\t        content = PrimeDocument.newElement('<div>').insertAfter(this.element).setAttribute('id', href);\n\t      }\n\n\t      content.hide();\n\n\t      content.addClass(this.options.tabContentClass);\n\t      this.tabContents[dataSet.tabId] = content;\n\t    }.bind(this));\n\n\t    if (this.options.deepLinkingEnabled) {\n\t      const tabId = window.location.hash.replace(/^#/, '');\n\t      if (Utils.isDefined(tabId) && Utils.isDefined(this.tabs[tabId])) {\n\t        this.selectTab(tabId);\n\t      }\n\t    }\n\n\t    this.redraw();\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Re-applies the first-child, last-child, and active classes based on the current state of the tabs. If there\n\t   * is no tab that is active, this also selects the first tab that is visible.\n\t   */\n\t  redraw() {\n\t    let firstVisible = null;\n\t    let lastVisible = null;\n\t    let selectNew = false;\n\t    let noneActive = true;\n\t    for (let i = 0; i < this.tabArray.length; i++) {\n\t      if (this.tabArray[i].isVisible()) {\n\t        if (firstVisible === null) {\n\t          firstVisible = this.tabArray[i];\n\t        }\n\n\t        lastVisible = this.tabArray[i];\n\n\t        if (this.tabArray[i].hasClass('selected')) {\n\t          noneActive = false;\n\t        }\n\t      } else if (this.tabArray[i].hasClass('selected')) {\n\t        selectNew = true;\n\t      }\n\n\t      this.tabArray[i].removeClass('first-visible-tab');\n\t      this.tabArray[i].removeClass('last-visible-tab');\n\t    }\n\n\t    firstVisible.addClass('first-visible-tab');\n\t    lastVisible.addClass('last-visible-tab');\n\n\t    let tabId = null;\n\t    if (selectNew || noneActive) {\n\t      if (PrimeStorage.supported && this.options.localStorageKey !== null) {\n\t        const state = PrimeStorage.getSessionObject(this.options.localStorageKey);\n\t        if (state !== null) {\n\t          tabId = state.tabId;\n\t        }\n\t      }\n\n\t      // If no tabId was found or the tab is not currently visible, select the first visible\n\t      if (tabId === null || !this.tabs[tabId] || !this.tabs[tabId].isVisible()) {\n\t        tabId = firstVisible.getDataSet().tabId;\n\t      }\n\n\t      this.selectTab(tabId);\n\t    }\n\n\t    // If error class handling was enabled, add the error class to the tab and set focus\n\t    if (this.options.errorClass) {\n\t      for (tabId in this.tabContents) {\n\t        if (this.tabContents.hasOwnProperty(tabId)) {\n\t          const errorElement = this.tabContents[tabId].queryFirst('.' + this.options.errorClass);\n\t          if (errorElement !== null) {\n\t            this.tabs[tabId].queryFirst('a').addClass(this.options.errorClass);\n\t            this.selectTab(tabId);\n\t          }\n\t        }\n\t      }\n\t    }\n\t  }\n\n\t  /**\n\t   * Select the active tab. Sets the active class on the li and shows only the corresponding tab content.\n\t   *\n\t   * @param id The Id of the tab to select.\n\t   */\n\t  selectTab(id) {\n\t    if (this.selectedTab !== null && this.selectedTab.getDataSet().tabId === id) {\n\t      return;\n\t    }\n\n\t    for (const tabId in this.tabs) {\n\t      if (this.tabs.hasOwnProperty(tabId)) {\n\t        this.tabs[tabId].removeClass('selected');\n\t      }\n\t    }\n\n\t    this.tabs[id].addClass('selected');\n\t    this.selectedTab = this.tabs[id];\n\t    for (const tabId in this.tabContents) {\n\t      if (this.tabContents.hasOwnProperty(tabId) && tabId === id) {\n\t        this.tabContents[tabId].show('block');\n\t        if (this.options.selectCallback) {\n\t          this.options.selectCallback(this.tabs[tabId], this.tabContents[tabId]);\n\t        }\n\t      } else {\n\t        this.tabContents[tabId].hide();\n\t      }\n\t    }\n\n\t    // Save current selected tab state in local storage. The JSON object isn't necessary at the moment,\n\t    // but we can tack on other properties as needed for additional state in the future.\n\t    if (PrimeStorage.supported && this.options.localStorageKey !== null) {\n\t      const data = {\n\t        tabId: id\n\t      };\n\t      PrimeStorage.setSessionObject(this.options.localStorageKey, data);\n\t    }\n\n\t    const ajaxURL = this.selectedTab.getDataSet().tabUrl;\n\t    if (ajaxURL !== '') {\n\t      this.selectedTab.addClass('loading');\n\t      this.tabContents[id].setHTML('');\n\t      this.tabContents[id].addClass('loading');\n\t      new PrimeRequest(ajaxURL, 'GET')\n\t          .withSuccessHandler(this._handleAJAXResponse)\n\t          .withErrorHandler(this._handleAJAXResponse)\n\t          .go();\n\t    }\n\t  }\n\n\t  /**\n\t   * Shows the tab for the given Id.\n\t   *\n\t   * @param {String} id The Id of the tab to hide.\n\t   */\n\t  showTab(id) {\n\t    this.tabs[id].show();\n\t    this.redraw();\n\t  }\n\n\t  /**\n\t   * Adds a callback for AJAX calls. This is invoked after the AJAX load completes and the HTML is inserted into the\n\t   * DOM. The function is passed the container for the tab that was selected.\n\t   *\n\t   * @param {Function} callback The callback function.\n\t   * @returns {Tabs} This Tabs.\n\t   */\n\t  withAJAXCallback(callback) {\n\t    this.options.ajaxCallback = callback;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Disable the default behavior of allowing a deep link provided on the URL to set the default tab during render.\n\t   *\n\t   * @returns {Tabs} This Tabs.\n\t   */\n\t  withDeepLinkingDisabled() {\n\t    this.options.deepLinkingEnabled = false;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Enable error class handling. When this option is used, if the specified error class is found on any element\n\t   * in the tab content the same error class will be added to the tab to identify the tab contains errors.\n\t   *\n\t   * @returns {Tabs} This Tabs.\n\t   */\n\t  withErrorClassHandling(errorClass) {\n\t    this.options.errorClass = errorClass;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Enables local storage of the currently selected tab. If the user navigates away from the page and back, the same\n\t   * tab will be selected. This key is how the selected tab is stored in local storage and by setting a key you also\n\t   * enable this feature.\n\t   *\n\t   * @param {?String} key The local storage key.\n\t   * @returns {Tabs} This Tabs.\n\t   */\n\t  withLocalStorageKey(key) {\n\t    this.options.localStorageKey = key;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Set more than one option at a time by providing a map of key value pairs. This is considered an advanced\n\t   * method to set options on the widget. The caller needs to know what properties are valid in the options object.\n\t   *\n\t   * @param {Object} options Key value pair of configuration options.\n\t   * @returns {Tabs} This Tabs.\n\t   */\n\t  withOptions(options) {\n\t    if (!Utils.isDefined(options)) {\n\t      return this;\n\t    }\n\n\t    for (let option in options) {\n\t      if (options.hasOwnProperty(option)) {\n\t        this.options[option] = options[option];\n\t      }\n\t    }\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Specifies a callback function that is called whenever tabs are changed.\n\t   *\n\t   * @param {?Function} callback The callback function.\n\t   * @returns {Tabs} This Tabs.\n\t   */\n\t  withSelectCallback(callback) {\n\t    this.options.selectCallback = callback;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the class name for the tab content elements.\n\t   *\n\t   * @param className {String} The class name.\n\t   * @returns {Tabs}\n\t   */\n\t  withTabContentClass(className) {\n\t    this.options.tabContentClass = className;\n\t    return this;\n\t  }\n\n\t  /* ===================================================================================================================\n\t   * Private methods\n\t   * ===================================================================================================================*/\n\n\t  /**\n\t   * Handles the AJAX response.\n\t   *\n\t   * @param {XMLHttpRequest} xhr The AJAX response.\n\t   * @private\n\t   */\n\t  _handleAJAXResponse(xhr) {\n\t    this.selectedTab.removeClass('loading');\n\t    const container = this.tabContents[this.selectedTab.getDataSet().tabId];\n\t    container.removeClass('loading');\n\t    container.setHTML(xhr.responseText);\n\n\t    if (this.options.ajaxCallback !== null) {\n\t      this.options.ajaxCallback(container);\n\t    }\n\t  }\n\n\t  /**\n\t   * Handle the tab click by showing the corresponding panel and hiding the others.\n\t   *\n\t   * @param {MouseEvent} event The click event on the anchor tag.\n\t   * @private\n\t   */\n\t  _handleClick(event) {\n\t    Utils.stopEvent(event);\n\t    const a = new PrimeElement(event.currentTarget);\n\t    if (!a.hasClass('disabled')) {\n\t      const href = a.getAttribute('href');\n\t      if (href.charAt(0) === '#') {\n\t        this.selectTab(href.substring(1));\n\t      } else {\n\t        this.selectTab(href);\n\t      }\n\t    }\n\t  }\n\n\t  /**\n\t   * Set the initial options for this widget.\n\t   * @private\n\t   */\n\t  _setInitialOptions() {\n\t    // Defaults\n\t    this.options = {\n\t      ajaxCallback: null,\n\t      errorClass: null,\n\t      deepLinkingEnabled: true,\n\t      localStorageKey: null,\n\t      selectCallback: null,\n\t      tabContentClass: 'prime-tab-content'\n\t    };\n\n\t    const userOptions = Utils.dataSetToOptions(this.element);\n\t    for (let option in userOptions) {\n\t      if (userOptions.hasOwnProperty(option)) {\n\t        this.options[option] = userOptions[option];\n\t      }\n\t    }\n\t  }\n\t}\n\n\t/*\n\t * Copyright (c) 2017-2018, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\tconst open = [];\n\n\tclass Tooltip {\n\t  /**\n\t   * Constructs a new Tooltip object for the given element.\n\t   *\n\t   * @param {PrimeElement|Element|EventTarget} element The Prime Element for the Tooltip widget.\n\t   * @constructor\n\t   */\n\t  constructor(element) {\n\t    Utils.bindAll(this);\n\n\t    this.element = PrimeElement.wrap(element);\n\t    this._setInitialOptions();\n\t  }\n\n\t  static get open() {\n\t    return open;\n\t  }\n\n\t  /**\n\t   * Hides the tooltip.\n\t   *\n\t   * @returns {Tooltip} This.\n\t   */\n\t  hide() {\n\t    if (Tooltip.open.length > 0) {\n\t      Tooltip.open.forEach(function(t) {\n\t        t.removeFromDOM();\n\t      });\n\t    }\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Initializes the widget by attaching event listeners to the element.\n\t   *\n\t   * @returns {Tooltip} This.\n\t   */\n\t  initialize() {\n\t    this.element.addEventListener('mouseenter', this._handleMouseEnter).addEventListener('mouseleave', this._handleMouseLeave);\n\t    PrimeDocument.addEventListener('scroll', this._handleMouseLeave);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Shows the tooltip.\n\t   *\n\t   * @returns {Tooltip} This.\n\t   */\n\t  show() {\n\t    const text = this.element.getDataSet()[this.options.dataName] || this.element.getAttribute('title');\n\t    const zIndex = this.element.getRelativeZIndex();\n\t    let classNames = this.options.className + ' ' + this.element.getTagName().toLocaleLowerCase();\n\t    if (this.options.additionalClasses !== null) {\n\t      classNames = classNames + ' ' + this.options.additionalClasses;\n\t    }\n\t    const tooltip = PrimeDocument.newElement('<span>')\n\t        .appendTo(PrimeDocument.bodyElement)\n\t        .addClass(classNames)\n\t        .setHTML(text)\n\t        .setStyle('zIndex', zIndex + 100);\n\n\t    const left = this.element.getLeft();\n\t    const top = this.element.getTop();\n\t    const width = this.element.getWidth();\n\t    const tooltipWidth = tooltip.getWidth();\n\t    const tooltipHeight = tooltip.getHeight();\n\n\t    tooltip.setLeft(left - (tooltipWidth / 2) + (width / 2));\n\t    tooltip.setTop(top - tooltipHeight - 8);\n\n\t    // If the tooltip is too close to the top of the screen invert it and move it under the element\n\t    if ((top - tooltipHeight - 8) < 0) {\n\t      tooltip.setTop(top + this.element.getHeight() + 8).addClass('inverted');\n\t    }\n\n\t    Tooltip.open.push(tooltip);\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the class name to use when creating the tooltip.\n\t   *\n\t   * @param additionalClasses {?String} The class name or spaces separated names.\n\t   * @returns {Tooltip} This.\n\t   */\n\t  withAdditionalClassNames(additionalClasses) {\n\t    this.options.additionalClasses = additionalClasses;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the class name to use when creating the tooltip.\n\t   *\n\t   * @param className {String} The class name.\n\t   * @returns {Tooltip} This.\n\t   */\n\t  withClassName(className) {\n\t    this.options.className = className;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Set data-set name to pull the tooltip text from.\n\t   *\n\t   * @param {string} name The data-set name.\n\t   * @returns {Tooltip} This.\n\t   */\n\t  withDataName(name) {\n\t    this.options.dataName = name;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Set more than one option at a time by providing a map of key value pairs. This is considered an advanced\n\t   * method to set options on the widget. The caller needs to know what properties are valid in the options object.\n\t   *\n\t   * @param {Object} options Key value pair of configuration options.\n\t   * @returns {Tooltip} This.\n\t   */\n\t  withOptions(options) {\n\t    if (!Utils.isDefined(options)) {\n\t      return this;\n\t    }\n\n\t    for (let option in options) {\n\t      if (options.hasOwnProperty(option)) {\n\t        this.options[option] = options[option];\n\t      }\n\t    }\n\t    return this;\n\t  }\n\n\t  /* ===================================================================================================================\n\t   * Private methods\n\t   * ===================================================================================================================*/\n\n\t  /**\n\t   * Handles the mouse enter event to show the tooltip.\n\t   *\n\t   * @private\n\t   */\n\t  _handleMouseEnter() {\n\t    this.show();\n\t  }\n\n\t  /**\n\t   * Handles the mouse exit event to hide the tooltip.\n\t   *\n\t   * @private\n\t   */\n\t  _handleMouseLeave() {\n\t    this.hide();\n\t  }\n\n\t  /**\n\t   * Set the initial options for this widget.\n\t   * @private\n\t   */\n\t  _setInitialOptions() {\n\t    // Defaults\n\t    this.options = {\n\t      additionalClasses: null,\n\t      className: 'prime-tooltip',\n\t      dataName: 'tooltip'\n\t    };\n\n\t    const userOptions = Utils.dataSetToOptions(this.element);\n\t    for (let option in userOptions) {\n\t      if (userOptions.hasOwnProperty(option)) {\n\t        this.options[option] = userOptions[option];\n\t      }\n\t    }\n\t  }\n\t}\n\n\tPrimeDocument.onReady(function() {\n\t  // Fix browser issues with tooltips sticking around on back-button navigation\n\t  PrimeWindow.addEventListener('beforeunload', function() {\n\t    if (Tooltip.open.length > 0) {\n\t      Tooltip.open.forEach(function(t) {\n\t        t.removeFromDOM();\n\t      });\n\t    }\n\t  });\n\t});\n\n\t/*\n\t * Copyright (c) 2016-2017, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\tclass TreeView {\n\t  /**\n\t   * Constructs a new TreeView object for the given element.\n\t   *\n\t   * @param {PrimeElement|Element|EventTarget} element The Prime Element for the TreeView widget.\n\t   * @constructor\n\t   */\n\t  constructor(element) {\n\t    Utils.bindAll(this);\n\t    this.element = PrimeElement.wrap(element);\n\t    this._setInitialOptions();\n\t  }\n\n\t  /**\n\t   * Initializes the element by traverse its children to find all of the anchor tags with the folder-toggle class (or\n\t   * whatever you set the class to).\n\t   *\n\t   * @returns {TreeView} This.\n\t   */\n\t  initialize() {\n\t    this.element.query('a.' + this.options.folderToggleClassName).each(function(e) {\n\t      e.addEventListener('click', this._handleClick);\n\t    }.bind(this));\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the folder toggle class name.\n\t   *\n\t   * @param className {String} The class name.\n\t   * @returns {TreeView} This.\n\t   */\n\t  withFolderToggleClassName(className) {\n\t    this.options.folderToggleClassName = className;\n\t    return this;\n\t  }\n\n\t  /* ===================================================================================================================\n\t   * Private methods\n\t   * ===================================================================================================================*/\n\n\t  // noinspection JSMethodCanBeStatic\n\t  /**\n\t   * Handles the click event.\n\t   * @private\n\t   */\n\t  _handleClick(event) {\n\t    Utils.stopEvent(event);\n\t    const a = PrimeElement.wrap(event.target);\n\t    const li = a.getParent();\n\t    if (a.hasClass('open')) {\n\t      a.removeClass('open');\n\t      li.removeClass('open');\n\t    } else {\n\t      a.addClass('open');\n\t      li.addClass('open');\n\t    }\n\t  }\n\n\t  /**\n\t   * Set the initial options for this widget.\n\t   * @private\n\t   */\n\t  _setInitialOptions() {\n\t    // Defaults\n\t    this.options = {\n\t      folderToggleClassName: 'prime-folder-toggle'\n\t    };\n\n\t    const userOptions = Utils.dataSetToOptions(this.element);\n\t    for (const option in userOptions) {\n\t      if (userOptions.hasOwnProperty(option)) {\n\t        this.options[option] = userOptions[option];\n\t      }\n\t    }\n\t  }\n\t}\n\n\t/*\n\t * Copyright (c) 2017, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\tvar Widgets = /*#__PURE__*/Object.freeze({\n\t\t__proto__: null,\n\t\tAJAXDialog: AJAXDialog,\n\t\tDateTimePicker: DateTimePicker,\n\t\tDismissable: Dismissable,\n\t\tDraggable: Draggable,\n\t\tHTMLDialog: HTMLDialog,\n\t\tInProgress: InProgress,\n\t\tMultipleSelect: MultipleSelect,\n\t\tOverlay: Overlay,\n\t\tReorder: Reorder,\n\t\tSearcher: Searcher,\n\t\tSideMenu: SideMenu,\n\t\tSplitButton: SplitButton,\n\t\tTable: Table,\n\t\tTabs: Tabs,\n\t\tTooltip: Tooltip,\n\t\tTouchable: Touchable,\n\t\tTreeView: TreeView\n\t});\n\n\t/*\n\t * Copyright (c) 2012-2018, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\tclass BaseTransition {\n\t  /**\n\t   * Constructs a BaseTransition for the given element.\n\t   *\n\t   * @param {PrimeElement|Element|EventTarget} element The Prime Element the effect will be applied to.\n\t   * @param {number} endValue The end value for the transition.\n\t   * @constructor\n\t   */\n\t  constructor(element, endValue) {\n\t    Utils.bindAll(this);\n\t    this.element = PrimeElement.wrap(element);\n\t    this.duration = 1000;\n\t    this.endFunction = null;\n\t    this.endValue = endValue;\n\t    this.iterations = 20;\n\t  }\n\n\t  /**\n\t   * Sets the function that is called when the effect has completed.\n\t   *\n\t   * @param {Function} endFunction The function that is called when the effect is completed.\n\t   * @returns {BaseTransition} This Effect.\n\t   */\n\t  withEndFunction(endFunction) {\n\t    this.endFunction = endFunction;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Sets the duration of the fade-out effect.\n\t   *\n\t   * @param {number} duration The duration in milliseconds.\n\t   * @returns {BaseTransition} This Effect.\n\t   */\n\t  withDuration(duration) {\n\t    if (duration < 100) {\n\t      throw new TypeError('Duration should be greater than 100 milliseconds or it won\\'t really be noticeable');\n\t    }\n\n\t    this.duration = duration;\n\t    return this;\n\t  }\n\n\t  /*\n\t   * Protected functions\n\t   */\n\n\t  /**\n\t   * Changes an integer style property of the Element iteratively over a given period of time from one value to another\n\t   * value.\n\t   *\n\t   * @protected\n\t   * @param {Function} getFunction The function on the element to call to get the current value for the transition.\n\t   * @param {Function} setFunction The function on the element to call to set the new value for the transition.\n\t   */\n\t  _changeNumberStyleIteratively(getFunction, setFunction) {\n\t    let currentValue = getFunction.call(this.element);\n\t    const step = Math.abs(this.endValue - currentValue) / this.iterations;\n\n\t    // Close around ourselves\n\t    const self = this;\n\t    const stepFunction = function(last) {\n\t      if (last) {\n\t        currentValue = self.endValue;\n\t      } else {\n\t        if (currentValue < self.endValue) {\n\t          currentValue += step;\n\t        } else {\n\t          currentValue -= step;\n\t        }\n\t      }\n\n\t      setFunction.call(self.element, currentValue);\n\t    };\n\n\t    Utils.callIteratively(this.duration, this.iterations, stepFunction, this._internalEndFunction);\n\t  }\n\n\t  /* ===================================================================================================================\n\t   * Private Methods\n\t   * ===================================================================================================================*/\n\n\t  /**\n\t   * Handles the call back at the end.\n\t   *\n\t   * @private\n\t   */\n\t  _internalEndFunction() {\n\t    this._subclassEndFunction(this);\n\n\t    if (this.endFunction) {\n\t      this.endFunction(this);\n\t    }\n\t  }\n\n\t  /**\n\t   * Virtual function stub\n\t   *\n\t   * @private\n\t   */\n\t  _subclassEndFunction() {\n\t  }\n\t}\n\n\tclass Fade extends BaseTransition {\n\t  /**\n\t   * Constructs a new Fade for the given element. The fade effect uses the CSS opacity style and supports the IE alpha\n\t   * style. The duration defaults to 1000 milliseconds (1 second). This changes the opacity over the duration from 1.0 to\n\t   * 0.0. At the end, this hides the element so that it doesn't take up any space.\n\t   *\n\t   * @constructor\n\t   * @param {PrimeElement|Element|EventTarget} element The Prime Element to fade out.\n\t   */\n\t  constructor(element) {\n\t    super(element, 0.0);\n\t  }\n\n\t  /**\n\t   * Internal call back at the end of the transition. This hides the element so it doesn't take up space.\n\t   *\n\t   * @override\n\t   * @private\n\t   */\n\t  _subclassEndFunction() {\n\t    this.element.hide();\n\t  }\n\n\t  /**\n\t   * Executes the fade effect on the element using the opacity style.\n\t   */\n\t  go() {\n\t    this._changeNumberStyleIteratively(this.element.getOpacity, this.element.setOpacity);\n\t  }\n\t}\n\n\tclass Appear extends BaseTransition {\n\t  /**\n\t   * Constructs a new Appear for the given element. The appear effect uses the CSS opacity style and supports the IE\n\t   * alpha style. The duration defaults to 1000 milliseconds (1 second). This first sets the opacity to 0, then it shows\n\t   * the element and finally it raises the opacity.\n\t   *\n\t   * @constructor\n\t   * @param {PrimeElement|Element|EventTarget} element The Prime Element to appear.\n\t   * @param {number} [opacity=1.0] The final opacity to reach when the effect is complete. Defaults to 1.0.\n\t   */\n\t  constructor(element, opacity) {\n\t    if (!Utils.isDefined(opacity)) {\n\t      opacity = 1.0;\n\t    }\n\t    super(element, opacity);\n\t  }\n\n\t  /**\n\t   * Executes the appear effect on the element using the opacity style.\n\t   */\n\t  go() {\n\t    this.element.setOpacity(0.0);\n\t    this.element.show();\n\t    this._changeNumberStyleIteratively(this.element.getOpacity, this.element.setOpacity);\n\t  }\n\t}\n\n\tclass ScrollTo extends BaseTransition {\n\t  /**\n\t   * Constructs a new ScrollTo for the given element. The duration defaults to 1000 milliseconds (1 second).\n\t   *\n\t   * @param {PrimeElement|Element|EventTarget} element The Prime Element to scroll.\n\t   * @param {number} position The position to scroll the element to.\n\t   * @constructor\n\t   */\n\t  constructor(element, position) {\n\t    super(element, position);\n\n\t    this.axis = 'vertical';\n\t  }\n\n\t  /**\n\t   * Set the scroll axis, either 'horizontal' or 'vertical'. Default is 'vertical'.\n\t   *\n\t   * @param {string} axis The axis to scroll.\n\t   * @returns {ScrollTo}\n\t   */\n\t  withAxis(axis) {\n\t    this.axis = axis || 'vertical';\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Executes the scroll effect on the element.\n\t   */\n\t  go() {\n\t    if (this.axis === 'vertical') {\n\t      this._changeNumberStyleIteratively(this.element.getScrollTop, this.element.scrollTo);\n\t    } else {\n\t      this._changeNumberStyleIteratively(this.element.getScrollLeft, this.element.scrollLeftTo);\n\t    }\n\t  }\n\t}\n\n\tclass SlideOpen {\n\t  /**\n\t   * Creates a SlideOpen effect on the given element.\n\t   *\n\t   * @param {PrimeElement} element The element.\n\t   * @constructor\n\t   */\n\t  constructor(element) {\n\t    Utils.bindAll(this);\n\n\t    this.element = element;\n\t    if (this.isOpen()) {\n\t      element.domElement.primeVisibleHeight = element.getHeight();\n\t    } else {\n\t      element.setStyle('height', 'auto');\n\t      element.domElement.primeVisibleHeight = element.getHeight();\n\t      element.setStyle('height', '0');\n\t    }\n\n\t    this.isTransitioning = false;\n\n\t    this._setInitialOptions();\n\t  }\n\n\t  close() {\n\t    if (!this.isOpen()) {\n\t      return;\n\t    }\n\n\t    // Set a fixed height instead of auto so that the transition runs, but only if the element is \"open\"\n\t    this.element.setHeight(this.element.domElement.primeVisibleHeight);\n\t    this.isTransitioning = true;\n\n\t    // This timeout is needed since the height change takes time to run\n\t    setTimeout(function() {\n\t      this.element.setHeight(0);\n\t      this.element.removeClass('open');\n\t      this.isTransitioning = false;\n\n\t      if (this.options.closeCallback !== null) {\n\t        this.options.closeCallback();\n\t      }\n\t    }.bind(this), this.options.timeout);\n\t  }\n\n\t  isOpen() {\n\t    return this.element.getHeight() !== 0 || this.element.hasClass('open');\n\t  }\n\n\t  open() {\n\t    if (this.isOpen()) {\n\t      return;\n\t    }\n\n\t    this.element.setHeight(this.element.domElement.primeVisibleHeight);\n\t    this.isTransitioning = true;\n\n\t    setTimeout(function() {\n\t      this.element.setHeight('auto');\n\t      this.element.addClass('open');\n\t      this.isTransitioning = false;\n\n\t      if (this.options.openCallback !== null) {\n\t        this.options.openCallback();\n\t      }\n\t    }.bind(this), this.options.timeout);\n\t  }\n\n\t  toggle() {\n\t    if (this.isOpen()) {\n\t      this.close();\n\t    } else {\n\t      this.open();\n\t    }\n\t  }\n\n\t  /**\n\t   * Set the close callback function.\n\t   *\n\t   * @param {?Function} callback The close callback\n\t   * @returns {SlideOpen} This.\n\t   */\n\t  withCloseCallback(callback) {\n\t    this.options.closeCallback = callback;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Set the open callback function.\n\t   *\n\t   * @param {?Function} callback The open callback\n\t   * @returns {SlideOpen} This.\n\t   */\n\t  withOpenCallback(callback) {\n\t    this.options.openCallback = callback;\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Set more than one option at a time by providing a map of key value pairs. This is considered an advanced\n\t   * method to set options on the widget. The caller needs to know what properties are valid in the options object.\n\t   *\n\t   * @param {Object} options Key value pair of configuration options.\n\t   * @returns {SlideOpen} This.\n\t   */\n\t  withOptions(options) {\n\t    if (!Utils.isDefined(options)) {\n\t      return this;\n\t    }\n\n\t    for (let option in options) {\n\t      if (options.hasOwnProperty(option)) {\n\t        this.options[option] = options[option];\n\t      }\n\t    }\n\t    return this;\n\t  }\n\n\t  /* ===================================================================================================================\n\t   * Private methods\n\t   * ===================================================================================================================*/\n\n\t  /**\n\t   * Set the initial options of the widget.\n\t   * @private\n\t   */\n\t  _setInitialOptions() {\n\t    // Defaults\n\t    this.options = {\n\t      openCallback: null,\n\t      closeCallback: null,\n\t      timeout: 310\n\t    };\n\n\t    const userOptions = Utils.dataSetToOptions(this.element);\n\t    for (let option in userOptions) {\n\t      if (userOptions.hasOwnProperty(option)) {\n\t        this.options[option] = userOptions[option];\n\t      }\n\t    }\n\t  }\n\t}\n\n\tvar Effects = /*#__PURE__*/Object.freeze({\n\t\t__proto__: null,\n\t\tAppear: Appear,\n\t\tBaseTransition: BaseTransition,\n\t\tFade: Fade,\n\t\tScrollTo: ScrollTo,\n\t\tSlideOpen: SlideOpen\n\t});\n\n\t/*\n\t * Copyright (c) 2016-2017, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\tclass DataQueue {\n\t  /**\n\t   * First-In-First-Out Queue implementation modeled after java.util.Deque interface.\n\t   *\n\t   * @constructor\n\t   */\n\t  constructor() {\n\t    Utils.bindAll(this);\n\t    this._elements = {};\n\t    this._head = 0;\n\t    this._tail = 0;\n\t  }\n\n\t  /**\n\t   * Add the element to the head of the queue.\n\t   *\n\t   * @param {Object} element An object to store in the queue.\n\t   * @returns {DataQueue} This Element.\n\t   */\n\t  add(element) {\n\t    this._elements[this._head] = element;\n\t    this._head++;\n\n\t    return this;\n\t  }\n\n\t  /**\n\t   * Return true if the queue is empty.\n\t   *\n\t   * @returns {boolean} True if the queue is empty, false if not.\n\t   */\n\t  isEmpty() {\n\t    return this._head === this._tail;\n\t  }\n\n\t  /**\n\t   * Return but do not remove the tail of the queue. This is the oldest element in the queue.\n\t   *\n\t   * @returns {Object} The object at the tail of the queue, or null if empty.\n\t   */\n\t  peek() {\n\t    if (this.isEmpty()) {\n\t      return null;\n\t    }\n\n\t    return this._elements[this._tail];\n\t  }\n\n\t  /**\n\t   * Return and remove the tail of the queue. This is the oldest element in the queue.\n\t   *\n\t   * @returns {Object} the object at the tail of the queue, or null if the queue is empty.\n\t   */\n\t  poll() {\n\t    if (this.isEmpty()) {\n\t      return null;\n\t    }\n\n\t    const object = this._elements[this._tail];\n\t    delete this._elements[this._tail];\n\t    this._tail++;\n\n\t    // The cursor should not go off the end of the queue\n\t    if (this._cursor < this._tail) {\n\t      this._cursor = this._tail;\n\t    }\n\n\t    return object;\n\t  }\n\n\t  /**\n\t   * Return the size of the queue.\n\t   *\n\t   * @returns {Number} The size of the queue.\n\t   */\n\t  size() {\n\t    return this._head - this._tail;\n\t  }\n\n\t}\n\n\t/*\n\t * Copyright (c) 2013-2017, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\tclass Template {\n\t  /**\n\t   * A Javascript Object that can serve to generate Prime.Document.Element from a source string and optional parameters.\n\t   *\n\t   * @constructor\n\t   * @param {string} template The String that defines the source of the template.\n\t   */\n\t  constructor(template) {\n\t    Utils.bindAll(this);\n\t    this.init(template);\n\t  }\n\n\t  init(template) {\n\t    this.template = template;\n\t  }\n\n\t  /**\n\t   * Generates a String from the given parameterHash.  Provide a hash of String keys to values.\n\t   * Keys can be regular text strings, in which case it will look for and replace #{key} as with the value.  You can\n\t   * also make the key a String \"/key/\", which will be converted to a Regex and run.\n\t   *\n\t   * For the value you can provide a straight up String, int, etc, or you can provide a function which will be called\n\t   * to provide the value\n\t   *\n\t   * @param {Object} parameters An object that contains the parameters for the template to replace.\n\t   * @returns {string} The result of executing the template.\n\t   */\n\t  generate(parameters) {\n\t    parameters = Utils.isDefined(parameters) ? parameters : {};\n\t    let templateCopy = String(this.template);\n\t    for (let key in parameters) {\n\t      if (parameters.hasOwnProperty(key)) {\n\t        const value = parameters[key];\n\t        let expressedValue;\n\t        if (typeof(value) === 'function') {\n\t          expressedValue = value();\n\t        } else {\n\t          expressedValue = value;\n\t        }\n\n\t        if (key.indexOf('/') === 0 && key.lastIndexOf('/') === key.length - 1) {\n\t          templateCopy = templateCopy.replace(new RegExp(key.substring(1, key.length - 1), \"g\"), expressedValue);\n\t        } else {\n\t          const expressedKey = \"#{\" + key + \"}\";\n\t          while (templateCopy.indexOf(expressedKey) !== -1) {\n\t            templateCopy = templateCopy.replace(expressedKey, expressedValue);\n\t          }\n\t        }\n\t      }\n\t    }\n\n\t    return templateCopy;\n\t  }\n\n\t  /**\n\t   * Calls to generate and then appends the resulting value to the inner HTML of the provided primeElement.\n\t   *\n\t   * @param {PrimeElement} primeElement The prime Element instance to append the result of executing the template to.\n\t   * @param {Object} parameters An object that contains the parameters for the template to replace.\n\t   */\n\t  appendTo(primeElement, parameters) {\n\t    if (Utils.isDefined(primeElement)) {\n\t      primeElement.setHTML(primeElement.getHTML() + this.generate(parameters));\n\t    } else {\n\t      throw new TypeError('Please supply an element to append to');\n\t    }\n\t  }\n\n\t  /**\n\t   * Calls to generate and then inserts the resulting elements into the dom before the primeElement\n\t   *\n\t   * @param {PrimeElement} primeElement The prime Element instance to insert the result of executing the template before.\n\t   * @param {Object} parameters An object that contains the parameters for the template to replace.\n\t   */\n\t  insertBefore(primeElement, parameters) {\n\t    if (Utils.isDefined(primeElement)) {\n\t      const holder = document.createElement('div');\n\t      holder.innerHTML = this.generate(parameters);\n\t      new PrimeElement(holder.children[0]).insertBefore(primeElement);\n\t    } else {\n\t      throw new TypeError('Please supply an element to append to');\n\t    }\n\t  }\n\n\t  /**\n\t   * Calls to generate and then inserts the resulting elements into the dom after the primeElement\n\t   *\n\t   * @param {PrimeElement} primeElement The prime Element instance to insert the result of executing the template after.\n\t   * @param {Object} parameters An object that contains the parameters for the template to replace.\n\t   */\n\t  insertAfter(primeElement, parameters) {\n\t    if (Utils.isDefined(primeElement)) {\n\t      const holder = document.createElement('div');\n\t      holder.innerHTML = this.generate(parameters);\n\t      new PrimeElement(holder.children[0]).insertAfter(primeElement);\n\t    } else {\n\t      throw new TypeError('Please supply an element to append to');\n\t    }\n\t  }\n\t}\n\n\t/*\n\t * Copyright (c) 2017, Inversoft Inc., All Rights Reserved\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *   http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing,\n\t * software distributed under the License is distributed on an\n\t * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n\t * either express or implied. See the License for the specific\n\t * language governing permissions and limitations under the License.\n\t */\n\n\n\tconst Ajax = {\n\t  Request: PrimeRequest\n\t};\n\n\tconst Data = {\n\t  Queue: DataQueue\n\t};\n\n\texports.Ajax = Ajax;\n\texports.Browser = Browser;\n\texports.Data = Data;\n\texports.Date = PrimeDate;\n\texports.Document = PrimeDocument;\n\texports.Effects = Effects;\n\texports.Events = Events;\n\texports.Storage = PrimeStorage;\n\texports.Template = Template;\n\texports.Utils = Utils;\n\texports.Widgets = Widgets;\n\texports.Window = PrimeWindow;\n\n\treturn exports;\n\n})({});\n\n","/*\n * Copyright (c) 2012-2017, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n'use strict';\n\n/**\n * The Browser namespace. This namespace does not contain any classes, just functions.\n *\n * @namespace Browser\n */\nconst Browser = {\n  /**\n   * Detects the browser name and version.\n   */\n  detect: function() {\n    this.name = this._searchString(this.dataBrowser) || \"An unknown browser\";\n    this.version = this._searchVersion(navigator.userAgent) || this._searchVersion(navigator.appVersion) || \"an unknown version\";\n    this.os = this._searchString(this.dataOS) || \"an unknown OS\";\n  },\n\n\n  /* ===================================================================================================================\n   * Private Methods\n   * ===================================================================================================================*/\n\n  /**\n   *\n   * @param {Object} data The data array.\n   * @returns {?string} The browser identity String.\n   * @private\n   */\n  _searchString: function(data) {\n    for (let i = 0; i < data.length; i++) {\n      const dataString = data[i].string;\n      const dataProp = data[i].prop;\n      this.versionSearchString = data[i].versionSearch || data[i].identity;\n      if (dataString && dataString.indexOf(data[i].subString) !== -1) {\n        return data[i].identity;\n      } else if (dataProp) {\n        return data[i].identity;\n      }\n    }\n\n    return null;\n  },\n\n  /**\n   *\n   * @param {string} dataString The browser data string.\n   * @returns {?number} The version or null.\n   * @private\n   */\n  _searchVersion: function(dataString) {\n    const index = dataString.indexOf(this.versionSearchString);\n    if (index === -1) {\n      return null;\n    }\n\n    return parseFloat(dataString.substring(index + this.versionSearchString.length + 1));\n  },\n\n  dataBrowser: [\n    {\n      string: navigator.userAgent,\n      subString: \"Chrome\",\n      identity: \"Chrome\"\n    },\n    {\n      string: navigator.userAgent,\n      subString: \"OmniWeb\",\n      versionSearch: \"OmniWeb/\",\n      identity: \"OmniWeb\"\n    },\n    {\n      string: navigator.vendor,\n      subString: \"Apple\",\n      identity: \"Safari\",\n      versionSearch: \"Version\"\n    },\n    {\n      prop: window.opera,\n      identity: \"Opera\",\n      versionSearch: \"Version\"\n    },\n    {\n      string: navigator.vendor,\n      subString: \"iCab\",\n      identity: \"iCab\"\n    },\n    {\n      string: navigator.vendor,\n      subString: \"KDE\",\n      identity: \"Konqueror\"\n    },\n    {\n      string: navigator.userAgent,\n      subString: \"Firefox\",\n      identity: \"Firefox\"\n    },\n    {\n      string: navigator.vendor,\n      subString: \"Camino\",\n      identity: \"Camino\"\n    },\n    {    // for newer Netscapes (6+)\n      string: navigator.userAgent,\n      subString: \"Netscape\",\n      identity: \"Netscape\"\n    },\n    {\n      string: navigator.userAgent,\n      subString: \"MSIE\",\n      identity: \"Explorer\",\n      versionSearch: \"MSIE\"\n    },\n    {\n      string: navigator.userAgent,\n      subString: \"Gecko\",\n      identity: \"Mozilla\",\n      versionSearch: \"rv\"\n    },\n    {     // for older Netscapes (4-)\n      string: navigator.userAgent,\n      subString: \"Mozilla\",\n      identity: \"Netscape\",\n      versionSearch: \"Mozilla\"\n    }\n  ],\n  dataOS: [\n    {\n      string: navigator.platform,\n      subString: \"Win\",\n      identity: \"Windows\"\n    },\n    {\n      string: navigator.platform,\n      subString: \"Mac\",\n      identity: \"macOS\"\n    },\n    {\n      string: navigator.userAgent,\n      subString: \"iPhone\",\n      identity: \"iPhone/iPod\"\n    },\n    {\n      string: navigator.userAgent,\n      subString: \"iPad\",\n      identity: \"iPad\"\n    },\n    {\n      string: navigator.platform,\n      subString: \"Linux\",\n      identity: \"Linux\"\n    }\n  ]\n};\nBrowser.detect();\n\nexport {Browser}\n","/*\n * Copyright (c) 2017-2018, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n'use strict';\n\nimport {Browser} from \"../Browser.js\";\nimport {PrimeDocument} from \"../PrimeDocument.js\";\nimport {PrimeElementList} from \"./PrimeElementList.js\";\nimport {Utils} from \"../Utils.js\";\n\nconst blockElementRegexp = /^(?:ARTICLE|ASIDE|BLOCKQUOTE|BODY|BR|BUTTON|CANVAS|CAPTION|COL|COLGROUP|DD|DIV|DL|DT|EMBED|FIELDSET|FIGCAPTION|FIGURE|FOOTER|FORM|H1|H2|H3|H4|H5|H6|HEADER|HGROUP|HR|LI|MAP|OBJECT|OL|OUTPUT|P|PRE|PROGRESS|SECTION|TABLE|TBODY|TEXTAREA|TFOOT|TH|THEAD|TR|UL|VIDEO)$/;\nconst mouseEventsRegexp = /^(?:click|dblclick|mousedown|mouseup|mouseover|mousemove|mouseout|mouseenter|mouseleave)$/;\nconst htmlEventsRegexp = /^(?:abort|blur|change|error|focus|load|reset|resize|scroll|select|submit|unload)$/;\nlet anonymousId = 1;\nconst ieAlphaRegexp = /alpha\\(opacity=(.+)\\)/;\n\nclass PrimeElement {\n  /**\n   * Creates an Element class for the given DOM element.\n   *\n   * @constructor\n   * @param {Element|EventTarget} element The element\n   */\n  constructor(element) {\n    if (!Utils.isDefined(element.nodeType) || element.nodeType !== 1) {\n      throw new TypeError('You can only pass in DOM element Node objects to the PrimeDocument.Element constructor');\n    }\n\n    Utils.bindAll(this);\n    this.domElement = element;\n    this.domElement.customEventListeners = [];\n    this.domElement.eventListeners = {};\n  }\n\n  /**\n   * Regular expression that captures the tagnames of all the block elements in HTML5.\n   *\n   * @type {RegExp}\n   */\n  static get blockElementRegexp() {\n    return blockElementRegexp;\n  }\n\n  static get mouseEventsRegexp() {\n    return mouseEventsRegexp;\n  }\n\n  static get htmlEventsRegexp() {\n    return htmlEventsRegexp;\n  }\n\n  static get anonymousId() {\n    return anonymousId;\n  }\n\n  static set anonymousId(value) {\n    anonymousId = value;\n  }\n\n  static get ieAlphaRegexp() {\n    return ieAlphaRegexp;\n  }\n\n  /**\n   * Static method that wraps an element in a PrimeElement unless it is already wrapped. In that case, it simply\n   * returns the element.\n   *\n   * @param {PrimeElement|Element|EventTarget} element The element to wrap.\n   * @static\n   */\n  static wrap(element) {\n    return (element instanceof PrimeElement) ? element : new PrimeElement(element);\n  }\n\n  /**\n   * Static method that unwraps an element to a DOM element. This is the inverse of Element.wrap. If this is passed an\n   * Element, it returns domElement. Otherwise, this just returns the element.\n   *\n   * @returns {PrimeElement} This Element.\n   */\n  static unwrap(element) {\n    return (element instanceof PrimeElement) ? element.domElement : element;\n  }\n\n  /**\n   * Adds the given class (or list of space separated classes) to this Element.\n   *\n   * @param {string} classNames The class name(s) separated by a space.\n   * @returns {PrimeElement} This Element.\n   */\n  addClass(classNames) {\n    let currentClassName = this.domElement.className;\n    if (currentClassName === '') {\n      currentClassName = classNames;\n    } else {\n      const currentClassNameList = this.domElement.className.split(Utils.spaceRegex);\n      const newClassNameList = classNames.split(Utils.spaceRegex);\n      for (let i = 0; i < newClassNameList.length; i++) {\n        if (currentClassNameList.indexOf(newClassNameList[i]) === -1) {\n          currentClassNameList.push(newClassNameList[i]);\n        }\n      }\n\n      currentClassName = currentClassNameList.join(' ');\n    }\n\n    this.domElement.className = currentClassName;\n    return this;\n  }\n\n  /**\n   * @callback PrimeDelegationEventListener\n   *\n   * @param {Event} event the original event\n   * @param {PrimeElement} target the target domElement that matched the registered selector\n   */\n\n  /**\n   * Attaches an event listener to the element and will only invoke the listener when the event target matches\n   * the provided selector.\n   *\n   * The intent of this function is to provide a delegated listener and handle events from nested elements.\n   *\n   * @param {string} event The name of the event\n   * @param  {string} selector The selector to match against the Element\n   * @param {PrimeDelegationEventListener} listener The event listener function\n   */\n  addDelegatedEventListener(event, selector, listener) {\n    this.domElement.delegatedListeners =  this.domElement.delegatedListeners || [];\n    let allDelegatedListeners = this.domElement.delegatedListeners;\n\n    // Store the event listeners in the following format:\n    //   [ event_type -> [ selector -> [ listeners ] ] ]\n    //\n    // Example:\n    //   [ 'click' -> [ 'a.foo' -> [ funcA, funcB ] ] ]\n\n    if (!(event in allDelegatedListeners)) {\n      allDelegatedListeners[event] = [];\n    }\n\n    if (!(selector in allDelegatedListeners[event])) {\n      allDelegatedListeners[event][selector] = [];\n    }\n\n    let delegatedListeners = allDelegatedListeners[event][selector] || [];\n    if (!(listener in delegatedListeners)) {\n      delegatedListeners.push(listener);\n    }\n\n    this.addEventListener(event, this._handleDelegatedEvent);\n  }\n\n  /**\n   * Attaches an event listener to this Element.\n   *\n   * @param {string} event The name of the event.\n   * @param {Function} listener The event listener function.\n   * @returns {PrimeElement} This Element.\n   */\n  addEventListener(event, listener) {\n    if (event.indexOf(':') === -1) {\n      // Traditional event\n      this.domElement.eventListeners = this.domElement.eventListeners || {};\n      this.domElement.eventListeners[event] = this.domElement.eventListeners[event] || [];\n      if (this.domElement.eventListeners[event].indexOf(listener) === -1) {\n        this.domElement.eventListeners[event].push(listener);\n      }\n      this.domElement.addEventListener(event, listener, false);\n    } else {\n      // Custom event\n      this.domElement.customEventListeners = this.domElement.customEventListeners || {};\n      this.domElement.customEventListeners[event] = this.domElement.customEventListeners[event] || [];\n      if (this.domElement.customEventListeners[event].indexOf(listener) === -1) {\n        this.domElement.customEventListeners[event].push(listener);\n      }\n    }\n\n    return this;\n  }\n\n  /**\n   * Appends the given element to this element. If the given element already exists in the DOM, it is removed from its\n   * current location and placed at the end of this element.\n   *\n   * @param {PrimeElement|Node} element The element to append.\n   * @returns {PrimeElement} This Element.\n   */\n  appendElement(element) {\n    const domElement = (element instanceof PrimeElement) ? element.domElement : element;\n    if (domElement.parentNode) {\n      domElement.parentNode.removeChild(domElement);\n    }\n\n    this.domElement.appendChild(domElement);\n    return this;\n  }\n\n  /**\n   * Appends the given HTML string to this element.\n   *\n   * @param {string} html The HTML to append.\n   * @returns {PrimeElement} This Element.\n   */\n  appendHTML(html) {\n    this.domElement.insertAdjacentHTML('beforeend', html);\n    return this;\n  }\n\n  /**\n   * Inserts this Element (which must be a newly created Element) into the DOM inside at the very end of the given\n   * element.\n   *\n   * @param {PrimeElement|Node} element The element to insert this Element into.\n   * @returns {PrimeElement} This Element.\n   */\n  appendTo(element) {\n    // Error out for now if this element is in the document so we can punt on cloning for now\n    if (this.domElement.parentNode) {\n      throw new TypeError('You can only insert new PrimeElements for now');\n    }\n\n    const domElement = (element instanceof PrimeElement) ? element.domElement : element;\n    if (domElement.parentNode) {\n      domElement.appendChild(this.domElement);\n    } else {\n      throw new TypeError('The element you passed into appendTo is not in the DOM. You can\\'t insert a PrimeElement inside an element that isn\\'t in the DOM yet.');\n    }\n\n    return this;\n  }\n\n  /**\n   * Fires an event on the Element.\n   *\n   * @param {string} event The name of the event.\n   * @param {Object} [memo] Assigned to the memo field of the event.\n   * @param {Object} [target] The target.\n   * @param {boolean} [bubbling] If the event is bubbling, defaults to true.\n   * @param {boolean} [cancelable] If the event is cancellable, defaults to true.\n   * @returns {PrimeElement} This Element.\n   */\n  fireEvent(event, memo, target, bubbling, cancelable) {\n    memo = Utils.isDefined(memo) ? memo : {};\n    target = Utils.isDefined(target) ? target : this;\n    bubbling = Utils.isDefined(bubbling) ? bubbling : true;\n    cancelable = Utils.isDefined(cancelable) ? cancelable : true;\n\n    let evt;\n    if (event.indexOf(':') === -1) {\n      // Traditional event\n      if (document.createEventObject) {\n        // Dispatch for IE\n        evt = document.createEventObject();\n        evt.memo = memo || {};\n        evt.cancelBubble = !bubbling;\n        this.domElement.fireEvent('on' + event, evt);\n      } else if (document.createEvent) {\n        // Dispatch for others\n        if (PrimeElement.mouseEventsRegexp.test(event)) {\n          evt = document.createEvent(\"MouseEvents\");\n          evt.initMouseEvent(event, bubbling, cancelable, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n        } else if (PrimeElement.htmlEventsRegexp.test(event)) {\n          evt = document.createEvent(\"HTMLEvents\");\n          evt.initEvent(event, bubbling, cancelable);\n        } else {\n          throw new TypeError('Invalid event [' + event + ']');\n        }\n\n        evt.memo = memo || {};\n        this.domElement.dispatchEvent(evt);\n      } else {\n        throw new TypeError('Unable to fire event. Neither createEventObject nor createEvent methods are available');\n      }\n    } else {\n      // Custom event\n      this.domElement.customEventListeners[event] = this.domElement.customEventListeners[event] || [];\n      evt = {event: event, memo: memo, target: target};\n      for (let index in this.domElement.customEventListeners[event]) {\n        if (this.domElement.customEventListeners[event].hasOwnProperty(index)) {\n          this.domElement.customEventListeners[event][index](evt);\n        }\n      }\n    }\n\n    return this;\n  }\n\n  /**\n   * Fires a custom event on the Element using the given event object rather than creating a new event object. This is\n   * useful for pass-through event handling.\n   *\n   * @param {string} event The name of the event.\n   * @param {Object} eventObj The event object to pass to the handlers.\n   * @returns {PrimeElement} This Element.\n   */\n  fireCustomEvent(event, eventObj) {\n    eventObj = Utils.isDefined(eventObj) ? eventObj : {};\n    if (event.indexOf(':') === -1) {\n      throw new TypeError('This method can only be used for custom events');\n    }\n\n    // Custom event\n    this.domElement.customEventListeners[event] = this.domElement.customEventListeners[event] || [];\n    for (let index in this.domElement.customEventListeners[event]) {\n      if (this.domElement.customEventListeners[event].hasOwnProperty(index)) {\n        this.domElement.customEventListeners[event][index](eventObj);\n      }\n    }\n\n    return this;\n  }\n\n  /**\n   * Puts the focus on this element.\n   *\n   * @returns {PrimeElement} This Element.\n   */\n  focus() {\n    this.domElement.focus();\n    return this;\n  }\n\n  /**\n   * Returns the absolute top of this element relative to the document.\n   *\n   * @returns {number} The number of pixels that this element is from the top of the document.\n   */\n  getAbsoluteTop() {\n    let top = 0;\n    let e = this.domElement;\n    while (e) {\n      top += e.offsetTop;\n      e = e.offsetParent;\n    }\n\n    return top;\n  }\n\n  /**\n   * Returns the value of the given attribute.\n   *\n   * @param {string} name The attribute name.\n   * @returns {?string} This attribute value or null.\n   */\n  getAttribute(name) {\n    const attr = this.domElement.attributes.getNamedItem(name);\n    if (attr) {\n      return attr.value;\n    }\n\n    return null;\n  }\n\n  /**\n   * Returns all of the attributes on the element as an object.\n   *\n   * @returns {object} This attributes or an empty object if there are no attributes on this element.\n   */\n  getAttributes() {\n    const attrs = {};\n    if (this.domElement.hasAttributes()) {\n      for (let i = 0; i < this.domElement.attributes.length; i++) {\n        attrs[this.domElement.attributes[i].name] = this.domElement.attributes[i].value;\n      }\n    }\n\n    return attrs;\n  }\n\n  /**\n   * Gets the viewable height of the Element as an integer value in pixels. This height includes border, padding and scroll bar but excludes the margins.\n   *\n   * @returns {number} The height as pixels (number) or a string.\n   */\n  getBorderedHeight() {\n    return this.domElement.offsetHeight;\n  }\n\n  /**\n   * Gets the width of the Element as an integer value. This width includes border, padding and scroll bar but excludes the margins.\n   *\n   * @returns {number} The height in pixels.\n   */\n  getBorderedWidth() {\n    return this.domElement.offsetWidth;\n  }\n\n  /**\n   * @returns {number} The bottom position (in pixels) of the current element.\n   */\n  getBottom() {\n    return this.domElement.getBoundingClientRect().bottom;\n  }\n\n  /**\n   * Gets the children elements of this Element, optionally reduced to those matching the optional selector.\n   *\n   * @param {string} [selector] The selector. Optional, if not provided all children will be returned.\n   * @returns {PrimeElementList} The children.\n   */\n  getChildren(selector) {\n    if (!Utils.isDefined(selector)) {\n      return new PrimeElementList(this.domElement.children);\n    }\n\n    const matched = [];\n    for (let i = 0; i < this.domElement.children.length; i++) {\n      const child = this.domElement.children[i];\n      if (child.matches(selector)) {\n        matched.push(child);\n      }\n    }\n\n    return new PrimeElementList(matched);\n  }\n\n  /**\n   * Gets the class value of the current element. This might be a single class or multiple class names.\n   *\n   * @returns {string} The class.\n   */\n  getClass() {\n    return this.domElement.className;\n  }\n\n  /**\n   * Gets the computed style information for this Element.\n   *\n   * @returns {IEElementStyle|CSSStyleDeclaration} The style information.\n   */\n  getComputedStyle() {\n    return (this.domElement.currentStyle) ? this.domElement.currentStyle : document.defaultView.getComputedStyle(this.domElement, null);\n  }\n\n  /**\n   * Calculates the location of this element with respect to the document rather than the elements parent, offset parent\n   * or scroll position.\n   *\n   * @returns {{top: number, left: number}}\n   */\n  getCoordinates() {\n    const box = this.domElement.getBoundingClientRect();\n\n    const body = document.body;\n    const documentElement = document.documentElement;\n\n    const scrollTop = window.pageYOffset || documentElement.scrollTop || body.scrollTop;\n    const scrollLeft = window.pageXOffset || documentElement.scrollLeft || body.scrollLeft;\n\n    const clientTop = documentElement.clientTop || body.clientTop || 0;\n    const clientLeft = documentElement.clientLeft || body.clientLeft || 0;\n\n    const top = box.top + scrollTop - clientTop;\n    const left = box.left + scrollLeft - clientLeft;\n\n    return {top: Math.round(top), left: Math.round(left)};\n  }\n\n  /**\n   * Returns the dataset if it exists, otherwise, this creates a new dataset object and returns it.\n   *\n   * @returns {object} This dataset object.\n   */\n  getDataSet() {\n    if (this.domElement.dataset) {\n      return this.domElement.dataset;\n    }\n\n    this.domElement.dataset = {};\n    const attrs = this.getAttributes();\n    for (let prop in attrs) {\n      if (attrs.hasOwnProperty(prop) && prop.indexOf('data-') === 0) {\n        const dataName = prop.substring(5).replace(/-([a-z])/g, function(g) {\n          return g[1].toUpperCase();\n        });\n        this.domElement.dataset[dataName] = attrs[prop];\n      }\n    }\n    return this.domElement.dataset;\n  }\n\n  /**\n   * Returns the data value if it exists, otherwise returns null.\n   *\n   * @param {string} name The attribute name.\n   * @returns {?string} This attribute value or null.\n   */\n  getDataAttribute(name) {\n    return this.getDataSet()[name] || null;\n  }\n\n  /**\n   * Get the first child element of this Element, optionally filtered using the optional selector.\n   *\n   * @param {string} [selector] The selector. Optional.\n   * @returns {?PrimeElement} The first child element or null if the element has no children or a selector was provided and nothing matched the selector..\n   */\n  getFirstChild(selector) {\n    const lastChild = this.getChildren(selector)[0];\n    if (!Utils.isDefined(lastChild)) {\n      return null;\n    }\n\n    return lastChild;\n  }\n\n  /**\n   * Gets the viewable height of the Element as an integer value in pixels. This height includes padding and scroll bar\n   * but excludes the margin and borders. This is often called the innerHeight of the element.\n   *\n   * @returns {number} The height as pixels (number) or a string.\n   */\n  getHeight() {\n    const computedStyle = this.getComputedStyle();\n    const offsetHeight = this.domElement.offsetHeight;\n    const borderTop = computedStyle['borderTopWidth'];\n    const borderBottom = computedStyle['borderBottomWidth'];\n    return offsetHeight - Utils.parseCSSMeasure(borderTop) - Utils.parseCSSMeasure(borderBottom);\n  }\n\n  /**\n   * Gets the inner HTML content of the Element.\n   *\n   * @returns {string} The HTML content.\n   */\n  getHTML() {\n    return this.domElement.innerHTML;\n  }\n\n  /**\n   * Gets the ID of this element from the domElement.\n   *\n   * @returns {string} ID The id of the domElement if it exists.\n   */\n  getId() {\n    return this.domElement.id;\n  }\n\n  /**\n   * Get the last child element of this Element, optionally filtered using the optional selector.\n   *\n   * @param {string} [selector] The selector. Optional.\n   * @returns {?PrimeElement} The last child element or null if the element has no children or a selector was provided and nothing matched the selector..\n   */\n  getLastChild(selector) {\n    const elementList = this.getChildren(selector);\n    if (elementList.length > 0) {\n      return elementList[elementList.length - 1];\n    }\n\n    return null;\n  }\n\n  /**\n   * @returns {number} The left position (in pixels) of the current element.\n   */\n  getLeft() {\n    return this.domElement.getBoundingClientRect().left;\n  }\n\n  /**\n   * @returns {?PrimeElement} This elements next sibling or null.\n   */\n  getNextSibling() {\n    let sibling = this.domElement.nextSibling;\n    while (sibling !== null && sibling.nodeType !== 1) {\n      sibling = sibling.nextSibling;\n    }\n\n    if (sibling === null) {\n      return null;\n    }\n\n    return new PrimeElement(sibling);\n  }\n\n  /**\n   * The elements offset left in pixels.\n   *\n   * @returns {number} The offset left.\n   */\n  getOffsetLeft() {\n    return this.domElement.offsetLeft;\n  }\n\n  /**\n   * The elements offset top in pixels.\n   *\n   * @returns {number} The offset top.\n   */\n  getOffsetTop() {\n    return this.domElement.offsetTop;\n  }\n\n  /**\n   * Retrieves the opacity value for the Element. This handles the IE alpha filter.\n   *\n   * @returns {number} The opacity value.\n   */\n  getOpacity() {\n    const computedStyle = this.getComputedStyle();\n    let opacity = 1.0;\n    if (Browser.name === 'Explorer' && Browser.version < 9) {\n      const filter = computedStyle['filter'];\n      if (filter !== undefined && filter !== '') {\n        const matches = PrimeElement.ieAlphaRegexp.match(filter);\n        if (matches.length > 0) {\n          opacity = parseFloat(matches[0]);\n        }\n      }\n    } else {\n      opacity = parseFloat(computedStyle['opacity']);\n    }\n\n    return opacity;\n  }\n\n  /**\n   * @returns {PrimeElementList} If this element is a select box, this returns the options of the select box in\n   *          an ElementList.\n   */\n  getOptions() {\n    if (this.getTagName() !== 'SELECT') {\n      throw new TypeError('You can only get the options for select elements');\n    }\n\n    return new PrimeElementList(this.domElement.options);\n  }\n\n  /**\n   * Gets the outer height of the element, including the margins. This does not include the padding or borders.\n   *\n   * @returns {number} The outer height of the element.\n   */\n  getOuterHeight() {\n    const computedStyle = this.getComputedStyle();\n    const offsetHeight = this.domElement.offsetHeight;\n    const marginTop = computedStyle['marginTop'];\n    const marginBottom = computedStyle['marginBottom'];\n    return offsetHeight + Utils.parseCSSMeasure(marginTop) + Utils.parseCSSMeasure(marginBottom);\n  }\n\n  /**\n   * Gets the outer HTML content of the Element.\n   *\n   * @returns {string} The outer HTML content.\n   */\n  getOuterHTML() {\n    return this.domElement.outerHTML;\n  }\n\n  /**\n   * Gets the outer width of the element, including the margins. This does not include the padding or borders.\n   *\n   * @returns {number} The outer width of the element.\n   */\n  getOuterWidth() {\n    const computedStyle = this.getComputedStyle();\n    const offsetWidth = this.domElement.offsetWidth;\n    const marginLeft = computedStyle['marginLeft'];\n    const marginRight = computedStyle['marginRight'];\n    return offsetWidth + Utils.parseCSSMeasure(marginLeft) + Utils.parseCSSMeasure(marginRight);\n  }\n\n  /**\n   * Returns this element's parent as a PrimeElement.\n   *\n   * @returns {?PrimeElement} This element's parent or null if there is no parent\n   */\n  getParent() {\n    if (Utils.isDefined(this.domElement.parentElement)) {\n      return new PrimeElement(this.domElement.parentElement);\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * @returns {?PrimeElement} This elements previous sibling or null.\n   */\n  getPreviousSibling() {\n    let sibling = this.domElement.previousSibling;\n    while (sibling !== null && sibling.nodeType !== 1) {\n      sibling = sibling.previousSibling;\n    }\n\n    if (sibling === null) {\n      return null;\n    }\n\n    return new PrimeElement(sibling);\n  }\n\n  /**\n   * @returns {number} The zIndex style of this element based on the element or the first positioned parent.\n   */\n  getRelativeZIndex() {\n    let e = this;\n    while (e !== null && e.getComputedStyle()['zIndex'] === 'auto') {\n      e = e.getParent();\n    }\n    return e === null ? 0 : parseInt(e.getComputedStyle()['zIndex']);\n  }\n\n  /**\n   * @returns {number} The right position (in pixels) of the current element.\n   */\n  getRight() {\n    return this.domElement.getBoundingClientRect().right;\n  }\n\n  /**\n   * @returns {number} The scroll height of this element.\n   */\n  getScrollHeight() {\n    return this.domElement.scrollHeight;\n  }\n\n  /**\n   * @returns {number} The scroll left position of this element.\n   */\n  getScrollLeft() {\n    return this.domElement.scrollLeft;\n  }\n\n  /**\n   * @returns {number} The scroll top position of this element.\n   */\n  getScrollTop() {\n    return this.domElement.scrollTop;\n  }\n\n  /**\n   * @returns {number} The scroll width of this element.\n   */\n  getScrollWidth() {\n    return this.domElement.scrollWidth;\n  }\n\n  /**\n   * Retrieves the selected texts of this Element, if the element is a select. If it is anything else this returns\n   * null.\n   *\n   * @returns {Array} The texts of this Element.\n   */\n  getSelectedTexts() {\n    let texts;\n    if (this.domElement.tagName === 'SELECT') {\n      texts = [];\n      for (let i = 0; i < this.domElement.options.length; i++) {\n        if (this.domElement.options[i].selected) {\n          texts.push(this.domElement.options[i].text);\n        }\n      }\n    } else {\n      texts = null;\n    }\n\n    return texts;\n  }\n\n  /**\n   * Retrieves the values of this Element, if the element is a checkbox or select. If it is anything else this returns\n   * null.\n   *\n   * @returns {Array} The values of this Element.\n   */\n  getSelectedValues() {\n    let values;\n    if (this.domElement.tagName === 'INPUT' && (this.domElement.type === 'checkbox' || this.domElement.type === 'radio')) {\n      values = [];\n      const name = this.domElement.name;\n      const form = PrimeDocument.queryUp('form', this.domElement);\n      PrimeDocument.query('input[name=\"' + name + '\"]', form).each(function(element) {\n        if (element.isChecked()) {\n          values.push(element.getValue());\n        }\n      });\n    } else if (this.domElement.tagName === 'SELECT') {\n      values = [];\n      for (let i = 0; i < this.domElement.length; i++) {\n        if (this.domElement.options[i].selected) {\n          values.push(this.domElement.options[i].value);\n        }\n      }\n    } else {\n      values = null;\n    }\n\n    return values;\n  }\n\n  /**\n   * Gets value of a style attribute.\n   *\n   * @returns {string} The style value.\n   */\n  getStyle(name) {\n    name = Utils.convertStyleName(name);\n    return this.domElement.style[name];\n  }\n\n  /**\n   * @returns {string} The tag name of this element as a string. This is always uppercase.\n   */\n  getTagName() {\n    return this.domElement.tagName;\n  }\n\n  /**\n   * Retrieves the text content of this Element.\n   *\n   * @returns {string} The text contents of this Element.\n   */\n  getTextContent() {\n    return this.domElement.innerText ? this.domElement.innerText : this.domElement.textContent;\n  }\n\n  /**\n   * @returns {number} The top position (in pixels) of the current element.\n   */\n  getTop() {\n    return this.domElement.getBoundingClientRect().top;\n  }\n\n  /**\n   * Gets the width of the Element as an integer value. This width includes padding and scroll bar but excludes the margin and borders.\n   * This is often called the innerWidth of the element.\n   *\n   * @returns {number} The height in pixels.\n   */\n  getWidth() {\n    const computedStyle = this.getComputedStyle();\n    const offsetWidth = this.domElement.offsetWidth;\n    const borderLeft = computedStyle['borderLeftWidth'];\n    const borderRight = computedStyle['borderRightWidth'];\n    return offsetWidth - Utils.parseCSSMeasure(borderLeft) - Utils.parseCSSMeasure(borderRight);\n  }\n\n  /**\n   * Retrieves the value attribute of this Element. This works on all checkboxes, radio buttons, text, text areas, and\n   * options. However, this does not retrieve the selected options in a select box, checked checkboxes or checked radio\n   * buttons. Use the getSelectedValues function for that.\n   *\n   * @returns {string} The value of this Element.\n   */\n  getValue() {\n    return this.domElement.value;\n  }\n\n  /**\n   * Returns true if the element has one or all class names\n   *\n   * @param {string} classNames The class name(s) in a string.\n   * @returns {boolean} True if all class names are present.\n   */\n  hasClass(classNames) {\n    const currentClassNames = this.domElement.className;\n    if (currentClassNames === '') {\n      return classNames === '';\n    }\n\n    const currentClassNameList = currentClassNames.split(Utils.spaceRegex);\n    const findClassNameList = classNames.split(Utils.spaceRegex);\n    for (let i = 0; i < findClassNameList.length; i++) {\n      if (currentClassNameList.indexOf(findClassNameList[i]) === -1) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Hides the Element by setting the display style to none.\n   *\n   * @returns {PrimeElement} This Element.\n   */\n  hide() {\n    this.domElement.style.display = 'none';\n    return this;\n  }\n\n  /**\n   * Inserts this Element into the DOM after the given element, removing it from it's parent if it's an existing element.\n   *\n   * @param {PrimeElement|Element} element The element to insert this Element after.\n   * @returns {PrimeElement} This Element.\n   */\n  insertAfter(element) {\n    if (this.domElement.parentNode) {\n      this.domElement.parentNode.removeChild(this.domElement);\n    }\n\n    const domElement = (element instanceof PrimeElement) ? element.domElement : element;\n    const parentElement = domElement.parentNode;\n    if (parentElement) {\n      parentElement.insertBefore(this.domElement, domElement.nextSibling);\n    } else {\n      throw new TypeError('The element you passed into insertAfter is not in the DOM. You can\\'t insert a PrimeElement after an element that isn\\'t in the DOM yet.');\n    }\n\n    return this;\n  }\n\n  /**\n   * Inserts this Element into the DOM before the given element, removing it from it's parent if it's an existing element.\n   *\n   * @param {PrimeElement|Element} element The element to insert this Element before.\n   * @returns {PrimeElement} This Element.\n   */\n  insertBefore(element) {\n    if (this.domElement.parentNode) {\n      this.domElement.parentNode.removeChild(this.domElement);\n    }\n\n    const domElement = (element instanceof PrimeElement) ? element.domElement : element;\n    const parentElement = domElement.parentNode;\n    if (parentElement) {\n      parentElement.insertBefore(this.domElement, domElement);\n    } else {\n      throw new TypeError('The element you passed into insertBefore is not in the DOM. You can\\'t insert a PrimeElement before an element that isn\\'t in the DOM yet.');\n    }\n\n    return this;\n  }\n\n  /**\n   * Inserts the given HTML snippet directly after this element.\n   *\n   * @param {string} html The HTML string.\n   * @returns {PrimeElement} This Element.\n   */\n  insertHTMLAfter(html) {\n    this.domElement.insertAdjacentHTML('afterend', html);\n    return this;\n  }\n\n  /**\n   * Inserts the given HTML snippet inside this element, before its first child.\n   *\n   * @param {string} html The HTML string.\n   * @returns {PrimeElement} This Element.\n   */\n  insertHTMLAfterBegin(html) {\n    this.domElement.insertAdjacentHTML('afterbegin', html);\n    return this;\n  }\n\n  /**\n   * Inserts the given text after this Element.\n   *\n   * @param {string} text The text to insert.\n   * @returns {PrimeElement} This Element.\n   */\n  insertTextAfter(text) {\n    if (!this.domElement.parentNode) {\n      throw new TypeError('This Element is not currently in the DOM');\n    }\n\n    const textNode = document.createTextNode(text);\n    this.domElement.parentNode.insertBefore(textNode, this.domElement.nextSibling);\n\n    return this;\n  }\n\n  /**\n   * Inserts the given text before this Element.\n   *\n   * @param {string} text The text to insert.\n   * @returns {PrimeElement} This Element.\n   */\n  insertTextBefore(text) {\n    if (!this.domElement.parentNode) {\n      throw new TypeError('This Element is not currently in the DOM');\n    }\n\n    const textNode = document.createTextNode(text);\n    this.domElement.parentNode.insertBefore(textNode, this.domElement);\n\n    return this;\n  }\n\n  /**\n   * Returns true if the element matches the provided selector.\n   *\n   * @param {string} selector to match against the Element\n   * @returns {boolean} True if the element matches the selector, false if it does not match the selector.\n   */\n  is(selector) {\n    return this.domElement.matches(selector);\n  }\n\n  /**\n   * Returns whether or not the element is checked. If the element is not a checkbox or a radio this returns false.\n   *\n   * @returns {boolean} True if the element is selected, false if it isn't or is not a checkbox or a radio.\n   */\n  isChecked() {\n    return this.domElement.tagName === 'INPUT' && (this.domElement.type === 'checkbox' || this.domElement.type === 'radio') && this.domElement.checked;\n  }\n\n  /**\n   * Determines if this element is a child of the given element.\n   *\n   * @param {PrimeElement|Node} element The element to check to see if this element is a child of.\n   * @returns {boolean} True if this element is a child of the given element, false otherwise.\n   */\n  isChildOf(element) {\n    const domElement = element instanceof PrimeElement ? element.domElement : element;\n    let parent = this.domElement.parentNode;\n    while (domElement !== parent && parent !== null) {\n      parent = parent.parentNode;\n    }\n\n    return domElement === parent;\n  }\n\n  /**\n   * @returns {boolean} Whether or not this element is disabled according to the disabled property.\n   */\n  isDisabled() {\n    return this.domElement.disabled;\n  }\n\n  /**\n   * @returns {boolean} True if this element has focus.\n   */\n  isFocused() {\n    return document.activeElement === this.domElement;\n  }\n\n  /**\n   * @return {boolean} True if this element is an INPUT, SELECT or TEXTAREA.\n   */\n  isInput() {\n    const tagName = this.getTagName();\n    return tagName === 'SELECT' || tagName === 'INPUT' || tagName === 'TEXTAREA';\n  }\n\n  /**\n   * Determines if the this element is inside the given element\n   *\n   * @param target {PrimeElement} The target element.\n   * @returns {boolean} True if this element is inside the given element.\n   */\n  isInside(target) {\n    if (this.domElement === document.body || this.domElement === document.documentElement || this.domElement === document) {\n      return false;\n    }\n\n    let parent = this.getParent();\n    while (parent.domElement !== document.body) {\n      if (parent.domElement === target.domElement) {\n        return true;\n      }\n      parent = parent.getParent();\n    }\n\n    return false;\n  }\n\n  /**\n   * Returns whether or not the element is selected. If the element is not an option this returns false.\n   *\n   * @returns {boolean} True if the element is selected, false if it isn't or is not an option.\n   */\n  isSelected() {\n    return this.domElement.tagName === 'OPTION' && this.domElement.selected;\n  }\n\n  /**\n   * Determines if the element is visible using its display and visibility styles.\n   *\n   * @returns {boolean} True if the element is visible, false otherwise. This might return an invalid value if the element\n   * is absolutely positioned and off the screen, but is still technically visible.\n   */\n  isVisible() {\n    const computedStyle = this.getComputedStyle();\n    return computedStyle['display'] !== 'none' && computedStyle['visibility'] !== 'hidden';\n  }\n\n  /**\n   * Inserts this Element (which must be a newly created Element) into the DOM inside at the very beginning of the given\n   * element.\n   *\n   * @param {PrimeElement|Element} element The element to insert this Element into.\n   * @returns {PrimeElement} This Element.\n   */\n  prependTo(element) {\n    // Error out for now if this element is in the document so we can punt on cloning for now\n    if (this.domElement.parentNode) {\n      throw new TypeError('You can only insert new PrimeElements for now');\n    }\n\n    const domElement = (element instanceof PrimeElement) ? element.domElement : element;\n    if (domElement.parentNode) {\n      domElement.insertBefore(this.domElement, domElement.firstChild);\n    } else {\n      throw new TypeError('The element you passed into prependTo is not in the DOM. You can\\'t insert a PrimeElement inside an element that isn\\'t in the DOM yet.');\n    }\n\n    return this;\n  }\n\n  /**\n   * Queries the DOM using the given selector starting at this element and returns all the matched elements.\n   *\n   * @param {string} selector The selector.\n   * @returns {PrimeElementList} An element list.\n   */\n  query(selector) {\n    return PrimeDocument.query(selector, this);\n  }\n\n  /**\n   * Queries the DOM using the given selector starting at this element and returns the first matched element\n   * or null if there aren't any matches.\n   *\n   * @param {string} selector The selector.\n   * @returns {PrimeElement} An element or null.\n   */\n  queryFirst(selector) {\n    return PrimeDocument.queryFirst(selector, this);\n  }\n\n  /**\n   * Queries the DOM using the given selector starting at this element and returns the last matched element\n   * or null if there aren't any matches.\n   *\n   * @param {string} selector The selector.\n   * @returns {PrimeElement} An element or null.\n   */\n  queryLast(selector) {\n    return PrimeDocument.queryLast(selector, this);\n  }\n\n  /**\n   * Traverses up the DOM from this element and looks for a match to the selector.\n   *\n   * @param {string} selector The selector.\n   * @returns {PrimeElement} An element or null.\n   */\n  queryUp(selector) {\n    return PrimeDocument.queryUp(selector, this);\n  }\n\n  /**\n   * Removes all of the event listeners for the given element.\n   *\n   * @returns {PrimeElement} This Element.\n   */\n  removeAllEventListeners() {\n    for (let event in this.domElement.eventListeners) {\n      if (this.domElement.eventListeners.hasOwnProperty(event)) {\n        for (let i = 0; i < this.domElement.eventListeners[event].length; i++) {\n          this._internalRemoveEventListener(event, this.domElement.eventListeners[event][i]);\n        }\n      }\n    }\n\n    this.domElement.eventListeners = {};\n    this.domElement.customEventListeners = {};\n\n    return this;\n  }\n\n  /**\n   * Removes an attribute from the Element\n   *\n   * @param {string} name The name of the attribute.\n   * @returns {PrimeElement} This Element.\n   */\n  removeAttribute(name) {\n    this.domElement.removeAttribute(name);\n    return this;\n  }\n\n  /**\n   * Removes the given class (or list of space separated classes) from this Element.\n   *\n   * @param {string} classNames The class name(s).\n   * @returns {PrimeElement} This Element.\n   */\n  removeClass(classNames) {\n    const currentClassName = this.domElement.className;\n    if (currentClassName === '') {\n      return this;\n    }\n\n    const currentClassNameList = currentClassName.split(Utils.spaceRegex);\n    const removeClassNameList = classNames.split(Utils.spaceRegex);\n    for (let i = 0; i < removeClassNameList.length; i++) {\n      Utils.removeFromArray(currentClassNameList, removeClassNameList[i]);\n    }\n\n    this.domElement.className = currentClassNameList.join(' ');\n    return this;\n  }\n\n  /**\n   * Removes an event listener for a specific event from this Element, you must have attached using addEventListener\n   *\n   * @param {string} event The name of the event.\n   * @param {*} listener The event listener that was bound.\n   * @returns {PrimeElement} This Element.\n   */\n  removeEventListener(event, listener) {\n    let listeners;\n    if (event.indexOf(':') === -1) {\n      this._internalRemoveEventListener(event, listener);\n      listeners = this.domElement.eventListeners[event];\n    } else {\n      listeners = this.domElement.customEventListeners[event];\n    }\n\n    if (listeners) {\n      Utils.removeFromArray(listeners, listener);\n    }\n\n    return this;\n  }\n\n  /**\n   * Removes all of the event listeners for the given event from this element.\n   *\n   * @param {string} event The name of the event to remove the listeners for.\n   * @returns {PrimeElement} This Element.\n   */\n  removeEventListeners(event) {\n    if (event.indexOf(':') === -1) {\n      if (this.domElement.eventListeners[event]) {\n        for (let i = 0; i < this.domElement.eventListeners[event].length; i++) {\n          this._internalRemoveEventListener(event, this.domElement.eventListeners[event][i]);\n        }\n\n        delete this.domElement.eventListeners[event];\n      }\n    } else {\n      if (this.domElement.customEventListeners[event]) {\n        delete this.domElement.customEventListeners[event];\n      }\n    }\n\n    return this;\n  }\n\n  /**\n   * Removes all of the event listeners for the given pattern from this element.\n   *\n   * @param {RegExp} pattern The regular expression that matches the names of the events to remove the listeners for.\n   * @returns {PrimeElement} This Element.\n   */\n  removeEventListenersByPattern(pattern) {\n    for (let event in this.domElement.eventListeners) {\n      if (this.domElement.eventListeners.hasOwnProperty(event) && pattern.test(event)) {\n        for (let i = 0; i < this.domElement.eventListeners[event].length; i++) {\n          this._internalRemoveEventListener(event, this.domElement.eventListeners[event][i]);\n        }\n\n        delete this.domElement.eventListeners[event];\n      }\n    }\n\n    for (let event in this.domElement.customEventListeners) {\n      if (this.domElement.customEventListeners.hasOwnProperty(event) && pattern.test(event)) {\n        delete this.domElement.customEventListeners[event];\n      }\n    }\n\n    return this;\n  }\n\n  /**\n   * Removes this Element from the DOM. If the Element isn't in the DOM this does nothing.\n   *\n   * @returns {PrimeElement} This Element.\n   */\n  removeFromDOM() {\n    if (this.domElement.parentNode) {\n      this.domElement.parentNode.removeChild(this.domElement);\n    }\n\n    return this;\n  }\n\n  /**\n   * Create a selected range for this element.\n   *\n   * @returns {PrimeElement} This Element.\n   */\n  selectElementContents() {\n    let range;\n    let selection;\n\n    if (document.body.createTextRange) {\n      /* IE */\n      range = document.body.createTextRange();\n      range.moveToElementText(this.domElement);\n      range.select();\n    } else if (window.getSelection) {\n      /* Rest of the world */\n      selection = window.getSelection();\n      range = document.createRange();\n      range.selectNodeContents(this.domElement);\n      selection.removeAllRanges();\n      selection.addRange(range);\n    }\n\n    return this;\n  }\n\n  /**\n   * Scrolls this Element into the visible area of the browser window.\n   *\n   * @returns {PrimeElement} This Element.\n   */\n  scrollIntoView() {\n    this.domElement.scrollIntoView();\n    return this;\n  }\n\n  /**\n   * Scrolls this element to the given horizontal position.\n   *\n   * @param {number} position The position to scroll the element to.\n   * @returns {PrimeElement} This Element.\n   */\n  scrollLeftTo(position) {\n    this.domElement.scrollLeft = position;\n    return this;\n  }\n\n  /**\n   * Scrolls this element to the given vertical position.\n   *\n   * @param {number} position The position to scroll the element to.\n   * @returns {PrimeElement} This Element.\n   */\n  scrollTo(position) {\n    this.domElement.scrollTop = position;\n    return this;\n  }\n\n  /**\n   * Scrolls this element to the bottom.\n   *\n   * @returns {PrimeElement} This Element.\n   */\n  scrollToBottom() {\n    this.domElement.scrollTop = this.domElement.scrollHeight;\n    return this;\n  }\n\n  /**\n   * Scrolls this element to the top.\n   *\n   * @returns {PrimeElement} This Element.\n   */\n  scrollToTop() {\n    this.domElement.scrollTop = 0;\n    return this;\n  }\n\n  /**\n   * Sets an attribute of the Element.\n   *\n   * @param {string} name The attribute name\n   * @param {number|string} value The attribute value\n   * @returns {PrimeElement} This Element.\n   */\n  setAttribute(name, value) {\n    if (typeof value === 'number') {\n      value = value.toString();\n    }\n    if (this.domElement.setAttribute) {\n      this.domElement.setAttribute(name, value);\n    } else {\n      const attribute = document.createAttribute(name);\n      attribute.nodeValue = value;\n      this.domElement.setAttributeNode(attribute);\n    }\n\n    return this;\n  }\n\n  /**\n   * Sets a data- attribute of the Element.\n   *\n   * Example: setDataAttribute('fooBar', 'baz');\n   *  is equivalent to calling setAttribute('data-foo-bar', 'baz');\n   *\n   * @param {string} name The attribute name\n   * @param {number|string} value The attribute value\n   * @returns {PrimeElement} This Element.\n   */\n  setDataAttribute(name, value) {\n    const dataName = 'data-' + name.replace(/([a-z])([A-Z])/g, \"$1-$2\").toLowerCase();\n    return this.setAttribute(dataName, value);\n  }\n\n  /**\n   * Sets multiple attributes of the Element from the hash\n   *\n   * @param {Object} attributes An object of key value style pairs.\n   * @returns {PrimeElement} This Element.\n   */\n  setAttributes(attributes) {\n    for (let key in attributes) {\n      if (attributes.hasOwnProperty(key)) {\n        this.setAttribute(key, attributes[key]);\n      }\n    }\n    return this;\n  }\n\n  /**\n   * If this element is a checkbox or radio button, this sets the checked field on the DOM object equal to the given\n   * value.\n   *\n   * @param {boolean} value The value to set the checked state of this element to.\n   * @returns {PrimeElement} This Element.\n   */\n  setChecked(value) {\n    this.domElement.checked = value;\n    return this;\n  }\n\n  /**\n   * Sets if this element is disabled or not. This works with any element that responds to the disabled property.\n   *\n   * @param {boolean} value The value to set the disabled state of this element to.\n   * @returns {PrimeElement} This Element.\n   */\n  setDisabled(value) {\n    this.domElement.disabled = value;\n    return this;\n  }\n\n  /**\n   * Sets the height of this element using the height style.\n   *\n   * @param {number|string} height The new height as a number (for pixels) or string.\n   * @returns {PrimeElement} This Element.\n   */\n  setHeight(height) {\n    if (typeof(height) === 'number') {\n      height = height + 'px';\n    }\n\n    this.setStyle('height', height);\n    return this;\n  }\n\n  /**\n   * Sets the inner HTML content of the Element.\n   *\n   * @param {string|PrimeElement} newHTML The new HTML content for the Element.\n   * @returns {PrimeElement} This Element.\n   */\n  setHTML(newHTML) {\n    if (newHTML !== null) {\n      if (newHTML instanceof PrimeElement) {\n        this.domElement.innerHTML = newHTML.getHTML();\n      } else {\n        this.domElement.innerHTML = newHTML;\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Sets the ID of the Element.\n   *\n   * @param {string} id The ID.\n   * @returns {PrimeElement} This Element.\n   */\n  setId(id) {\n    this.domElement.id = id;\n    return this;\n  }\n\n  /**\n   * Sets left position of the element.\n   *\n   * @param {number|string} left The left position of the element in pixels or as a string.\n   * @returns {PrimeElement} This Element.\n   */\n  setLeft(left) {\n    let leftString = left;\n    if (typeof(left) === 'number') {\n      leftString = left + 'px';\n    }\n\n    this.setStyle('left', leftString);\n    return this;\n  }\n\n  /**\n   * Sets the opacity of the element. This also sets the IE alpha filter for IE version 9 or younger.\n   *\n   * @param {number} opacity The opacity.\n   * @returns {PrimeElement} This Element.\n   */\n  setOpacity(opacity) {\n    if (Browser.name === 'Explorer' && Browser.version < 9) {\n      this.domElement.style.filter = 'alpha(opacity=' + opacity + ')';\n    } else {\n      this.domElement.style.opacity = opacity;\n    }\n\n    return this;\n  }\n\n  /**\n   * Sets the selected value on the element. If the element is not an option or radio, this does nothing.\n   *\n   * @param {boolean} selected Selected value.\n   */\n  setSelected(selected) {\n    this.domElement.selected = selected;\n  }\n\n  /**\n   * Sets the selected value(s) of this element. This works on selects, checkboxes, and radio buttons.\n   *\n   * @param {string} [arguments] The value(s) to select (var args).\n   * @returns {PrimeElement} This Element.\n   */\n  setSelectedValues() {\n    // Handle the case where they passed in an array\n    let values = null;\n    if (arguments.length === 1 && Utils.isArray(arguments[0])) {\n      values = arguments[0];\n    } else {\n      values = Array.prototype.slice.call(arguments, 0);\n    }\n\n    if (this.domElement.tagName === 'INPUT' && (this.domElement.type === 'checkbox' || this.domElement.type === 'radio')) {\n      const name = this.domElement.name;\n      const form = PrimeDocument.queryUp('form', this.domElement);\n      PrimeDocument.query('input[name=\"' + name + '\"]', form).each(function(element) {\n        element.setChecked(values.indexOf(element.getValue()) !== -1);\n      });\n    } else if (this.domElement.tagName === 'SELECT') {\n      for (let i = 0; i < this.domElement.length; i++) {\n        this.domElement.options[i].selected = values.indexOf(this.domElement.options[i].value) !== -1;\n      }\n    }\n\n    return this;\n  }\n\n  /**\n   * Sets the style for the name of this Element.\n   *\n   * @param {string} name The style name.\n   * @param {number|string} value The style value.\n   * @returns {PrimeElement} This Element.\n   */\n  setStyle(name, value) {\n    if (typeof value === 'number') {\n      value = value.toString();\n    }\n    this.domElement.style[name] = value;\n    return this;\n  }\n\n  /**\n   * Sets multiple styles of this Element.\n   *\n   * @param {Object} styles An object with key value pairs for the new style names and values.\n   * @returns {PrimeElement} This Element.\n   */\n  setStyles(styles) {\n    for (let key in styles) {\n      if (styles.hasOwnProperty(key)) {\n        this.setStyle(key, styles[key]);\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Sets the textContent of the Element.\n   *\n   * @param {number|string|PrimeElement} newText The new text content for the Element.\n   * @returns {PrimeElement} This Element.\n   */\n  setTextContent(newText) {\n    if (newText !== null) {\n      if (newText instanceof PrimeElement) {\n        this.domElement.textContent = newText.getTextContent();\n      } else {\n        if (typeof newText === 'number') {\n          newText = newText.toString();\n        }\n        this.domElement.textContent = newText;\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Sets top position of the element.\n   *\n   * @param {number|string} top The top position of the element in pixels or as a string.\n   * @returns {PrimeElement} This Element.\n   */\n  setTop(top) {\n    let topString = top;\n    if (typeof(top) === 'number') {\n      topString = top + 'px';\n    }\n\n    this.setStyle('top', topString);\n    return this;\n  }\n\n  /**\n   * Sets the value of this Element. This handles checkboxes, radio buttons, options, text inputs and text areas. This\n   * works on checkboxes and radio buttons, but it change the value attribute on them rather than checking and unchecking\n   * the buttons themselves. To check and uncheck the buttons, use the select method.\n   *\n   * @param {number|string} value The new value.\n   * @returns {PrimeElement} This Element.\n   */\n  setValue(value) {\n    if (typeof value === 'number') {\n      value = value.toString();\n    }\n    this.domElement.value = value;\n    return this;\n  }\n\n  /**\n   * Sets the width of this element using the height style.\n   *\n   * @param {number|string} width The new width as a number (for pixels) or string.\n   * @returns {PrimeElement} This Element.\n   */\n  setWidth(width) {\n    if (typeof(width) === 'number') {\n      width = width + 'px';\n    }\n\n    this.setStyle('width', width);\n    return this;\n  }\n\n  /**\n   * Shows the Element by setting the display style first to empty string. After this, the elements computed style is\n   * checked to see if the element is still not visible. If that is true, the element must have a CSS style defined in\n   * a stylesheet that is setting it to display: none. In this case, we determine if the element is a block level element\n   * and either set the display to 'block' or 'inline'.\n   *\n   * @param {string} [displayValue] The display value to use for the show. This defaults to the W3C standard display\n   * setting depending on the type of element you are showing. For example, INPUT is inline and DIV is block.\n   * @returns {PrimeElement} This Element.\n   */\n  show(displayValue) {\n    if (Utils.isDefined(displayValue)) {\n      this.domElement.style.display = displayValue;\n      return this;\n    }\n\n    this.domElement.style.display = '';\n\n    const computedDisplay = this.getComputedStyle()['display'];\n    if (computedDisplay === 'none') {\n      if (!Utils.isDefined(displayValue)) {\n        displayValue = (PrimeElement.blockElementRegexp.test(this.domElement.tagName)) ? 'block' : 'inline';\n      }\n\n      this.domElement.style.display = displayValue;\n    }\n\n    return this;\n  }\n\n  /**\n   * Toggle the class on this element.\n   *\n   * @param {string} className The class name.\n   * @returns {PrimeElement} This Element.\n   */\n  toggleClass(className) {\n    if (this.hasClass(className)) {\n      this.removeClass(className);\n    } else {\n      this.addClass(className);\n    }\n\n    return this;\n  }\n\n  /**\n   * Removes this element from the DOM while preserving the inner HTML.\n   *\n   * Example, call unwrap on the italic element:\n   *   <strong>Hello</strong><italic> World </italic> --> <strong>Hello</strong> World\n   *\n   * @returns {PrimeElement} This Element.\n   */\n  unwrap() {\n    const parent = this.getParent().domElement;\n    while (this.domElement.firstChild) {\n      parent.insertBefore(this.domElement.firstChild, this.domElement);\n    }\n\n    this.removeFromDOM();\n  }\n\n  /**\n   * Builds a new element using the given HTML snippet (currently this only supports the tag).\n   *\n   * @param {string} elementString The element string.\n   * @param {Object} [properties={}] The properties for the new element.\n   * @returns {PrimeElement} A new PrimeElement.\n   */\n  wrapInnerHTML(elementString, properties) {\n    const element = PrimeDocument.newElement(elementString, properties);\n    element.setHTML(this.getOuterHTML());\n    this.domElement.outerHTML = element.domElement.outerHTML;\n    return this;\n  }\n\n  /* ===================================================================================================================\n   * Private Methods\n   * ===================================================================================================================*/\n\n  /**\n   * Handle delegated events.\n   *\n   * @param {Event} event\n   * @private\n   */\n  _handleDelegatedEvent(event) {\n    this._callMatchedListeners(event, event.target);\n\n    // If the event cannot bubble, we are done.\n    if (!event.bubbles) {\n      return;\n    }\n\n    // While propagation has not been stopped, walk up the tree to simulate the bubble\n    let domElement = event.target;\n    while (true) {\n      if (domElement === this.domElement || domElement === document || event.isPropagationStopped) {\n        break;\n      }\n\n      domElement = domElement.parentNode;\n      this._callMatchedListeners(event, domElement);\n    }\n  }\n\n  _callMatchedListeners(event, target) {\n    // Test each selector we have against this target\n    let delegatedListeners = this.domElement.delegatedListeners[event.type] || [];\n    for (let selector in delegatedListeners) {\n      if (delegatedListeners.hasOwnProperty(selector)) {\n        if (target.matches(selector)) {\n\n          let scopedListeners = delegatedListeners[selector];\n          // Call each listener unless immediate propagation has been stopped\n          for (let i = 0; i < scopedListeners.length; i++) {\n\n            if (event.isImmediatePropagationStopped) {\n              return;\n            }\n\n            scopedListeners[i](event, target);\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Removes the event listener proxy from this element.\n   *\n   * @param {string} event The event name.\n   * @param {Function} listener The listener function.\n   * @private\n   */\n  _internalRemoveEventListener(event, listener) {\n    if (event.indexOf(':') === -1) {\n      // Traditional event\n      if (this.domElement.removeEventListener) {\n        this.domElement.removeEventListener(event, listener, false);\n      } else if (this.domElement.detachEvent) {\n        this.domElement.detachEvent('on' + event, listener);\n      } else {\n        throw new TypeError('Unable to remove event from the element. Neither removeEventListener nor detachEvent methods are available');\n      }\n    } else if (this.domElement.customEventListeners && this.domElement.customEventListeners[event]) {\n      // Custom event\n      const customListeners = this.domElement.customEventListeners[event];\n      Utils.removeFromArray(customListeners, listener);\n    }\n  }\n}\n\n\n/* ===================================================================================================================\n * Polyfill\n * ===================================================================================================================*/\n\n(function() {\n  if (!Element.prototype.matches) {\n    Element.prototype.matches = function(selector) {\n      const domElement = this;\n      const matches = (domElement.parentNode || domElement.document).querySelectorAll(selector);\n      let i = 0;\n\n      while (matches[i] && matches[i] !== domElement) {\n        i++;\n      }\n\n      return !!matches[i];\n    };\n  }\n\n  // Add isPropagationStopped, this is part of the DOM Level 3 spec for CustomEvents\n  // - adding it here for all types so it can be used by the delegation event listener\n  // https://www.w3.org/TR/2003/NOTE-DOM-Level-3-Events-20031107/events.html#Events-Event-isPropagationStopped\n  if (!Event.prototype.isPropagationStopped) {\n    let _stopPropagation = Event.prototype.stopPropagation;\n    Event.prototype.stopPropagation = function() {\n      this.isPropagationStopped = true;\n      _stopPropagation.apply(this, arguments);\n    }\n  }\n\n  // Add isImmediatePropagationStopped, this is part of the DOM Level 3 spec for CustomEvents\n  // - adding it here for all types so it can be used by the delegation event listener\n  // https://www.w3.org/TR/2003/NOTE-DOM-Level-3-Events-20031107/events.html#Events-Event-isImmediatePropagationStopped\n  if (!Event.prototype.isImmediatePropagationStopped) {\n    let _stopImmediatePropagation = Event.prototype.stopImmediatePropagation;\n    Event.prototype.stopImmediatePropagation = function() {\n      this.isImmediatePropagationStopped = true;\n      _stopImmediatePropagation.apply(this, arguments);\n    }\n  }\n})();\n\nexport {PrimeElement};\n","/*\n * Copyright (c) 2017-2018, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n\nimport {Utils} from \"../Utils.js\";\nimport {PrimeDocument} from \"../PrimeDocument.js\";\n\n/**\n * The singleton instance.\n *\n * @type {Overlay}\n */\nlet instance;\n\nclass Overlay {\n  /**\n   * Constructs a new Overlay instance once per DOM.\n   *\n   * @constructor\n   */\n  constructor() {\n    Utils.bindAll(this);\n\n    // Check if the overlay doesn't exist and add it\n    this.overlay = PrimeDocument.queryById('prime-overlay');\n    if (this.overlay === null) {\n      this.overlay = PrimeDocument.newElement('<div/>').setId('prime-overlay').appendTo(document.body).hide();\n    }\n    this.bodyOverflow = null;\n  }\n\n  /**\n   * Return the instance of the Overlay widget\n   * @returns {Overlay}\n   */\n  static get instance() {\n    return instance;\n  }\n\n  /**\n   * Set the instance value of the Overlay instance\n   * @param  value {Overlay}\n   */\n  static set instance(value) {\n    instance = value;\n  }\n\n  /**\n   * Closes the overlay and the target element.\n   */\n  close() {\n    // using null ensures that if this style is not defined, we'll remove it when we're done\n    let overflowStyle = this.bodyOverflow || '';\n    PrimeDocument.bodyElement.setStyle('overflow', overflowStyle);\n    this.overlay.setStyle('zIndex', '10');\n    this.overlay.hide();\n    return this;\n  }\n\n  /**\n   * Opens the overlay and positions the element over it.\n   * @param zIndex {Number|string}\n   */\n  open(zIndex) {\n    if (this.bodyOverflow === null) {\n      this.bodyOverflow = PrimeDocument.bodyElement.getStyle('overflow');\n    }\n    PrimeDocument.bodyElement.setStyle('overflow', 'hidden');\n    this.overlay.show();\n\n    // Set the z-index of this dialog and the overlay\n    this.overlay.setStyle('zIndex', zIndex.toString());\n    return this;\n  }\n\n  /**\n   * Changes the id of the Overlay element.\n   *\n   * @param id {string} The new id.\n   * @returns {Overlay}\n   */\n  setId(id) {\n    this.overlay.setId(id);\n    return this;\n  }\n\n  /**\n   * Updates the zindex of the overlay.\n   *\n   * @param zIndex {string|number} The new zIndex.\n   */\n  setZIndex(zIndex) {\n    this.overlay.setStyle('zIndex', zIndex.toString());\n    return this;\n  }\n}\n\nPrimeDocument.onReady(function() {\n  Overlay.instance = new Overlay();\n});\n\nexport {Overlay};\n","/*\n * Copyright (c) 2017, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n'use strict';\n\nimport {PrimeElement} from \"./PrimeElement.js\";\nimport {Utils} from \"../Utils.js\";\n\nclass PrimeElementList {\n  /**\n   * Constructs an PrimeElementList object using the given array containing DOMElements or PrimeElement objects, or the NodeList containing Node objects.\n   *\n   * @constructor\n   * @param {Array|NodeList} elements An array containing DOMElement or PrimeElement objects, or a NodeList containing Node objects.\n   */\n  constructor(elements) {\n    Utils.bindAll(this);\n\n    // NodeList does not inherit from Array so do not assume object type.\n    this.length = elements.length;\n    for (let i = 0; i < elements.length; i++) {\n      if (elements[i] instanceof PrimeElement) {\n        this[i] = elements[i];\n      } else {\n        this[i] = new PrimeElement(elements[i]);\n      }\n    }\n  }\n\n  /**\n   * Shorthand for calling {@link PrimeElement.addClass} on each Element in the PrimeElementList.\n   *\n   * Adds the given class (or list of space separated classes) to all Elements in this PrimeElementList.\n   *\n   * @param {string} classNames The class name(s) separated by a space.\n   * @returns {PrimeElementList} This PrimeElementList.\n   */\n  addClass(classNames) {\n    return this._proxyToElement('addClass', classNames);\n  }\n\n  /**\n   * Shorthand for calling {@link PrimeElement.addEventListener} on each Element in the PrimeElementList.\n   *\n   * Attaches an event listener to all Elements in this PrimeElementList.\n   *\n   * @param {string} event The name of the event.\n   * @param {Function} listener The event listener function.\n   * @returns {PrimeElement|PrimeElementList} This Element.\n   */\n  addEventListener(event, listener) {\n    return this._proxyToElement('addEventListener', event, listener);\n  }\n\n  /**\n   * Iterates over each of the PrimeElement objects in this PrimeElementList and calls the given function for each one.\n   * The <code>this</code> variable inside the function will be managed by the caller of this method. You should use the\n   * <code>bind</code> method on the Function object if you want to manage the <code>this</code> reference.\n   *\n   * The function can optionally take two parameters. The first parameter is the current element. The second parameter\n   * is the current index.\n   *\n   * @param {Function} iterationFunction The function to call.\n   * @returns {PrimeElementList} This PrimeElementList.\n   */\n  each(iterationFunction) {\n    for (let i = 0; i < this.length; i++) {\n      iterationFunction(this[i], i);\n    }\n\n    return this;\n  }\n\n  /**\n   * Shorthand for calling {@link PrimeElement.hide} on each Element in the PrimeElementList.\n   *\n   * Hides the Element by setting the display style to none.\n   *\n   * @returns {PrimeElementList} This PrimeElementList.\n   */\n  hide() {\n    return this._proxyToElement('hide');\n  }\n\n  /**\n   * Returns the indexOf the element that matches the parameter, either Prime Element or DOMElement.\n   *\n   * @param {PrimeElement|Element} element The element to look for\n   * @returns {number} The position of the element in the list, or -1 if not present.\n   */\n  indexOf(element) {\n    const domElement = (element instanceof PrimeElement) ? element.domElement : element;\n\n    for (let i = 0; i < this.length; i++) {\n      if (this[i].domElement === domElement) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  /**\n   * Removes all the matched elements in the PrimeElementList from the DOM.\n   *\n   * @returns {PrimeElementList} This PrimeElementList.\n   */\n  removeAllFromDOM() {\n    for (let i = 0; i < this.length; i++) {\n      this[i].removeFromDOM();\n    }\n\n    return this;\n  }\n\n  /**\n   * Shorthand for calling {@link PrimeElement.removeClass} on each Element in the PrimeElementList.\n   *\n   * Removes the given class (or list of space separated classes) from all Elements in this PrimeElementList.\n   *\n   * @param {string} classNames The class name(s) separated by a space.\n   * @returns {PrimeElementList} This PrimeElementList.\n   */\n  removeClass(classNames) {\n    return this._proxyToElement('removeClass', classNames);\n  }\n\n  /**\n   * Shorthand for calling {@link PrimeElement.setChecked} on each Element in the PrimeElementList.\n   *\n   * If this element is a checkbox or radio button, this sets the checked field on the DOM object equal to the given\n   * value.\n   *\n   * @param {boolean} value The value to set the checked state of this element to.\n   * @returns {PrimeElementList} This PrimeElementList.\n   */\n  setChecked(value) {\n    return this._proxyToElement('setChecked', value);\n  }\n\n  /**\n   * Shorthand for calling {@link PrimeElement.setDisabled} on each Element in the PrimeElementList.\n   *\n   * Sets if this element is disabled or not. This works with any element that responds to the disabled property.\n   *\n   * @param {boolean} value The value to set the disabled state of this element to.\n   * @returns {PrimeElementList} This PrimeElementList.\n   */\n  setDisabled(value) {\n    return this._proxyToElement('setDisabled', value);\n  }\n\n  /**\n   * Shorthand for calling {@link PrimeElement.show} on each Element in the PrimeElementList.\n   *\n   * Shows the element.\n   *\n   * @returns {PrimeElementList} This PrimeElementList.\n   */\n  show() {\n    return this._proxyToElement('show');\n  }\n\n  /**\n   * @callback PrimeElementListPredicate\n   *\n   * A function that defines a condition on a PrimeElement\n   *\n   * @param {PrimeElement} element\n   * @returns {boolean} True if the element matches a condition\n   */\n\n  /**\n   * A function that tests for any element that matches a condition.\n   * @param {PrimeElementListPredicate} predicate A function that defines the condition to check\n   * @returns {boolean} True if any element matches the predicate\n   */\n  some(predicate) {\n    for (let i = 0; i < this.length; ++i) {\n      if (predicate(this[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /* ===================================================================================================================\n   * Private methods\n   * ===================================================================================================================*/\n\n  /**\n   * Proxy function calls to each Element in the PrimeElementList.\n   * The first parameter is function name, followed by a variable length of arguments.\n   *\n   * Example usage: this._proxyToElement('addClass', classNames);\n   *\n   * @returns {PrimeElementList}\n   * @private\n   */\n  _proxyToElement() {\n    const args = Array.prototype.slice.apply(arguments);\n    for (let i = 0; i < this.length; i++) {\n      this[i][args[0]].apply(this[i], args.slice(1));\n    }\n    return this;\n  }\n}\n\nexport {PrimeElementList}\n","/*\n * Copyright (c) 2012-2018, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n'use strict';\n\nimport {PrimeElementList} from \"./Document/PrimeElementList.js\";\nimport {PrimeElement} from \"./Document/PrimeElement.js\";\nimport {Utils} from \"./Utils.js\";\n\nconst readyFunctions = [];\nconst tagRegexp = /^<(\\w+)\\s*\\/?>.*(?:<\\/\\1>)?$/;\n\n/**\n * The Body element as a PrimeElement object.\n *\n * @type {?PrimeElement}\n */\nlet bodyElement = null;\n\nclass PrimeDocument {\n\n  /**\n   * @returns {PrimeElement}\n   */\n  static get Element() {\n    return PrimeElement;\n  }\n\n  /**\n   * @returns {PrimeElementList}\n   */\n  static get ElementList() {\n    return PrimeElementList;\n  }\n\n  /**\n   * @returns {Array<Function>}\n   */\n  static get readyFunctions() {\n    return readyFunctions;\n  }\n\n  /**\n   * @returns {RegExp}\n   */\n  static get tagRegexp() {\n    return tagRegexp;\n  }\n\n  /**\n   * @returns {?PrimeElement} the Prime body element\n   */\n  static get bodyElement() {\n    if (bodyElement === null) {\n      bodyElement = new PrimeElement(document.body);\n    }\n    return bodyElement;\n  }\n\n  /**\n   * Set the body element\n   * @param {?PrimeElement} body the Prime body element\n   */\n  static set bodyElement(body) {\n    bodyElement = body;\n  }\n\n  /**\n   * Attaches an event listener to the document body and will only invoke the listener when the event target matches\n   * the provided selector.\n   *\n   * The intent of this function is to provide a delegated listener and handle events from nested elements.\n   *\n   * @param {string} event The name of the event\n   * @param  {string} selector The selector to match against the Element\n   * @param {PrimeDelegationEventListener} listener The event listener function\n   */\n  static addDelegatedEventListener(event, selector, listener) {\n    PrimeDocument.bodyElement.addDelegatedEventListener(event, selector, listener);\n  }\n\n  /**\n   * Attaches an event listener to the document, returning the handler proxy.\n   *\n   * @param {string} event The name of the event.\n   * @param {Function} listener The event listener function.\n   * @returns {PrimeDocument} The PrimeDocument object so you can chain method calls together.\n   */\n  static addEventListener(event, listener) {\n    if (event.indexOf(':') === -1) {\n      // Traditional event\n      document.eventListeners = document.eventListeners || {};\n      document.eventListeners[event] = document.eventListeners[event] || [];\n      document.eventListeners[event].push(listener);\n      document.addEventListener(event, listener, false);\n    } else {\n      // Custom event\n      document.customEventListeners = document.customEventListeners || {};\n      document.customEventListeners[event] = document.customEventListeners[event] || [];\n      document.customEventListeners[event].push(listener);\n    }\n\n    return PrimeDocument;\n  }\n\n  /**\n   * Returns the height of the document.\n   *\n   * @returns {number} The height of the document in pixels.\n   */\n  static getHeight() {\n    const body = document.body;\n    const html = document.documentElement;\n\n    return Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);\n  }\n\n  /**\n   * Returns the width of the document.\n   *\n   * @returns {number} The width of the document in pixels.\n   */\n  static getWidth() {\n    const body = document.body;\n    const html = document.documentElement;\n\n    return Math.max(body.scrollWidth, body.offsetWidth, html.clientWidth, html.scrollWidth, html.offsetWidth);\n  }\n\n  /**\n   * Builds a new document using the given HTML document.\n   *\n   * @param {string} documentString The HTML string to build the document.\n   * @returns {Document} A new document.\n   */\n  static newDocument(documentString) {\n    return new DOMParser().parseFromString(documentString, \"text/html\");\n  }\n\n  /**\n   * Builds a new element using the given HTML snippet (currently this only supports the tag).\n   *\n   * @param {string} elementString The element string.\n   * @param {Object} [properties={}] The properties for the new element.\n   * @returns {PrimeElement} A new PrimeElement.\n   */\n  static newElement(elementString, properties) {\n    properties = Utils.isDefined(properties) ? properties : {};\n    const result = PrimeDocument.tagRegexp.exec(elementString);\n    if (result === null) {\n      throw new TypeError('Invalid string to create a new element [' + elementString + ']. It should look like <a/>');\n    }\n\n    const element = new PrimeElement(document.createElement(result[1]));\n    for (let key in properties) {\n      if (properties.hasOwnProperty(key)) {\n        if (key === 'id') {\n          element.setId(properties[key]);\n        } else {\n          element.setAttribute(key, properties[key]);\n        }\n      }\n    }\n\n    return element;\n  }\n\n  /**\n   * Adds the given callback function to the list of functions to invoke when the document is ready. If the document is\n   * already fully loaded, this simply invokes the callback directly.\n   *\n   * @param {Function} callback The callback function.\n   */\n  static onReady(callback) {\n    if (document.readyState === 'complete') {\n      callback();\n    } else {\n      // If this is the first call, register the event listener on the document\n      if (this.readyFunctions.length === 0) {\n        if (document.addEventListener) {\n          document.addEventListener('DOMContentLoaded', PrimeDocument._callReadyListeners, false);\n        } else if (document.attachEvent) {\n          document.attachEvent('onreadystatechange', PrimeDocument._callReadyListeners);\n        } else {\n          throw new TypeError('No way to attach an event to the document. What browser are you running?');\n        }\n      }\n\n      // Add the callback\n      PrimeDocument.readyFunctions.push(callback);\n    }\n  }\n\n  /**\n   * Take the HTML string and append it to the body.\n   *\n   * @param {string} html The HTML to append\n   */\n  static appendHTML(html) {\n    document.body.insertAdjacentHTML('beforeend', html);\n  }\n\n  /**\n   * Moves the given element by appending it to the element provided by the second argument.\n   *\n   * @param {Element|PrimeElement} element The element to move.\n   * @param {Element|PrimeElement} appendToElement [appendToElement=body] The element to append to, defaults to the body if not provided.\n   * @returns {PrimeElement} The element that has been moved.\n   */\n  static move(element, appendToElement) {\n    element = (element instanceof PrimeElement) ? element : new PrimeElement(element);\n\n    if (!Utils.isDefined(appendToElement)) {\n      appendToElement = new PrimeElement(document.body);\n    } else {\n      appendToElement = (appendToElement instanceof PrimeElement) ? appendToElement : new PrimeElement(appendToElement);\n    }\n\n    appendToElement.appendHTML(element.getOuterHTML());\n    element.removeFromDOM();\n    return appendToElement.getLastChild();\n  }\n\n  /**\n   * Queries the DOM using the given selector starting at the given element and returns all the matched elements.\n   *\n   * @param {string} selector The selector.\n   * @param {Element|Document|PrimeElement} [element=document] The starting point for the search (defaults to document if not provided).\n   * @returns {PrimeElementList} An element list.\n   */\n  static query(selector, element) {\n    let domElement = null;\n    if (!Utils.isDefined(element)) {\n      domElement = document;\n    } else {\n      domElement = (element instanceof PrimeElement) ? element.domElement : element;\n    }\n\n    const elements = domElement.querySelectorAll(selector);\n    return new PrimeElementList(elements);\n  }\n\n  /**\n   * Queries the DOM for an element that has the given ID.\n   *\n   * @param {string} id The ID.\n   * @returns {PrimeElement} The element or null.\n   */\n  static queryById(id) {\n    let element = document.getElementById(id);\n    if (!element) {\n      return null;\n    }\n\n    return new PrimeElement(element);\n  }\n\n  /**\n   * Queries the DOM using the given selector starting at the given element and returns the first matched element\n   * or null if there aren't any matches.\n   *\n   * @param {string} selector The selector.\n   * @param {Element|Document|PrimeElement} [element=document] The starting point for the search (defaults to document if not provided).\n   * @returns {PrimeElement} An element or null.\n   */\n  static queryFirst(selector, element) {\n    let domElement = null;\n    if (!Utils.isDefined(element)) {\n      domElement = document;\n    } else {\n      domElement = (element instanceof PrimeElement) ? element.domElement : element;\n    }\n\n    domElement = domElement.querySelector(selector);\n    if (domElement === null) {\n      return null;\n    }\n\n    return new PrimeElement(domElement);\n  }\n\n  /**\n   * Queries the DOM using the given selector starting at the given element and returns the last matched element\n   * or null if there aren't any matches.\n   *\n   * @param {string} selector The selector.\n   * @param {Element|Document|PrimeElement} [element=document] The starting point for the search (defaults to document if not provided).\n   * @returns {PrimeElement} An element or null.\n   */\n  static queryLast(selector, element) {\n    let domElement = null;\n    if (!Utils.isDefined(element)) {\n      domElement = document;\n    } else {\n      domElement = (element instanceof PrimeElement) ? element.domElement : element;\n    }\n\n    const domElements = domElement.querySelectorAll(selector);\n    if (domElements.length === 0) {\n      return null;\n    }\n\n    return new PrimeElement(domElements[domElements.length - 1]);\n  }\n\n  /**\n   * Traverses up the DOM from the starting element and looks for a match to the selector.\n   *\n   * @param {string} selector The selector.\n   * @param {PrimeElement|Element} element The starting point for the upward traversal.\n   * @returns {PrimeElement} An element or null.\n   */\n  static queryUp(selector, element) {\n    let domElement = null;\n    if (!Utils.isDefined(element)) {\n      throw new SyntaxError('Missing required parameter. The element is required.');\n    } else {\n      domElement = (element instanceof PrimeElement) ? element.domElement : element;\n    }\n\n    domElement = domElement.parentNode;\n    while (domElement !== null && !domElement.matches(selector)) {\n      domElement = domElement.parentNode;\n      if (domElement === document) {\n        domElement = null;\n      }\n    }\n\n    if (domElement !== null) {\n      return new PrimeElement(domElement);\n    }\n\n    return null;\n  }\n\n  /**\n   * Removes an event handler for a specific event from the document that you attached using addEventListener\n   *\n   * @param {string} event The name of the event.\n   * @param {Function} listener The listener function.\n   */\n  static removeEventListener(event, listener) {\n    if (document.removeEventListener) {\n      document.removeEventListener(event, listener, false);\n    } else if (document.detachEvent) {\n      document.detachEvent('on' + event, listener);\n    } else {\n      throw new TypeError('Unable to remove event from the element. Neither removeEventListener nor detachEvent methods are available');\n    }\n  }\n\n  /* ===================================================================================================================\n   * Private Methods\n   * ===================================================================================================================*/\n\n  /**\n   * Calls all the registered document ready listeners.\n   *\n   * @private\n   */\n  static _callReadyListeners() {\n    if (document.addEventListener || document.readyState === 'complete') {\n      let readyFunction;\n      while (readyFunction = PrimeDocument.readyFunctions.shift()) {\n        readyFunction();\n      }\n    }\n\n    if (document.removeEventListener) {\n      document.removeEventListener('DOMContentLoaded', PrimeDocument._callReadyListeners, false);\n    } else {\n      document.detachEvent('onreadystatechange', PrimeDocument._callReadyListeners);\n    }\n  }\n}\n\n/* ===================================================================================================================\n * Polyfill\n * ===================================================================================================================*/\n\n/* https://developer.mozilla.org/en-US/docs/Web/API/DOMParser */\n(function(DOMParser) {\n  const proto = DOMParser.prototype;\n  const nativeParse = proto.parseFromString;\n\n  // Firefox/Opera/IE throw errors on unsupported types\n  try {\n    // WebKit returns null on unsupported types\n    if ((new DOMParser()).parseFromString('', 'text/html')) {\n      // text/html parsing is natively supported\n      return;\n    }\n  } catch (ex) {\n  }\n\n  proto.parseFromString = function(markup, type) {\n    if (/^\\s*text\\/html\\s*(?:;|$)/i.test(type)) {\n      const doc = document.implementation.createHTMLDocument('');\n      if (markup.toLowerCase().indexOf('<!doctype') > -1) {\n        doc.documentElement.innerHTML = markup;\n      } else {\n        doc.body.innerHTML = markup;\n      }\n      return doc;\n    } else {\n      return nativeParse.apply(this, arguments);\n    }\n  };\n}(DOMParser));\n\nexport {PrimeDocument};\n","/*\n * Copyright (c) 2012-2018, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n'use strict';\n\nimport {PrimeDocument} from \"./PrimeDocument.js\";\n\n/**\n * The Utils namespace. This contains utility functions.\n *\n * @namespace Utils\n */\nconst Utils = {\n  spaceRegex: /\\s+/,\n  typeRegex: /^\\[object\\s(.*)\\]$/,\n\n  /**\n   * Binds all of the functions inside the object so that <code>this</code> is the object. This is extremely useful for\n   * objects that have functions that will be used as event listeners. Rather than having to manage binding and function\n   * references manually you can instead bind all of the functions in the object and then use them directly for event\n   * listeners.\n   *\n   * Here's an example:\n   *\n   * <pre>\n   *   function Foo() {\n   *     Utils.bindAll(this);\n   *\n   *     // This function is bound to this (i.e. this.handleClick = this.handleClick.bind(this)).\n   *     PrimeDocument.queryFirst('a').addEventListener('click', this.handleClick);\n   *   }\n   *\n   *   Foo.prototype = {\n   *     handleClick: function(event) {\n   *       ...\n   *     }\n   *   };\n   * </pre>\n   *\n   * @param {*} object The object to bind all the functions for.\n   */\n  bindAll: function(object) {\n    Utils.getAllPropertyNames(object).forEach((property) => {\n      if (property !== 'constructor' && typeof object[property] === 'function' &&\n          !(object[property].name && object[property].name.startsWith('bound '))) { // name isn't defined in ie\n        Object.defineProperty(object, property, {value: object[property].bind(object)});\n      }\n    });\n  },\n\n  /**\n   * HTML escape a string.\n   *\n   * @param string The string to escape\n   * @returns {string} the escaped string\n   */\n  escapeHTML: function(string) {\n    let div = document.createElement('div');\n    div.appendChild(document.createTextNode(string));\n    return div.innerHTML;\n  },\n\n  /**\n   * Reverses HTML escaping.\n   * @param string\n   * @returns {string}\n   */\n  unescapeHTML: function(string) {\n    // Neat trick using a textarea\n    let txt = document.createElement('textarea');\n    txt.innerHTML = string;\n    return txt.value;\n  },\n\n  /**\n   * Returns all of the properties for this object and all of its\n   * inherited properties from parent objects.\n   *\n   * @param object\n   * @returns {Array<string>}\n   */\n  getAllPropertyNames: function(object) {\n    let props = {};\n\n    do {\n      Object.getOwnPropertyNames(object).forEach((prop) => {\n        if (!props[prop]) {\n          props[prop]=prop;\n        }\n      })\n    } while (object = Object.getPrototypeOf(object));\n\n    return Object.keys(props);\n  },\n\n  /**\n   * Binds all of the functions inside the object so that <code>this</code> is the object. This is extremely useful for\n   * objects that have functions that will be used as event listeners. Rather than having to manage binding and function\n   * references manually you can instead bind all of the functions in the object and then use them directly for event\n   * listeners.\n   *\n   * Here's an example:\n   *\n   * <pre>\n   *   function Foo() {\n   *     Utils.bindAll(this);\n   *\n   *     // This function is bound to this (i.e. this.handleClick = this.handleClick.bind(this)).\n   *     PrimeDocument.queryFirst('a').addEventListener('click', this.handleClick);\n   *   }\n   *\n   *   Foo.prototype = {\n   *     handleClick: function(event) {\n   *       ...\n   *     }\n   *   };\n   * </pre>\n   *\n   * @param {*} object The object to bind all the functions for.\n   * @param {String} arguments A varargs list of function names to bind.\n   */\n  bindSome: function(object) {\n    if (arguments.length > 1) {\n      for (let i = 1; i < arguments.length; i++) {\n        const func = object[arguments[i]];\n        if (!Utils.isDefined(func) || !(func instanceof Function)) {\n          throw new TypeError('The object does not contain a function named [' + arguments[i] + ']');\n        }\n\n        object[arguments[i]] = func.bind(object);\n      }\n    }\n    for (let property in object) {\n      if (object[property] instanceof Function) {\n        object[property] = object[property].bind(object);\n      }\n    }\n  },\n\n  /**\n   * Safely binds a function to a context.\n   *\n   * @param {Function} func The function to bind.\n   * @param {Object} [context] An optional context to bind the function to.\n   * @returns {Function} Either <code>func</code> or the newly bound function.\n   */\n  bindSafe: function(func, context) {\n    if (!Utils.isDefined(func)) {\n      throw new Error('Invalid arguments');\n    }\n\n    if (!Utils.isDefined(context)) {\n      return func;\n    }\n\n    return func.bind(context);\n  },\n\n  /**\n   * Calculates the length of the given text using the style of the given element.\n   *\n   * @param {PrimeElement} element The element to use the style of.\n   * @param {string} text The text to calculate the length of.\n   * @returns {number} The length of the text.\n   */\n  calculateTextLength: function(element, text) {\n    const computedStyle = element.getComputedStyle();\n    let textCalculator = PrimeDocument.queryById('prime-text-calculator');\n    if (textCalculator === null) {\n      textCalculator = PrimeDocument.newElement('<span/>')\n          .setStyles({\n            position: 'absolute',\n            width: 'auto',\n            fontSize: computedStyle['fontSize'],\n            fontFamily: computedStyle['fontFamily'],\n            fontWeight: computedStyle['fontWeight'],\n            letterSpacing: computedStyle['letterSpacing'],\n            whiteSpace: 'nowrap'\n          })\n          .setId('prime-text-calculator')\n          .setTop(-9999)\n          .setLeft(-9999)\n          .appendTo(document.body);\n    }\n\n    textCalculator.setHTML(text);\n    return textCalculator.getWidth();\n  },\n\n  /**\n   * Attempts to invoke a function iteratively in the background a specific number of times within a specific duration.\n   * This might not complete in the specified duration. The functions passed in should be short functions that return as\n   * quickly as possible. If you are using long functions, use the recursive setTimeout trick by-hand instance.\n   *\n   * @param {number} totalDuration The duration in milliseconds.\n   * @param {number} timesToCall The number of times to call the function.\n   * @param {Function} stepFunction The step function to call each iteration.\n   * @param {Function} [endFunction] The function to invoke at the end.\n   */\n  callIteratively: function(totalDuration, timesToCall, stepFunction, endFunction) {\n    const step = totalDuration / timesToCall;\n    let count = 0;\n    const id = setInterval(function() {\n      count++;\n      const last = (count >= timesToCall);\n      stepFunction(last);\n      if (last) {\n        clearInterval(id);\n\n        if (Utils.isDefined(endFunction)) {\n          endFunction();\n        }\n      }\n    }, step - 1);\n  },\n\n  /**\n   * Capitalizes the given String.\n   *\n   * @param {string} str The String to capitalize.\n   * @returns {string} The capitalized String.\n   */\n  capitalize: function(str) {\n    return str.charAt(0).toUpperCase() + str.substring(1);\n  },\n\n  /**\n   * Converts CSS style names to style JavaScript names.\n   *\n   * @param {string} name The CSS style name to convert\n   * @returns {string} The converted style name.\n   */\n  convertStyleName: function(name) {\n    if (name === 'float') {\n      return 'cssFloat';\n    }\n\n    let dash = name.indexOf('-');\n    if (dash === -1) {\n      return name;\n    }\n\n    let start = 0;\n    let result = '';\n    while (dash !== -1) {\n      const piece = name.substring(start, dash);\n      if (start === 0) {\n        result = result.concat(piece);\n      } else {\n        result = result.concat(Utils.capitalize(piece));\n      }\n\n      start = dash + 1;\n      dash = name.indexOf('-', start);\n    }\n\n    return result + Utils.capitalize(name.substring(start));\n  },\n\n  /**\n   * Return an options map {Object} of the data set values coerced to a typed value of boolean, string or number.\n   *\n   * @param {PrimeElement} element The element.\n   * @returns {Object} The options object.\n   */\n  dataSetToOptions: function(element) {\n    const options = {};\n    const data = element.getDataSet();\n    for (let prop in data) {\n      if (!data.hasOwnProperty(prop)) {\n        continue;\n      }\n      const value = data[prop];\n      if (isNaN(value)) {\n        if (value === 'true') {\n          options[prop] = true;\n        } else if (value === 'false') {\n          options[prop] = false;\n        } else {\n          options[prop] = value;\n        }\n      } else {\n        options[prop] = parseInt(value);\n      }\n    }\n\n    return options;\n  },\n\n  /**\n   * Determines if an object is an array or not.\n   *\n   * @param {*} o The object to check.\n   * @returns {boolean} True if the object is an array, false otherwise.\n   */\n  isArray: function(o) {\n    return Object.prototype.toString.call(o) === '[object Array]';\n  },\n\n  /**\n   * Tests whether or not the value is not null and not 'undefined'.\n   *\n   * @param {*} value The value to test.\n   * @returns {boolean} True if the value is defined (not null or undefined).\n   */\n  isDefined: function(value) {\n    return value !== null && typeof(value) !== 'undefined';\n  },\n\n  /**\n   * Left pad a number.\n   * @param {number} number the number to pad\n   * @param {number} width the width of the final result\n   * @returns {string}\n   */\n  leftPadNumber: function(number, width) {\n    const sign = Math.sign(number) === -1 ? '-' : '';\n    return sign + new Array(width).concat([Math.abs(number)]).join('0').slice(-width);\n  },\n\n  /**\n   * Parses a CSS measure value (12px) as an integer.\n   *\n   * @param {string} measure The CSS measure\n   * @returns {number} The value as an integer.\n   */\n  parseCSSMeasure: function(measure) {\n    const index = measure.indexOf('px');\n    if (index > 0) {\n      return parseInt(measure.substring(0, measure.length - 2));\n    }\n\n    return parseInt(measure) || 0;\n  },\n\n  /**\n   * Parses JSON.\n   *\n   * @param {string} json The JSON.\n   * @returns {Object} The JSON data as an object.\n   */\n  parseJSON: function(json) {\n    return JSON.parse(json);\n  },\n\n  /**\n   * Removes the objects in the toRemove array from the fromArray.\n   *\n   * @param {Array} fromArray The array to remove from.\n   * @param {Array} toRemove The values to remove.\n   */\n  removeAllFromArray: function(fromArray, toRemove) {\n    for (let i = 0; i < toRemove.length; i++) {\n      Utils.removeFromArray(fromArray, toRemove[i]);\n    }\n  },\n\n  /**\n   * Removes the given object from the given array.\n   *\n   * @param {Array} array The array to remove from.\n   * @param {*} obj The object to remove.\n   */\n  removeFromArray: function(array, obj) {\n    const index = array.indexOf(obj);\n    if (index !== -1) {\n      const shift = array.splice(index + 1, array.length);\n      array.length = index;\n      array.push.apply(array, shift);\n    }\n  },\n\n  /**\n   * Helper function to provide a one liner to behave as if you returned 'false' from a legacy version of Prime.js.\n   *\n   * Calling this method is equivalent to calling event.preventDefault and event.stopPropagation.\n   * @param event\n   */\n  stopEvent: function(event) {\n    // Compatibility with older versions of IE\n    event.cancelBubble = true;\n    if (event.stopPropagation) {\n      event.stopPropagation();\n    }\n    if (event.preventDefault) {\n      event.preventDefault();\n    }\n  },\n\n  type: function(object) {\n    return Object.prototype.toString.call(object).match(Utils.typeRegex)[1];\n  }\n};\n\nexport {Utils};\n","/*\n * Copyright (c) 2014-2022, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n'use strict';\n\nimport {Utils} from \"./Utils.js\";\nimport {PrimeElement} from \"./Document/PrimeElement.js\";\n\nclass PrimeRequest {\n  /**\n   * Makes a new AJAX request.\n   *\n   * @constructor\n   * @param {string} [url] The URL to call. This can be left out for sub-classing but should otherwise be provided.\n   * @param {string} [method=GET] The HTTP method to use. You can specify GET, POST, PUT, DELETE, HEAD, SEARCH, etc.\n   */\n  constructor(url, method) {\n    Utils.bindAll(this);\n    this.xhr = new XMLHttpRequest();\n    this.async = true;\n    this.body = null;\n    this.queryParams = null;\n    this.contentType = null;\n    this.inProgress = null;\n    this.errorHandler = this.onError;\n    this.headers = {};\n    this.loadingHandler = this.onLoading;\n    this.method = method || 'GET';\n    this.openHandler = this.onOpen;\n    this.password = null;\n    this.sendHandler = this.onSend;\n    this.successHandler = this.onSuccess;\n    this.unsetHandler = this.onUnset;\n    this.url = url;\n    this.username = null;\n  }\n\n  /**\n   * Changes the URL to call.\n   *\n   * @param {string} url The new URL to call.\n   * @returns {PrimeRequest} This PrimeRequest.\n   */\n  forURL(url) {\n    this.url = url;\n    return this;\n  }\n\n  /**\n   * Invokes the AJAX request. If the URL is not set, this throws an exception.\n   *\n   * @returns {PrimeRequest} This PrimeRequest.\n   */\n  go() {\n    if (!this.url) {\n      throw new TypeError('No URL set for AJAX request');\n    }\n\n    let requestUrl = this.url;\n    if ((this.method === 'GET' || this.method === 'DELETE') && this.queryParams !== null) {\n      if (requestUrl.indexOf('?') === -1) {\n        requestUrl += '?' + this.queryParams;\n      } else {\n        requestUrl += '&' + this.queryParams;\n      }\n    }\n\n    if (this.async) {\n      if (this.inProgress !== null) {\n        this.inProgress.open();\n      }\n\n      this.xhr.onreadystatechange = this._handler.bind(this);\n    }\n\n    this.xhr.open(this.method, requestUrl, this.async, this.username, this.password);\n\n    if (Object.keys(this.headers).length > 0) {\n      for (let key in this.headers) {\n        if (this.headers.hasOwnProperty(key)) {\n          this.xhr.setRequestHeader(key, this.headers[key]);\n        }\n      }\n    }\n\n    if (this.contentType) {\n      this.xhr.setRequestHeader('Content-Type', this.contentType);\n    }\n\n    this.xhr.send(this.body);\n\n    return this;\n  }\n\n  /**\n   * Default handler for the \"completed\" state and an HTTP response status of anything but 2xx. Sub-classes can override\n   * this handler or you can pass in a handler function to the {@link #withUnsetHandler}.\n   *\n   * @param {XMLHttpRequest} xhr The XMLHttpRequest object.\n   */\n  onError(xhr) {\n  }\n\n  /**\n   * Default handler for the \"loading\" state. Sub-classes can override this handler or you can pass in a handler function\n   * to the {@link #withLoadingHandler}.\n   *\n   * @param {XMLHttpRequest} xhr The XMLHttpRequest object.\n   */\n  onLoading(xhr) {\n  }\n\n  /**\n   * Default handler for the \"open\" state. Sub-classes can override this handler or you can pass in a handler function\n   * to the {@link #withOpenHandler}.\n   *\n   * @param {XMLHttpRequest} xhr The XMLHttpRequest object.\n   */\n  onOpen(xhr) {\n  }\n\n  /**\n   * Default handler for the \"send\" state. Sub-classes can override this handler or you can pass in a handler function\n   * to the {@link #withSendHandler}.\n   *\n   * @param {XMLHttpRequest} xhr The XMLHttpRequest object.\n   */\n  onSend(xhr) {\n  }\n\n  /**\n   * Default handler for the \"complete\" state and an HTTP response status of 2xx. Sub-classes can override this handler\n   * or you can pass in a handler function to the {@link #withUnsetHandler}.\n   *\n   * @param {XMLHttpRequest} xhr The XMLHttpRequest object.\n   */\n  onSuccess(xhr) {\n  }\n\n  /**\n   * Default handler for the \"unset\" state. Sub-classes can override this handler or you can pass in a handler function\n   * to the {@link #withUnsetHandler}.\n   *\n   * @param {XMLHttpRequest} xhr The XMLHttpRequest object.\n   */\n  onUnset(xhr) {\n  }\n\n  /**\n   * Sets the async flag to false.\n   *\n   * @returns {PrimeRequest} This PrimeRequest.\n   */\n  synchronously() {\n    this.async = false;\n    return this;\n  }\n\n  /**\n   * Sets the method used to make the AJAX request.\n   *\n   * @param {string} method The HTTP method.\n   * @returns {PrimeRequest} This PrimeRequest.\n   */\n  usingMethod(method) {\n    this.method = method;\n    return this;\n  }\n\n  /**\n   * Sets the request body for the request.\n   *\n   * @param {string} body The request body.\n   * @returns {PrimeRequest} This PrimeRequest.\n   */\n  withBody(body) {\n    this.body = body;\n    return this;\n  }\n\n  /**\n   * Sets the content type for the request.\n   *\n   * @param {string} contentType The contentType.\n   * @returns {PrimeRequest} This PrimeRequest.\n   */\n  withContentType(contentType) {\n    this.contentType = contentType;\n    return this;\n  }\n\n  /**\n   * Sets the data object for the request. Will store the values for query parameters or post data depending on the\n   * method that is set.  If the method is a post or put, will also set content-type to x-www-form-urlencoded.\n   *\n   * @param {Object} data The data object.\n   * @returns {PrimeRequest} This PrimeRequest.\n   */\n  withData(data) {\n    for (let prop in data) {\n      if (data.hasOwnProperty(prop)) {\n        if (this.method === 'PUT' || this.method === 'POST') {\n          this.body = this._addDataValue(this.body, prop, data[prop]);\n        } else {\n          this.queryParams = this._addDataValue(this.queryParams, prop, data[prop]);\n        }\n      }\n    }\n\n    if (this.method === \"PUT\" || this.method === \"POST\") {\n      this.contentType = 'application/x-www-form-urlencoded';\n    }\n    return this;\n  }\n\n  /**\n   * Sets the data for the request using the form fields in the given form element. Will store the values for query\n   * parameters or post data depending on the method that is set.  If the method is a post or put, will also set\n   * content-type to x-www-form-urlencoded.\n   *\n   * @param {PrimeElement|HTMLFormElement} form The form object.\n   * @returns {PrimeRequest} This PrimeRequest.\n   */\n  withDataFromForm(form) {\n    let domElement = form;\n    if (form instanceof PrimeElement) {\n      domElement = form.domElement;\n    }\n\n    for (let i = 0; i < domElement.elements.length; i++) {\n      const primeElement = new PrimeElement(domElement.elements[i]);\n      if (primeElement.isDisabled() || !primeElement.isInput()) {\n        continue;\n      }\n\n      const name = primeElement.getAttribute('name');\n      if (name === null || name.length === 0) {\n        continue;\n      }\n\n      let type = primeElement.getAttribute('type');\n      if (type !== null) {\n        type = type.toLowerCase();\n      }\n\n      let values;\n      if (primeElement.getTagName() === 'SELECT') {\n        values = primeElement.getSelectedValues();\n      } else if ((type === 'radio' || type === 'checkbox') && !primeElement.isChecked()) {\n        continue;\n      } else {\n        values = primeElement.getValue();\n      }\n\n      if (this.method === 'PUT' || this.method === 'POST') {\n        this.body = this._addDataValue(this.body, name, values)\n      } else {\n        this.queryParams = this._addDataValue(this.queryParams, name, values);\n      }\n    }\n\n    if (this.method === \"PUT\" || this.method === \"POST\") {\n      this.contentType = 'application/x-www-form-urlencoded';\n    }\n\n    return this;\n  }\n\n  /**\n   * Sets the handler to invoke when the state of the AJAX request is \"complete\" and the HTTP status in the response is\n   * not 2xx.\n   *\n   * @param {Function} func The handler function.\n   * @returns {PrimeRequest} This PrimeRequest.\n   */\n  withErrorHandler(func) {\n    this.errorHandler = func;\n    return this;\n  }\n\n  /**\n   * Sets an InProgress object that will be called by this AJAX request.\n   *\n   * @param {InProgress} inProgress The InProgress object.\n   * @return {PrimeRequest} This.\n   */\n  withInProgress(inProgress) {\n    this.inProgress = inProgress;\n    return this;\n  }\n\n  /**\n   * Sets the body of the AJAX request to the string value of the provided JSON object. The content-type of the request\n   * will also be set to 'application/json'. The provided JSON object may be passed as a string or an object.\n   *\n   * @param {Object} json The JSON object.\n   * @returns {PrimeRequest} This PrimeRequest.\n   */\n  withJSON(json) {\n    this.body = typeof(json) === String ? json : JSON.stringify(json);\n    this.contentType = 'application/json';\n    return this;\n  }\n\n  /**\n   * Sets the handler to invoke when the state of the AJAX request is \"loading\".\n   *\n   * @param {Function} func The handler function.\n   * @returns {PrimeRequest} This PrimeRequest.\n   */\n  withLoadingHandler(func) {\n    this.loadingHandler = func;\n    return this;\n  }\n\n  /**\n   * Set the request headers using the key and value.\n   *\n   * @param {String} key The key name.\n   * @param {String} value The value.\n   * @returns {PrimeRequest} This PrimeRequest.\n   */\n  withHeader(key, value) {\n    this.headers[key] = value;\n    return this;\n  }\n\n  /**\n   * Set the key value pairs provided as request headers.\n   *\n   * @param {Object} headers A map of key value pairs.\n   * @returns {PrimeRequest} This PrimeRequest.\n   */\n  withHeaders(headers) {\n    for (let key in headers) {\n      if (headers.hasOwnProperty(key)) {\n        this.headers[key] = headers[key];\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Sets the XMLHTTPRequest's response type field, which will control how the response is parsed.\n   *\n   * @param {string} responseType The response type.\n   * @returns {PrimeRequest} This PrimeRequest.\n   */\n  withResponseType(responseType) {\n    this.xhr.responseType = responseType;\n    return this;\n  }\n\n  /**\n   * Sets the handler to invoke when the state of the AJAX request is \"open\".\n   *\n   * @param {Function} func The handler function.\n   * @returns {PrimeRequest} This PrimeRequest.\n   */\n  withOpenHandler(func) {\n    this.openHandler = func;\n    return this;\n  }\n\n  /**\n   * Sets the handler to invoke when the state of the AJAX request is \"send\".\n   *\n   * @param {Function} func The handler function.\n   * @returns {PrimeRequest} This PrimeRequest.\n   */\n  withSendHandler(func) {\n    this.sendHandler = func;\n    return this;\n  }\n\n  /**\n   * Sets the handler to invoke when the state of the AJAX request is \"complete\" and the HTTP status in the response is\n   * 2xx.\n   *\n   * @param {Function} func The handler function.\n   * @returns {PrimeRequest} This PrimeRequest.\n   */\n  withSuccessHandler(func) {\n    this.successHandler = func;\n    return this;\n  }\n\n  /**\n   * Sets the handler to invoke when the state of the AJAX request is \"unset\".\n   *\n   * @param {Function} func The handler function.\n   * @returns {PrimeRequest} This PrimeRequest.\n   */\n  withUnsetHandler(func) {\n    this.unsetHandler = func;\n    return this;\n  }\n\n  /**\n   * Resets the Request back to a base state (basically just the URL + method).  This can be\n   * useful if a component is going to make many requests to the same endpoint with different parameters.\n   *\n   * @returns {PrimeRequest} This PrimeRequest.\n   */\n  reset() {\n    this.queryParams = null;\n    this.data = null;\n    this.body = null;\n    this.contentType = null;\n    return this;\n  }\n\n  /* ===================================================================================================================\n   * Private Methods\n   * ===================================================================================================================*/\n\n  // noinspection JSMethodCanBeStatic\n  /**\n   * Adds the given name-value pair to the given data String. If the value is an array, it adds multiple values for each\n   * piece. Otherwise, it assumes value is a String or can be converted to a String.\n   *\n   * @param {string} dataString The data String used to determine if an ampersand is necessary.\n   * @param {string} name The name of the name-value pair.\n   * @param {string|Array} value The value of the name-value pair.\n   * @returns {string} The new data string.\n   * @private\n   */\n  _addDataValue(dataString, name, value) {\n    let result = '';\n    if (value instanceof Array) {\n      for (let i = 0; i < value.length; i++) {\n        result += encodeURIComponent(name) + '=' + encodeURIComponent(value[i]);\n        if (i + 1 < value.length) {\n          result += '&';\n        }\n      }\n    } else {\n      result = encodeURIComponent(name) + '=' + encodeURIComponent(value);\n    }\n\n    if (dataString !== null && result !== '') {\n      result = dataString + '&' + result;\n    } else if (dataString !== null && result === '') {\n      result = dataString;\n    }\n\n    return result;\n  }\n\n  /**\n   * @private\n   */\n  _handler() {\n    if (this.xhr.readyState === 0) {\n      this.unsetHandler(this.xhr);\n    } else if (this.xhr.readyState === 1) {\n      this.openHandler(this.xhr);\n    } else if (this.xhr.readyState === 2) {\n      this.sendHandler(this.xhr);\n    } else if (this.xhr.readyState === 3) {\n      this.loadingHandler(this.xhr);\n    } else if (this.xhr.readyState === 4) {\n\n      // Call the InProgress before hand because the success handler might call another AJAX method that might open another InProgress\n      if (this.inProgress !== null) {\n        this.inProgress.close(function() {\n          if (this.xhr.status >= 200 && this.xhr.status <= 299) {\n            this.successHandler(this.xhr);\n          } else {\n            this.errorHandler(this.xhr);\n          }\n        }.bind(this));\n      } else {\n        if (this.xhr.status >= 200 && this.xhr.status <= 299) {\n          this.successHandler(this.xhr);\n        } else {\n          this.errorHandler(this.xhr);\n        }\n      }\n    }\n  }\n}\n\nexport {PrimeRequest};\n","/*\n * Copyright (c) 2012-2017, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n'use strict';\n\nclass PrimeWindow {\n  /**\n   * Attaches an event listener to the window, returning the handler proxy.\n   *\n   * @param {string} event The name of the event.\n   * @param {Function} listener The event handler.\n   * @returns {Window} The window object.\n   */\n  static addEventListener(event, listener) {\n    if (event.indexOf(':') === -1) {\n      window.eventListeners = window.eventListeners || {};\n      window.eventListeners[event] = window.eventListeners[event] || [];\n      window.eventListeners[event].push(listener);\n      if (window.addEventListener) {\n        window.addEventListener(event, listener, false);\n      } else if (window.attachEvent) {\n        window.attachEvent('on' + event, listener);\n      } else {\n        throw new TypeError('Unable to set event onto the window. Neither addEventListener nor attachEvent methods are available');\n      }\n    } else {\n      // Custom event\n      window.customEventListeners = window.customEventListeners || {};\n      window.customEventListeners[event] = window.customEventListeners[event] || [];\n      window.customEventListeners[event].push(listener);\n    }\n\n    return window;\n  }\n\n  /**\n   * Returns the inner height of the window. This includes only the rendering area and not the window chrome (toolbars,\n   * status bars, etc). If this method can't figure out the inner height, it throws an exception.\n   *\n   * @returns {number} The inner height of the window.\n   */\n  static getInnerHeight() {\n    if (typeof(window.innerHeight) === 'number') {\n      // Most browsers\n      return window.innerHeight;\n    } else if (document.documentElement && document.documentElement.clientHeight) {\n      // IE 6+ in 'standards compliant mode'\n      return document.documentElement.clientHeight;\n    } else if (document.body && document.body.clientHeight) {\n      // IE 4 compatible\n      return document.body.clientHeight;\n    }\n\n    throw new Error('Unable to determine inner height of the window');\n  }\n\n  /**\n   * Returns the inner width of the window. This includes only the rendering area and not the window chrome (toolbars,\n   * status bars, etc). If this method can't figure out the inner width, it throws an exception.\n   *\n   * @returns {number} The inner width of the window.\n   */\n  static getInnerWidth() {\n    if (typeof(window.innerWidth) === 'number') {\n      // Most browsers\n      return window.innerWidth;\n    } else if (document.documentElement && document.documentElement.clientWidth) {\n      // IE 6+ in 'standards compliant mode'\n      return document.documentElement.clientWidth;\n    } else if (document.body && document.body.clientWidth) {\n      // IE 4 compatible\n      return document.body.clientWidth;\n    }\n\n    throw new Error('Unable to determine inner width of the window');\n  }\n\n  /**\n   * Returns the number of pixels the Window is scrolled by.\n   *\n   * @returns {number} The number of pixels.\n   */\n  static getScrollTop() {\n    if (typeof(window.pageYOffset) === 'number') {\n      return window.pageYOffset;\n    } else if (document.body && document.body.scrollTop) {\n      return document.body.scrollTop;\n    } else if (document.documentElement && document.documentElement.scrollTop) {\n      return document.documentElement.scrollTop;\n    }\n\n    throw new Error('Unable to determine scrollTop of the window');\n  }\n}\n\nexport {PrimeWindow}\n","/*\n * Copyright (c) 2015-2017, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n'use strict';\n\nimport {PrimeElement} from \"../Document/PrimeElement.js\";\nimport {Utils} from \"../Utils.js\";\nimport {PrimeDocument} from \"../PrimeDocument.js\";\n\nclass Draggable {\n  /**\n   * Constructs a new Draggable object for the given element.\n   *\n   * @param {PrimeElement|Element|EventTarget} element The Prime Element for the Draggable widget.\n   * @param {string} [gripSelector=] gripSelector The optional selector to identify the 'grippy' part.\n   * @constructor\n   */\n  constructor(element, gripSelector) {\n    Utils.bindAll(this);\n\n    this.element = PrimeElement.wrap(element);\n    this.offset = {};\n\n    if (!Utils.isDefined(gripSelector)) {\n      this.grip = this.element;\n    } else {\n      this.grip = this.element.queryFirst(gripSelector);\n      if (this.grip === null) {\n        throw Error('Unable to find an element using the provided selector [' + gripSelector + ']');\n      }\n    }\n  }\n\n  /**\n   * Destroys the Draggable Widget\n   */\n  destroy() {\n    this.element.removeClass('active');\n    this.element.setStyles(this.originalStyle);\n\n    this.grip.removeEventListener('mousedown', this._handleMouseDown);\n    PrimeDocument.removeEventListener('mousemove', this._handleMouseMove);\n    PrimeDocument.removeEventListener('mouseup', this._handleMouseUp);\n  }\n\n  /**\n   * Initializes the Draggable by attaching the event listeners.\n   *\n   * @returns {Draggable} This.\n   */\n  initialize() {\n    this.originalStyle = {\n      cursor: this.element.getStyle('cursor'),\n      zIndex: this.element.getStyle('zIndex')\n    };\n\n    this.grip.addEventListener('mousedown', this._handleMouseDown).setStyle('cursor', 'move');\n    return this;\n  }\n\n  /* ===================================================================================================================\n   * Private methods\n   * ===================================================================================================================*/\n\n  /**\n   * Handle Mouse Down Event\n   * @param {Event} event The mouse event.\n   * @private\n   */\n  _handleMouseDown(event) {\n    event.preventDefault();\n    this.element.addClass('active');\n\n    this.offset = {\n      zIndex: this.element.getStyle('zIndex'),\n      height: this.element.getOuterHeight(),\n      width: this.element.getOuterWidth(),\n      x: event.screenX,\n      y: event.screenY\n    };\n\n    this.element.setStyle('zIndex', this.offset.zIndex + 10);\n\n    // Remove old listeners\n    PrimeDocument.removeEventListener('mousemove', this._handleMouseMove);\n    PrimeDocument.removeEventListener('mouseup', this._handleMouseUp);\n\n    // Attach all the events\n    PrimeDocument.addEventListener('mousemove', this._handleMouseMove);\n    PrimeDocument.addEventListener('mouseup', this._handleMouseUp);\n  }\n\n  /**\n   * Handle the Mouse Move event for the body element.\n   *\n   * @param {Event} event The mouse event.\n   * @private\n   */\n  _handleMouseMove(event) {\n    const xDiff = event.screenX - this.offset.x;\n    const yDiff = event.screenY - this.offset.y;\n    this.offset.x = event.screenX;\n    this.offset.y = event.screenY;\n    this.element.setLeft(this.element.getLeft() + xDiff);\n    this.element.setTop(this.element.getTop() + yDiff);\n  }\n\n  /**\n   * Handle the Mouse Up event for this draggable widget.\n   * @private\n   */\n  _handleMouseUp() {\n    PrimeDocument.removeEventListener('mousemove', this._handleMouseMove);\n    PrimeDocument.removeEventListener('mouseup', this._handleMouseUp);\n    this.element.setStyle('zIndex', this.offset.zIndex);\n    this.element.removeClass('active');\n  }\n}\n\nexport {Draggable}\n","/*\n * Copyright (c) 2017-2023, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n\n'use strict';\n\nimport {Overlay} from \"./Overlay.js\";\nimport {PrimeDocument} from \"../PrimeDocument.js\";\nimport {PrimeRequest} from \"../PrimeRequest.js\";\nimport {Utils} from \"../Utils.js\";\nimport {PrimeWindow} from \"../Window.js\";\nimport {Draggable} from \"./Draggable.js\";\n\nclass AJAXDialog {\n  /**\n   * Constructs a new dialog box, which is dynamically built and then populated with the HTML returned from an AJAX call.\n   *\n   * @constructor\n   */\n  constructor() {\n    Utils.bindAll(this);\n\n    this.draggable = null;\n    this.element = null;\n    this.initialized = false;\n    this._setInitialOptions();\n  }\n\n  /**\n   * Closes the dialog, destroys the HTML and updates or hides the overlay.\n   * @returns {AJAXDialog} This.\n   */\n  close() {\n    if (this.element === null) {\n      return;\n    }\n\n    this.element.removeClass('open');\n    if (this.draggable !== null) {\n      this.draggable.destroy();\n      this.draggable = null;\n    }\n\n    document.removeEventListener('keydown', this._handleKeyDown);\n    document.removeEventListener('click', this._handleClick);\n\n    setTimeout(function() {\n      this.element.removeFromDOM();\n      this.element = null;\n\n      const highestZIndex = this._determineZIndex();\n      if (highestZIndex !== 0) {\n        Overlay.instance.setZIndex(highestZIndex);\n      } else {\n        Overlay.instance.close();\n      }\n    }.bind(this), this.options.closeTimeout);\n\n    return this;\n  }\n\n  /**\n   * Destroys the dialog by calling the close function.\n   * @returns {AJAXDialog} This.\n   */\n  destroy() {\n    this.close();\n    return this;\n  }\n\n  /**\n   * Initializes the dialog.\n   * @returns {AJAXDialog} This.\n   */\n  initialize() {\n    return this;\n  }\n\n  /**\n   * Opens the dialog by making the AJAX GET request to the given URI and the opening then dialog.\n   *\n   * @param uri {string} The URI to make the AJAX GET request to.\n   * @returns {AJAXDialog} This.\n   */\n  open(uri) {\n    const request = this.options.ajaxRequest || new PrimeRequest(uri, 'GET');\n    request.withSuccessHandler(this._handleAJAXDialogResponse)\n        .withErrorHandler(this._handleAJAXDialogResponse)\n        .go();\n    return this;\n  }\n\n  /**\n   * Opens the dialog by making the AJAX POST request to the given URI with the given form and extra data (optional)\n   * and then opening the dialog.\n   *\n   * @param uri {string} The URI to make the AJAX POST request to.\n   * @param form {HTMLFormElement|PrimeElement} The Form element to retrieve the data from.\n   * @param extraData [extraData=] {object} (Optional) Extra data to send with the POST.\n   * @returns {AJAXDialog} This.\n   */\n  openPost(uri, form, extraData) {\n    new PrimeRequest(uri, 'POST')\n        .withDataFromForm(form)\n        .withData(extraData)\n        .withSuccessHandler(this._handleAJAXDialogResponse)\n        .go();\n    return this;\n  }\n\n  /**\n   * Updates the HTML contents of the dialog.\n   *\n   * @param html {String} The HTML.\n   * @returns {AJAXDialog} This.\n   */\n  setHTML(html) {\n    this.element.setHTML(html);\n    this._initializeDialog();\n    return this;\n  }\n\n  /**\n   * Sets any additional classes that should be on the dialog.\n   *\n   * @param classes {string} The list of additional classes.\n   * @returns {AJAXDialog} This.\n   */\n  withAdditionalClasses(classes) {\n    this.options.additionalClasses = classes;\n    return this;\n  }\n\n  /**\n   * Override the default Ajax Request used to open the dialog. This does not override the\n   * success and error handlers.\n   *\n   * @param request {PrimeRequest} The Ajax Request to use to open the dialog.\n   * @returns {AJAXDialog} This.\n   */\n  withAjaxRequest(request) {\n    this.options.ajaxRequest = request;\n    return this;\n  }\n\n  /**\n   * Sets the callback that is called after the dialog has been fetched and rendered.\n   *\n   * @param callback {function} The callback function.\n   * @returns {AJAXDialog} This.\n   */\n  withCallback(callback) {\n    this.options.callback = callback;\n    return this;\n  }\n\n  /**\n   * Sets the class name for the dialog element.\n   *\n   * @param className {string} The class name.\n   * @returns {AJAXDialog} This.\n   */\n  withClassName(className) {\n    if (className.indexOf(' ') !== -1) {\n      throw 'Invalid class name [' + className + ']. You can use the additionalClasses options to add more classes.';\n    }\n\n    this.options.className = className;\n    return this;\n  }\n\n  /**\n   * Sets the close button element selector that is used to setup the close button in the HTML that was returned from\n   * the server.\n   *\n   * @param selector {string} The element selector.\n   * @returns {AJAXDialog} This.\n   */\n  withCloseButtonElementSelector(selector) {\n    this.options.closeButtonElementSelector = selector;\n    return this;\n  }\n\n  /**\n   * Sets the timeout used in the close method to allow for transitions.\n   *\n   * @param timeout {int} The timeout.\n   * @returns {AJAXDialog} This.\n   */\n  withCloseTimeout(timeout) {\n    this.options.closeTimeout = timeout;\n    return this;\n  }\n\n  /**\n   * Sets whether this dialog is dismissible by clicking off it or hitting Escape\n   *\n   * @param dismissible {boolean} Whether dialog is dismissible.  Default option is true.\n   * @returns {AJAXDialog} This.\n   */\n  withDismissible(dismissible) {\n    this.options.dismissible = dismissible;\n    return this;\n  }\n\n  /**\n   * Sets the draggable element selector that is used for the DraggableWidget.\n   *\n   * @param selector {string} The element selector.\n   * @returns {AJAXDialog} This.\n   */\n  withDraggableButtonElementSelector(selector) {\n    this.options.draggableElementSelector = selector;\n    return this;\n  }\n\n  /**\n   * Sets an error callback for AJAX form handling. This is called after a failed form submission.\n   *\n   * @param callback {Function} The callback function. The callback function will called with two parameters,\n   *        the first is a reference this object, the second is the XMLHttpRequest object.\n   * @returns {AJAXDialog} This.\n   */\n  withFormErrorCallback(callback) {\n    this.options.formErrorCallback = callback;\n    return this;\n  }\n\n  /**\n   * Sets whether or not forms inside the dialog are handled via AJAX or not.\n   *\n   * @param enabled {boolean} The choice.\n   * @returns {AJAXDialog} This.\n   */\n  withFormHandling(enabled) {\n    this.options.formHandling = enabled;\n    return this;\n  }\n\n  /**\n   * Sets a pre-submit callback for AJAX form handling. This is called before the form is submitted.\n   *\n   * @param callback {Function} The callback function.\n   * @returns {AJAXDialog} This.\n   */\n  withFormPreSubmitCallback(callback) {\n    this.options.formPreSubmitCallback = callback;\n    return this;\n  }\n\n  /**\n   * Sets a success callback for AJAX form handling. This is called after a successful form submission.\n   *\n   * @param callback {Function} The callback function. The callback function will called with two parameters,\n   *        the first is a reference this object, the second is the XMLHttpRequest object.\n   * @returns {AJAXDialog} This.\n   */\n  withFormSuccessCallback(callback) {\n    this.options.formSuccessCallback = callback;\n    return this;\n  }\n\n  /**\n   * Set more than one option at a time by providing a map of key value pairs. This is considered an advanced\n   * method to set options on the widget. The caller needs to know what properties are valid in the options object.\n   *\n   * @param {Object} options Key value pair of configuration options.\n   * @returns {AJAXDialog} This.\n   */\n  withOptions(options) {\n    if (!Utils.isDefined(options)) {\n      return this;\n    }\n\n    for (let option in options) {\n      if (options.hasOwnProperty(option)) {\n        this.options[option] = options[option];\n      }\n    }\n    return this;\n  }\n\n  /* ===================================================================================================================\n   * Private methods\n   * ===================================================================================================================*/\n\n  _determineZIndex() {\n    let highestZIndex = 0;\n    PrimeDocument.query('.' + this.options.className).each(function(dialog) {\n      const zIndex = parseInt(dialog.getComputedStyle()['zIndex']);\n      if (dialog.isVisible() && zIndex > highestZIndex) {\n        highestZIndex = zIndex;\n      }\n    });\n    return highestZIndex;\n  }\n\n  _handleCloseClickEvent(event) {\n    Utils.stopEvent(event);\n    this.close();\n  }\n\n  _handleAJAXDialogResponse(xhr) {\n    this.element = PrimeDocument.newElement('<div/>', {class: this.options.className + ' ' + this.options.additionalClasses}).appendTo(document.body);\n    this.setHTML(xhr.responseText);\n  }\n\n  _handleAJAXFormError(xhr) {\n    this.setHTML(xhr.responseText);\n    this.form = this.element.queryFirst('form').addEventListener('submit', this._handleAJAXFormSubmit);\n\n    if (this.options.formErrorCallback !== null) {\n      this.options.formErrorCallback(this, xhr);\n    }\n\n    if (this.draggable !== null) {\n      this.draggable.destroy();\n    }\n\n    if (this.options.draggableElementSelector !== null && this.element.queryFirst(this.options.draggableElementSelector) !== null) {\n      this.draggable = new Draggable(this.element, this.options.draggableElementSelector).initialize();\n    }\n  }\n\n  _handleAJAXFormSuccess(xhr) {\n    if (this.options.formSuccessCallback !== null) {\n      this.options.formSuccessCallback(this, xhr);\n    } else {\n      const successURI = this.form.getDataSet()['ajaxSuccessUri'];\n      if (successURI !== undefined) {\n        window.location = successURI;\n      } else {\n        window.location.reload();\n      }\n    }\n  }\n\n  _handleAJAXFormSubmit(event) {\n    Utils.stopEvent(event);\n\n    if (this.options.formPreSubmitCallback !== null) {\n      this.options.formPreSubmitCallback(this);\n    }\n\n    new PrimeRequest(this.form.getAttribute('action'), this.form.getAttribute('method'))\n        .withDataFromForm(this.form)\n        .withSuccessHandler(this._handleAJAXFormSuccess)\n        .withErrorHandler(this._handleAJAXFormError)\n        .go();\n  }\n\n  _handleClick(event) {\n    if (event.target === Overlay.instance.overlay.domElement &&\n        this._isTopDialog() &&\n        this.options.dismissible) {\n      Utils.stopEvent(event);\n      this.close();\n    }\n  }\n\n  _handleKeyDown(event) {\n    if (this._isTopDialog() &&\n        event.key === 'Escape' &&\n        this.options.dismissible) {\n      Utils.stopEvent(event);\n      this.close();\n    }\n  }\n\n  _initializeDialog() {\n    this.element.query(this.options.closeButtonElementSelector).each(function(e) {\n      e.addEventListener('click', this._handleCloseClickEvent);\n    }.bind(this));\n\n    if (this.options.dismissible) {\n      document.addEventListener('keydown', this._handleKeyDown);\n      document.addEventListener('click', this._handleClick);\n    }\n\n    // Only set the z-index upon first open\n    if (!this.initialized) {\n      const highestZIndex = this._determineZIndex();\n      Overlay.instance.open(highestZIndex + this.options.zIndexOffset);\n      this.element.setStyle('zIndex', (highestZIndex + this.options.zIndexOffset + 10).toString());\n      this.element.addClass('open');\n    }\n\n    // Call the callback before positioning to ensure all changes to the dialog have been made\n    if (this.options.callback !== null) {\n      this.options.callback(this);\n    }\n\n    // Setup forms if enabled\n    if (this.options.formHandling) {\n      this.form = this.element.queryFirst('form').addEventListener('submit', this._handleAJAXFormSubmit);\n    }\n\n    // Only set the position of the dialog when we first open it, if someone calls setHTML on the dialog we are not resizing it.\n    if (!this.initialized) {\n      // Position the fixed dialog in the center of the screen\n      const windowHeight = PrimeWindow.getInnerHeight();\n      const dialogHeight = this.element.getHeight();\n      this.element.setTop(((windowHeight - dialogHeight) / 2) - 20);\n    }\n\n    if (this.options.draggableElementSelector !== null && this.element.queryFirst(this.options.draggableElementSelector) !== null) {\n      this.draggable = new Draggable(this.element, this.options.draggableElementSelector).initialize();\n    }\n\n    this.initialized = true;\n  }\n\n  _isTopDialog() {\n    const highestZIndex = this._determineZIndex();\n    const zIndex = parseInt(this.element.getComputedStyle()['zIndex']);\n    return (zIndex === highestZIndex);\n  }\n\n  /**\n   * Set the initial options for this widget.\n   * @private\n   */\n  _setInitialOptions() {\n    // Defaults\n    this.options = {\n      additionalClasses: '',\n      ajaxRequest: null,\n      callback: null,\n      className: 'prime-dialog',\n      closeButtonElementSelector: '[data-dialog-role=\"close-button\"]',\n      closeTimeout: 200,\n      dismissible: true,\n      draggableElementSelector: '[data-dialog-role=\"draggable\"]',\n      formErrorCallback: null,\n      formHandling: false,\n      formPreSubmitCallback: null,\n      formSuccessCallback: null,\n      zIndexOffset: 1000\n    };\n  }\n}\n\nexport {AJAXDialog};\n","/*\n * Copyright (c) 2013-2017, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n'use strict';\n\n/**\n * @const {{Keys: {BACKSPACE: number, ENTER: number, ESCAPE: number, SPACE: number, TAB: number, LEFT_ARROW: number, UP_ARROW: number, RIGHT_ARROW: number, DOWN_ARROW: number, DELETE: number}} Events}\n */\nconst Events = {\n  Keys: {\n    BACKSPACE: 8,\n    ENTER: 13,\n    ESCAPE: 27,\n    SPACE: 32,\n    TAB: 9,\n    LEFT_ARROW: 37,\n    UP_ARROW: 38,\n    RIGHT_ARROW: 39,\n    DOWN_ARROW: 40,\n    DELETE: 46\n  }\n};\n\nexport {Events};\n","/*\n * Copyright (c) 2015-2018, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n'use strict';\n\nimport {Utils} from \"./Utils.js\"\n\nconst PrimeDate = {\n  DAYS_IN_MONTH: [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],\n\n  /**\n   * Return the hour in a 12-hour format. AM and PM are not communicated by the returned hour.\n   *\n   * @param date {Date} The date object to retrieve the hour from.\n   * @returns {Number} The hour of the day between 1 and 12.\n   */\n  getHourOfDay: function(date) {\n    return (date.getHours() + 24) % 12 || 12;\n  },\n\n  /**\n   * @param year The year.\n   * @returns {boolean} True if this is a leap year, otherwise false.\n   */\n  isLeapYear: function(year) {\n    return !((year % 4) || (!(year % 100) && (year % 400)));\n  },\n\n  /**\n   * Return the number of days in the month.\n   * @param year The year, the days in the month may change during a leap year.\n   * @param month The month.\n   * @returns {Number} The number of days in the month.\n   */\n  numberOfDaysInMonth: function(year, month) {\n    if (month === 1 && this.isLeapYear(year)) {\n      return 29;\n    } else {\n      return PrimeDate.DAYS_IN_MONTH[month];\n    }\n  },\n\n  /**\n   * Adds the given number of days to the given Date.\n   *\n   * @param date {Date} The date to add the days to.\n   * @param number {Number} The number of days to add.\n   */\n  plusDays: function(date, number) {\n    if (number === 0) {\n      return;\n    }\n\n    let newDate = date.getDate() + number;\n    let numberOfDaysInMonth = PrimeDate.numberOfDaysInMonth(date.getFullYear(), date.getMonth());\n\n    if (newDate > 0) {\n      while (newDate > numberOfDaysInMonth) {\n        PrimeDate.plusMonths(date, 1);\n        newDate = newDate - numberOfDaysInMonth;\n        numberOfDaysInMonth = PrimeDate.numberOfDaysInMonth(date.getFullYear(), date.getMonth());\n      }\n\n      date.setDate(newDate);\n    } else {\n      while (newDate <= 0) {\n        PrimeDate.plusMonths(date, -1);\n        numberOfDaysInMonth = PrimeDate.numberOfDaysInMonth(date.getFullYear(), date.getMonth());\n        newDate = newDate + numberOfDaysInMonth;\n      }\n\n      date.setDate(newDate);\n    }\n  },\n\n  /**\n   * Adds the given number of hours to the given Date. The number can be negative.\n   *\n   * @param date {Date} The date.\n   * @param number {Number} The number of hours to add.\n   */\n  plusHours: function(date, number) {\n    if (number === 0) {\n      return;\n    }\n\n    const deltaDays = parseInt(number / 24);\n    PrimeDate.plusDays(date, deltaDays);\n\n    const deltaHours = number % 24;\n    const newHour = date.getHours() + deltaHours;\n    if (newHour > 23) {\n      PrimeDate.plusDays(date, 1);\n      date.setHours(newHour - 24);\n    } else if (newHour < 0) {\n      PrimeDate.plusDays(date, -1);\n      date.setHours(24 + newHour);\n    } else {\n      date.setHours(newHour);\n    }\n  },\n\n  /**\n   * Adds the given number of minutes to the given Date. The number can be negative.\n   *\n   * @param date {Date} The date.\n   * @param number {Number} The number of minutes to add.\n   */\n  plusMinutes: function(date, number) {\n    if (number === 0) {\n      return;\n    }\n\n    const deltaHours = parseInt(number / 60);\n    PrimeDate.plusHours(date, deltaHours);\n\n    const deltaMinutes = number % 60;\n    const newMinute = date.getMinutes() + deltaMinutes;\n    if (newMinute > 60) {\n      PrimeDate.plusHours(date, 1);\n      date.setMinutes(newMinute - 60);\n    } else if (newMinute < 0) {\n      PrimeDate.plusHours(date, -1);\n      date.setMinutes(60 + newMinute);\n    } else {\n      date.setMinutes(newMinute);\n    }\n  },\n\n  /**\n   * Adds the given number of months to the given Date. The number can be negative.\n   *\n   * @param date {Date} The date.\n   * @param number {Number} The number of months to add.\n   */\n  plusMonths: function(date, number) {\n    if (number === 0) {\n      return;\n    }\n\n    let deltaYears = parseInt(number / 12);\n    let deltaMonths = number % 12;\n    let currentMonth = date.getMonth();\n    const newMonth = currentMonth + deltaMonths;\n    if (newMonth < 0) {\n      deltaYears--;\n      deltaMonths = newMonth;\n      currentMonth = 12;\n    } else if (newMonth >= 12) {\n      deltaYears++;\n      deltaMonths = newMonth - 12;\n      currentMonth = 0;\n    }\n\n    date.setYear(date.getFullYear() + deltaYears);\n    // If the day is 31 and you set month to 1 (February) it will adjust to March 3 (Feb 28 + 3)\n    const adjustedMonth = currentMonth + deltaMonths;\n    if (date.getDate() > this.DAYS_IN_MONTH[adjustedMonth]) {\n      date.setDate(this.DAYS_IN_MONTH[adjustedMonth]);\n    }\n    date.setMonth(adjustedMonth);\n  },\n\n  /**\n   * Adds the given number of seconds to the given Date. The number can be negative.\n   *\n   * @param date {Date} The date.\n   * @param number {Number} The number of seconds to add.\n   */\n  plusSeconds: function(date, number) {\n    if (number === 0) {\n      return;\n    }\n\n    const deltaMinutes = parseInt(number / 60);\n    PrimeDate.plusMinutes(date, deltaMinutes);\n\n    const deltaSeconds = number % 60;\n    const newSecond = date.getSeconds() + deltaSeconds;\n    if (newSecond > 60) {\n      PrimeDate.plusMinutes(date, 1);\n      date.setSeconds(newSecond - 60);\n    } else if (newSecond < 0) {\n      PrimeDate.plusMinutes(date, -1);\n      date.setSeconds(60 + newSecond);\n    } else {\n      date.setSeconds(newSecond);\n    }\n  },\n\n  /**\n   * Adds the given number of years to the given Date. The number can be negative.\n   *\n   * @param date {Date} The date.\n   * @param number {Number} The number of years to add.\n   */\n  plusYears: function(date, number) {\n    if (number === 0) {\n      return;\n    }\n\n    date.setFullYear(date.getFullYear() + number);\n  },\n\n  /**\n   * Return a string in simplified extended ISO format (ISO 8601) truncated to only return YYYY-MM-DD.\n   *\n   * For example: new Date(2015, 6, 4) --> 2015-07-04\n   *\n   * @param date {Date} The date.\n   * @returns {String} A date string in the format YYYY-MM-DD.\n   */\n  toDateOnlyISOString: function(date) {\n    if (date instanceof Date) {\n      return date.getFullYear()\n          + '-' + Utils.leftPadNumber(date.getMonth() + 1, 2)\n          + '-' + Utils.leftPadNumber(date.getDate(), 2);\n    }\n    throw TypeError('date parameter must be a Date object.');\n  }\n};\n\nexport {PrimeDate}\n","/*\n * Copyright (c) 2015-2018, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n'use strict';\n\nimport {Events} from \"../Events.js\";\nimport {PrimeDate} from \"../Date.js\";\nimport {PrimeDocument} from \"../PrimeDocument.js\";\nimport {PrimeElement} from \"../Document/PrimeElement.js\";\nimport {Utils} from \"../Utils.js\";\n\nconst SHORT_DAY_NAMES = ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'];\nconst MONTHS = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\nconst DATE_SEPARATOR = '/';\nconst TIME_SEPARATOR = ':';\nconst AM_PM = ['AM', 'PM'];\n\nclass DateTimePicker {\n  /**\n   * Constructs a new DateTimePicker object for the given input element.\n   *\n   * @param {PrimeElement|Element|EventTarget} element The Prime Element for the DateTimePicker widget.\n   * @constructor\n   */\n  constructor(element) {\n    Utils.bindAll(this);\n\n    this.element = PrimeElement.wrap(element);\n    if (!this.element.is('input')) {\n      throw new TypeError('You can only use DateTimePicker with an input element');\n    }\n\n    this.callback = null;\n    this.customFormatHandler = null;\n    this._setInitialOptions();\n  };\n\n  static get SHORT_DAY_NAMES() {\n    return SHORT_DAY_NAMES;\n  }\n\n  static get MONTHS() {\n    return MONTHS;\n  }\n\n  static get DATE_SEPARATOR() {\n    return DATE_SEPARATOR;\n  }\n\n  static get TIME_SEPARATOR() {\n    return TIME_SEPARATOR;\n  }\n\n  static get AM_PM() {\n    return AM_PM;\n  }\n\n  /**\n   * Closes the Date Picker widget.\n   *\n   * @returns {DateTimePicker} This DateTimePicker.\n   */\n  close() {\n    this.datepicker.removeClass('open');\n\n    // Pause a bit to cancel focus event and allow transition to play\n    setTimeout(function() {\n      this.datepicker.hide();\n    }.bind(this), this.options.closeTimeout);\n    return this;\n  }\n\n  /**\n   * Closes the months select box.\n   *\n   * @returns {DateTimePicker} This DateTimePicker.\n   */\n  closeMonthsSelect() {\n    this.months.removeClass('open');\n    setTimeout(function() {\n      this.months.hide();\n    }.bind(this), this.options.closeTimeout);\n    return this;\n  }\n\n  /**\n   * Closes the years select box.\n   *\n   * @returns {DateTimePicker} This DateTimePicker.\n   */\n  closeYearsSelect() {\n    this.years.removeClass('open');\n    setTimeout(function() {\n      this.years.hide();\n    }.bind(this), this.options.closeTimeout);\n    return this;\n  }\n\n  /**\n   * Destroys the DateTimePicker Widget\n   */\n  destroy() {\n    this.datepicker.removeFromDOM();\n    this.element.removeEventListener('click', this._handleInputClick)\n        .removeEventListener('focus', this._handleInputClick)\n        .removeEventListener('keydown', this._handleInputKey);\n    PrimeDocument.removeEventListener('click', this._handleGlobalClick);\n    PrimeDocument.removeEventListener('keydown', this._handleGlobalKey);\n  }\n\n  /**\n   * Draws the calendar using the month and year from the given Date object.\n   *\n   * @param date {Date} The date to draw the calendar for.\n   * @return {DateTimePicker} This DateTimePicker.\n   */\n  drawCalendar(date) {\n    const month = date.getMonth();\n    const year = date.getFullYear();\n    const firstDay = new Date(year, month, 1);\n    const firstDayOfMonth = firstDay.getDay();\n    const daysInMonth = PrimeDate.numberOfDaysInMonth(year, month);\n    const used = firstDayOfMonth + daysInMonth;\n    const weeksInMonth = Math.ceil(used / 7);\n\n    let rows = '';\n    let startDay = 1;\n    for (let i = 0; i < weeksInMonth; i++) {\n      const startDayOfWeek = i === 0 ? firstDayOfMonth : 0;\n      rows += this._buildCalendarWeek(date, startDayOfWeek, startDay, daysInMonth);\n      startDay += 7 - startDayOfWeek; // increment by 7 adjusted by a week day of week offset\n    }\n\n    this.calendarBody.setHTML(rows);\n\n    // update data- attributes\n    this.monthDisplay.setDataAttribute('month', month);\n    this.yearDisplay.setDataAttribute('year', year);\n\n    // update text\n    this.monthDisplay.setTextContent(DateTimePicker.MONTHS[month]);\n    this.yearDisplay.setTextContent(year);\n\n    return this;\n  }\n\n  /**\n   * Rebuilds the entire widget using the date value. Even if the user has moved to a different month display, this will\n   * rebuild the table completely.\n   *\n   * @returns {DateTimePicker} This DateTimePicker.\n   */\n  initialize() {\n    const value = this.element.getValue();\n    if (value === '' || value === null) {\n      this.date = new Date();\n    } else {\n      this.date = new Date(value);\n    }\n\n    const year = this.date.getUTCFullYear();\n    const timeSeparator = `<span>${DateTimePicker.TIME_SEPARATOR}</span>`;\n    const dateSeparator = `<span>${DateTimePicker.DATE_SEPARATOR}</span>`;\n    let html =\n        `<div class=\"${this.options.className }\">\n  <header>\n    <span class=\"prev\">&#9664;</span>\n    <span class=\"month\"></span>\n    <span class=\"year\"></span>\n    <span class=\"next\">&#9654;</span>\n  </header>\n  <table>\n    <thead>\n      <tr>\n        <th>${DateTimePicker.SHORT_DAY_NAMES[0]}</th>\n        <th>${DateTimePicker.SHORT_DAY_NAMES[1]}</th>\n        <th>${DateTimePicker.SHORT_DAY_NAMES[2]}</th>\n        <th>${DateTimePicker.SHORT_DAY_NAMES[3]}</th>\n        <th>${DateTimePicker.SHORT_DAY_NAMES[4]}</th>\n        <th>${DateTimePicker.SHORT_DAY_NAMES[5]}</th>\n        <th>${DateTimePicker.SHORT_DAY_NAMES[6]}</th>\n      </tr>\n    </thead>\n    <tbody>\n    </tbody>\n  </table>\n  <div class=\"inputs\">\n    <div class=\"date\">\n      <input size=\"2\" maxlength=\"2\" type=\"text\" name=\"month\" autocomplete=\"off\"/>${dateSeparator}\n      <input size=\"2\" maxlength=\"2\" type=\"text\" name=\"day\" autocomplete=\"off\"/>${dateSeparator}\n      <input size=\"4\" maxlength=\"4\" type=\"text\" name=\"year\" autocomplete=\"off\"/>\n    </div>\n    <div class=\"time\">\n      <input size=\"2\" maxlength=\"2\" type=\"text\" name=\"hour\" autocomplete=\"off\"/>${timeSeparator}\n      <input size=\"2\" maxlength=\"2\" type=\"text\" name=\"minute\" autocomplete=\"off\"/>${timeSeparator}\n      <input size=\"2\" maxlength=\"2\" type=\"text\" name=\"second\" autocomplete=\"off\"/>\n      <input size=\"2\" maxlength=\"2\" type=\"text\" name=\"am_pm\" autocomplete=\"off\"/>\n    </div>\n  </div>\n</div>`;\n    PrimeDocument.appendHTML(html);\n    this.datepicker = PrimeDocument.queryLast('.' + this.options.className).hide();\n    this.element.addEventListener('click', this._handleInputClick);\n    this.element.addEventListener('focus', this._handleInputClick);\n    this.element.addEventListener('keydown', this._handleInputKey);\n\n    this.calendarBody = this.datepicker.queryFirst('table tbody').addEventListener('click', this._handleDayClick);\n    this.monthDisplay = this.datepicker.queryFirst('header .month').addEventListener('click', this._handleMonthExpand);\n    this.yearDisplay = this.datepicker.queryFirst('header .year').addEventListener('click', this._handleYearExpand);\n\n    this.time = this.datepicker.queryFirst('.time');\n    this.inputs = this.datepicker.queryFirst('div.inputs');\n    this.hourInput = this.inputs.queryFirst('input[name=hour]').addEventListener('change', this._handleDateTimeChange).addEventListener('keydown', this._handleHourKey);\n    this.minuteInput = this.inputs.queryFirst('input[name=minute]').addEventListener('change', this._handleDateTimeChange).addEventListener('keydown', this._handleMinuteKey);\n    this.secondInput = this.inputs.queryFirst('input[name=second]').addEventListener('change', this._handleDateTimeChange).addEventListener('keydown', this._handleSecondKey);\n    this.ampmInput = this.inputs.queryFirst('input[name=am_pm]').addEventListener('keydown', this._handleAmPmKey);\n    this.monthInput = this.inputs.queryFirst('input[name=month]').setValue(this.date.getMonth() + 1).addEventListener('change', this._handleDateTimeChange).addEventListener('keydown', this._handleMonthKey);\n    this.dayInput = this.inputs.queryFirst('input[name=day]').setValue(this.date.getDate()).addEventListener('change', this._handleDateTimeChange).addEventListener('keydown', this._handleDayKey);\n    this.yearInput = this.inputs.queryFirst('input[name=year]').setValue(this.date.getFullYear()).addEventListener('change', this._handleDateTimeChange).addEventListener('keydown', this._handleYearKey);\n\n    this.datepicker.queryFirst('header .next').addEventListener('click', this._handleNextMonth);\n    this.datepicker.queryFirst('header .prev').addEventListener('click', this._handlePreviousMonth);\n\n    PrimeDocument.addEventListener('click', this._handleGlobalClick);\n    PrimeDocument.addEventListener('keydown', this._handleGlobalKey);\n\n    // Setup months dropdown\n    html = '<div class=\"months\">';\n    for (let i = 0; i < DateTimePicker.MONTHS.length; i++) {\n      html += `<div data-month=\"${i}\">${DateTimePicker.MONTHS[i]}</div>`;\n    }\n    html += '</div>';\n    this.datepicker.appendHTML(html);\n    this.months = this.datepicker.queryFirst('.months');\n    this.months.hide();\n    this.months.getChildren().each(function(month) {\n      month.addEventListener('click', function() {\n        this.setMonth(parseInt(month.getDataAttribute('month')));\n        this.closeMonthsSelect();\n      }.bind(this));\n    }.bind(this));\n\n    // Setup year dropdown\n    html = '<div class=\"years\">';\n    const startYear = this.date.getFullYear() - 10;\n    const endYear = this.date.getFullYear() + 10;\n    for (let i = startYear; i < endYear; i++) {\n      html += `<div data-year=\"${i}\">${i}</div>`;\n    }\n    html += '</div>';\n    this.datepicker.appendHTML(html);\n    this.years = this.datepicker.queryFirst('.years');\n    this.years.hide();\n    this.years.getChildren().each(function(year) {\n      year.addEventListener('click', function() {\n        this.setYear(parseInt(year.getDataAttribute('year')));\n        this.closeYearsSelect();\n      }.bind(this));\n    }.bind(this));\n\n    this._rebuild();\n\n    if (this.customFormatHandler !== null) {\n      this.element.setValue(this.customFormatHandler.call(null, this.date));\n    }\n\n    return this;\n  }\n\n  /**\n   * @returns {Date} Return the current value of the time picker.\n   */\n  getDate() {\n    return new Date(this.date.getTime());\n  }\n\n  /**\n   * Moves the DateTimePicker to the next month and redraws the calendar.\n   *\n   * @returns {DateTimePicker} This DateTimePicker.\n   */\n  nextMonth() {\n    const newDate = new Date(this.date);\n    newDate.setDate(1); // Set the day to 1 to keep us from wrapping months on the 30 and 31st.\n    newDate.setMonth(parseInt(this.monthDisplay.getDataAttribute('month')));\n    newDate.setFullYear(parseInt(this.yearDisplay.getDataAttribute('year')));\n    PrimeDate.plusMonths(newDate, 1);\n    this.drawCalendar(newDate);\n    return this;\n  }\n\n  /**\n   * Opens the Date Picker widget.\n   *\n   * @returns {DateTimePicker} This DateTimePicker.\n   */\n  open() {\n    this.datepicker.setLeft(this.element.getLeft());\n    this.datepicker.setTop(this.element.getAbsoluteTop() + this.element.getHeight() + 8);\n    this.datepicker.show();\n    this.datepicker.addClass('open');\n\n    const zIndex = this.element.getRelativeZIndex();\n    this.datepicker.setStyle('zIndex', zIndex + 10);\n    return this;\n  }\n\n  /**\n   * Opens the month select box.\n   */\n  openMonthSelect() {\n    this.closeYearsSelect();\n\n    this.months.setLeft(this.monthDisplay.getOffsetLeft() - 5);\n    this.months.setTop(this.monthDisplay.getOffsetTop() - 5);\n    this.months.setStyle('zIndex', this.monthDisplay.getRelativeZIndex() + 10);\n    this.months.show();\n    this.months.addClass('open');\n\n    const currentMonth = this.months.queryFirst('[data-month=\"' + this.date.getMonth() + '\"]');\n    this.months.getChildren().each(function(month) {\n      month.removeClass('selected');\n    });\n    currentMonth.addClass('selected');\n  }\n\n  /**\n   * Opens the year select box.\n   */\n  openYearSelect() {\n    this.closeMonthsSelect();\n\n    this.years.setLeft(this.yearDisplay.getOffsetLeft() - 5);\n    this.years.setTop(this.yearDisplay.getOffsetTop() - 5);\n    this.years.setStyle('zIndex', this.yearDisplay.getRelativeZIndex() + 10);\n    this.years.show();\n    this.years.addClass('open');\n\n    const currentYear = this.years.queryFirst('[data-year=\"' + this.date.getFullYear() + '\"]');\n    this.years.getChildren().each(function(year) {\n      year.removeClass('selected');\n    });\n    currentYear.addClass('selected');\n  }\n\n  /**\n   * Moves the DateTimePicker to the previous month and redraws the calendar.\n   *\n   * @returns {DateTimePicker} This DateTimePicker.\n   */\n  previousMonth() {\n    const newDate = new Date(this.date);\n    newDate.setDate(1); // Set to 1 until month has been set\n    newDate.setMonth(parseInt(this.monthDisplay.getDataAttribute('month')));\n    newDate.setFullYear(parseInt(this.yearDisplay.getDataAttribute('year')));\n    PrimeDate.plusMonths(newDate, -1);\n    this.drawCalendar(newDate);\n    return this;\n  }\n\n  /**\n   * Sets the date of the DateTimePicker and redraws the calendar to the month for the date.\n   *\n   * @param {Date} newDate The new date.\n   * @returns {DateTimePicker} This DateTimePicker.\n   */\n  setDate(newDate) {\n    this.date = newDate;\n\n    if (this.customFormatHandler !== null) {\n      this.element.setValue(this.customFormatHandler.call(null, this.date));\n    } else {\n      if (this.options.dateOnly) {\n        this.element.setValue(PrimeDate.toDateOnlyISOString(newDate));\n      } else {\n        this.element.setValue(newDate.toISOString());\n      }\n    }\n\n    this._rebuild();\n\n    if (this.callback !== null) {\n      this.callback(this);\n    }\n\n    return this;\n  }\n\n  /**\n   * @param {number} month The month. A 0 based number between 0 (January) and 11 (December).\n   * @returns {DateTimePicker}\n   */\n  setMonth(month) {\n    let currentYear = parseInt(this.yearDisplay.getDataAttribute('year'));\n    if (month < 0) {\n      month = 11;\n      currentYear--;\n    } else if (month > 11) {\n      currentYear++;\n      month = 0;\n    }\n\n    this.date.setMonth(month);\n    this.date.setYear(currentYear);\n    this.setDate(this.date);\n\n    return this;\n  }\n\n  /**\n   *\n   * @param {number} year The year.\n   * @returns {DateTimePicker}\n   */\n  setYear(year) {\n    this.yearDisplay.setDataAttribute('year', year);\n    this.yearDisplay.setTextContent(year);\n    this.date.setYear(year);\n    this.setDate(this.date);\n    return this;\n  }\n\n  /**\n   * Sets the callback handler that is called with the DateTimePicker's value is changed.\n   *\n   * @param callback {Function} The callback function.\n   * @return {DateTimePicker} This.\n   */\n  withCallback(callback) {\n    this.callback = callback;\n    return this;\n  }\n\n  /**\n   * Sets the class name for the main div of the date time picker.\n   *\n   * @param className {string} The class name.\n   * @returns {DateTimePicker} This.\n   */\n  withClassName(className) {\n    this.options.className = className;\n    return this;\n  }\n\n  /**\n   * Sets the timeout used in the close method to allow for transitions.\n   *\n   * @param timeout {int} The timeout.\n   * @returns {DateTimePicker}\n   */\n  withCloseTimeout(timeout) {\n    this.options.closeTimeout = timeout;\n    return this;\n  }\n\n  /**\n   * Sets a custom format handler responsible for formatting the date string that will be set into the input field.\n   * When not defined the default behavior will be used.\n   *\n   * @param formatHandler {Function} The handler function.\n   * @return {DateTimePicker} This.\n   */\n  withCustomFormatHandler(formatHandler) {\n    this.customFormatHandler = formatHandler;\n    return this;\n  }\n\n  /**\n   * Render the DateTimePicker w/out the time picker. Only the calendar will be displayed and the input field will be updated with date only.\n   *\n   *\n   * @returns {DateTimePicker} This DateTimePicker.\n   */\n  withDateOnly() {\n    this.options.dateOnly = true;\n    return this;\n  }\n\n  /**\n   * Set more than one option at a time by providing a map of key value pairs. This is considered an advanced\n   * method to set options on the widget. The caller needs to know what properties are valid in the options object.\n   *\n   * @param {Object} options Key value pair of configuration options.\n   * @returns {DateTimePicker} This DateTimePicker.\n   */\n  withOptions(options) {\n    if (!Utils.isDefined(options)) {\n      return this;\n    }\n\n    for (let option in options) {\n      if (options.hasOwnProperty(option)) {\n        this.options[option] = options[option];\n      }\n    }\n    return this;\n  }\n\n  /* ===================================================================================================================\n   * Private methods\n   * ===================================================================================================================*/\n\n  /**\n   * Build the HTML for a single calendar week.\n   *\n   * @param date {Date} The date to build the calendar week based on.\n   * @param startDayOfWeek {Number} The day of the week of this week begins. A 0 based number between 0 and 6.\n   * @param startDayOfMonth {Number} The day of the month this week begins. A number between 1 and 31.\n   * @param daysInMonth {Number} The number of days in this calendar month.\n   * @returns {string} The HTML for this week.\n   * @private\n   */\n  _buildCalendarWeek(date, startDayOfWeek, startDayOfMonth, daysInMonth) {\n    const daysInPreviousMonth = new Date(date.getFullYear(), date.getMonth(), 0).getDate();\n    let startDayOfPreviousMonth = daysInPreviousMonth - startDayOfWeek + 1;\n    let startDayOfNextMonth = 1;\n\n    let row = '<tr>';\n    let emptyColumns = 0;\n    const year = date.getFullYear();\n    const month = date.getMonth();\n\n    for (let i = 0; i < 7; i++) {\n      const dayOfWeek = startDayOfMonth + i;\n      // Days of the previous month\n      if (dayOfWeek <= startDayOfWeek) {\n        row += '<td><a class=\"inactive\" href=\"#\" data-year=\"' + year + '\" data-month=\"' + (month - 1) + '\" data-day=\"' + startDayOfPreviousMonth + '\">' + startDayOfPreviousMonth + '</a></td>';\n        startDayOfPreviousMonth++;\n        emptyColumns++;\n      } else if (dayOfWeek > daysInMonth) {\n        // Days of the next month\n        row += '<td><a class=\"inactive\" href=\"#\" data-year=\"' + year + '\" data-month=\"' + month + '\" data-day=\"' + dayOfWeek + '\">' + startDayOfNextMonth + '</a></td>';\n        startDayOfNextMonth++;\n      } else {\n        // Days in the current month\n        const day = dayOfWeek - emptyColumns;\n        const selected = this.date.getDate() === day && this.date.getMonth() === month;\n        row += '<td><a ' + (selected ? 'class=\"selected\"' : '') + 'href=\"#\" data-year=\"' + year + '\" data-month=\"' + month + '\" data-day=\"' + day + '\">' + day + '</a></td>';\n      }\n    }\n\n    row += '</tr>';\n    return row;\n  }\n\n  // noinspection JSMethodCanBeStatic\n  /**\n   * Clamp the value between the minimum and maximum values.\n   *\n   * @param {Number} min the minimum number value.\n   * @param {Number} max The maximum number value.\n   * @param {Number} value The value to clamp.\n   * @returns {Number} The resulting value, either the min, max or actual value if not out of bounds.\n   * @private\n   */\n  _clamp(min, max, value) {\n    return Math.max(min, Math.min(value, max));\n  }\n\n  /**\n   * Handles when the AM/PM element is selected and the user hits a key. If the user hits A, this changes to AM. If the\n   * user hits P, this changes to PM. If the use hits the up or down arrows, this toggles between AM and PM.\n   *\n   * @param {KeyboardEvent} event The keyboard event.\n   * @private\n   */\n  _handleAmPmKey(event) {\n    if (event.keyCode === Events.Keys.TAB) {\n      Utils.stopEvent(event);\n      if (event.shiftKey) {\n        this.secondInput.domElement.setSelectionRange(0, this.secondInput.getValue().length);\n        this.secondInput.focus();\n      } else {\n        this.monthInput.domElement.setSelectionRange(0, this.monthInput.getValue().length);\n        this.monthInput.focus();\n      }\n      return;\n    }\n\n    // Decode the key event\n    const current = this.ampmInput.getValue();\n    if (event.keyCode === 65) {\n      // User hit A\n      if (current === DateTimePicker.AM_PM[1]) {\n        PrimeDate.plusHours(this.date, -12);\n      }\n    } else if (event.keyCode === 80) {\n      // User hit P\n      if (current === DateTimePicker.AM_PM[0]) {\n        PrimeDate.plusHours(this.date, 12);\n      }\n    } else if (event.keyCode === Events.Keys.UP_ARROW || event.keyCode === Events.Keys.DOWN_ARROW) {\n      // User hit up or down arrow\n      if (current === DateTimePicker.AM_PM[0]) {\n        PrimeDate.plusHours(this.date, 12);\n      } else if (current === DateTimePicker.AM_PM[1]) {\n        PrimeDate.plusHours(this.date, -12);\n      }\n    } else if (event.keyCode === Events.Keys.ENTER || event.keyCode === Events.Keys.ESCAPE) {\n      return;\n    }\n\n    this.setDate(this.date);\n    this.ampmInput.domElement.setSelectionRange(0, this.ampmInput.getValue().length);\n    Utils.stopEvent(event);\n  }\n\n  /**\n   * Handle date/time change events. This pulls the values from the 3 date fields and makes a new Date. Then it calls\n   * {@link #setDate(Date)}.\n   *\n   * @param {KeyboardEvent} event The keyboard event.\n   * @private\n   */\n  _handleDateTimeChange(event) {\n    Utils.stopEvent(event);\n    const newDate = new Date();\n    const hours = this._clamp(1, 12, parseInt(this.hourInput.getValue()));\n    if (this.ampmInput.getValue() === DateTimePicker.AM_PM[0]) {\n      if (hours === 12) {\n        newDate.setHours(0);\n      } else {\n        newDate.setHours(hours);\n      }\n    } else {\n      if (hours === 12) {\n        newDate.setHours(12);\n      } else {\n        newDate.setHours(hours + 12);\n      }\n    }\n\n    const seconds = this._clamp(0, 59, parseInt(this.secondInput.getValue()));\n    const minutes = this._clamp(0, 59, parseInt(this.minuteInput.getValue()));\n\n    newDate.setSeconds(seconds);\n    newDate.setMinutes(minutes);\n    newDate.setDate(1); // Set to 1 until month has been set\n    newDate.setMonth(parseInt(this.monthInput.getValue()) - 1);\n    newDate.setDate(parseInt(this.dayInput.getValue()));\n    newDate.setYear(parseInt(this.yearInput.getValue()));\n\n    this.setDate(newDate);\n  }\n\n  /**\n   * Handle the click on a day.\n   *\n   * @parameter {MouseEvent} event The click event.\n   * @private\n   */\n  _handleDayClick(event) {\n    Utils.stopEvent(event);\n    let dayElement = new PrimeElement(event.target);\n    if (!dayElement.is('a')) {\n      dayElement = dayElement.queryFirst('a');\n    }\n\n    const newDate = new Date(this.date);\n    newDate.setDate(1); // Set to 1 until month has been set\n    newDate.setFullYear(parseInt(dayElement.getDataAttribute('year')));\n    newDate.setMonth(parseInt(dayElement.getDataAttribute('month')));\n    newDate.setDate(parseInt(dayElement.getDataAttribute('day')));\n    this.setDate(newDate);\n  }\n\n  /**\n   * Handles when a key is click in the day input field so that tab and shift tab work properly.\n   * <p>\n   * Also handles up and down arrow to increment and decrement the day.\n   *\n   * @param {KeyboardEvent} event The key event.\n   * @private\n   */\n  _handleDayKey(event) {\n    if (event.keyCode === Events.Keys.UP_ARROW) {\n      PrimeDate.plusDays(this.date, 1);\n      this.setDate(this.date);\n      this.dayInput.domElement.setSelectionRange(0, this.dayInput.getValue().length);\n      Utils.stopEvent(event);\n    } else if (event.keyCode === Events.Keys.DOWN_ARROW) {\n      Utils.stopEvent(event);\n      PrimeDate.plusDays(this.date, -1);\n      this.setDate(this.date);\n      this.dayInput.domElement.setSelectionRange(0, this.dayInput.getValue().length);\n    } else if (event.keyCode === Events.Keys.ENTER) {\n      this.date.setDate(parseInt(this.dayInput.getValue()));\n    }\n  }\n\n  /**\n   * Handles a global click event. This determines if the click was outside of the DateTimePicker and closes it.\n   *\n   * @param {MouseEvent} event The click event.\n   * @private\n   */\n  _handleGlobalClick(event) {\n    // Skip this function completely if they clicked the input field\n    if (event.target === this.element.domElement) {\n      return;\n    }\n\n    const top = this.datepicker.getTop();\n    const bottom = this.datepicker.getBottom();\n    const left = this.datepicker.getLeft();\n    const right = this.datepicker.getRight();\n    if (this.datepicker.isVisible() && (event.x < left || event.x > right || event.y < top || event.y > bottom)) {\n      this.close();\n      this.closeYearsSelect();\n      this.closeMonthsSelect();\n    } else {\n      if (this.years.isVisible()) {\n        this.closeYearsSelect();\n      }\n      if (this.months.isVisible()) {\n        this.closeMonthsSelect();\n      }\n    }\n  }\n\n  /**\n   * Handles a global key event. This determines if the DateTimePicker is open and if enter or escape was hit.\n   *\n   * @param {KeyboardEvent} event The key event.\n   * @private\n   */\n  _handleGlobalKey(event) {\n    // Skip this function completely if the DateTimePicker isn't open\n    if (!this.datepicker.isVisible()) {\n      return;\n    }\n\n    if (event.keyCode === Events.Keys.ENTER) {\n      Utils.stopEvent(event);\n      this.setDate(this.date);\n      this.close();\n      this.element.focus();\n    } else if (event.keyCode === Events.Keys.ESCAPE) {\n      this.close();\n      this.element.focus();\n    }\n  }\n\n  /**\n   * Handles when a key is click in the hours input field so that tab and shift tab work properly.\n   * <p>\n   * Also handles up and down arrow to increment and decrement the hour.\n   *\n   * @param {KeyboardEvent} event The key event.\n   * @private\n   */\n  _handleHourKey(event) {\n    if (event.keyCode === Events.Keys.UP_ARROW) {\n      Utils.stopEvent(event);\n      PrimeDate.plusHours(this.date, 1);\n      this.setDate(this.date);\n      this.hourInput.domElement.setSelectionRange(0, this.hourInput.getValue().length);\n    } else if (event.keyCode === Events.Keys.DOWN_ARROW) {\n      Utils.stopEvent(event);\n      PrimeDate.plusHours(this.date, -1);\n      this.setDate(this.date);\n      this.hourInput.domElement.setSelectionRange(0, this.hourInput.getValue().length);\n    } else if (event.keyCode === Events.Keys.ENTER) {\n      this.date.setHours(parseInt(this.hourInput.getValue()));\n    }\n  }\n\n  /**\n   * Handle the click event for the input date field. If the DateTimePicker is hidden this will call the {@link #show()}\n   * function.\n   *\n   * @returns {boolean} Always true.\n   * @private\n   */\n  _handleInputClick() {\n    if (!this.datepicker.isVisible()) {\n      this.open();\n      this.monthInput.domElement.setSelectionRange(0, this.monthInput.getValue().length);\n      this.monthInput.focus();\n    }\n  }\n\n  /**\n   * Handle the key event for the input date field. If the user hits tab or shift-tab, this moves the focus to the\n   * nested inputs.\n   *\n   * @param {KeyboardEvent} event The keyboard event.\n   * @private\n   */\n  _handleInputKey(event) {\n    if (this.datepicker.isVisible() && event.keyCode === Events.Keys.TAB) {\n      Utils.stopEvent(event);\n      if (event.shiftKey) {\n        this.ampmInput.domElement.setSelectionRange(0, this.ampmInput.getValue().length);\n        this.ampmInput.focus();\n      } else {\n        this.monthInput.domElement.setSelectionRange(0, this.monthInput.getValue().length);\n        this.monthInput.focus();\n      }\n    }\n  }\n\n  /**\n   * Handle the key down event and capture the up and down arrow key to increment and decrement the minute.\n\n   * @param {KeyboardEvent} event The key event.\n   * @private\n   */\n  _handleMinuteKey(event) {\n    if (event.keyCode === Events.Keys.UP_ARROW) {\n      Utils.stopEvent(event);\n      PrimeDate.plusMinutes(this.date, 1);\n      this.setDate(this.date);\n      this.minuteInput.domElement.setSelectionRange(0, this.minuteInput.getValue().length);\n    } else if (event.keyCode === Events.Keys.DOWN_ARROW) {\n      Utils.stopEvent(event);\n      PrimeDate.plusMinutes(this.date, -1);\n      this.setDate(this.date);\n      this.minuteInput.domElement.setSelectionRange(0, this.minuteInput.getValue().length);\n    } else if (event.keyCode === Events.Keys.ENTER) {\n      this.date.setMinutes(parseInt(this.minuteInput.getValue()));\n    }\n  }\n\n  /**\n   * Handles the click on the month to open the month select.\n   *\n   * @private\n   */\n  _handleMonthExpand(event) {\n    Utils.stopEvent(event);\n    this.openMonthSelect();\n  }\n\n  /**\n   * Handles when a key is click in the month input field so that tab and shift tab work properly.\n   * <p>\n   * Also handles up and down arrow to increment and decrement the month.\n   *\n   * @param {KeyboardEvent} event The key event.\n   * @private\n   */\n  _handleMonthKey(event) {\n    if (event.keyCode === Events.Keys.TAB && event.shiftKey) {\n      Utils.stopEvent(event);\n      if (this.options.dateOnly) {\n        this.yearInput.domElement.setSelectionRange(0, this.yearInput.getValue().length);\n        this.yearInput.focus();\n      } else {\n        this.ampmInput.domElement.setSelectionRange(0, this.ampmInput.getValue().length);\n        this.ampmInput.focus();\n      }\n      return;\n    }\n\n    if (event.keyCode === Events.Keys.UP_ARROW) {\n      Utils.stopEvent(event);\n      PrimeDate.plusMonths(this.date, 1);\n      this.setDate(this.date);\n      this.monthInput.domElement.setSelectionRange(0, this.monthInput.getValue().length);\n    } else if (event.keyCode === Events.Keys.DOWN_ARROW) {\n      Utils.stopEvent(event);\n      PrimeDate.plusMonths(this.date, -1);\n      this.setDate(this.date);\n      this.monthInput.domElement.setSelectionRange(0, this.monthInput.getValue().length);\n    } else if (event.keyCode === Events.Keys.ENTER) {\n      this.date.setMonth(parseInt(this.monthInput.getValue()) - 1);\n    }\n  }\n\n  /**\n   * Handle the next month button click.\n   *\n   * @param {MouseEvent} event The mouse event.\n   * @private\n   */\n  _handleNextMonth(event) {\n    Utils.stopEvent(event);\n    this.nextMonth();\n  }\n\n  /**\n   * Handle the previous month button click.\n   *\n   * @param {MouseEvent} event The mouse event.\n   * @private\n   */\n  _handlePreviousMonth(event) {\n    Utils.stopEvent(event);\n    this.previousMonth();\n  }\n\n  /**\n   * Handle the key down event and capture the up and down arrow key to increment and decrement the second.\n\n   * @param {KeyboardEvent} event The key event.\n   * @private\n   */\n  _handleSecondKey(event) {\n    if (event.keyCode === Events.Keys.UP_ARROW) {\n      Utils.stopEvent(event);\n      PrimeDate.plusSeconds(this.date, 1);\n      this.setDate(this.date);\n      this.secondInput.domElement.setSelectionRange(0, this.secondInput.getValue().length);\n    } else if (event.keyCode === Events.Keys.DOWN_ARROW) {\n      Utils.stopEvent(event);\n      PrimeDate.plusSeconds(this.date, -1);\n      this.setDate(this.date);\n      this.secondInput.domElement.setSelectionRange(0, this.secondInput.getValue().length);\n    } else if (event.keyCode === Events.Keys.ENTER) {\n      this.date.setSeconds(parseInt(this.secondInput.getValue()));\n    }\n  }\n\n  /**\n   * Handles the click on the year to open the year select.\n   *\n   * @private\n   */\n  _handleYearExpand(event) {\n    Utils.stopEvent(event);\n    this.openYearSelect();\n  }\n\n  /**\n   * Handles when a key is click in the year input field so that tab and shift tab work properly.\n   * <p>\n   * Also handles up and down arrow to increment and decrement the year.\n   *\n   * @param {KeyboardEvent} event The key event.\n   * @private\n   */\n  _handleYearKey(event) {\n    if (event.keyCode === Events.Keys.UP_ARROW) {\n      Utils.stopEvent(event);\n      PrimeDate.plusYears(this.date, 1);\n      this.setDate(this.date);\n      this.yearInput.domElement.setSelectionRange(0, this.yearInput.getValue().length);\n    } else if (event.keyCode === Events.Keys.DOWN_ARROW) {\n      Utils.stopEvent(event);\n      PrimeDate.plusYears(this.date, -1);\n      this.setDate(this.date);\n      this.yearInput.domElement.setSelectionRange(0, this.yearInput.getValue().length);\n    } else if (event.keyCode === Events.Keys.TAB && this.options.dateOnly) {\n      Utils.stopEvent(event);\n      if (event.shiftKey) {\n        this.dayInput.domElement.setSelectionRange(0, this.dayInput.getValue().length);\n        this.dayInput.focus();\n      } else {\n        this.monthInput.domElement.setSelectionRange(0, this.monthInput.getValue().length);\n        this.monthInput.focus();\n      }\n    } else if (event.keyCode === Events.Keys.ENTER) {\n      this.date.setFullYear(parseInt(this.yearInput.getValue()));\n    }\n  }\n\n  /**\n   * Rebuilds the HTML of the DateTimePicker.\n   * @private\n   */\n  _rebuild() {\n    this.drawCalendar(this.date);\n    this._refreshInputs();\n\n    if (this.options.dateOnly) {\n      this.time.hide();\n    }\n  }\n\n  /**\n   * Refresh the time inputs.\n   *\n   * @private\n   */\n  _refreshInputs() {\n    // Set Time -- assuming 12-hour time for the input fields and ISO 24-hour time for the field\n    const hours = PrimeDate.getHourOfDay(this.date);\n    this.hourInput.setValue(hours);\n\n    const minutes = this.date.getMinutes();\n    this.minuteInput.setValue((\"00\" + minutes).slice(-2));\n\n    const seconds = this.date.getSeconds();\n    this.secondInput.setValue((\"00\" + seconds).slice(-2));\n\n    if (this.date.getHours() >= 12) {\n      this.ampmInput.setValue(DateTimePicker.AM_PM[1]);\n    } else {\n      this.ampmInput.setValue(DateTimePicker.AM_PM[0]);\n    }\n\n    this.monthInput.setValue(this.date.getMonth() + 1);\n    this.dayInput.setValue(this.date.getDate());\n    this.yearInput.setValue(this.date.getFullYear());\n  }\n\n  /**\n   * Set the initial options for this widget.\n   * @private\n   */\n  _setInitialOptions() {\n    // Defaults\n    this.options = {\n      className: 'prime-date-picker',\n      closeTimeout: 200,\n      dateOnly: false\n    };\n\n    const userOptions = Utils.dataSetToOptions(this.element);\n    for (let option in userOptions) {\n      if (userOptions.hasOwnProperty(option)) {\n        this.options[option] = userOptions[option];\n      }\n    }\n  }\n}\n\nexport {DateTimePicker};\n","/*\n * Copyright (c) 2017, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n\n'use strict';\n\nimport {PrimeElement} from \"../Document/PrimeElement.js\";\nimport {Utils} from \"../Utils.js\";\n\nclass Dismissable {\n  /**\n   * Constructs a new Dismissable object for the given element.\n   *\n   * @param {PrimeElement|Element|EventTarget} element The Element for the Dismissable widget.\n   * @param {PrimeElement|Element|EventTarget} dismissButton The Element for the Dismissable button.\n   * @constructor\n   */\n  constructor(element, dismissButton) {\n    Utils.bindAll(this);\n\n    this.element = PrimeElement.wrap(element);\n    this.dismissButton = dismissButton;\n    this._setInitialOptions();\n  }\n\n  /**\n   * Closes the Dismissable by removing the open class from the element and setting a timer to remove the element from\n   * the DOM.\n   */\n  close() {\n    this.element.addClass('closed');\n    setTimeout(function() {\n      this.element.removeFromDOM();\n    }.bind(this), this.options.closeTimeout);\n  }\n\n  /**\n   * Destroys the widget.\n   */\n  destroy() {\n    this.dismissButton.removeEventListener('click', this._handleClick);\n  }\n\n  /**\n   * Initializes the Dismissable by binding the events to the dismiss button.\n   *\n   * @returns {Dismissable} This.\n   */\n  initialize() {\n    this.dismissButton.addEventListener('click', this._handleClick);\n    return this;\n  }\n\n  /**\n   * Sets the timeout used in the close method to allow for transitions.\n   *\n   * @param timeout {int} The timeout.\n   * @returns {Dismissable} This.\n   */\n  withCloseTimeout(timeout) {\n    this.options.closeTimeout = timeout;\n    return this;\n  }\n\n  /**\n   * Set more than one option at a time by providing a map of key value pairs. This is considered an advanced\n   * method to set options on the widget. The caller needs to know what properties are valid in the options object.\n   *\n   * @param {Object} options Key value pair of configuration options.\n   * @returns {Dismissable} This.\n   */\n  withOptions(options) {\n    if (!Utils.isDefined(options)) {\n      return this;\n    }\n\n    for (let option in options) {\n      if (options.hasOwnProperty(option)) {\n        this.options[option] = options[option];\n      }\n    }\n    return this;\n  }\n\n  /* ===================================================================================================================\n   * Private methods\n   * ===================================================================================================================*/\n\n  /**\n   * Handles the click event.\n   * @private\n   */\n  _handleClick(event) {\n    Utils.stopEvent(event);\n    this.close();\n  }\n\n  /**\n   * Set the initial options for this widget.\n   * @private\n   */\n  _setInitialOptions() {\n    // Defaults\n    this.options = {\n      closeTimeout: 400\n    };\n  }\n}\n\nexport {Dismissable}\n","/*\n * Copyright (c) 2017, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n'use strict';\n\nimport {PrimeElement} from \"../Document/PrimeElement.js\";\nimport {Utils} from \"../Utils.js\";\nimport {PrimeWindow} from \"../Window.js\";\nimport {Overlay} from \"./Overlay.js\";\nimport {Draggable} from \"./Draggable.js\";\nimport {PrimeDocument} from \"../PrimeDocument.js\";\n\nclass HTMLDialog {\n  /**\n   * Constructs a new dialog box from an element.\n   *\n   * @param {PrimeElement|Element|EventTarget} element The Prime Element for the HTMLDialog widget.\n   * @constructor\n   */\n  constructor(element) {\n    Utils.bindAll(this);\n\n    this.element = PrimeElement.wrap(element);\n    this._setInitialOptions();\n    this.draggable = null;\n  }\n\n  /**\n   * Closes the dialog, destroys the HTML and updates or hides the overlay.\n   * @returns {HTMLDialog} This.\n   */\n  close() {\n    this.element.removeClass('open');\n    if (this.draggable !== null) {\n      this.draggable.destroy();\n      this.draggable = null;\n    }\n\n    setTimeout(function() {\n      this.element.hide();\n\n      const highestZIndex = this._determineZIndex();\n      if (highestZIndex !== 0) {\n        Overlay.instance.setZIndex(highestZIndex);\n      } else {\n        Overlay.instance.close();\n      }\n    }.bind(this), this.options.closeTimeout);\n\n    return this;\n  }\n\n  /**\n   * Destroys the dialog by calling the close function.\n   * @returns {HTMLDialog} This.\n   */\n  destroy() {\n    this.close();\n    return this;\n  }\n\n  /**\n   * Initializes the dialog.\n   * @returns {HTMLDialog} This.\n   */\n  initialize() {\n    this.element.hide();\n    return this;\n  }\n\n  /**\n   * Opens the dialog.\n   *\n   * @returns {HTMLDialog} This.\n   */\n  open() {\n    const highestZIndex = this._determineZIndex();\n    Overlay.instance.open(highestZIndex + this.options.zIndexOffset);\n    this.element.setStyle('zIndex', (highestZIndex + this.options.zIndexOffset + 10).toString());\n    this.element.show();\n    this.element.addClass('open');\n\n    // Call the callback before positioning to ensure all changes to the dialog have been made\n    if (this.options.callback !== null) {\n      this.options.callback(this);\n    }\n\n    // Position the fixed dialog in the center of the screen\n    const windowHeight = PrimeWindow.getInnerHeight();\n    const dialogHeight = this.element.getHeight();\n    this.element.setTop(((windowHeight - dialogHeight) / 2) - 20);\n\n    this._setupButtons();\n\n    if (this.draggable === null) {\n      if (this.options.draggableElementSelector !== null && this.element.queryFirst(this.options.draggableElementSelector) !== null) {\n        this.draggable = new Draggable(this.element, this.options.draggableElementSelector).initialize();\n      }\n    }\n\n    return this;\n  }\n\n  /**\n   * Updates the HTML contents of the dialog.\n   *\n   * @param html {String} The HTML.\n   * @returns {HTMLDialog} This.\n   */\n  setHTML(html) {\n    this.element.setHTML(html);\n    this._setupButtons();\n    return this;\n  }\n\n  /**\n   * Sets the callback that is called after the dialog has been fetched and rendered.\n   *\n   * @param callback {function} The callback function.\n   * @returns {HTMLDialog} This.\n   */\n  withCallback(callback) {\n    this.options.callback = callback;\n    return this;\n  }\n\n  /**\n   * Sets the class name for the dialog element.\n   *\n   * @param className {string} The class name.\n   * @returns {HTMLDialog} This.\n   */\n  withClassName(className) {\n    this.options.className = className;\n    return this;\n  }\n\n  /**\n   * Sets the close button element selector that is used to setup the close button in the HTML that was returned from\n   * the server.\n   *\n   * @param selector {string} The element selector.\n   * @returns {HTMLDialog} This.\n   */\n  withCloseButtonElementSelector(selector) {\n    this.options.closeButtonElementSelector = selector;\n    return this;\n  }\n\n  /**\n   * Sets the timeout used in the close method to allow for transitions.\n   *\n   * @param timeout {int} The timeout.\n   * @returns {HTMLDialog} This.\n   */\n  withCloseTimeout(timeout) {\n    this.options.closeTimeout = timeout;\n    return this;\n  }\n\n  /**\n   * Sets the draggable element selector that is used for the Draggable.\n   *\n   * @param selector {string} The element selector.\n   * @returns {HTMLDialog} This.\n   */\n  withDraggableButtonElementSelector(selector) {\n    this.options.draggableElementSelector = selector;\n    return this;\n  }\n\n  /**\n   * Set more than one option at a time by providing a map of key value pairs. This is considered an advanced\n   * method to set options on the widget. The caller needs to know what properties are valid in the options object.\n   *\n   * @param {Object} options Key value pair of configuration options.\n   * @returns {HTMLDialog} This.\n   */\n  withOptions(options) {\n    if (!Utils.isDefined(options)) {\n      return this;\n    }\n\n    for (let option in options) {\n      if (options.hasOwnProperty(option)) {\n        this.options[option] = options[option];\n      }\n    }\n    return this;\n  }\n\n  /* ===================================================================================================================\n   * Private methods\n   * ===================================================================================================================*/\n\n  _determineZIndex() {\n    let highestZIndex = 0;\n    PrimeDocument.query('.' + this.options.className).each(function(dialog) {\n      const zIndex = parseInt(dialog.getComputedStyle()['zIndex']);\n      if (dialog.isVisible() && zIndex > highestZIndex) {\n        highestZIndex = zIndex;\n      }\n    });\n    return highestZIndex;\n  }\n\n  _handleCloseClickEvent(event) {\n    Utils.stopEvent(event);\n    this.close();\n  }\n\n  _setupButtons() {\n    this.element.query(this.options.closeButtonElementSelector).each(function(e) {\n      e.addEventListener('click', this._handleCloseClickEvent);\n    }.bind(this));\n  }\n\n  /**\n   * Set the initial options for this widget.\n   * @private\n   */\n  _setInitialOptions() {\n    // Defaults\n    this.options = {\n      callback: null,\n      className: 'prime-dialog',\n      closeButtonElementSelector: '[data-dialog-role=\"close-button\"]',\n      closeTimeout: 200,\n      draggableElementSelector: '[data-dialog-role=\"draggable\"]',\n      zIndexOffset: 1000\n    };\n\n    const userOptions = Utils.dataSetToOptions(this.element);\n    for (let option in userOptions) {\n      if (userOptions.hasOwnProperty(option)) {\n        this.options[option] = userOptions[option];\n      }\n    }\n  }\n}\n\nexport {HTMLDialog};\n","/*\n * Copyright (c) 2017, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n'use strict';\n\nimport {PrimeDocument} from \"../PrimeDocument.js\";\nimport {PrimeElement} from \"../Document/PrimeElement.js\";\nimport {Utils} from \"../Utils.js\";\n\nclass InProgress {\n  /**\n   * Constructs a In Progress widget that opens an overlay over an element while something is running and closes it when\n   * it finishes.\n   *\n   * @param {PrimeElement|Element|EventTarget} element The Prime Element to overlay.\n   * @constructor\n   */\n  constructor(element) {\n    Utils.bindAll(this);\n\n    this.element = PrimeElement.wrap(element);\n    this._setInitialOptions();\n    this.draggable = null;\n  }\n\n  /**\n   * Closes the InProgress process.\n   *\n   * @param {Function} callback (Optional) A callback function to invoke after the InProgress has been completely closed.\n   */\n  close(callback) {\n    try {\n      this.options.endFunction(this);\n    } finally {\n      const now = new Date().getTime();\n      const duration = now - this.startInstant;\n      if (duration < this.options.minimumTime) {\n        setTimeout(function() {\n          this.overlay.removeFromDOM();\n\n          if (callback) {\n            callback();\n          }\n        }.bind(this), this.options.minimumTime - duration);\n      } else {\n        this.overlay.removeFromDOM();\n\n        if (callback) {\n          callback();\n        }\n      }\n    }\n\n    return this;\n  }\n\n  /**\n   * Opens the InProgress process.\n   */\n  open() {\n    this.startInstant = new Date().getTime();\n    this.overlay = PrimeDocument.newElement('<div/>').setId('prime-in-progress-overlay').appendTo(document.body);\n    PrimeDocument.newElement('<i/>', {class: 'fa fa-spin fa-' + this.options.iconName}).appendTo(this.overlay);\n\n    const coords = this.element.getCoordinates();\n    const bodyCoords = PrimeDocument.bodyElement.getCoordinates();\n    this.overlay.setTop(coords.top - bodyCoords.top);\n    this.overlay.setLeft(coords.left - bodyCoords.left);\n    this.overlay.setWidth(this.element.getBorderedWidth());\n    this.overlay.setHeight(this.element.getBorderedHeight());\n    this.overlay.setStyle('zIndex', (this.element.getRelativeZIndex() + 1000).toString());\n\n    this.options.startFunction(this);\n\n    return this;\n  }\n\n  /**\n   * Sets the end function that is called when the InProgress process is finished.\n   *\n   * @param f {function} The function.\n   * @returns {InProgress} This.\n   */\n  withEndFunction(f) {\n    this.options.endFunction = f;\n    return this;\n  }\n\n  /**\n   * Sets the FontAwesome icon name to use for the overlay.\n   *\n   * @param iconName {string} The icon name.\n   * @returns {InProgress} This.\n   */\n  withIconName(iconName) {\n    this.options.iconName = iconName;\n    return this;\n  }\n\n  /**\n   * Sets the minimum time that the InProgress process must run.\n   *\n   * @param time {number} The time in milliseconds.\n   * @returns {InProgress} This.\n   */\n  withMinimumTime(time) {\n    this.options.minimumTime = time;\n    return this;\n  }\n\n  /**\n   * Sets the start function that is called when the InProgress process is started.\n   *\n   * @param f {function} The function.\n   * @returns {InProgress} This.\n   */\n  withStartFunction(f) {\n    this.options.startFunction = f;\n    return this;\n  }\n\n  /* ===================================================================================================================\n   * Private methods\n   * ===================================================================================================================*/\n\n  /**\n   * Set the initial options for this widget.\n   * @private\n   */\n  _setInitialOptions() {\n    // Defaults\n    this.options = {\n      endFunction: function() {\n      },\n      iconName: 'refresh',\n      minimumTime: 1000,\n      startFunction: function() {\n      }\n    };\n\n    const userOptions = Utils.dataSetToOptions(this.element);\n    for (let option in userOptions) {\n      if (userOptions.hasOwnProperty(option)) {\n        this.options[option] = userOptions[option];\n      }\n    }\n  }\n}\n\nexport {InProgress};\n","/*\n * Copyright (c) 2014-2023, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n'use strict';\n\nimport {Events} from \"../Events.js\";\nimport {PrimeDocument} from \"../PrimeDocument.js\";\nimport {PrimeElement} from \"../Document/PrimeElement.js\";\nimport {Utils} from \"../Utils.js\";\n\nclass Searcher {\n  /**\n   * Constructs a Searcher object for the given text input.\n   *\n   * The Searcher object can be attached and used in conjunction with any other widgets in a generic manner. It\n   * provides search capabilities and manages the search results. This is useful for MultipleSelects, IntelliSense and\n   * other widgets. Here's the HTML for the search results.\n   *\n   * <pre>\n   *   &lt;input type=\"text\" class=\"prime-search-result-input\" value=\"F\"/>\n   *   &lt;ul>\n   *     &lt;li>Four&lt;/li>\n   *     &lt;li>Five&lt;/li>\n   *     &lt;li>Fifteen&lt;/li>\n   *     &lt;li>Add Custom Entry: F/li>\n   *   &lt;/ul>\n   * &lt;/div>\n   * </pre>\n   *\n   * The with* methods can be used to setup the configuration for this SearchResults, but here are some defaults:\n   *\n   * <ul>\n   *   <li>closeTimeout = 200</li>\n   *   <li>customAddEnabled = true</li>\n   *   <li>customAddCallback = function(customValue){return true;}</li>\n   *   <li>customAddLabel = \"Add Custom:\"</li>\n   *   <li>tooManySearchResultsLabel = \"Too Many Matches For:\"</li>\n   *   <li>noSearchResultsLabel = \"No Matches For:\"</li>\n   * </ul>\n   *\n   * The callback object must conform to this interface:\n   *\n   * <pre>\n   *   CallbackObject {\n *     void deletedBeyondSearchInput()\n *     void doesNotContainValue()\n *     object{results:Array, tooManyResults:boolean} search(_searchString:string),\n *     void selectSearchResult(selectedSearchResult:string),\n *   }\n   * </pre>\n   *\n   * @constructor\n   * @param {PrimeElement|Element|EventTarget} inputElement The input element that is used to execute the search.\n   * @param {PrimeElement|Element|EventTarget} searchResultsContainer The element that is used to store the search results.\n   * @param {*} callbackObject The object that is used to callback for searching and numerous other functions to help\n   *            communicate state and determine how to draw the input and search results.\n   */\n  constructor(inputElement, searchResultsContainer, callbackObject) {\n    Utils.bindAll(this);\n\n    this.searchResults = PrimeElement.wrap(searchResultsContainer);\n    this.inputElement = PrimeElement.wrap(inputElement);\n    if (this.inputElement.domElement.tagName !== 'INPUT') {\n      throw new TypeError('You can only use Prime.Widgets.SearchResults with INPUT elements');\n    }\n\n    this._setInitialOptions(callbackObject);\n  }\n\n  /**\n   * A search function that works on a select box.\n   *\n   * @param searchText {String} The search String.\n   * @param select {HTMLSelectElement|PrimeElement} The select box.\n   * @returns {{results: Array, tooManyResults: boolean}}\n   */\n  static selectSearchFunction(searchText, select) {\n    const options = PrimeElement.unwrap(select).options;\n    const selectableOptions = [];\n    for (let i = 0; i < options.length; i++) {\n      const option = new PrimeElement(options[i]);\n      if (option.isSelected()) {\n        continue;\n      }\n\n      const html = option.getHTML();\n      if (searchText === null || searchText === undefined || searchText === '' || html.toLowerCase().indexOf(searchText.toLowerCase()) === 0) {\n        selectableOptions.push(html);\n      }\n    }\n\n    // Alphabetize the options\n    if (selectableOptions.length > 0) {\n      selectableOptions.sort();\n    }\n\n    return {results: selectableOptions, tooManyResults: false};\n  }\n\n  /**\n   * Closes the search results display, unhighlights any options that are highlighted and resets the input's value to\n   * empty string.\n   */\n  closeSearchResults() {\n    this._removeAllSearchResults();\n    this.inputElement.setValue('');\n    this.searchResults.removeClass('open');\n    setTimeout(function() {\n      this.searchResults.hide();\n      this.resizeInput();\n    }.bind(this), this.options.closeTimeout);\n  }\n\n  /**\n   * Removes all of the event listeners from the input element.\n   */\n  destroy() {\n    this.inputElement\n        .removeEventListener('blur', this._handleBlurEvent)\n        .removeEventListener('click', this._handleClickEvent)\n        .removeEventListener('keyup', this._handleKeyUpEvent)\n        .removeEventListener('keydown', this._handleKeyDownEvent)\n        .removeEventListener('focus', this._handleFocusEvent);\n  }\n\n  focus() {\n    this.inputElement.focus();\n  }\n\n  /**\n   * @returns {PrimeElement} The highlighted search result or null.\n   */\n  getHighlightedSearchResult() {\n    return this.searchResults.queryFirst('.selected');\n  }\n\n  /**\n   * Highlights the next search result if one is highlighted. If there isn't a highlighted search result, this\n   * highlights the first one. This method handles wrapping.\n   *\n   * @returns {Searcher} This Searcher.\n   */\n  highlightNextSearchResult() {\n    let searchResult = this.getHighlightedSearchResult();\n    if (searchResult !== null) {\n      searchResult = searchResult.getNextSibling();\n    }\n\n    // Grab the first search result in the list if there isn't a next sibling\n    if (searchResult === null) {\n      searchResult = this.searchResults.queryFirst('.search-result');\n    }\n\n    if (searchResult !== null) {\n      this.highlightSearchResult(searchResult);\n    }\n\n    return this;\n  }\n\n  /**\n   * Highlights the previous search result if one is highlighted. If there isn't a highlighted search result, this\n   * selects the last one. This method handles wrapping.\n   *\n   * @returns {Searcher} This Searcher.\n   */\n  highlightPreviousSearchResult() {\n    let searchResult = this.getHighlightedSearchResult();\n    if (searchResult !== null) {\n      searchResult = searchResult.getPreviousSibling();\n    }\n\n    if (searchResult === null) {\n      searchResult = this.searchResults.queryFirst('.search-result');\n    }\n\n    if (searchResult !== null) {\n      this.highlightSearchResult(searchResult);\n    }\n\n    return this;\n  }\n\n  /**\n   * Highlights the given search result.\n   *\n   * @param {PrimeElement} searchResult The search result to highlight.\n   * @returns {Searcher} This Searcher.\n   */\n  highlightSearchResult(searchResult) {\n    this.searchResults.getChildren().removeClass('selected');\n\n    searchResult.addClass('selected');\n    const scrollTop = this.searchResults.getScrollTop();\n    const height = this.searchResults.getHeight();\n    const searchResultOffset = searchResult.getOffsetTop();\n    if (searchResultOffset + 1 >= scrollTop + height) {\n      this.searchResults.scrollTo(searchResult.getOffsetTop() - this.searchResults.getHeight() + searchResult.getOuterHeight());\n    } else if (searchResultOffset < scrollTop) {\n      this.searchResults.scrollTo(searchResultOffset);\n    }\n\n    return this;\n  }\n\n  /**\n   * Initializes the Searcher by setting up the event listeners and closing the search result element.\n   *\n   * @returns {Searcher} This.\n   */\n  initialize() {\n    this.inputElement\n        .addEventListener('blur', this._handleBlurEvent)\n        .addEventListener('click', this._handleClickEvent)\n        .addEventListener('input', this._handleInputEvent)\n        .addEventListener('keyup', this._handleKeyUpEvent)\n        .addEventListener('keydown', this._handleKeyDownEvent)\n        .addEventListener('focus', this._handleFocusEvent);\n\n    this.closeSearchResults();\n    return this;\n  }\n\n  /**\n   * @returns {boolean} True if the search results add custom option is being displayed currently.\n   */\n  isCustomAddVisible() {\n    return this.searchResults.queryFirst('.custom-add') !== null;\n  }\n\n  /**\n   * @returns {boolean} True if any search results are being displayed currently.\n   */\n  isSearchResultsVisible() {\n    return this.searchResults.hasClass('open');\n  }\n\n  /**\n   * Poor mans resizing of the input field as the user types into it.\n   */\n  resizeInput() {\n    const text = this.inputElement.getValue() === '' ? this.inputElement.getAttribute('placeholder') : this.inputElement.getValue();\n    const newLength = Utils.calculateTextLength(this.inputElement, text) + 35;\n    this.inputElement.setWidth(newLength);\n  }\n\n  /**\n   * Executes a search by optionally updating the input to the given value (if specified) and then rebuilding the search\n   * results using the input's value. This method also puts focus on the input and shows the search results (in case\n   * they are hidden for any reason).\n   *\n   * @param {string} [searchText] The text to search for (this value is also set into the input box). If this is not\n   * specified then the search is run using the input's value.\n   * @returns {Searcher} This Searcher.\n   */\n  search(searchText) {\n    // Set the search text into the input box if it is different and then lowercase it\n    if (Utils.isDefined(searchText) && this.inputElement.getValue() !== searchText) {\n      this.inputElement.setValue(searchText);\n    }\n\n    searchText = Utils.isDefined(searchText) ? searchText.toLowerCase() : this.inputElement.getValue();\n    this.resizeInput();\n\n    // Clear the search results (if there are any)\n    this._removeAllSearchResults();\n\n    // Call the callback\n    const searchResults = this.options.callbackObject.search(searchText);\n    if (!searchResults.hasOwnProperty('results') || !searchResults.hasOwnProperty('tooManyResults')) {\n      throw new TypeError('The callback must return an Object that contains the properties results[Array] and tooManyResults[boolean]');\n    }\n\n    let count = 0;\n    let matchingSearchResultElement = null;\n    for (let i = 0; i < searchResults.results.length; i++) {\n      const searchResult = searchResults.results[i];\n      const element = PrimeDocument.newElement('<li/>')\n          .addClass('search-result')\n          .setAttribute('value', searchResult)\n          .setHTML(searchResult)\n          .addEventListener('click', this._handleClickEvent)\n          .addEventListener('mouseover', this._handleMouseOverEvent)\n          .appendTo(this.searchResults);\n      if (searchResult.toLowerCase().trim() === searchText.toLowerCase().trim()) {\n        matchingSearchResultElement = element;\n      }\n\n      count++;\n    }\n\n    // Show the custom add option if necessary\n    const trimmedLength = searchText.trim().length;\n    if (this.options.customAddEnabled && trimmedLength !== 0 && matchingSearchResultElement === null\n        && (!('doesNotContainValue' in this.options.callbackObject) || this.options.callbackObject.doesNotContainValue(searchText))) {\n      matchingSearchResultElement = PrimeDocument.newElement('<li/>')\n          .addClass('custom-add')\n          .addEventListener('click', this._handleClickEvent)\n          .addEventListener('mouseover', this._handleMouseOverEvent)\n          .setHTML(this.options.customAddLabel + Utils.escapeHTML(searchText))\n          .appendTo(this.searchResults);\n      count++;\n    }\n\n    if (count === 0 && trimmedLength !== 0) {\n      PrimeDocument.newElement('<li/>')\n          .addClass('no-search-results')\n          .setHTML(this.options.noSearchResultsLabel + Utils.escapeHTML(searchText))\n          .appendTo(this.searchResults);\n      count++;\n    }\n\n    // Handle too many results\n    if (searchResults.tooManyResults) {\n      PrimeDocument.newElement('<li/>')\n          .addClass('too-many-search-results')\n          .setHTML(this.options.tooManySearchResultsLabel + Utils.escapeHTML(searchText))\n          .appendTo(this.searchResults);\n      count++;\n    }\n\n    if (count !== 0) {\n      this.searchResults.show();\n      this.searchResults.addClass('open');\n\n      if (count >= 10) {\n        this.searchResults.setHeight(this.searchResults.getChildren()[0].getOuterHeight() * 10 + 1);\n      } else {\n        this.searchResults.setHeight(this.searchResults.getChildren()[0].getOuterHeight() * count + 1);\n      }\n    } else {\n      this.closeSearchResults();\n    }\n\n    if (matchingSearchResultElement !== null) {\n      this.highlightSearchResult(matchingSearchResultElement);\n    }\n\n    return this;\n  }\n\n  /**\n   * Selects the highlighted search result unless there isn't one highlighted, in which case, this does nothing.\n   *\n   * @returns {Searcher} This Searcher.\n   */\n  selectHighlightedSearchResult() {\n    const searchResult = this.getHighlightedSearchResult();\n    if (searchResult === null) {\n      return this;\n    }\n\n    const custom = searchResult.hasClass('custom-add');\n    const value = (custom) ? this.inputElement.getValue().trim() : searchResult.getHTML();\n    if (custom) {\n      // The client of this searcher needs to warn the user.\n      if (!this.options.customAddCallback(value)) {\n        return this;\n      }\n    }\n\n    this.options.callbackObject.selectSearchResult(value);\n    this.closeSearchResults();\n\n    return this;\n  }\n\n  /**\n   * Sets the timeout used in the close method to allow for transitions.\n   *\n   * @param timeout {int} The timeout.\n   * @returns {Searcher} This.\n   */\n  withCloseTimeout(timeout) {\n    this.options.closeTimeout = timeout;\n    return this;\n  }\n\n  /**\n   * Sets whether or not this Searcher allows custom options to be added.\n   *\n   * @param {boolean} enabled The flag.\n   * @returns {Searcher} This Searcher.\n   */\n  withCustomAddEnabled(enabled) {\n    this.options.customAddEnabled = enabled;\n    return this;\n  }\n\n  /**\n   * Sets whether or not this Searcher allows custom options to be added.\n   *\n   * @param {Function} callback The function to call that will return true if the custom option can be added.\n   * @returns {Searcher} This Searcher.\n   */\n  withCustomAddCallback(callback) {\n    this.options.customAddCallback = callback;\n    return this;\n  }\n\n  /**\n   * Sets the label used when custom options are added.\n   *\n   * @param {string} customAddLabel The label.\n   * @returns {Searcher} This Searcher.\n   */\n  withCustomAddLabel(customAddLabel) {\n    this.options.customAddLabel = customAddLabel;\n    return this;\n  }\n\n  /**\n   * Set more than one option at a time by providing a map of key value pairs. This is considered an advanced\n   * method to set options on the widget. The caller needs to know what properties are valid in the options object.\n   *\n   * @param {Object} options Key value pair of configuration options.\n   * @returns {Searcher} This.\n   */\n  withOptions(options) {\n    if (!Utils.isDefined(options)) {\n      return this;\n    }\n\n    for (let option in options) {\n      if (options.hasOwnProperty(option)) {\n        this.options[option] = options[option];\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Sets the label that is printed when there are no search results.\n   *\n   * @param {string} noSearchResultsLabel The label text.\n   * @returns {Searcher} This Searcher.\n   */\n  withNoSearchResultsLabel(noSearchResultsLabel) {\n    this.options.noSearchResultsLabel = noSearchResultsLabel;\n    return this;\n  }\n\n  /* ===================================================================================================================\n   * Private methods\n   * ===================================================================================================================*/\n\n  /**\n   * Sets the label that is printed when there are too many search results.\n   *\n   * @param {string} tooManySearchResultsLabel The label text.\n   * @returns {Searcher} This Searcher.\n   */\n  withTooManySearchResultsLabel(tooManySearchResultsLabel) {\n    this.options.tooManySearchResultsLabel = tooManySearchResultsLabel;\n    return this;\n  }\n\n  /**\n   * Handles the blur event when the input goes out of focus.\n   *\n   * @private\n   */\n  _handleBlurEvent() {\n    window.setTimeout((function() {\n      if (document.activeElement !== this.inputElement.domElement) {\n        this.closeSearchResults();\n      }\n    }).bind(this), 300);\n  }\n\n  /**\n   * Handles all click events sent to the Searcher.\n   *\n   * @param {Event} event The mouse event.\n   * @private\n   */\n  _handleClickEvent(event) {\n    const target = new PrimeElement(event.currentTarget);\n    if (target.hasClass('custom-add') || target.hasClass('search-result')) {\n      this.selectHighlightedSearchResult();\n    } else if (target.domElement === this.inputElement.domElement) {\n      this.search();\n    } else {\n      console.log('Clicked something else target=[' + event.target + '] currentTarget=[' + event.currentTarget + ']');\n    }\n  }\n\n  /**\n   * Handles when the input field is focused by opening the search results.\n   *\n   * @private\n   */\n  _handleFocusEvent() {\n    this.search();\n  }\n\n  /**\n   * Handle when we get new input in the field\n   *\n   * @private\n   */\n  _handleInputEvent() {\n    this.search();\n  }\n\n  /**\n   * Handles the key down events that should not be propagated.\n   *\n   * @param {KeyboardEvent} event The keyboard event object.\n   * @private\n   */\n  _handleKeyDownEvent(event) {\n    const key = event.keyCode;\n    if (key === Events.Keys.BACKSPACE) {\n      this.previousSearchString = this.inputElement.getValue();\n    } else if (key === Events.Keys.UP_ARROW) {\n      Utils.stopEvent(event);\n      this.highlightPreviousSearchResult();\n    } else if (key === Events.Keys.DOWN_ARROW) {\n      Utils.stopEvent(event);\n      if (this.isSearchResultsVisible()) {\n        this.highlightNextSearchResult();\n      } else {\n        this.search();\n      }\n    } else if (key === Events.Keys.ENTER) {\n      Utils.stopEvent(event); // Don't bubble enter otherwise the form submits\n    } else if (key === Events.Keys.TAB && this.isSearchResultsVisible()) {\n      Utils.stopEvent(event); // Don't bubble tab otherwise value lost on tab focus\n    }\n  }\n\n  /**\n   * Handles all key up events sent to the search results container.\n   *\n   * @param {KeyboardEvent} event The keyboard event object.\n   *  @private\n   */\n  _handleKeyUpEvent(event) {\n    const key = event.keyCode;\n    const value = this.inputElement.getValue();\n\n    if (key === Events.Keys.BACKSPACE) {\n      if (value === '' && this.previousSearchString === '') {\n        this.options.callbackObject.deletedBeyondSearchInput();\n      } else {\n        this.search();\n      }\n    } else if (key === Events.Keys.ENTER) {\n      Utils.stopEvent(event);\n      // If a search result is highlighted, add it\n      if (this.getHighlightedSearchResult() !== null) {\n        this.selectHighlightedSearchResult();\n      }\n    } else if (key === Events.Keys.ESCAPE) {\n      this.closeSearchResults();\n    } else if (key === Events.Keys.TAB && this.getHighlightedSearchResult() !== null) {\n      // don't advance form field focus and add search result\n      Utils.stopEvent(event);\n      this.selectHighlightedSearchResult();\n    }\n  }\n\n  /**\n   * Handles mouseover events for the search results (only) by highlighting the event target.\n   *\n   * @param {Event} event The mouseover event.\n   * @private\n   */\n  _handleMouseOverEvent(event) {\n    const target = new PrimeElement(event.currentTarget);\n    this.highlightSearchResult(target);\n  }\n\n  /**\n   * Removes all of the search results.\n   *\n   * @private\n   */\n  _removeAllSearchResults() {\n    this.searchResults.query('li').removeAllFromDOM();\n  }\n\n  /* ===================================================================================================================\n   * Search function implementations.\n   * ===================================================================================================================*/\n\n  /**\n   * Set the initial options for this widget.\n   * @private\n   */\n  _setInitialOptions(callbackObject) {\n    // Defaults\n    this.options = {\n      callbackObject: callbackObject,\n      closeTimeout: 200,\n      customAddEnabled: true,\n      'customAddCallback'() {\n        return true;\n      },\n      customAddLabel: 'Add Custom: ',\n      noSearchResultsLabel: 'No Matches For: ',\n      tooManySearchResultsLabel: 'Too Many Matches For: ',\n    };\n\n    const userOptions = Utils.dataSetToOptions(this.inputElement);\n    for (let option in userOptions) {\n      if (userOptions.hasOwnProperty(option)) {\n        this.options[option] = userOptions[option];\n      }\n    }\n  }\n}\n\nexport {Searcher};\n","/*\n * Copyright (c) 2017, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n'use strict';\n\nimport {Events} from \"../Events.js\";\nimport {PrimeDocument} from \"../PrimeDocument.js\";\nimport {PrimeElement} from \"../Document/PrimeElement.js\";\nimport {Utils} from \"../Utils.js\";\nimport {Searcher} from \"./Searcher.js\";\n\nlet count = 1;\nlet AddOptionEvent = 'MultipleSelect:addOption';\nlet DeselectOptionEvent = 'MultipleSelect:deselectOption';\nlet SelectOptionEvent = 'MultipleSelect:selectOption';\n\nclass MultipleSelect {\n  /**\n   * Constructs a MultipleSelect object for the given element.\n   *\n   * The MultipleSelect generates a number of different HTML elements directly after the SELECT element you pass to the\n   * constructor. A fully rendered MultipleSelect might look something like this:\n   *\n   * <pre>\n   * &lt;select id=\"foo\">\n   *   &lt;option value=\"one\">One&lt;/option>\n   *   &lt;option value=\"two\">Two&lt;/option>\n   *   &lt;option value=\"three\">Three&lt;/option>\n   * &lt;/select>\n   * &lt;div id=\"foo-display\" class=\"prime-multiple-select\">\n   *   &lt;ul id=\"foo-option-list\" class=\"option-list\">\n   *     &lt;li id=\"foo-option-one\">&lt;span>One&lt;/span>&lt;a href=\"#\">X&lt;/a>&lt;/li>\n   *     &lt;li id=\"foo-option-two\">&lt;span>Two&lt;/span>&lt;a href=\"#\">X&lt;/a>&lt;/li>\n   *     &lt;li id=\"foo-option-three\">&lt;span>Three&lt;/span>&lt;a href=\"#\">X&lt;/a>&lt;/li>\n   *     &lt;li>&lt;input type=\"text\" value=\"aaa\"/>&lt;/li>\n   *   &lt;/ul>\n   *   &lt;ul class=\"search-results\">\n   *     &lt;li>One&lt;/li>\n   *     &lt;li>Two&lt;/li>\n   *     &lt;li>Three&lt;/li>\n   *     &lt;li>Add Custom Entry: aaa/li>\n   *   &lt;/ul>\n   * &lt;/div>\n   * </pore>\n   *\n   * The with* methods can be used to setup the configuration for this MultipleSelect, but here are some defaults:\n   *\n   * <ul>\n   *   <li>placeholder = \"Choose\"</li>\n   *   <li>customAddEnabled = true</li>\n   *   <li>customAddLabel = \"Add Custom Value:\"</li>\n   *   <li>noSearchResultsLabel = \"No Matches For:\"</li>\n   * </ul>\n   *\n   * @constructor\n   * @param {PrimeElement|Element|EventTarget} element The Prime Element for the MultipleSelect.\n   */\n  constructor(element) {\n    Utils.bindAll(this);\n    this.initialized = false;\n\n    this.element = PrimeElement.wrap(element);\n    if (this.element.domElement.tagName !== 'SELECT') {\n      throw new TypeError('You can only use MultipleSelect with select elements');\n    }\n\n    if (this.element.getAttribute('multiple') !== 'multiple') {\n      throw new TypeError('The select box you are attempting to convert to a MultipleSelect must have the multiple=\"multiple\" attribute set');\n    }\n\n    this._setInitialOptions();\n  }\n\n  /*\n   * Statics\n   */\n  /**\n   * @returns {number}\n   */\n  static get count() {\n    return count;\n  }\n\n  /**\n   * @param {number} value\n   */\n  static set count(value) {\n    count = value;\n  }\n\n  /**\n   * @returns {string}\n   */\n  static get AddOptionEvent() {\n    return AddOptionEvent;\n  }\n\n  /**\n   * @param {string} value\n   */\n  static set AddOptionEvent(value) {\n    AddOptionEvent = value;\n  }\n\n  /**\n   * @returns {string}\n   */\n  static get DeselectOptionEvent() {\n    return DeselectOptionEvent;\n  }\n\n  /**\n   * @param {string} value\n   */\n  static set DeselectOptionEvent(value) {\n    DeselectOptionEvent = value;\n  }\n\n  /**\n   * @returns {string}\n   */\n  static get SelectOptionEvent() {\n    return SelectOptionEvent;\n  }\n\n  /**\n   * @param {string} value\n   */\n  static set SelectOptionEvent(value) {\n    SelectOptionEvent = value;\n  }\n\n  /**\n   * Finds the HTMLSelectOption with the given id and returns it wrapped in a PrimeElement.\n   *\n   * @param {String} id\n   * @returns {PrimeElement}\n   */\n  static findOptionWithId(id) {\n    return PrimeDocument.queryFirst('[data-option-id=\"' + id + '\"]');\n  }\n\n  /**\n   * Pass through to add event listeners to This. The custom events that this MultipleSelect fires are:\n   *\n   *  'MultipleSelect:deselectOption'\n   *  'MultipleSelect:selectOption'\n   *  'MultipleSelect:addOption'\n   *\n   * @param {string} event The name of the event.\n   * @param {Function} listener The listener function.\n   * @returns {MultipleSelect} This.\n   */\n  addEventListener(event, listener) {\n    this.element.addEventListener(event, listener);\n    return this;\n  }\n\n  /**\n   * Determines if this MultipleSelect contains an option with the given value.\n   *\n   * @param {String} value The value to look for.\n   */\n  containsOptionWithValue(value) {\n    return this.findOptionWithValue(value) !== null;\n  }\n\n  /**\n   * Adds the given option to this select. The option will not be selected.\n   *\n   * @param {String} value The value for the option.\n   * @param {String} display The display text for the option.\n   * @param {?String} [id] The id of the element. (Defaults to null)\n   * @returns {MultipleSelect} This.\n   */\n  addOption(value, display, id) {\n    if ((id === null || id === undefined) && this.containsOptionWithValue(value)) {\n      return this;\n    }\n\n    let element = PrimeDocument.newElement('<option/>')\n        .setValue(value)\n        .setHTML(display)\n        .appendTo(this.element);\n\n    if (id) {\n      element.setDataAttribute(\"optionId\", id);\n    }\n\n    // Fire the custom event\n    this.element.fireEvent(MultipleSelect.AddOptionEvent, value, this);\n\n    return this;\n  }\n\n  /**\n   * Deselects the option with the given value by removing the selected attribute from the option in the select box and\n   * removing the option from the display container. If the MultipleSelect doesn't contain an option for the given value,\n   * this method throws an exception.\n   *\n   * @param {String} value The value to look for.\n   * @returns {MultipleSelect} This.\n   */\n  deselectOptionWithValue(value) {\n    const option = this.findOptionWithValue(value);\n    if (option === null) {\n      throw new Error('MultipleSelect doesn\\'t contain an option with the value [' + value + ']');\n    }\n\n    this.deselectOption(option);\n\n    return this;\n  }\n\n  /**\n   * Deselects the option with the given value by removing the selected attribute from the option in the select box and\n   * removing the option from the display container.\n   *\n   * @param {PrimeElement} option The option to deselect.\n   * @returns {MultipleSelect} This.\n   */\n  deselectOption(option) {\n    option.setSelected(false);\n\n    const id = option.getDataAttribute('optionId') || this._makeOptionID(option);\n    const displayOption = PrimeDocument.queryById(id);\n    if (displayOption !== null) {\n      displayOption.removeFromDOM();\n    }\n\n    // If there are no selected options left, add back the placeholder attribute to the input and resize it\n    if (this.optionList.query('li').length === 1) {\n      this.input.setAttribute('placeholder', this.options.placeholder);\n      this.searcher.resizeInput();\n    }\n\n    // Fire the custom event\n    this.element.fireEvent(MultipleSelect.DeselectOptionEvent, option.getValue(), this);\n\n    return this;\n  }\n\n  /**\n   * Destroys the widget completely.\n   */\n  destroy() {\n    this.element.show();\n    this.displayContainer.removeFromDOM();\n  }\n\n  /**\n   * Finds the HTMLSelectOption with the given text and returns it wrapped in a PrimeElement.\n   *\n   * @param {String} text The text to look for.\n   * @returns {PrimeElement} The option element or null.\n   */\n  findOptionWithText(text) {\n    const options = this.element.getOptions();\n    for (let i = 0; i < options.length; i++) {\n      if (options[i].getTextContent() === text) {\n        return options[i];\n      }\n    }\n\n    return null;\n  }\n\n  deselectOptionWithId(id) {\n    const option = MultipleSelect.findOptionWithId(id);\n    if (option === null) {\n      throw new Error('MultipleSelect doesn\\'t contain an option with the id [' + id + ']');\n    }\n\n    this.deselectOption(option);\n\n    return this;\n  }\n\n  /**\n   * Finds the HTMLSelectOption with the given value and returns it wrapped in a PrimeElement.\n   *\n   * @param {String} value The value to look for.\n   * @returns {PrimeElement} The option element or null.\n   */\n  findOptionWithValue(value) {\n    for (let i = 0; i < this.element.domElement.length; i++) {\n      const cur = this.element.domElement.options[i];\n      if (cur.value === value) {\n        return new PrimeElement(cur);\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * @returns {string[]} The currently selected options values.\n   */\n  getSelectedValues() {\n    return this.element.getSelectedValues();\n  }\n\n  /**\n   * Determines if the MultipleSelect contains an option with the given value.\n   *\n   * @param {string} value The value.\n   * @returns {boolean} True if the MultipleSelect contains an option with the given value, false otherwise.\n   */\n  hasOptionWithValue(value) {\n    return this.findOptionWithValue(value) !== null;\n  }\n\n  /**\n   * Highlights the final selected option (if there is one) to indicate that it will be unselected if the user clicks\n   * the delete key again.\n   *\n   * @returns {MultipleSelect} This.\n   */\n  highlightOptionForUnselect() {\n    const options = this.optionList.getChildren();\n    if (options.length > 1) {\n      options[options.length - 2].addClass('selected');\n    }\n\n    return this;\n  }\n\n  /**\n   * Initializes the display from the underlying select element. All of the current display options (li elements) are\n   * removed. New display options are added for each selected option in the select box.\n   *\n   * @returns {MultipleSelect} This.\n   */\n  initialize() {\n    this.element.hide();\n\n    let id = this.element.getId();\n    if (id === null || id === '') {\n      id = 'prime-multiple-select' + MultipleSelect.count++;\n      this.element.setId(id);\n    }\n\n    this.displayContainer = PrimeDocument.queryById(id + '-display');\n    this.input = null;\n    if (this.displayContainer === null) {\n      this.displayContainer = PrimeDocument.newElement('<div/>')\n          .setId(id + '-display')\n          .addClass(this.options.className)\n          .addEventListener('click', this._handleClickEvent)\n          .addEventListener('keyup', this._handleKeyUpEvent)\n          .insertAfter(this.element);\n\n      this.optionList = PrimeDocument.newElement('<ul/>')\n          .addClass('option-list')\n          .appendTo(this.displayContainer);\n\n      this.searchResults = PrimeDocument.newElement('<ul/>')\n          .addClass('search-results')\n          .hide()\n          .appendTo(this.displayContainer);\n    } else {\n      this.displayContainer\n          .removeAllEventListeners()\n          .addEventListener('click', this._handleClickEvent)\n          .addEventListener('keyup', this._handleKeyUpEvent);\n      this.optionList = this.displayContainer.queryFirst('.option-list');\n      this.searchResults = this.displayContainer.queryFirst('.search-results');\n    }\n\n    PrimeDocument.queryFirst('html').addEventListener('click', this._handleGlobalClickEvent);\n\n    // Close the search\n    this.searchResults.hide();\n    this._redraw();\n\n    // When the caller specified a selected order, process all selected options to honor the requested order.\n    // - Do this after redraw to ensure that we don't modify the order of the display container.\n    // - Currently we only honor the requested order if the option is already selected.\n    if (this.options.initialSelectedOrder.length > 0) {\n      for (let i = 0; i < this.options.initialSelectedOrder.length; i++) {\n        const actual = this.element.queryFirst('option[value=' + this.options.initialSelectedOrder[i] + ']');\n        if (actual !== null && actual.isSelected()) {\n          this.selectOption(actual);\n        }\n      }\n    }\n\n    this.initialized = true;\n    return this;\n  }\n\n  /**\n   * @returns {boolean} True if the last option is highlighted for unselect.\n   */\n  isLastOptionHighlightedForUnselect() {\n    const options = this.optionList.getChildren();\n    return options.length > 1 && options[options.length - 2].hasClass('selected');\n  }\n\n  /**\n   * Removes all of the options from the MultipleSelect.\n   *\n   * @returns {MultipleSelect} This.\n   */\n  removeAllOptions() {\n    // Remove in reverse order because the options array is dynamically updated when elements are deleted from the DOM\n    const options = this.element.domElement.options;\n    for (let i = options.length - 1; i >= 0; i--) {\n      this.removeOption(new PrimeElement(options[i]));\n    }\n\n    return this;\n  }\n\n  /**\n   * Removes the highlighted option.\n   */\n  removeHighlightedOption() {\n    const options = this.optionList.getChildren();\n    if (this.options.allowDuplicates) {\n      this.deselectOptionWithId(options[options.length - 2].getId());\n    } else {\n      this.deselectOptionWithValue(options[options.length - 2].getAttribute('value'));\n    }\n    this.search();\n  }\n\n  /**\n   * Removes the given option from the MultipleSelect by removing the option in the select box and the option in the\n   * display container.\n   *\n   * @param {PrimeElement} option The option to remove.\n   * @returns {MultipleSelect} This.\n   */\n  removeOption(option) {\n    if (!(option instanceof PrimeElement)) {\n      throw new TypeError('MultipleSelect#removeOption only takes PrimeElement instances');\n    }\n\n    option.removeFromDOM();\n\n    let id, displayOption;\n    if (this.options.allowDuplicates) {\n      // The ids are random so we need to get the data attribute.\n      id = option.getDataAttribute('optionId');\n      displayOption = PrimeDocument.queryById(id);\n    } else {\n      // The ids aren't random and can be reproducably created.\n      id = this._makeOptionID(option);\n      displayOption = PrimeDocument.queryById(id);\n    }\n\n    // Check if the option has already been selected\n    if (displayOption !== null) {\n      displayOption.removeFromDOM();\n    }\n\n    return this;\n  }\n\n  /**\n   * Removes the option with the given value from the MultipleSelect by removing the option in the select box and the\n   * option in the display container. If the MultipleSelect doesn't contain an option with the given value, this throws\n   * an exception.\n   *\n   * @param {string} value The value of the option to remove.\n   * @returns {MultipleSelect} This.\n   */\n  removeOptionWithValue(value) {\n    const option = this.findOptionWithValue(value);\n    if (option === null) {\n      throw new Error('MultipleSelect doesn\\'t contain an option with the value [' + value + ']');\n    }\n\n    this.removeOption(option);\n\n    return this;\n  }\n\n  /**\n   * Selects the given option by setting the selected attribute on the option in the select box (the object passed in is\n   * the option from the select box wrapped in a PrimeElement) and adding it to the display container. If the\n   * option is already in the display container, that step is skipped.\n   *\n   * @param {PrimeElement} option The option object from the select box wrapped in a PrimeElement instance.\n   * @returns {MultipleSelect} This.\n   */\n  selectOption(option) {\n    if (!(option instanceof PrimeElement)) {\n      throw new TypeError('MultipleSelect#selectOption only takes PrimeElement instances');\n    }\n\n    const id = this._makeOptionID(option);\n    let displayOption = PrimeDocument.queryById(id);\n\n    // Move the option if configured, and if already displayed remove it and add it again to get the correct order.\n    const moveDuringInitialization = !this.initialized && this.options.initialSelectedOrder.length > 0;\n    if (this.options.preserveDisplayedSelectionOrder || moveDuringInitialization) {\n      const parent =  option.getParent();\n      const lastOption = parent.getLastChild('option');\n      if (option.getValue() !== lastOption.getValue()) {\n        option.removeFromDOM();\n        option.appendTo(parent);\n        // If we moved the option, and we already have a display option, delete it so that we can rebuild it.\n        if (displayOption !== null) {\n          displayOption.removeFromDOM();\n          displayOption = null;\n        }\n      }\n    }\n\n    // Check if the option has already been selected\n    if (displayOption === null) {\n      /*\n      If we allow dupes, always duplicate the option and append it to the end or the order will be a problem. The default multiselect doesn't support order)\n       */\n      if (this.options.allowDuplicates) {\n        this.addOption(option.getValue(), option.getHTML(), id);\n        option = MultipleSelect.findOptionWithId(id);\n      }\n      option.setSelected(true);\n\n      const li = PrimeDocument.newElement('<li/>')\n          .setAttribute('value', option.getValue())\n          .setId(id)\n          .insertBefore(this.inputOption);\n      PrimeDocument.newElement('<span/>')\n          .setHTML(option.getHTML())\n          .setAttribute('value', option.getValue())\n          .appendTo(li);\n      PrimeDocument.newElement('<a/>')\n          .setAttribute('href', '#')\n          .setAttribute('value', option.getValue())\n          .setHTML(this.options.removeIcon)\n          .addEventListener('click', this._handleClickEvent)\n          .appendTo(li);\n    }\n\n    // Remove the placeholder attribute on the input and resize it\n    this.input.removeAttribute('placeholder');\n\n    // Close the search results and resize the input\n    this.searcher.closeSearchResults();\n\n    // Scroll the display to the bottom\n    this.optionList.scrollToBottom();\n\n    // Fire the custom event\n    this.element.fireEvent(MultipleSelect.SelectOptionEvent, option.getValue(), this);\n\n    return this;\n  }\n\n  /**\n   * Selects the option with the given value by setting the selected attribute on the option in the select box (the\n   * object passed in is the option from the select box wrapped in a PrimeElement) and adding it to the display\n   * container. If the option is already in the display container, that step is skipped.\n   * <p/>\n   * If there isn't an option with the given value, this throws an exception.\n   *\n   * @param {String} value The value of the option to select.\n   * @returns {MultipleSelect} This.\n   */\n  selectOptionWithValue(value) {\n    const option = this.findOptionWithValue(value);\n    if (option === null) {\n      throw new Error('MultipleSelect doesn\\'t contain an option with the value [' + value + ']');\n    }\n\n    this.selectOption(option);\n\n    return this;\n  }\n\n  /**\n   * Sets the selected options. This mimics the function on Element to provide consistency.\n   *\n   * @param {string[]} [arguments] The list of options to select based on their values.\n   * @returns {MultipleSelect} This.\n   */\n  setSelectedValues() {\n    this.element.setSelectedValues.apply(this.element, arguments);\n    this._redraw();\n    return this;\n  }\n\n  /**\n   * Unhighlights the last option if it is highlighted.\n   *\n   * @returns {MultipleSelect} This.\n   */\n  unhighlightOptionForUnselect() {\n    this.optionList.getChildren().each(function(element) {\n      element.removeClass('selected');\n    });\n    return this;\n  }\n\n  withAllowDuplicates(value) {\n    this.options.allowDuplicates = value;\n    return this;\n  }\n\n  /**\n   * Sets the class name for the MultipleSelect element.\n   *\n   * @param className {string} The class name.\n   * @returns {MultipleSelect} This.\n   */\n  withClassName(className) {\n    this.options.className = className;\n    return this;\n  }\n\n  /**\n   * Sets the timeout used in the close method to allow for transitions.\n   *\n   * @param timeout {int} The timeout.\n   * @returns {MultipleSelect} This.\n   */\n  withCloseTimeout(timeout) {\n    this.options.closeTimeout = timeout;\n    return this;\n  }\n\n  /**\n   * Sets whether or not this MultipleSelect allows custom options to be added.\n   *\n   * @param {boolean} enabled The flag.\n   * @returns {MultipleSelect} This.\n   */\n  withCustomAddEnabled(enabled) {\n    this.options.customAddEnabled = enabled;\n    return this;\n  }\n\n  /**\n   * Sets the label used when custom options are added.\n   *\n   * @param {string} customAddLabel The label.\n   * @returns {MultipleSelect} This.\n   */\n  withCustomAddLabel(customAddLabel) {\n    this.options.customAddLabel = customAddLabel;\n    return this;\n  }\n\n  /**\n   * Enable error class handling. When this option is used, if the specified error class is found on any element\n   * in the tab content the same error class will be added to the tab to identify the tab contains errors.\n   *\n   * @returns {MultipleSelect} This.\n   */\n  withErrorClassHandling(errorClass) {\n    this.options.errorClass = errorClass;\n    return this;\n  }\n\n  /**\n   * Sets the label that is printed when there are no search results. This must be called before render is called.\n   *\n   * @param {string} noSearchResultsLabel The label text.\n   * @returns {MultipleSelect} This.\n   */\n  withNoSearchResultsLabel(noSearchResultsLabel) {\n    this.options.noSearchResultsLabel = noSearchResultsLabel;\n    return this;\n  }\n\n  /**\n   * Sets the placeholder text for This. This must be called before render is called.\n   *\n   * @param {string} placeholder The placeholder text.\n   * @returns {MultipleSelect} This.\n   */\n  withPlaceholder(placeholder) {\n    this.options.placeholder = placeholder;\n    return this;\n  }\n\n  /**\n   * When set equal to true, the displayed selection in the widget will be reflected in the serialized form data.\n   *\n   * Default is 'false', and is the legacy behavior.\n   *\n   * @param value {boolean} The boolean value, true or false.\n   * @returns {MultipleSelect} This.\n   */\n  withPreserveDisplayedSelectionOrder(value) {\n    this.options.preserveDisplayedSelectionOrder = value;\n    return this;\n  }\n\n  /**\n   * Sets the remove icon value. This overrides the default value.\n   *\n   * @param {string} removeIcon The remove icon text.\n   * @returns {MultipleSelect} This.\n   */\n  withRemoveIcon(removeIcon) {\n    this.options.removeIcon = removeIcon;\n    return this;\n  }\n\n  /**\n   * Sets the search function that can be used to search other sources besides the select box that backs this widget.\n   *\n   * @param searchFunction {Function} The search function.\n   * @returns {MultipleSelect} This.\n   */\n  withSearchFunction(searchFunction) {\n    this.options.searchFunction = searchFunction;\n    return this;\n  }\n\n  /**\n   * Used during initialization to modify the order of selected options in the DOM.\n   *\n   * This does not affect the selected attribute, only the order in the DOM. It is not necessary to\n   * provide a complete list of selected option values.\n   *\n   * If options 'en', 'fr' and 'du' are selected, and you only provide 'du' as input here, 'du'\n   * will be moved to ensure it is first in the submitted form data, and the order of 'en' and 'fr'\n   * will not be modified, but will come after 'du'.\n   *\n   * Example:\n   *   A user who selected preferred languages in the order German, English, French would initialize the selected\n   *   options as: ['du', 'en', 'fr']\n   *\n   * @param {string[]} selections The selected options values.\n   * @returns {MultipleSelect} This.\n   */\n  withInitialSelectedOrder(selections) {\n    this.options.initialSelectedOrder = selections;\n    return this;\n  }\n\n  /* ===================================================================================================================\n   * Searcher's callback interface methods.\n   * ===================================================================================================================*/\n\n  /**\n   * Called when the Searcher gets a keyboard event that deletes beyond the search input. This highlights the last word\n   * in the phrase for removal.\n   */\n  deletedBeyondSearchInput() {\n    if (this.isLastOptionHighlightedForUnselect()) {\n      this.removeHighlightedOption();\n    }\n\n    this.highlightOptionForUnselect();\n  }\n\n  /**\n   * Called when the search needs to determine if the custom add option should be displayed. As long as this\n   * MultipleSelect does not contain the given value, the custom add option should be displayed.\n   *\n   * @param {string} value The value.\n   * @returns {boolean} True if this MultipleSelect does not contain the value, false otherwise.\n   */\n  doesNotContainValue(value) {\n    return !this.containsOptionWithValue(value);\n  }\n\n  /**\n   * Called when the Searcher is executing a search. This executes a search via the callback and returns the results.\n   *\n   * @param {string} [searchText] The text to search for.\n   * @returns {Object} The SearchResults.\n   */\n  search(searchText) {\n    this.unhighlightOptionForUnselect();\n    return this.options.searchFunction.call(null, searchText, this.element);\n  }\n\n  /**\n   * Called when the Searcher gets an event that causes a search result to be selected. This adds the word.\n   */\n  selectSearchResult(value) {\n\n    value = Utils.unescapeHTML(value); // In case the string has html escapes in it.\n\n    // Add the custom option if there is one\n    let option = this.findOptionWithText(value);\n    if (option === null) {\n      this.addOption(value, Utils.escapeHTML(value));\n      option = this.findOptionWithValue(value); // The value will still be unescaped\n    }\n\n    this.selectOption(option);\n  }\n\n\n  /* ===================================================================================================================\n   * Private Methods\n   * ===================================================================================================================*/\n\n  /**\n   * Handles the blur event when the input goes out of focus.\n   *\n   * @private\n   */\n  _handleBlurEvent() {\n    window.setTimeout((function() {\n      if (document.activeElement !== this.input.domElement) {\n        this.searcher.closeSearchResults();\n      }\n    }).bind(this), 300);\n    this.displayContainer.removeClass('focus');\n  }\n\n  /**\n   * Handles all click events sent to the MultipleSelect.\n   *\n   * @param {Event} event The mouse event.\n   * @private\n   */\n  _handleClickEvent(event) {\n    Utils.stopEvent(event);\n    const target = new PrimeElement(event.target);\n    if (target.is('a')) {\n      if (this.options.allowDuplicates) {\n        const id = target.getParent().getId();\n        this.removeOption(MultipleSelect.findOptionWithId(id));\n      } else {\n        this.removeOptionWithValue(target.getAttribute('value'));\n      }\n    } else if (target.is('span')) {\n      target.selectElementContents();\n    } else {\n      this.input.focus();\n    }\n  }\n\n  /**\n   * Handles the blur event when the input goes out of focus.\n   *\n   * @private\n   */\n  _handleFocusEvent() {\n    this.displayContainer.addClass('focus');\n  }\n\n  /**\n   * Handles mouse clicks outside of This. If they clicked anything that is not within this MultipleSelect,\n   * it closes the search results.\n   *\n   * @param {Event} event The event.\n   * @returns {boolean} Always true so the event is bubbled.\n   * @private\n   */\n  _handleGlobalClickEvent(event) {\n    const target = new PrimeElement(event.target);\n    if (this.displayContainer.domElement !== target.domElement && !target.isChildOf(this.displayContainer)) {\n      this.searcher.closeSearchResults();\n    }\n  }\n\n  /**\n   * Handles all key up events sent to the display container.\n   *\n   * @param {Event} event The browser event object.\n   * @returns {boolean} True if the search display is not open, false otherwise. This will prevent the event from continuing.\n   * @private\n   */\n  _handleKeyUpEvent(event) {\n    const key = event.keyCode;\n    if (key === Events.Keys.ESCAPE) {\n      this.unhighlightOptionForUnselect();\n    }\n  }\n\n  /**\n   * Makes an ID for the option.\n   *\n   * @param {PrimeElement} option The option to make the ID for.\n   * @private\n   */\n  _makeOptionID(option) {\n    if (this.options.allowDuplicates === true) {\n      let d = new Date().getTime();\n      // UUID ish\n      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n        let r = (d + Math.random() * 16) % 16 | 0;\n        d = Math.floor(d / 16);\n        return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n      });\n    }\n    return this.element.getId() + '-option-' + option.getValue().replace(' ', '-');\n  }\n\n  /**\n   * Redraws the widget.\n   * @private\n   */\n  _redraw() {\n    // Remove the currently displayed options\n    this.optionList.getChildren().each(function(option) {\n      option.removeFromDOM();\n    });\n\n    // Add the input option since the select options are inserted before it\n    this.inputOption = PrimeDocument.newElement('<li/>')\n        .appendTo(this.optionList);\n    this.input = PrimeDocument.newElement('<input/>')\n        .addEventListener('click', this._handleClickEvent)\n        .addEventListener('blur', this._handleBlurEvent)\n        .addEventListener('focus', this._handleFocusEvent)\n        .setAttribute('type', 'text')\n        .appendTo(this.inputOption);\n    this.searcher = new Searcher(this.input, this.searchResults, this)\n        .withOptions(this.options)\n        .initialize();\n\n    // Add the selected options\n    let hasSelectedOptions = false;\n    const options = this.element.getOptions();\n    for (let i = 0; i < options.length; i++) {\n      const option = options[i];\n      if (option.isSelected()) {\n        this.selectOption(option);\n        hasSelectedOptions = true;\n      }\n    }\n\n    // Put the placeholder attribute in if the MultipleSelect has no selected options\n    if (!hasSelectedOptions) {\n      this.input.setAttribute('placeholder', this.options.placeholder);\n    }\n\n    this.searcher.resizeInput();\n\n    // If error class handling was enabled and the select box has the error class, add it to the display\n    if (this.options.errorClass && this.element.hasClass(this.options.errorClass)) {\n      this.displayContainer.addClass(this.options.errorClass);\n    }\n  }\n\n  /**\n   * Set the initial options for this widget.\n   * @private\n   */\n  _setInitialOptions() {\n    // Defaults\n    this.options = {\n      allowDuplicates: false,\n      className: 'prime-multiple-select',\n      closeTimeout: 200,\n      customAddEnabled: true,\n      customAddLabel: 'Add Custom Value: ',\n      errorClass: null,\n      initialSelectedOrder: [],\n      noSearchResultsLabel: 'No Matches For: ',\n      placeholder: 'Choose',\n      preserveDisplayedSelectionOrder: false,\n      searchFunction: Searcher.selectSearchFunction,\n      removeIcon: 'X'\n    };\n\n    const userOptions = Utils.dataSetToOptions(this.element);\n    for (let option in userOptions) {\n      if (userOptions.hasOwnProperty(option)) {\n        this.options[option] = userOptions[option];\n      }\n    }\n  }\n}\n\nexport {MultipleSelect};\n","/*\n * Copyright (c) 2020, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n'use strict';\n\nimport {PrimeElement} from \"../Document/PrimeElement.js\";\nimport {Utils} from \"../Utils.js\";\n\nclass Reorder {\n  /**\n   * Constructs a new Reorder object for the given element.\n   *\n   * @param {PrimeElement|Element|EventTarget} element The Prime Element for containing the re-orderable items.\n   * @constructor\n   */\n  constructor(element) {\n    Utils.bindAll(this);\n\n    this.element = PrimeElement.wrap(element);\n    this._setInitialOptions();\n  }\n\n  /**\n   * Destroy this widget.\n   *\n   * @returns {Reorder} This.\n   */\n  destroy() {\n    this.element.removeEventListener('click', this._handleMoveDownClick);\n    this.element.removeEventListener('click', this._handleMoveUpClick);\n    return this;\n  }\n\n  /**\n   * Initializes the widget by attaching event listeners to the element.\n   *\n   * @returns {Reorder} This.\n   */\n  initialize() {\n    this.element.addDelegatedEventListener('click', this.options.moveDownSelector, this._handleMoveDownClick);\n    this.element.addDelegatedEventListener('click', this.options.moveUpSelector, this._handleMoveUpClick);\n\n    this._refreshButtonStates();\n    return this;\n  }\n\n  /**\n   * Move the item down.\n   *\n   * @param item {PrimeElement|Element} the item to move.\n   * @returns {Reorder} This.\n   */\n  moveDown(item) {\n    if (item !== null) {\n      item.getNextSibling().insertBefore(item);\n    }\n\n    this._refreshButtonStates();\n\n    if (this.options.reorderCallback) {\n      this.options.reorderCallback(this, item);\n    }\n\n    return this;\n  }\n\n  /**\n   * Move the item up.\n   *\n   * @param item {PrimeElement|Element} the item to move.\n   * @returns {Reorder} This.\n   */\n  moveUp(item) {\n    if (item !== null) {\n      item.getPreviousSibling().insertAfter(item);\n    }\n\n    this._refreshButtonStates();\n\n    if (this.options.reorderCallback) {\n      this.options.reorderCallback(this, item);\n    }\n\n    return this;\n  }\n\n  /**\n   * Sets the selector which is used to identify the re-orderable items in the container.\n   *\n   * @param itemSelector {String} The item selector.\n   * @returns {Reorder} This.\n   */\n  withItemSelector(itemSelector) {\n    this.options.itemSelector = itemSelector;\n    return this;\n  }\n\n  /**\n   * Sets the selector which is used to identify the move down button within the re-orderable item.\n   *\n   * @param moveDownSelector {String} The move down button selector.\n   * @returns {Reorder} This.\n   */\n  withDownSelector(moveDownSelector) {\n    this.options.moveDownSelector = moveDownSelector;\n    return this;\n  }\n\n  /**\n   * Sets the selector which is used to identify the move up button within the re-orderable item.\n   *\n   * @param moveUpSelector {String} The move up button selector.\n   * @returns {Reorder} This.\n   */\n  withMoveUpSelector(moveUpSelector) {\n    this.options.moveUpSelector = moveUpSelector;\n    return this;\n  }\n\n  /**\n   * Sets a callback function to be used after an element changes order.\n   *\n   * @param reorderCallback {function} The optional callback function to call after an element changes order. This\n   *        function will be provided with the item that just moved.\n   * @returns {Reorder} This.\n   */\n  withReorderCallback(reorderCallback) {\n    this.options.reorderCallback = reorderCallback;\n    return this;\n  }\n\n  /**\n   * Set more than one option at a time by providing a map of key value pairs. This is considered an advanced\n   * method to set options on the widget. The caller needs to know what properties are valid in the options object.\n   *\n   * @param {Object} options Key value pair of configuration options.\n   * @returns {Reorder} This.\n   */\n  withOptions(options) {\n    if (!Utils.isDefined(options)) {\n      return this;\n    }\n\n    for (let option in options) {\n      if (options.hasOwnProperty(option)) {\n        this.options[option] = options[option];\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Redraw the state of this widget. This may be called if you have added additional items to be re-ordered.\n   *\n   * @returns {Reorder} This.\n   */\n  redraw() {\n    this._refreshButtonStates();\n    return this;\n  }\n\n  /* ===================================================================================================================\n   * Private methods\n   * ===================================================================================================================*/\n\n  /**\n   * Handle the Move Down click event.\n   *\n   * @param {Event} event The event.\n   * @private\n   */\n  _handleMoveDownClick(event) {\n    Utils.stopEvent(event);\n\n    const target = new PrimeElement(event.target);\n    const item = target.queryUp(this.options.itemSelector);\n    this.moveDown(item);\n  }\n\n  /**\n   * Handle the Move Up click event.\n   *\n   * @param {Event} event The event.\n   * @private\n   */\n  _handleMoveUpClick(event) {\n    Utils.stopEvent(event);\n\n    const target = new PrimeElement(event.target);\n    const item = target.queryUp(this.options.itemSelector);\n    this.moveUp(item);\n  }\n\n  /**\n   * Handle a 'refresh' to ensure the buttons are in the correct state.\n   * @private\n   */\n  _refreshButtonStates() {\n    const items = this.element.query(this.options.itemSelector);\n    if (items.length === 0) {\n      return;\n    }\n\n    if (items.length === 1) {\n      // Only one item, all buttons are disabled\n      items[0].queryFirst(this.options.moveDownSelector).addClass('disabled');\n      items[0].queryFirst(this.options.moveUpSelector).addClass('disabled');\n      items[0].setDataAttribute('index', 0);\n      return;\n    }\n\n    // More than one item\n    items.each(function(element, index) {\n      if (index === 0) {\n        // First element\n        element.queryFirst(this.options.moveUpSelector).addClass('disabled');\n        element.queryFirst(this.options.moveDownSelector).removeClass('disabled');\n      } else if (index === (items.length - 1)) {\n        // Last element\n        element.queryFirst(this.options.moveUpSelector).removeClass('disabled');\n        element.queryFirst(this.options.moveDownSelector).addClass('disabled');\n      } else {\n        // Enable these up and down buttons\n        element.queryFirst(this.options.moveDownSelector).removeClass('disabled');\n        element.queryFirst(this.options.moveUpSelector).removeClass('disabled');\n      }\n\n      // Set the index data attribute\n      element.setDataAttribute('index', index);\n    }.bind(this));\n  }\n\n  /**\n   * Set the initial options for this widget.\n   * @private\n   */\n  _setInitialOptions() {\n    // Defaults\n    this.options = {\n      itemSelector: 'data-item',\n      moveDownSelector: 'a.down',\n      moveUpSelector: 'a.up',\n      reorderCallback: null\n    };\n\n    const userOptions = Utils.dataSetToOptions(this.element);\n    for (let option in userOptions) {\n      if (userOptions.hasOwnProperty(option)) {\n        this.options[option] = userOptions[option];\n      }\n    }\n  }\n}\n\nexport {Reorder};\n","/*\n * Copyright (c) 2016-2017, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n'use strict';\n\nimport {Utils} from \"../Utils.js\";\nimport {PrimeElement} from \"../Document/PrimeElement.js\";\n\n//Some externs to make intellij linter shutup. :p\n/**\n * @external TouchEvent\n */\n\n/**\n * @property {Array} changedTouches\n * @name TouchEvent#changedTouches\n */\n\n/**\n * @class Touchable\n */\nclass Touchable {\n  /**\n   * Constructs a new Touchable object for the given element.\n   *\n   * @param {PrimeElement|Element|EventTarget} element The Prime Element for the Touchable widget.\n   * @param {Function} [eventPropagationHandler] A Function that handles how the event is handled for the touchstart,\n   * touchend, touchmove, and touchcancel events. This Function takes the event object as its only parameter.\n   * @constructor\n   */\n  constructor(element, eventPropagationHandler) {\n    Utils.bindAll(this);\n\n    this.element = PrimeElement.wrap(element);\n    this.eventPropagationHandler = eventPropagationHandler;\n  }\n\n  /**\n   * Destroys the Touchable Widget\n   */\n  destroy() {\n    this.element\n        .removeEventListener('touchstart', this._handleTouchStart)\n        .removeEventListener('touchmove', this._handleTouchMove)\n        .removeEventListener('touchcancel', this._handleTouchCancel)\n        .removeEventListener('touchend', this._handleTouchEnd)\n        .removeEventListenersByPattern(/Prime\\.Widgets\\.Touchable:.+/)\n  }\n\n  /**\n   * Initializes the widget by attaching all of the event listeners to the element.\n   *\n   * @returns {Touchable} This.\n   */\n  initialize() {\n    this.element\n        .addEventListener('touchstart', this._handleTouchStart)\n        .addEventListener('touchmove', this._handleTouchMove)\n        .addEventListener('touchcancel', this._handleTouchCancel)\n        .addEventListener('touchend', this._handleTouchEnd);\n    return this;\n  }\n\n  /**\n   * Provide a handler that will be called when a long press is detected.\n   *\n   * @param {Function} handler The event handler.\n   * @returns {Touchable} This\n   */\n  withLongPressHandler(handler) {\n    this.element.addEventListener('Touchable:longPress', handler);\n    return this;\n  }\n\n  /**\n   * Provide a handler that will be called when a move event is detected.\n   *\n   * @param {Function} handler The event handler.\n   * @returns {Touchable} This\n   */\n  withMoveHandler(handler) {\n    this.element.addEventListener('Touchable:move', handler);\n    return this;\n  }\n\n  /**\n   * Provide a handler that will be called when a long press is detected.\n   *\n   * @param {Function} handler The event handler.\n   * @returns {Touchable} This\n   */\n  withSwipeDownHandler(handler) {\n    this.element.addEventListener('Touchable:swipeDown', handler);\n    return this;\n  }\n\n  /**\n   * Provide a handler that will be called when a swipe left event is detected.\n   *\n   * @param {Function} handler The event handler.\n   * @returns {Touchable} This\n   */\n  withSwipeLeftHandler(handler) {\n    this.element.addEventListener('Touchable:swipeLeft', handler);\n    return this;\n  }\n\n  /**\n   * Provide a handler that will be called when a swipe right event is detected.\n   *\n   * @param {Function} handler The event handler.\n   * @returns {Touchable} This\n   */\n  withSwipeRightHandler(handler) {\n    this.element.addEventListener('Touchable:swipeRight', handler);\n    return this;\n  }\n\n  /**\n   * Provide a handler that will be called when a swipe up event is detected.\n   *\n   * @param {Function} handler The event handler.\n   * @returns {Touchable} This\n   */\n  withSwipeUpHandler(handler) {\n    this.element.addEventListener('Touchable:swipeUp', handler);\n    return this;\n  }\n\n  /* ===================================================================================================================\n   * Private methods\n   * ===================================================================================================================*/\n\n  /**\n   * Collects all of the touch data at the end of the touch and calculates the distances and times.\n   *\n   * @param {TouchEvent} event The TouchEvent.\n   * @private\n   */\n  _collectTouchData(event) {\n    const touchPoints = event.changedTouches.length;\n    if (touchPoints > 1) {\n      return;\n    }\n\n    const touch = event.changedTouches[0];\n    this.elapsedTime = new Date().getTime() - this.touchStarted;\n    this.touchEndX = touch.pageX;\n    this.touchEndY = touch.pageY;\n    this.touchX = this.touchStartX - this.touchEndX;\n    this.touchY = this.touchStartY - this.touchEndY;\n  }\n\n  /**\n   * Called when all processing is finished and the handlers are called based on direction and time of the touches.\n   *\n   * @private\n   */\n  _finished() {\n    // Make sure this was a swipe\n    const event = {\n      elapsedTime: this.elapsedTime,\n      touchStartX: this.touchStartX,\n      touchStartY: this.touchStartY,\n      touchEndX: this.touchEndX,\n      touchEndY: this.touchEndY,\n      touchX: this.touchX,\n      touchY: this.touchY,\n      element: this.element,\n      target: this.element.domElement\n    };\n    event.swipe = Math.abs(event.touchX) > 50 || Math.abs(event.touchY) > 50;\n    event.swipeX = event.swipe && Math.abs(event.touchX) > Math.abs(event.touchY);\n    event.swipeY = event.swipe && !event.swipeX;\n    event.longPress = !event.swipe && event.elapsedTime > 500;\n\n    if (event.longPress) {\n      this.element.fireCustomEvent('Touchable:longPress', event);\n    } else if (event.swipeX && event.touchX > 0) {\n      this.element.fireCustomEvent('Touchable:swipeLeft', event);\n    } else if (event.swipeX) {\n      this.element.fireCustomEvent('Touchable:swipeRight', event);\n    } else if (event.swipeY && event.touchY > 0) {\n      this.element.fireCustomEvent('Touchable:swipeUp', event);\n    } else if (event.swipeY) {\n      this.element.fireCustomEvent('Touchable:swipeDown', event);\n    }\n  }\n\n  /**\n   * Handle the touch cancel event.\n   *\n   * @param {TouchEvent} event The touch event.\n   * @private\n   */\n  _handleTouchCancel(event) {\n    this._collectTouchData(event);\n    this._finished();\n    if (Utils.isDefined(this.eventPropagationHandler)) {\n      this.eventPropagationHandler(event);\n    }\n  }\n\n  /**\n   * Handle the touch end event.\n   *\n   * @param {TouchEvent} event The touch event.\n   * @private\n   */\n  _handleTouchEnd(event) {\n    this._collectTouchData(event);\n    this._finished();\n    if (Utils.isDefined(this.eventPropagationHandler)) {\n      this.eventPropagationHandler(event);\n    }\n  }\n\n  /**\n   * Handle the touch move event.\n   *\n   * @param {TouchEvent} event The touch event.\n   * @private\n   */\n  _handleTouchMove(event) {\n    this.element.fireEvent('Touchable:move', event);\n    if (Utils.isDefined(this.eventPropagationHandler)) {\n      this.eventPropagationHandler(event);\n    }\n  }\n\n  /**\n   * Handle the touch start event.\n   *\n   * @param {TouchEvent} event The touch event.\n   * @private\n   */\n  _handleTouchStart(event) {\n    const touchPoints = event.changedTouches.length;\n    if (touchPoints > 1) {\n      if (Utils.isDefined(this.eventPropagationHandler)) {\n        this.eventPropagationHandler(event);\n      }\n\n      return;\n    }\n\n    const touch = event.changedTouches[0];\n    this.touchStarted = new Date().getTime();\n    this.touchStartX = touch.pageX;\n    this.touchStartY = touch.pageY;\n    if (Utils.isDefined(this.eventPropagationHandler)) {\n      this.eventPropagationHandler(event);\n    }\n  }\n}\n\nexport {Touchable};\n","/*\n * Copyright (c) 2015-2017, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n'use strict';\n\nimport {PrimeDocument} from \"../PrimeDocument.js\";\nimport {PrimeElement} from \"../Document/PrimeElement.js\";\nimport {Touchable} from \"./Touchable.js\";\nimport {Utils} from \"../Utils.js\";\n\nclass SideMenu {\n  /**\n   * Constructs the side menu.\n   *\n   * @param {PrimeElement|Element} button The button element that is used to open the side menu.\n   * @param {PrimeElement|Element} sideMenuElement The side menu element that will be \"hidden\" and \"show\".\n   * @constructor\n   */\n  constructor(button, sideMenuElement) {\n    Utils.bindAll(this);\n    this.sideMenu = PrimeElement.wrap(sideMenuElement);\n    this.button = PrimeElement.wrap(button);\n    this._setInitialOptions();\n  }\n\n  /**\n   * Closes the side menu.\n   *\n   * @returns {SideMenu} This.\n   */\n  close() {\n    if (!PrimeDocument.bodyElement.hasClass(this.options.closedClass)) {\n      PrimeDocument.bodyElement.addClass(this.options.closedClass);\n    }\n\n    if (PrimeDocument.bodyElement.hasClass(this.options.openClass)) {\n      PrimeDocument.bodyElement.removeClass(this.options.openClass);\n    }\n\n    return this;\n  }\n\n  /**\n   * Initializes the widget by attaching the event listener to the menu button.\n   *\n   * @returns {SideMenu}\n   */\n  initialize() {\n    this.button.addEventListener('click', this._handleClickEvent);\n    return this;\n  }\n\n  /**\n   * @returns {boolean} True if the side menu is currently open.\n   */\n  isOpen() {\n    return this.sideMenu.getLeft() >= 0;\n    // return PrimeDocument.bodyElement.hasClass('prime-side-menu-open') || !PrimeDocument.bodyElement.hasClass('prime-side-menu-closed');\n  }\n\n  /**\n   * Opens the mobile nav.\n   * @returns {SideMenu} This.\n   */\n  open() {\n    if (PrimeDocument.bodyElement.hasClass(this.options.closedClass)) {\n      PrimeDocument.bodyElement.removeClass(this.options.closedClass);\n    }\n\n    if (!PrimeDocument.bodyElement.hasClass(this.options.openClass)) {\n      PrimeDocument.bodyElement.addClass(this.options.openClass);\n    }\n\n    this.touchable = new Touchable(PrimeDocument.bodyElement).withSwipeLeftHandler(this._handleSwipeLeft);\n    return this;\n  }\n\n  /**\n   * Set more than one option at a time by providing a map of key value pairs. This is considered an advanced\n   * method to set options on the widget. The caller needs to know what properties are valid in the options object.\n   *\n   * @param {Object} options Key value pair of configuration options.\n   * @returns {SideMenu} This.\n   */\n  withOptions(options) {\n    if (!Utils.isDefined(options)) {\n      return this;\n    }\n\n    for (let option in options) {\n      if (options.hasOwnProperty(option)) {\n        this.options[option] = options[option];\n      }\n    }\n    return this;\n  }\n\n  /* ===================================================================================================================\n   * Private methods\n   * ===================================================================================================================*/\n\n  /**\n   * Handles the click event on the side menu button and calls either the open or close function.\n   *\n   * @private\n   */\n  _handleClickEvent(event) {\n    Utils.stopEvent(event);\n    if (this.isOpen()) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n\n  /**\n   * Handles the synthetic swipe left event that Prime.js provides.\n   *\n   * @private\n   */\n  _handleSwipeLeft() {\n    if (this.isOpen()) {\n      this.close();\n    }\n\n    if (Utils.isDefined(this.touchable)) {\n      this.touchable.destroy();\n      this.touchable = null;\n    }\n  }\n\n  /**\n   * Set the initial options for this widget.\n   * @private\n   */\n  _setInitialOptions() {\n    // Defaults\n    this.options = {\n      closedClass: 'prime-side-menu-closed',\n      openClass: 'prime-side-menu-open'\n    };\n\n    const userOptions = Utils.dataSetToOptions(this.sideMenu);\n    for (let option in userOptions) {\n      if (userOptions.hasOwnProperty(option)) {\n        this.options[option] = userOptions[option];\n      }\n    }\n  }\n}\n\nexport {SideMenu}\n","/*\n * Copyright (c) 2017, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n'use strict';\n\nconst PrimeStorage = {\n  /**\n   * True if local storage is supported.\n   * @type {boolean} true if local storage is supported. Local in this case being used to indicate either type 'local' or 'session'.\n   */\n  supported: typeof(Storage) !== 'undefined',\n\n  /**\n   * Set an object into session storage.\n   * @param key {string} the key to store the object.\n   * @param object {object} the object to store.\n   */\n  setSessionObject: function(key, object) {\n    PrimeStorage._setObject(sessionStorage, key, object);\n  },\n\n  /**\n   * Retrieve an object from session storage.\n   * @param key {string} the key that was used to store the object.\n   * @return {object} the stored object or null if it does not exist or local storage is not supported.\n   */\n  getSessionObject: function(key) {\n    return PrimeStorage._getObject(sessionStorage, key);\n  },\n\n  /**\n   * Set an object into local storage storage.\n   * @param key {string} the key to store the object.\n   * @param object {object} the object to store.\n   */\n  setLocalObject: function(key, object) {\n    PrimeStorage._setObject(localStorage, key, object);\n  },\n\n  /**\n   * Retrieve an object from local storage.\n   * @param key {string} the key that was used to store the object.\n   * @return {object} the stored object or null if it does not exist or local storage is not supported.\n   */\n  getLocalObject: function(key) {\n    return PrimeStorage._getObject(localStorage, key);\n  },\n\n  /* ===================================================================================================================\n   * Private methods\n   * ===================================================================================================================*/\n\n  _getObject: function(storage, key) {\n    if (PrimeStorage.supported) {\n      const item = storage.getItem(key);\n      if (item !== null) {\n        return JSON.parse(item);\n      }\n    }\n\n    return null;\n  },\n\n  _setObject: function(storage, key, object) {\n    if (PrimeStorage.supported) {\n      storage.setItem(key, JSON.stringify(object));\n    }\n  }\n};\n\nexport {PrimeStorage};\n","/*\n * Copyright (c) 2014-2017, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n'use strict';\n\nimport {PrimeElement} from \"../Document/PrimeElement.js\";\nimport {Utils} from \"../Utils.js\";\nimport {PrimeStorage} from \"../Storage.js\";\nimport {PrimeDocument} from \"../PrimeDocument.js\";\n\nclass SplitButton {\n  /**\n   * Constructs a new SplitButton object for the given element.\n   *\n   * The markup must be a specific structure in order for the SplitButton to remember the last action the user took\n   * as well as show and hide the menu of items.\n   *\n   * Here's the format for the elements.\n   *\n   * <pre>\n   *   &lt;div class=\"split-button\"&gt;\n   *     &lt;a href=\"#\"&gt;Loading... &lt;/a&gt;\n   *     &lt;button type=\"button\"&gt;&lt;/button&gt;\n   *     &lt;div type=\"menu\"&gt;\n   *       &lt;a class=\"item\" href=\"/admin/foo/add/\"&gt;Add&lt;/a&gt;\n   *       &lt;a class=\"item\" href=\"/admin/foo/delete/\"&gt;Delete&lt;/a&gt;\n   *     &lt;/div&gt;\n   *   &lt;/ul&gt;\n   * </pre>\n   *\n   * Also, it is important to understand how to attach event listeners to the SplitButton. You cannot attach them to\n   * the individual menu items since those will never be clicked. Instead, you must attach them to the div at the top\n   * and handle all the events from inside. This is due to how the split button changes the main button based on the\n   * action the user took last.\n   *\n   * @param element {PrimeElement|Element|EventTarget} The element to transform into a split button.\n   * @constructor\n   */\n  constructor(element) {\n    Utils.bindAll(this);\n\n    this.element = PrimeElement.wrap(element);\n    this.currentAction = this.element.queryFirst('a');\n    if (this.currentAction === null) {\n      throw new TypeError('The SplitButton element must contain an <a> that is the currently selected action.');\n    }\n    this.loading = this.currentAction;\n\n    this.button = this.element.queryFirst('button');\n    if (this.button === null) {\n      throw new TypeError('The SplitButton element must contain a <button> that is used to open it.');\n    }\n\n    this.menu = this.element.queryFirst('.menu');\n    if (this.menu === null) {\n      throw new TypeError('The SplitButton element must contain a <div class=\"menu\"> that contains the menu items.');\n    }\n\n    this.items = this.menu.query('.item');\n    if (this.items.length === 0) {\n      throw new TypeError('The SplitButton element must contain at least one item.');\n    }\n\n    this.actionIndex = null;\n    this.options = {};\n    this._setInitialOptions();\n  }\n\n  /**\n   * Removes the event listeners.\n   */\n  destroy() {\n    this.button.removeEventListener('click', this._handleButtonClick);\n  }\n\n  /**\n   * Initializes the SplitButton by setting up all the event listeners and managing the default action or the last action\n   * that the user took.\n   */\n  initialize() {\n    this.button.addEventListener('click', this._handleButtonClick);\n    this.items.each(item => item.addEventListener('click', this._handleItemClick));\n    this.redraw();\n    return this;\n  }\n\n  redraw() {\n    // Load the last action (if any)\n    let actionId = null;\n    if (PrimeStorage.supported && this.options.localStorageKey !== null) {\n      actionId = PrimeStorage.getSessionObject(this.options.localStorageKey);\n      if (actionId !== null) {\n        this.selectAction(actionId);\n      }\n    }\n\n    // If no action is selected from local storage, select the default\n    if (actionId === null) {\n      this.selectDefaultAction();\n    }\n\n    return this;\n  }\n\n  selectAction(actionId) {\n    const item = PrimeDocument.queryById(actionId);\n    if (item !== null) {\n      let classes = '';\n      if (this.loading !== null) {\n        classes = this.loading.getAttribute('class');\n        this.loading.removeFromDOM();\n        this.loading = null;\n      } else {\n        classes = this.currentAction.getAttribute('class');\n        this.currentAction.setAttribute('class', this.currentAction.getAttribute('data-original-class'));\n        this.currentAction.removeFromDOM();\n        this.currentAction.prependTo(this.menu);\n      }\n\n      item.setAttribute('data-original-class', item.getAttribute('class'));\n      item.setAttribute('class', classes);\n      item.removeFromDOM();\n      item.prependTo(this.element);\n      this.currentAction = item;\n    } else {\n      // This shouldn't infinitely recurse because that method always finds something\n      this.selectDefaultAction();\n    }\n\n    // this.currentAction.setAttribute('href', item.getAttribute('href'));\n    // this.currentAction.setHTML(item.getHTML());\n    return this;\n  }\n\n  selectDefaultAction() {\n    // Find the default\n    let actionId = null;\n    for (let i = 0; i < this.items.length; i++) {\n      if (this.items[i].hasClass('default')) {\n        actionId = this.items[i].getId();\n        break;\n      }\n    }\n\n    // Fall back if it wasn't found\n    if (actionId === null) {\n      actionId = this.items[0].getId();\n    }\n\n    // Select the default (or first item)\n    if (actionId !== null) {\n      this._saveLastAction(actionId);\n      this.selectAction(actionId);\n    }\n\n    return this;\n  }\n\n  withLocalStorageKey(localStorageKey) {\n    this.options.localStorageKey = localStorageKey;\n    return this;\n  }\n\n  withOptions(options) {\n    if (!Utils.isDefined(options)) {\n      return this;\n    }\n\n    for (let option in options) {\n      if (options.hasOwnProperty(option)) {\n        this.options[option] = options[option];\n      }\n    }\n\n    return this;\n  }\n\n  /* ===================================================================================================================\n   * Private methods\n   * ===================================================================================================================*/\n\n  /**\n   * Handles the button click event.\n   * @private\n   */\n  _handleButtonClick(event) {\n    Utils.stopEvent(event);\n    if (this.menu.isVisible()) {\n      this.menu.hide();\n    } else {\n      this.menu.show();\n    }\n  }\n\n  /**\n   * Handles the item click event to update the last action in local storage (if enabled).\n   * @private\n   */\n  _handleItemClick(event) {\n    for (let i = 0; i < this.items.length; i++) {\n      if (this.items[i].domElement === event.target) {\n        let actionId = this.items[i].getId();\n        this._saveLastAction(actionId);\n        this.selectAction(actionId);\n        this.menu.hide();\n        break;\n      }\n    }\n  }\n\n  _saveLastAction(actionId) {\n    if (PrimeStorage.supported && this.options.localStorageKey !== null) {\n      PrimeStorage.setSessionObject(this.options.localStorageKey, actionId);\n    }\n  }\n\n  /**\n   * Set the initial options for this widget.\n   * @private\n   */\n  _setInitialOptions() {\n    // Defaults\n    this.options = {\n      localStorageKey: null\n    };\n\n    const userOptions = Utils.dataSetToOptions(this.element);\n    for (let option in userOptions) {\n      if (userOptions.hasOwnProperty(option)) {\n        this.options[option] = userOptions[option];\n      }\n    }\n  }\n}\n\nexport {SplitButton};\n","/*\n * Copyright (c) 2017-2018, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n'use strict';\n\nimport {Utils} from \"../Utils.js\";\nimport {PrimeElement} from \"../Document/PrimeElement.js\";\nimport {PrimeStorage} from \"../Storage.js\";\n\nclass Table {\n  /**\n   * Constructs a new Table object for the given table element.\n   *\n   * @param {PrimeElement|Element} element The table element.\n   * @constructor\n   */\n  constructor(element) {\n    Utils.bindAll(this);\n\n    this.column = null;\n    this.columnIndex = 0;\n    this.sortAscending = true;\n\n    this.element = PrimeElement.wrap(element);\n    this.thead = this.element.queryFirst('thead');\n    this.tbody = this.element.queryFirst('tbody');\n\n    if (!this.element.is('table')) {\n      throw new TypeError('The element you passed in is not a table element.');\n    }\n\n    this._setInitialOptions();\n  }\n\n  /**\n   * Initializes the table widget.\n   *\n   * @returns {Table} This.\n   */\n  initialize() {\n    // Sortable by default unless it is disabled\n    if (this.element.getDataAttribute('sortable') !== 'false') {\n      this._initializeSort();\n    }\n\n    // Initialize the checkbox handling\n    this.selectAll = this.element.queryFirst('thead > tr > th input[type=\"checkbox\"]');\n    if (this.selectAll !== null) {\n      this.selectAll.addEventListener('change', this._handleSelectAllChange);\n    }\n\n    this.element.query('tbody > tr > td input[type=\"checkbox\"]').addEventListener('click', this._handleCheckboxEvent);\n    this.checkedCount = 0;\n    this.numberofCheckboxes = this.element.query('tbody td input[type=\"checkbox\"]').length;\n\n    return this;\n  }\n\n  /**\n   * Sort the table.\n   */\n  sort() {\n    this._clearSortIndicators();\n\n    if (this.column.hasClass('sort-up')) {\n      this.column.removeClass('sort-up').addClass('sort-down');\n      this.sortAscending = false;\n    } else if (this.column.hasClass('sort-down')) {\n      this.column.removeClass('sort-down').addClass('sort-up');\n      this.sortAscending = true;\n    } else {\n      this.column.addClass('sort-up');\n      this.sortAscending = true;\n    }\n\n    // Collect the values to sort\n    const rows = [];\n    this.tbody.query('tr').each(function(element) {\n      rows.push(element);\n    });\n\n    rows.sort(this._comparator);\n    let i = 0;\n    const length = rows.length;\n    if (this.sortAscending) {\n      for (i = 0; i <  length; i++) {\n        this.tbody.appendElement(rows[i]);\n      }\n    } else {\n      for (i = length; i > 0; i--) {\n        this.tbody.appendElement(rows[i - 1]);\n      }\n    }\n\n    // Save current sorted column state in local storage.\n    if (PrimeStorage.supported && this.options.localStorageKey !== null) {\n      const data = {\n        columnIndex: this.columnIndex,\n        sortAscending: this.sortAscending\n      };\n      PrimeStorage.setSessionObject(this.options.localStorageKey, data);\n    }\n  }\n\n  /**\n   * Sets a callback on a checkbox event.\n   *\n   * @param {function} callback The callback function\n   * @returns {Table} This.\n   */\n  withCheckEventCallback(callback) {\n    this.options.checkEventCallback = callback;\n    return this;\n  }\n\n  /**\n   * Enables local storage of the sorted column. This key is required to enable local storage of the sorted column.\n   *\n   * @param {String} key The local storage key.\n   * @returns {Table} This.\n   */\n  withLocalStorageKey(key) {\n    this.options.localStorageKey = key;\n    return this;\n  }\n\n  /**\n   * Set more than one option at a time by providing a map of key value pairs. This is considered an advanced\n   * method to set options on the widget. The caller needs to know what properties are valid in the options object.\n   *\n   * @param {Object} options Key value pair of configuration options.\n   * @returns {Table} This.\n   */\n  withOptions(options) {\n    if (!Utils.isDefined(options)) {\n      return this;\n    }\n\n    for (let option in options) {\n      if (options.hasOwnProperty(option)) {\n        this.options[option] = options[option];\n      }\n    }\n    return this;\n  }\n\n  /* ===================================================================================================================\n   * Private methods\n   * ===================================================================================================================*/\n\n  /**\n   * Remove the ascending and descending sort classes on every column except the current column being sorted.\n   * @private\n   */\n  _clearSortIndicators() {\n    this.thead.query('th').each((function(element) {\n      if (element.domElement !== this.column.domElement) {\n        element.removeClass('sort-up sort-down');\n      }\n    }).bind(this));\n  }\n\n  /**\n   * Sort function to be used by the .sort() method.\n   * @param a The first row to compare\n   * @param b The second row to compare\n   * @returns {number}\n   * @private\n   */\n  _comparator(a, b) {\n    const sortType = this.thead.query('th')[this.columnIndex].getDataAttribute('sortType') || 'string';\n    if (sortType !== 'string' && sortType !== 'number') {\n      throw new Error('Unsupported sort type. [string] or [number] are the two supported sort types.');\n    }\n\n    const cell1 = a.query('td')[this.columnIndex];\n    const cell2 = b.query('td')[this.columnIndex];\n\n    const sortValue1 = cell1.getDataAttribute('sortValue');\n    const sortValue2 = cell2.getDataAttribute('sortValue');\n\n    // Prefer the data-sort-value if provided\n    let value1 = sortValue1 || cell1.getTextContent().toLowerCase();\n    let value2 = sortValue2 || cell2.getTextContent().toLowerCase();\n\n    if (sortType === 'string') {\n      return value1.localeCompare(value2);\n    } else {\n      value1 = this._toNumber(value1);\n      value2 = this._toNumber(value2);\n\n      if (value1 < value2) {\n        return -1;\n      }\n\n      if (value1 > value2) {\n        return 1;\n      }\n\n      return 0;\n    }\n  }\n\n  // noinspection JSMethodCanBeStatic\n  /**\n   * Return the column index where 0 is the first column in the table.\n   * @param column {PrimeElement} the column to determine the index of\n   * @returns {number} a positive integer representing the index of the column in the table.\n   * @private\n   */\n  _getColumnIndex(column) {\n    let columnIndex = 0;\n    let current = column;\n    let previous = column;\n    while (previous !== null) {\n      previous = current.getPreviousSibling();\n      current = previous;\n      columnIndex++;\n    }\n\n    return columnIndex - 1;\n  }\n\n  _handleCheckboxEvent(event) {\n    const target = new PrimeElement(event.currentTarget);\n    const currentCheckedCount = this.checkedCount;\n    this.checkedCount = this.checkedCount + (target.isChecked() ? 1 : -1);\n\n    if (this.selectAll !== null) {\n      if (currentCheckedCount === this.numberofCheckboxes && this.numberofCheckboxes !== this.checkedCount) {\n        this.selectAll.setChecked(false);\n      } else if (currentCheckedCount !== this.numberofCheckboxes && this.numberofCheckboxes === this.checkedCount) {\n        this.selectAll.setChecked(true);\n      }\n    }\n\n    if (this.options.checkEventCallback !== null) {\n      this.options.checkEventCallback({\n        checkedCount: this.checkedCount\n      });\n    }\n  }\n\n  _handleSelectAllChange() {\n    if (this.selectAll.isChecked()) {\n      this.element.query('tbody tr > td input[type=\"checkbox\"]').each(function(e) {\n        if (!e.isChecked()) {\n          e.setChecked(true);\n          this.checkedCount++;\n        }\n      }.bind(this));\n    } else {\n      this.element.query('tbody tr > td input[type=\"checkbox\"]').each(function(e) {\n        if (e.isChecked()) {\n          e.setChecked(false);\n          this.checkedCount--;\n        }\n      }.bind(this));\n    }\n\n    if (this.options.checkEventCallback !== null) {\n      this.options.checkEventCallback({\n        checkedCount: this.checkedCount\n      });\n    }\n  }\n\n  /**\n   * Handle the click event on the sortable column.\n   * @param event {MouseEvent} the click event\n   * @private\n   */\n  _handleSortableColumnClick(event) {\n    Utils.stopEvent(event);\n    const target = new PrimeElement(event.currentTarget);\n    this.column = target;\n    this.columnIndex = this._getColumnIndex(target);\n\n    this.sort();\n  }\n\n  /**\n   * Add the click event listener to the column unless it matches the ignore selector.\n   * @param column {PrimeElement} the column element to initialize.\n   * @private\n   */\n  _initializeColumn(column) {\n    if (!column.is('[data-sortable=\"false\"]') && column.queryFirst('input[type=\"checkbox\"]') === null) {\n      column.addClass('sortable').addEventListener('click', this._handleSortableColumnClick);\n    }\n  }\n\n  _initializeSort() {\n    this.thead.query('th').each(this._initializeColumn);\n\n    if (PrimeStorage.supported && this.options.localStorageKey !== null) {\n      const state = PrimeStorage.getSessionObject(this.options.localStorageKey);\n      if (state !== null) {\n        this.columnIndex = state.columnIndex;\n        this.sortAscending = state.sortAscending;\n\n        this.column = this.thead.query('th')[this.columnIndex];\n        if (this.sortAscending) {\n          this.column.addClass('sort-down');\n        } else {\n          this.column.addClass('sort-up');\n        }\n\n        this.sort();\n      }\n    }\n  }\n\n  /**\n   * Set the initial options for this widget.\n   * @private\n   */\n  _setInitialOptions() {\n    // Defaults\n    this.options = {\n      localStorageKey: null,\n      checkEventCallback: null\n    };\n\n    const userOptions = Utils.dataSetToOptions(this.element);\n    for (let option in userOptions) {\n      if (userOptions.hasOwnProperty(option)) {\n        this.options[option] = userOptions[option];\n      }\n    }\n  }\n\n  // noinspection JSMethodCanBeStatic\n  _toNumber(value) {\n    const number = Number(value);\n    if (isNaN(value)) {\n      console.error(new Error('Expected value [' + value + '] to be a number.'));\n      return value;\n    }\n    return number;\n  }\n}\n\nexport {Table};\n","/*\n * Copyright (c) 2015-2018, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n'use strict';\n\nimport {Utils} from \"../Utils.js\";\nimport {PrimeElement} from \"../Document/PrimeElement.js\";\nimport {PrimeDocument} from \"../PrimeDocument.js\";\nimport {PrimeStorage} from \"../Storage.js\";\nimport {PrimeRequest} from \"../PrimeRequest.js\";\n\nclass Tabs {\n  /**\n   * Constructs a new Tabs object for the given ul element.\n   *\n   * @param {PrimeElement|Element|EventTarget} element The ul element to build the tab widget from\n   * @constructor\n   */\n  constructor(element) {\n    Utils.bindAll(this);\n\n    this.element = PrimeElement.wrap(element);\n    if (this.element.getTagName().toLowerCase() === 'ul') {\n      this.tabsContainer = this.element;\n    } else {\n      this.tabsContainer = this.element.queryFirst('ul');\n    }\n\n    if (this.tabsContainer === null) {\n      throw new TypeError('Tabs requires a ul element. The passed element does not contain a ul element');\n    }\n\n    this._setInitialOptions();\n    this.tabContents = {};\n    this.tabs = {};\n    this.tabArray = [];\n    this.selectedTab = null;\n  }\n\n  /**\n   * Destroys the Tabs widget\n   */\n  destroy() {\n    this.tabsContainer.query('a').each(function(a) {\n      a.removeEventListener('click', this._handleClick);\n    }.bind(this));\n\n    for (let i = 0; i < this.tabs.length; i++) {\n      this.tabs[i].removeClass(this.options.tabContentClass);\n    }\n  }\n\n  /**\n   * Hides the tab for the given Id.\n   *\n   * @param id The Id of the tab to hide.\n   */\n  hideTab(id) {\n    const tab = this.tabs[id];\n    tab.hide();\n    this.redraw();\n  }\n\n  /**\n   * Initializes the Tabs widget. Call this after you have set all the initial options.\n   *\n   * @returns {Tabs} This.\n   */\n  initialize() {\n    this.tabsContainer.query('li:not(.disabled)').each(function(tab) {\n      const a = tab.queryFirst('a').addEventListener('click', this._handleClick);\n      const dataSet = tab.getDataSet();\n\n      const href = a.getAttribute('href');\n      const isAnchor = href.charAt(0) === '#';\n      if (isAnchor) {\n        dataSet.tabId = href.substring(1);\n        dataSet.tabUrl = '';\n      } else {\n        dataSet.tabId = href;\n        dataSet.tabUrl = href;\n      }\n\n      this.tabs[dataSet.tabId] = tab;\n      this.tabArray.push(tab);\n\n      let content = PrimeDocument.queryById(dataSet.tabId);\n      if (content === null && isAnchor) {\n        throw new Error('A div is required with the following ID [' + dataSet.tabId + ']');\n      } else if (content === null) {\n        content = PrimeDocument.newElement('<div>').insertAfter(this.element).setAttribute('id', href);\n      }\n\n      content.hide();\n\n      content.addClass(this.options.tabContentClass);\n      this.tabContents[dataSet.tabId] = content;\n    }.bind(this));\n\n    if (this.options.deepLinkingEnabled) {\n      const tabId = window.location.hash.replace(/^#/, '');\n      if (Utils.isDefined(tabId) && Utils.isDefined(this.tabs[tabId])) {\n        this.selectTab(tabId);\n      }\n    }\n\n    this.redraw();\n    return this;\n  }\n\n  /**\n   * Re-applies the first-child, last-child, and active classes based on the current state of the tabs. If there\n   * is no tab that is active, this also selects the first tab that is visible.\n   */\n  redraw() {\n    let firstVisible = null;\n    let lastVisible = null;\n    let selectNew = false;\n    let noneActive = true;\n    for (let i = 0; i < this.tabArray.length; i++) {\n      if (this.tabArray[i].isVisible()) {\n        if (firstVisible === null) {\n          firstVisible = this.tabArray[i];\n        }\n\n        lastVisible = this.tabArray[i];\n\n        if (this.tabArray[i].hasClass('selected')) {\n          noneActive = false;\n        }\n      } else if (this.tabArray[i].hasClass('selected')) {\n        selectNew = true;\n      }\n\n      this.tabArray[i].removeClass('first-visible-tab');\n      this.tabArray[i].removeClass('last-visible-tab');\n    }\n\n    firstVisible.addClass('first-visible-tab');\n    lastVisible.addClass('last-visible-tab');\n\n    let tabId = null;\n    if (selectNew || noneActive) {\n      if (PrimeStorage.supported && this.options.localStorageKey !== null) {\n        const state = PrimeStorage.getSessionObject(this.options.localStorageKey);\n        if (state !== null) {\n          tabId = state.tabId;\n        }\n      }\n\n      // If no tabId was found or the tab is not currently visible, select the first visible\n      if (tabId === null || !this.tabs[tabId] || !this.tabs[tabId].isVisible()) {\n        tabId = firstVisible.getDataSet().tabId;\n      }\n\n      this.selectTab(tabId);\n    }\n\n    // If error class handling was enabled, add the error class to the tab and set focus\n    if (this.options.errorClass) {\n      for (tabId in this.tabContents) {\n        if (this.tabContents.hasOwnProperty(tabId)) {\n          const errorElement = this.tabContents[tabId].queryFirst('.' + this.options.errorClass);\n          if (errorElement !== null) {\n            this.tabs[tabId].queryFirst('a').addClass(this.options.errorClass);\n            this.selectTab(tabId);\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Select the active tab. Sets the active class on the li and shows only the corresponding tab content.\n   *\n   * @param id The Id of the tab to select.\n   */\n  selectTab(id) {\n    if (this.selectedTab !== null && this.selectedTab.getDataSet().tabId === id) {\n      return;\n    }\n\n    for (const tabId in this.tabs) {\n      if (this.tabs.hasOwnProperty(tabId)) {\n        this.tabs[tabId].removeClass('selected');\n      }\n    }\n\n    this.tabs[id].addClass('selected');\n    this.selectedTab = this.tabs[id];\n    for (const tabId in this.tabContents) {\n      if (this.tabContents.hasOwnProperty(tabId) && tabId === id) {\n        this.tabContents[tabId].show('block');\n        if (this.options.selectCallback) {\n          this.options.selectCallback(this.tabs[tabId], this.tabContents[tabId]);\n        }\n      } else {\n        this.tabContents[tabId].hide();\n      }\n    }\n\n    // Save current selected tab state in local storage. The JSON object isn't necessary at the moment,\n    // but we can tack on other properties as needed for additional state in the future.\n    if (PrimeStorage.supported && this.options.localStorageKey !== null) {\n      const data = {\n        tabId: id\n      };\n      PrimeStorage.setSessionObject(this.options.localStorageKey, data);\n    }\n\n    const ajaxURL = this.selectedTab.getDataSet().tabUrl;\n    if (ajaxURL !== '') {\n      this.selectedTab.addClass('loading');\n      this.tabContents[id].setHTML('');\n      this.tabContents[id].addClass('loading');\n      new PrimeRequest(ajaxURL, 'GET')\n          .withSuccessHandler(this._handleAJAXResponse)\n          .withErrorHandler(this._handleAJAXResponse)\n          .go();\n    }\n  }\n\n  /**\n   * Shows the tab for the given Id.\n   *\n   * @param {String} id The Id of the tab to hide.\n   */\n  showTab(id) {\n    this.tabs[id].show();\n    this.redraw();\n  }\n\n  /**\n   * Adds a callback for AJAX calls. This is invoked after the AJAX load completes and the HTML is inserted into the\n   * DOM. The function is passed the container for the tab that was selected.\n   *\n   * @param {Function} callback The callback function.\n   * @returns {Tabs} This Tabs.\n   */\n  withAJAXCallback(callback) {\n    this.options.ajaxCallback = callback;\n    return this;\n  }\n\n  /**\n   * Disable the default behavior of allowing a deep link provided on the URL to set the default tab during render.\n   *\n   * @returns {Tabs} This Tabs.\n   */\n  withDeepLinkingDisabled() {\n    this.options.deepLinkingEnabled = false;\n    return this;\n  }\n\n  /**\n   * Enable error class handling. When this option is used, if the specified error class is found on any element\n   * in the tab content the same error class will be added to the tab to identify the tab contains errors.\n   *\n   * @returns {Tabs} This Tabs.\n   */\n  withErrorClassHandling(errorClass) {\n    this.options.errorClass = errorClass;\n    return this;\n  }\n\n  /**\n   * Enables local storage of the currently selected tab. If the user navigates away from the page and back, the same\n   * tab will be selected. This key is how the selected tab is stored in local storage and by setting a key you also\n   * enable this feature.\n   *\n   * @param {?String} key The local storage key.\n   * @returns {Tabs} This Tabs.\n   */\n  withLocalStorageKey(key) {\n    this.options.localStorageKey = key;\n    return this;\n  }\n\n  /**\n   * Set more than one option at a time by providing a map of key value pairs. This is considered an advanced\n   * method to set options on the widget. The caller needs to know what properties are valid in the options object.\n   *\n   * @param {Object} options Key value pair of configuration options.\n   * @returns {Tabs} This Tabs.\n   */\n  withOptions(options) {\n    if (!Utils.isDefined(options)) {\n      return this;\n    }\n\n    for (let option in options) {\n      if (options.hasOwnProperty(option)) {\n        this.options[option] = options[option];\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Specifies a callback function that is called whenever tabs are changed.\n   *\n   * @param {?Function} callback The callback function.\n   * @returns {Tabs} This Tabs.\n   */\n  withSelectCallback(callback) {\n    this.options.selectCallback = callback;\n    return this;\n  }\n\n  /**\n   * Sets the class name for the tab content elements.\n   *\n   * @param className {String} The class name.\n   * @returns {Tabs}\n   */\n  withTabContentClass(className) {\n    this.options.tabContentClass = className;\n    return this;\n  }\n\n  /* ===================================================================================================================\n   * Private methods\n   * ===================================================================================================================*/\n\n  /**\n   * Handles the AJAX response.\n   *\n   * @param {XMLHttpRequest} xhr The AJAX response.\n   * @private\n   */\n  _handleAJAXResponse(xhr) {\n    this.selectedTab.removeClass('loading');\n    const container = this.tabContents[this.selectedTab.getDataSet().tabId];\n    container.removeClass('loading');\n    container.setHTML(xhr.responseText);\n\n    if (this.options.ajaxCallback !== null) {\n      this.options.ajaxCallback(container);\n    }\n  }\n\n  /**\n   * Handle the tab click by showing the corresponding panel and hiding the others.\n   *\n   * @param {MouseEvent} event The click event on the anchor tag.\n   * @private\n   */\n  _handleClick(event) {\n    Utils.stopEvent(event);\n    const a = new PrimeElement(event.currentTarget);\n    if (!a.hasClass('disabled')) {\n      const href = a.getAttribute('href');\n      if (href.charAt(0) === '#') {\n        this.selectTab(href.substring(1));\n      } else {\n        this.selectTab(href);\n      }\n    }\n  }\n\n  /**\n   * Set the initial options for this widget.\n   * @private\n   */\n  _setInitialOptions() {\n    // Defaults\n    this.options = {\n      ajaxCallback: null,\n      errorClass: null,\n      deepLinkingEnabled: true,\n      localStorageKey: null,\n      selectCallback: null,\n      tabContentClass: 'prime-tab-content'\n    };\n\n    const userOptions = Utils.dataSetToOptions(this.element);\n    for (let option in userOptions) {\n      if (userOptions.hasOwnProperty(option)) {\n        this.options[option] = userOptions[option];\n      }\n    }\n  }\n}\n\nexport {Tabs};\n","/*\n * Copyright (c) 2017-2018, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n'use strict';\n\nimport {PrimeDocument} from \"../PrimeDocument.js\";\nimport {PrimeElement} from \"../Document/PrimeElement.js\";\nimport {PrimeWindow} from \"../Window.js\";\nimport {Utils} from \"../Utils.js\";\n\nconst open = [];\n\nclass Tooltip {\n  /**\n   * Constructs a new Tooltip object for the given element.\n   *\n   * @param {PrimeElement|Element|EventTarget} element The Prime Element for the Tooltip widget.\n   * @constructor\n   */\n  constructor(element) {\n    Utils.bindAll(this);\n\n    this.element = PrimeElement.wrap(element);\n    this._setInitialOptions();\n  }\n\n  static get open() {\n    return open;\n  }\n\n  /**\n   * Hides the tooltip.\n   *\n   * @returns {Tooltip} This.\n   */\n  hide() {\n    if (Tooltip.open.length > 0) {\n      Tooltip.open.forEach(function(t) {\n        t.removeFromDOM();\n      });\n    }\n    return this;\n  }\n\n  /**\n   * Initializes the widget by attaching event listeners to the element.\n   *\n   * @returns {Tooltip} This.\n   */\n  initialize() {\n    this.element.addEventListener('mouseenter', this._handleMouseEnter).addEventListener('mouseleave', this._handleMouseLeave);\n    PrimeDocument.addEventListener('scroll', this._handleMouseLeave);\n    return this;\n  }\n\n  /**\n   * Shows the tooltip.\n   *\n   * @returns {Tooltip} This.\n   */\n  show() {\n    const text = this.element.getDataSet()[this.options.dataName] || this.element.getAttribute('title');\n    const zIndex = this.element.getRelativeZIndex();\n    let classNames = this.options.className + ' ' + this.element.getTagName().toLocaleLowerCase();\n    if (this.options.additionalClasses !== null) {\n      classNames = classNames + ' ' + this.options.additionalClasses\n    }\n    const tooltip = PrimeDocument.newElement('<span>')\n        .appendTo(PrimeDocument.bodyElement)\n        .addClass(classNames)\n        .setHTML(text)\n        .setStyle('zIndex', zIndex + 100);\n\n    const left = this.element.getLeft();\n    const top = this.element.getTop();\n    const width = this.element.getWidth();\n    const tooltipWidth = tooltip.getWidth();\n    const tooltipHeight = tooltip.getHeight();\n\n    tooltip.setLeft(left - (tooltipWidth / 2) + (width / 2));\n    tooltip.setTop(top - tooltipHeight - 8);\n\n    // If the tooltip is too close to the top of the screen invert it and move it under the element\n    if ((top - tooltipHeight - 8) < 0) {\n      tooltip.setTop(top + this.element.getHeight() + 8).addClass('inverted');\n    }\n\n    Tooltip.open.push(tooltip);\n    return this;\n  }\n\n  /**\n   * Sets the class name to use when creating the tooltip.\n   *\n   * @param additionalClasses {?String} The class name or spaces separated names.\n   * @returns {Tooltip} This.\n   */\n  withAdditionalClassNames(additionalClasses) {\n    this.options.additionalClasses = additionalClasses;\n    return this;\n  }\n\n  /**\n   * Sets the class name to use when creating the tooltip.\n   *\n   * @param className {String} The class name.\n   * @returns {Tooltip} This.\n   */\n  withClassName(className) {\n    this.options.className = className;\n    return this;\n  }\n\n  /**\n   * Set data-set name to pull the tooltip text from.\n   *\n   * @param {string} name The data-set name.\n   * @returns {Tooltip} This.\n   */\n  withDataName(name) {\n    this.options.dataName = name;\n    return this;\n  }\n\n  /**\n   * Set more than one option at a time by providing a map of key value pairs. This is considered an advanced\n   * method to set options on the widget. The caller needs to know what properties are valid in the options object.\n   *\n   * @param {Object} options Key value pair of configuration options.\n   * @returns {Tooltip} This.\n   */\n  withOptions(options) {\n    if (!Utils.isDefined(options)) {\n      return this;\n    }\n\n    for (let option in options) {\n      if (options.hasOwnProperty(option)) {\n        this.options[option] = options[option];\n      }\n    }\n    return this;\n  }\n\n  /* ===================================================================================================================\n   * Private methods\n   * ===================================================================================================================*/\n\n  /**\n   * Handles the mouse enter event to show the tooltip.\n   *\n   * @private\n   */\n  _handleMouseEnter() {\n    this.show();\n  }\n\n  /**\n   * Handles the mouse exit event to hide the tooltip.\n   *\n   * @private\n   */\n  _handleMouseLeave() {\n    this.hide();\n  }\n\n  /**\n   * Set the initial options for this widget.\n   * @private\n   */\n  _setInitialOptions() {\n    // Defaults\n    this.options = {\n      additionalClasses: null,\n      className: 'prime-tooltip',\n      dataName: 'tooltip'\n    };\n\n    const userOptions = Utils.dataSetToOptions(this.element);\n    for (let option in userOptions) {\n      if (userOptions.hasOwnProperty(option)) {\n        this.options[option] = userOptions[option];\n      }\n    }\n  }\n}\n\nPrimeDocument.onReady(function() {\n  // Fix browser issues with tooltips sticking around on back-button navigation\n  PrimeWindow.addEventListener('beforeunload', function() {\n    if (Tooltip.open.length > 0) {\n      Tooltip.open.forEach(function(t) {\n        t.removeFromDOM();\n      });\n    }\n  });\n});\n\nexport {Tooltip};\n","/*\n * Copyright (c) 2016-2017, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n'use strict';\n\nimport {PrimeElement} from \"../Document/PrimeElement.js\";\nimport {Utils} from \"../Utils.js\";\n\nclass TreeView {\n  /**\n   * Constructs a new TreeView object for the given element.\n   *\n   * @param {PrimeElement|Element|EventTarget} element The Prime Element for the TreeView widget.\n   * @constructor\n   */\n  constructor(element) {\n    Utils.bindAll(this);\n    this.element = PrimeElement.wrap(element);\n    this._setInitialOptions();\n  }\n\n  /**\n   * Initializes the element by traverse its children to find all of the anchor tags with the folder-toggle class (or\n   * whatever you set the class to).\n   *\n   * @returns {TreeView} This.\n   */\n  initialize() {\n    this.element.query('a.' + this.options.folderToggleClassName).each(function(e) {\n      e.addEventListener('click', this._handleClick);\n    }.bind(this));\n    return this;\n  }\n\n  /**\n   * Sets the folder toggle class name.\n   *\n   * @param className {String} The class name.\n   * @returns {TreeView} This.\n   */\n  withFolderToggleClassName(className) {\n    this.options.folderToggleClassName = className;\n    return this;\n  }\n\n  /* ===================================================================================================================\n   * Private methods\n   * ===================================================================================================================*/\n\n  // noinspection JSMethodCanBeStatic\n  /**\n   * Handles the click event.\n   * @private\n   */\n  _handleClick(event) {\n    Utils.stopEvent(event);\n    const a = PrimeElement.wrap(event.target);\n    const li = a.getParent();\n    if (a.hasClass('open')) {\n      a.removeClass('open');\n      li.removeClass('open');\n    } else {\n      a.addClass('open');\n      li.addClass('open');\n    }\n  }\n\n  /**\n   * Set the initial options for this widget.\n   * @private\n   */\n  _setInitialOptions() {\n    // Defaults\n    this.options = {\n      folderToggleClassName: 'prime-folder-toggle'\n    };\n\n    const userOptions = Utils.dataSetToOptions(this.element);\n    for (const option in userOptions) {\n      if (userOptions.hasOwnProperty(option)) {\n        this.options[option] = userOptions[option];\n      }\n    }\n  }\n}\n\nexport {TreeView};\n","/*\n * Copyright (c) 2012-2018, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n'use strict';\n\nimport {Utils} from \"./Utils.js\";\nimport {PrimeElement} from \"./Document/PrimeElement.js\";\n\nclass BaseTransition {\n  /**\n   * Constructs a BaseTransition for the given element.\n   *\n   * @param {PrimeElement|Element|EventTarget} element The Prime Element the effect will be applied to.\n   * @param {number} endValue The end value for the transition.\n   * @constructor\n   */\n  constructor(element, endValue) {\n    Utils.bindAll(this);\n    this.element = PrimeElement.wrap(element);\n    this.duration = 1000;\n    this.endFunction = null;\n    this.endValue = endValue;\n    this.iterations = 20;\n  }\n\n  /**\n   * Sets the function that is called when the effect has completed.\n   *\n   * @param {Function} endFunction The function that is called when the effect is completed.\n   * @returns {BaseTransition} This Effect.\n   */\n  withEndFunction(endFunction) {\n    this.endFunction = endFunction;\n    return this;\n  }\n\n  /**\n   * Sets the duration of the fade-out effect.\n   *\n   * @param {number} duration The duration in milliseconds.\n   * @returns {BaseTransition} This Effect.\n   */\n  withDuration(duration) {\n    if (duration < 100) {\n      throw new TypeError('Duration should be greater than 100 milliseconds or it won\\'t really be noticeable');\n    }\n\n    this.duration = duration;\n    return this;\n  }\n\n  /*\n   * Protected functions\n   */\n\n  /**\n   * Changes an integer style property of the Element iteratively over a given period of time from one value to another\n   * value.\n   *\n   * @protected\n   * @param {Function} getFunction The function on the element to call to get the current value for the transition.\n   * @param {Function} setFunction The function on the element to call to set the new value for the transition.\n   */\n  _changeNumberStyleIteratively(getFunction, setFunction) {\n    let currentValue = getFunction.call(this.element);\n    const step = Math.abs(this.endValue - currentValue) / this.iterations;\n\n    // Close around ourselves\n    const self = this;\n    const stepFunction = function(last) {\n      if (last) {\n        currentValue = self.endValue;\n      } else {\n        if (currentValue < self.endValue) {\n          currentValue += step;\n        } else {\n          currentValue -= step;\n        }\n      }\n\n      setFunction.call(self.element, currentValue);\n    };\n\n    Utils.callIteratively(this.duration, this.iterations, stepFunction, this._internalEndFunction);\n  }\n\n  /* ===================================================================================================================\n   * Private Methods\n   * ===================================================================================================================*/\n\n  /**\n   * Handles the call back at the end.\n   *\n   * @private\n   */\n  _internalEndFunction() {\n    this._subclassEndFunction(this);\n\n    if (this.endFunction) {\n      this.endFunction(this);\n    }\n  }\n\n  /**\n   * Virtual function stub\n   *\n   * @private\n   */\n  _subclassEndFunction() {\n  }\n}\n\nclass Fade extends BaseTransition {\n  /**\n   * Constructs a new Fade for the given element. The fade effect uses the CSS opacity style and supports the IE alpha\n   * style. The duration defaults to 1000 milliseconds (1 second). This changes the opacity over the duration from 1.0 to\n   * 0.0. At the end, this hides the element so that it doesn't take up any space.\n   *\n   * @constructor\n   * @param {PrimeElement|Element|EventTarget} element The Prime Element to fade out.\n   */\n  constructor(element) {\n    super(element, 0.0);\n  }\n\n  /**\n   * Internal call back at the end of the transition. This hides the element so it doesn't take up space.\n   *\n   * @override\n   * @private\n   */\n  _subclassEndFunction() {\n    this.element.hide();\n  }\n\n  /**\n   * Executes the fade effect on the element using the opacity style.\n   */\n  go() {\n    this._changeNumberStyleIteratively(this.element.getOpacity, this.element.setOpacity);\n  }\n}\n\nclass Appear extends BaseTransition {\n  /**\n   * Constructs a new Appear for the given element. The appear effect uses the CSS opacity style and supports the IE\n   * alpha style. The duration defaults to 1000 milliseconds (1 second). This first sets the opacity to 0, then it shows\n   * the element and finally it raises the opacity.\n   *\n   * @constructor\n   * @param {PrimeElement|Element|EventTarget} element The Prime Element to appear.\n   * @param {number} [opacity=1.0] The final opacity to reach when the effect is complete. Defaults to 1.0.\n   */\n  constructor(element, opacity) {\n    if (!Utils.isDefined(opacity)) {\n      opacity = 1.0;\n    }\n    super(element, opacity);\n  }\n\n  /**\n   * Executes the appear effect on the element using the opacity style.\n   */\n  go() {\n    this.element.setOpacity(0.0);\n    this.element.show();\n    this._changeNumberStyleIteratively(this.element.getOpacity, this.element.setOpacity);\n  }\n}\n\nclass ScrollTo extends BaseTransition {\n  /**\n   * Constructs a new ScrollTo for the given element. The duration defaults to 1000 milliseconds (1 second).\n   *\n   * @param {PrimeElement|Element|EventTarget} element The Prime Element to scroll.\n   * @param {number} position The position to scroll the element to.\n   * @constructor\n   */\n  constructor(element, position) {\n    super(element, position);\n\n    this.axis = 'vertical';\n  }\n\n  /**\n   * Set the scroll axis, either 'horizontal' or 'vertical'. Default is 'vertical'.\n   *\n   * @param {string} axis The axis to scroll.\n   * @returns {ScrollTo}\n   */\n  withAxis(axis) {\n    this.axis = axis || 'vertical';\n    return this;\n  }\n\n  /**\n   * Executes the scroll effect on the element.\n   */\n  go() {\n    if (this.axis === 'vertical') {\n      this._changeNumberStyleIteratively(this.element.getScrollTop, this.element.scrollTo);\n    } else {\n      this._changeNumberStyleIteratively(this.element.getScrollLeft, this.element.scrollLeftTo);\n    }\n  }\n}\n\nclass SlideOpen {\n  /**\n   * Creates a SlideOpen effect on the given element.\n   *\n   * @param {PrimeElement} element The element.\n   * @constructor\n   */\n  constructor(element) {\n    Utils.bindAll(this);\n\n    this.element = element;\n    if (this.isOpen()) {\n      element.domElement.primeVisibleHeight = element.getHeight();\n    } else {\n      element.setStyle('height', 'auto');\n      element.domElement.primeVisibleHeight = element.getHeight();\n      element.setStyle('height', '0');\n    }\n\n    this.isTransitioning = false;\n\n    this._setInitialOptions();\n  }\n\n  close() {\n    if (!this.isOpen()) {\n      return;\n    }\n\n    // Set a fixed height instead of auto so that the transition runs, but only if the element is \"open\"\n    this.element.setHeight(this.element.domElement.primeVisibleHeight);\n    this.isTransitioning = true;\n\n    // This timeout is needed since the height change takes time to run\n    setTimeout(function() {\n      this.element.setHeight(0);\n      this.element.removeClass('open');\n      this.isTransitioning = false;\n\n      if (this.options.closeCallback !== null) {\n        this.options.closeCallback();\n      }\n    }.bind(this), this.options.timeout);\n  }\n\n  isOpen() {\n    return this.element.getHeight() !== 0 || this.element.hasClass('open');\n  }\n\n  open() {\n    if (this.isOpen()) {\n      return;\n    }\n\n    this.element.setHeight(this.element.domElement.primeVisibleHeight);\n    this.isTransitioning = true;\n\n    setTimeout(function() {\n      this.element.setHeight('auto');\n      this.element.addClass('open');\n      this.isTransitioning = false;\n\n      if (this.options.openCallback !== null) {\n        this.options.openCallback();\n      }\n    }.bind(this), this.options.timeout);\n  }\n\n  toggle() {\n    if (this.isOpen()) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n\n  /**\n   * Set the close callback function.\n   *\n   * @param {?Function} callback The close callback\n   * @returns {SlideOpen} This.\n   */\n  withCloseCallback(callback) {\n    this.options.closeCallback = callback;\n    return this;\n  }\n\n  /**\n   * Set the open callback function.\n   *\n   * @param {?Function} callback The open callback\n   * @returns {SlideOpen} This.\n   */\n  withOpenCallback(callback) {\n    this.options.openCallback = callback;\n    return this;\n  }\n\n  /**\n   * Set more than one option at a time by providing a map of key value pairs. This is considered an advanced\n   * method to set options on the widget. The caller needs to know what properties are valid in the options object.\n   *\n   * @param {Object} options Key value pair of configuration options.\n   * @returns {SlideOpen} This.\n   */\n  withOptions(options) {\n    if (!Utils.isDefined(options)) {\n      return this;\n    }\n\n    for (let option in options) {\n      if (options.hasOwnProperty(option)) {\n        this.options[option] = options[option];\n      }\n    }\n    return this;\n  }\n\n  /* ===================================================================================================================\n   * Private methods\n   * ===================================================================================================================*/\n\n  /**\n   * Set the initial options of the widget.\n   * @private\n   */\n  _setInitialOptions() {\n    // Defaults\n    this.options = {\n      openCallback: null,\n      closeCallback: null,\n      timeout: 310\n    };\n\n    const userOptions = Utils.dataSetToOptions(this.element);\n    for (let option in userOptions) {\n      if (userOptions.hasOwnProperty(option)) {\n        this.options[option] = userOptions[option];\n      }\n    }\n  }\n}\n\nexport {BaseTransition, Fade, Appear, ScrollTo, SlideOpen}\n","/*\n * Copyright (c) 2016-2017, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n'use strict';\n\nimport {Utils} from \"./Utils.js\";\n\nclass DataQueue {\n  /**\n   * First-In-First-Out Queue implementation modeled after java.util.Deque interface.\n   *\n   * @constructor\n   */\n  constructor() {\n    Utils.bindAll(this);\n    this._elements = {};\n    this._head = 0;\n    this._tail = 0;\n  }\n\n  /**\n   * Add the element to the head of the queue.\n   *\n   * @param {Object} element An object to store in the queue.\n   * @returns {DataQueue} This Element.\n   */\n  add(element) {\n    this._elements[this._head] = element;\n    this._head++;\n\n    return this;\n  }\n\n  /**\n   * Return true if the queue is empty.\n   *\n   * @returns {boolean} True if the queue is empty, false if not.\n   */\n  isEmpty() {\n    return this._head === this._tail;\n  }\n\n  /**\n   * Return but do not remove the tail of the queue. This is the oldest element in the queue.\n   *\n   * @returns {Object} The object at the tail of the queue, or null if empty.\n   */\n  peek() {\n    if (this.isEmpty()) {\n      return null;\n    }\n\n    return this._elements[this._tail];\n  }\n\n  /**\n   * Return and remove the tail of the queue. This is the oldest element in the queue.\n   *\n   * @returns {Object} the object at the tail of the queue, or null if the queue is empty.\n   */\n  poll() {\n    if (this.isEmpty()) {\n      return null;\n    }\n\n    const object = this._elements[this._tail];\n    delete this._elements[this._tail];\n    this._tail++;\n\n    // The cursor should not go off the end of the queue\n    if (this._cursor < this._tail) {\n      this._cursor = this._tail;\n    }\n\n    return object;\n  }\n\n  /**\n   * Return the size of the queue.\n   *\n   * @returns {Number} The size of the queue.\n   */\n  size() {\n    return this._head - this._tail;\n  }\n\n}\n\nexport {DataQueue};\n","/*\n * Copyright (c) 2013-2017, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n'use strict';\n\nimport {Utils} from \"./Utils.js\"\nimport {PrimeElement} from \"./Document/PrimeElement.js\";\n\nclass Template {\n  /**\n   * A Javascript Object that can serve to generate Prime.Document.Element from a source string and optional parameters.\n   *\n   * @constructor\n   * @param {string} template The String that defines the source of the template.\n   */\n  constructor(template) {\n    Utils.bindAll(this);\n    this.init(template);\n  }\n\n  init(template) {\n    this.template = template;\n  }\n\n  /**\n   * Generates a String from the given parameterHash.  Provide a hash of String keys to values.\n   * Keys can be regular text strings, in which case it will look for and replace #{key} as with the value.  You can\n   * also make the key a String \"/key/\", which will be converted to a Regex and run.\n   *\n   * For the value you can provide a straight up String, int, etc, or you can provide a function which will be called\n   * to provide the value\n   *\n   * @param {Object} parameters An object that contains the parameters for the template to replace.\n   * @returns {string} The result of executing the template.\n   */\n  generate(parameters) {\n    parameters = Utils.isDefined(parameters) ? parameters : {};\n    let templateCopy = String(this.template);\n    for (let key in parameters) {\n      if (parameters.hasOwnProperty(key)) {\n        const value = parameters[key];\n        let expressedValue;\n        if (typeof(value) === 'function') {\n          expressedValue = value();\n        } else {\n          expressedValue = value;\n        }\n\n        if (key.indexOf('/') === 0 && key.lastIndexOf('/') === key.length - 1) {\n          templateCopy = templateCopy.replace(new RegExp(key.substring(1, key.length - 1), \"g\"), expressedValue);\n        } else {\n          const expressedKey = \"#{\" + key + \"}\";\n          while (templateCopy.indexOf(expressedKey) !== -1) {\n            templateCopy = templateCopy.replace(expressedKey, expressedValue);\n          }\n        }\n      }\n    }\n\n    return templateCopy;\n  }\n\n  /**\n   * Calls to generate and then appends the resulting value to the inner HTML of the provided primeElement.\n   *\n   * @param {PrimeElement} primeElement The prime Element instance to append the result of executing the template to.\n   * @param {Object} parameters An object that contains the parameters for the template to replace.\n   */\n  appendTo(primeElement, parameters) {\n    if (Utils.isDefined(primeElement)) {\n      primeElement.setHTML(primeElement.getHTML() + this.generate(parameters));\n    } else {\n      throw new TypeError('Please supply an element to append to');\n    }\n  }\n\n  /**\n   * Calls to generate and then inserts the resulting elements into the dom before the primeElement\n   *\n   * @param {PrimeElement} primeElement The prime Element instance to insert the result of executing the template before.\n   * @param {Object} parameters An object that contains the parameters for the template to replace.\n   */\n  insertBefore(primeElement, parameters) {\n    if (Utils.isDefined(primeElement)) {\n      const holder = document.createElement('div');\n      holder.innerHTML = this.generate(parameters);\n      new PrimeElement(holder.children[0]).insertBefore(primeElement);\n    } else {\n      throw new TypeError('Please supply an element to append to');\n    }\n  }\n\n  /**\n   * Calls to generate and then inserts the resulting elements into the dom after the primeElement\n   *\n   * @param {PrimeElement} primeElement The prime Element instance to insert the result of executing the template after.\n   * @param {Object} parameters An object that contains the parameters for the template to replace.\n   */\n  insertAfter(primeElement, parameters) {\n    if (Utils.isDefined(primeElement)) {\n      const holder = document.createElement('div');\n      holder.innerHTML = this.generate(parameters);\n      new PrimeElement(holder.children[0]).insertAfter(primeElement);\n    } else {\n      throw new TypeError('Please supply an element to append to');\n    }\n  }\n}\n\nexport {Template};\n","/*\n * Copyright (c) 2017, Inversoft Inc., All Rights Reserved\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n\nimport * as Widgets from \"./Widgets/Widgets.js\"\nimport * as Effects from \"./Effects.js\"\n// Do any polyfill imports here for backwards compatibility\nimport {DataQueue} from \"./DataQueue.js\";\nimport {PrimeRequest} from \"./PrimeRequest.js\";\n\nexport {Browser} from \"./Browser.js\"\nexport {Effects}\nexport {Events} from \"./Events.js\"\nexport {PrimeDate as Date} from \"./Date.js\"\nexport {PrimeDocument as Document} from \"./PrimeDocument.js\"\nexport {PrimeStorage as Storage} from \"./Storage.js\"\nexport {PrimeWindow as Window} from \"./Window.js\"\nexport {Template} from \"./Template.js\"\nexport {Utils} from \"./Utils.js\"\nexport {Widgets}\n\nconst Ajax = {\n  Request: PrimeRequest\n};\n\nconst Data = {\n  Queue: DataQueue\n};\n\nexport {Ajax}\nexport {Data}\n"]}